/*
 RequireJS text 2.0.7 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/text for details
*/
var next_enum;window.history.pushState=function(){};window.Desmos||(window.Desmos={});window.Desmos.config={zoomButtons:!1,keypad:!0,platform:"www",testing:!1,menus:!1,workerURL:"worker.js",dragpoints:!0};window.console||(window.console={});window.console.log||(window.console.log=function(){});"file:"===window.location.protocol&&(window.history.pushState=function(){});function randomHash(){var b="",g;for(i=0;9>i;i++)g=Math.round(36*Math.random()).toString(36),b+=g;return b}
function id(b){return document.getElementById(b)}function tag(b){return document.getElementsByTagName(b)}function mkscr(){cnv=tag("canvas");id("s0").width=cnv[0].width;id("s0").height=cnv[0].height;ctx=id("s0").getContext("2d");ctx.drawImage(cnv[0],0,0);ctx.drawImage(cnv[1],0,0);ctx.drawImage(cnv[2],0,0);id("sgo").href=id("s0").toDataURL();id("sgo").click()}
function save(){localStorage.user="undefined"!=typeof Calc.userController.currentUser?JSON.stringify(Calc.userController.currentUser):"null"}var requirejs,require,define;
(function(b){function g(a,c){var d,b,e,f,h,l,m,s,g,v=c&&c.split("/"),u=k.map,p=u&&u["*"]||{};if(a&&"."===a.charAt(0))if(c){v=v.slice(0,v.length-1);a=v.concat(a.split("/"));for(s=0;s<a.length;s+=1)if(d=a[s],"."===d)a.splice(s,1),s-=1;else if(".."===d)if(1!==s||".."!==a[2]&&".."!==a[0])0<s&&(a.splice(s-1,2),s-=2);else break;a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((v||p)&&u){d=a.split("/");for(s=d.length;0<s;s-=1){b=d.slice(0,s).join("/");if(v)for(g=v.length;0<g;g-=1)if(e=u[v.slice(0,
g).join("/")])if(e=e[b]){f=e;h=s;break}if(f)break;!l&&p&&p[b]&&(l=p[b],m=s)}!f&&l&&(f=l,h=m);f&&(d.splice(0,h,f),a=d.join("/"))}return a}function r(a,d){return function(){return c.apply(b,s.call(arguments,0).concat([a,d]))}}function v(a){return function(c){return g(c,a)}}function q(a){return function(c){h[a]=c}}function p(a){if(y.call(d,a)){var c=d[a];delete d[a];l[a]=!0;m.apply(b,c)}if(!y.call(h,a)&&!y.call(l,a))throw Error("No "+a);return h[a]}function u(a){var c,d=a?a.indexOf("!"):-1;-1<d&&(c=
a.substring(0,d),a=a.substring(d+1,a.length));return[c,a]}function a(a){return function(){return k&&k.config&&k.config[a]||{}}}var m,c,f,e,h={},d={},k={},l={},y=Object.prototype.hasOwnProperty,s=[].slice;f=function(a,c){var d,b=u(a),e=b[0];a=b[1];e&&(e=g(e,c),d=p(e));e?a=d&&d.normalize?d.normalize(a,v(c)):g(a,c):(a=g(a,c),b=u(a),e=b[0],a=b[1],e&&(d=p(e)));return{f:e?e+"!"+a:a,n:a,pr:e,p:d}};e={require:function(a){return r(a)},exports:function(a){var c=h[a];return"undefined"!==typeof c?c:h[a]={}},
module:function(c){return{id:c,uri:"",exports:h[c],config:a(c)}}};m=function(a,c,k,m){var s,g,v,u,G=[],I;m=m||a;if("function"===typeof k){c=!c.length&&k.length?["require","exports","module"]:c;for(u=0;u<c.length;u+=1)if(v=f(c[u],m),g=v.f,"require"===g)G[u]=e.require(a);else if("exports"===g)G[u]=e.exports(a),I=!0;else if("module"===g)s=G[u]=e.module(a);else if(y.call(h,g)||y.call(d,g)||y.call(l,g))G[u]=p(g);else if(v.p)v.p.load(v.n,r(m,!0),q(g),{}),G[u]=h[g];else throw Error(a+" missing "+g);c=k.apply(h[a],
G);a&&(s&&s.exports!==b&&s.exports!==h[a]?h[a]=s.exports:c===b&&I||(h[a]=c))}else a&&(h[a]=k)};requirejs=require=c=function(a,d,h,l,s){if("string"===typeof a)return e[a]?e[a](d):p(f(a,d).f);a.splice||(k=a,d.splice?(a=d,d=h,h=null):a=b);d=d||function(){};"function"===typeof h&&(h=l,l=s);l?m(b,a,d,h):setTimeout(function(){m(b,a,d,h)},4);return c};c.config=function(a){k=a;k.deps&&c(k.deps,k.callback);return c};define=function(a,c,b){c.splice||(b=c,c=[]);y.call(h,a)||y.call(d,a)||(d[a]=[a,c,b])};define.amd=
{jQuery:!0}})();define("vendor/almond",function(){});
(function(b,g){function r(a){var c=pa[a]={};w.each(a.split(S),function(a,d){c[d]=!0});return c}function v(a,c,d){if(d===g&&1===a.nodeType)if(d="data-"+c.replace(Ga,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:za.test(d)?w.parseJSON(d):d}catch(b){}w.data(a,c,d)}else d=g;return d}function q(a){for(var c in a)if(("data"!==c||!w.isEmptyObject(a[c]))&&"toJSON"!==c)return!1;return!0}function p(){return!1}function u(){return!0}
function a(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function m(a,c){do a=a[c];while(a&&1!==a.nodeType);return a}function c(a,c,d){c=c||0;if(w.isFunction(c))return w.grep(a,function(a,b){return!!c.call(a,b,a)===d});if(c.nodeType)return w.grep(a,function(a,b){return a===c===d});if("string"===typeof c){var b=w.grep(a,function(a){return 1===a.nodeType});if(pb.test(c))return w.filter(c,b,!d);c=w.filter(c,b)}return w.grep(a,function(a,b){return 0<=w.inArray(a,c)===d})}function f(a){var c=
Ra.split("|");a=a.createDocumentFragment();if(a.createElement)for(;c.length;)a.createElement(c.pop());return a}function e(a,c){if(1===c.nodeType&&w.hasData(a)){var d,b,e;b=w._data(a);var f=w._data(c,b),k=b.events;if(k)for(d in delete f.handle,f.events={},k)for(b=0,e=k[d].length;b<e;b++)w.event.add(c,d,k[d][b]);f.data&&(f.data=w.extend({},f.data))}}function h(a,c){var d;1===c.nodeType&&(c.clearAttributes&&c.clearAttributes(),c.mergeAttributes&&c.mergeAttributes(a),d=c.nodeName.toLowerCase(),"object"===
d?(c.parentNode&&(c.outerHTML=a.outerHTML),w.support.html5Clone&&a.innerHTML&&!w.trim(c.innerHTML)&&(c.innerHTML=a.innerHTML)):"input"===d&&Sa.test(a.type)?(c.defaultChecked=c.checked=a.checked,c.value!==a.value&&(c.value=a.value)):"option"===d?c.selected=a.defaultSelected:"input"===d||"textarea"===d?c.defaultValue=a.defaultValue:"script"===d&&c.text!==a.text&&(c.text=a.text),c.removeAttribute(w.expando))}function d(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):
"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function k(a){Sa.test(a.type)&&(a.defaultChecked=a.checked)}function l(a,c){if(c in a)return c;for(var d=c.charAt(0).toUpperCase()+c.slice(1),b=c,e=Ta.length;e--;)if(c=Ta[e]+d,c in a)return c;return b}function y(a,c){a=c||a;return"none"===w.css(a,"display")||!w.contains(a.ownerDocument,a)}function s(a,c){for(var d,b,e=[],f=0,k=a.length;f<k;f++)d=a[f],d.style&&(e[f]=w._data(d,"olddisplay"),c?(e[f]||"none"!==d.style.display||(d.style.display=
""),""===d.style.display&&y(d)&&(e[f]=w._data(d,"olddisplay",z(d.nodeName)))):(b=ka(d,"display"),e[f]||"none"===b||w._data(d,"olddisplay",b)));for(f=0;f<k;f++)d=a[f],!d.style||c&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=c?e[f]||"":"none");return a}function n(a,c,d){return(a=qb.exec(c))?Math.max(0,a[1]-(d||0))+(a[2]||"px"):c}function x(a,c,d,b){c=d===(b?"border":"content")?4:"width"===c?1:0;for(var e=0;4>c;c+=2)"margin"===d&&(e+=w.css(a,d+qa[c],!0)),b?("content"===d&&(e-=parseFloat(ka(a,
"padding"+qa[c]))||0),"margin"!==d&&(e-=parseFloat(ka(a,"border"+qa[c]+"Width"))||0)):(e+=parseFloat(ka(a,"padding"+qa[c]))||0,"padding"!==d&&(e+=parseFloat(ka(a,"border"+qa[c]+"Width"))||0));return e}function B(a,c,d){var b="width"===c?a.offsetWidth:a.offsetHeight,e=!0,f=w.support.boxSizing&&"border-box"===w.css(a,"boxSizing");if(0>=b||null==b){b=ka(a,c);if(0>b||null==b)b=a.style[c];if(Aa.test(b))return b;e=f&&(w.support.boxSizingReliable||b===a.style[c]);b=parseFloat(b)||0}return b+x(a,c,d||(f?
"border":"content"),e)+"px"}function z(a){if(Ha[a])return Ha[a];var c=w("<"+a+">").appendTo(P.body),d=c.css("display");c.remove();if("none"===d||""===d)ta=P.body.appendChild(ta||w.extend(P.createElement("iframe"),{frameBorder:0,width:0,height:0})),ua&&ta.createElement||(ua=(ta.contentWindow||ta.contentDocument).document,ua.write("<!doctype html><html><body>"),ua.close()),c=ua.body.appendChild(ua.createElement(a)),d=ka(c,"display"),P.body.removeChild(ta);return Ha[a]=d}function C(a,c,d,b){var e;if(w.isArray(c))w.each(c,
function(c,e){d||rb.test(a)?b(a,e):C(a+"["+("object"===typeof e?c:"")+"]",e,d,b)});else if(d||"object"!==w.type(c))b(a,c);else for(e in c)C(a+"["+e+"]",c[e],d,b)}function D(a){return function(c,d){"string"!==typeof c&&(d=c,c="*");var b,e,f=c.toLowerCase().split(S),k=0,h=f.length;if(w.isFunction(d))for(;k<h;k++)b=f[k],(e=/^\+/.test(b))&&(b=b.substr(1)||"*"),b=a[b]=a[b]||[],b[e?"unshift":"push"](d)}}function F(a,c,d,b,e,f){e=e||c.dataTypes[0];f=f||{};f[e]=!0;var k;e=a[e];for(var h=0,l=e?e.length:0,
m=a===Ia;h<l&&(m||!k);h++)k=e[h](c,d,b),"string"===typeof k&&(!m||f[k]?k=g:(c.dataTypes.unshift(k),k=F(a,c,d,b,k,f)));!m&&k||f["*"]||(k=F(a,c,d,b,"*",f));return k}function H(a,c){var d,b,e=w.ajaxSettings.flatOptions||{};for(d in c)c[d]!==g&&((e[d]?a:b||(b={}))[d]=c[d]);b&&w.extend(!0,a,b)}function G(){try{return new b.XMLHttpRequest}catch(a){}}function I(){setTimeout(function(){va=g},0);return va=w.now()}function A(a,c){w.each(c,function(c,d){for(var b=(ya[c]||[]).concat(ya["*"]),e=0,f=b.length;e<
f&&!b[e].call(a,c,d);e++);})}function K(a,c,d){var b=0,e=Ba.length,f=w.Deferred().always(function(){delete k.elem}),k=function(){for(var c=va||I(),c=Math.max(0,h.startTime+h.duration-c),d=1-(c/h.duration||0),b=0,e=h.tweens.length;b<e;b++)h.tweens[b].run(d);f.notifyWith(a,[h,d,c]);if(1>d&&e)return c;f.resolveWith(a,[h]);return!1},h=f.promise({elem:a,props:w.extend({},c),opts:w.extend(!0,{specialEasing:{}},d),originalProperties:c,originalOptions:d,startTime:va||I(),duration:d.duration,tweens:[],createTween:function(c,
d,b){c=w.Tween(a,h.opts,c,d,h.opts.specialEasing[c]||h.opts.easing);h.tweens.push(c);return c},stop:function(c){for(var d=0,b=c?h.tweens.length:0;d<b;d++)h.tweens[d].run(1);c?f.resolveWith(a,[h,c]):f.rejectWith(a,[h,c]);return this}});d=h.props;for(O(d,h.opts.specialEasing);b<e;b++)if(c=Ba[b].call(h,a,d,h.opts))return c;A(h,d);w.isFunction(h.opts.start)&&h.opts.start.call(a,h);w.fx.timer(w.extend(k,{anim:h,queue:h.opts.queue,elem:a}));return h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}
function O(a,c){var d,b,e,f,h;for(d in a)if(b=w.camelCase(d),e=c[b],f=a[d],w.isArray(f)&&(e=f[1],f=a[d]=f[0]),d!==b&&(a[b]=f,delete a[d]),(h=w.cssHooks[b])&&"expand"in h)for(d in f=h.expand(f),delete a[b],f)d in a||(a[d]=f[d],c[d]=e);else c[b]=e}function J(a,c,d,b,e){return new J.prototype.init(a,c,d,b,e)}function N(a,c){var d,b={height:a},e=0;for(c=c?1:0;4>e;e+=2-c)d=qa[e],b["margin"+d]=b["padding"+d]=a;c&&(b.opacity=b.width=a);return b}function L(a){return w.isWindow(a)?a:9===a.nodeType?a.defaultView||
a.parentWindow:!1}var V,W,P=b.document,E=b.location,M=b.navigator,Q=b.jQuery,U=b.$,Y=Array.prototype.push,R=Array.prototype.slice,ea=Array.prototype.indexOf,Z=Object.prototype.toString,ia=Object.prototype.hasOwnProperty,fa=String.prototype.trim,w=function(a,c){return new w.fn.init(a,c,V)},da=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,S=/\s+/,X=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ca=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ba=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,$=/^[\],:{}\s]*$/,ha=/(?:^|:|,)(?:\s*\[)+/g,
na=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ga=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,la=/^-ms-/,oa=/-([\da-z])/gi,Ja=function(a,c){return(c+"").toUpperCase()},wa=function(){P.addEventListener?(P.removeEventListener("DOMContentLoaded",wa,!1),w.ready()):"complete"===P.readyState&&(P.detachEvent("onreadystatechange",wa),w.ready())},Ca={};w.fn=w.prototype={constructor:w,init:function(a,c,d){var b;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;
if("string"===typeof a){b="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:ca.exec(a);if(!b||!b[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(b[1])return a=(c=c instanceof w?c[0]:c)&&c.nodeType?c.ownerDocument||c:P,a=w.parseHTML(b[1],a,!0),ba.test(b[1])&&w.isPlainObject(c)&&this.attr.call(a,c,!0),w.merge(this,a);if((c=P.getElementById(b[2]))&&c.parentNode){if(c.id!==b[2])return d.find(a);this.length=1;this[0]=c}this.context=P;this.selector=a;return this}if(w.isFunction(a))return d.ready(a);
a.selector!==g&&(this.selector=a.selector,this.context=a.context);return w.makeArray(a,this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return R.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,c,d){a=w.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;"find"===c?a.selector=this.selector+(this.selector?" ":"")+d:c&&(a.selector=this.selector+"."+c+"("+d+")");return a},
each:function(a,c){return w.each(this,a,c)},ready:function(a){w.ready.promise().done(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","))},map:function(a){return this.pushStack(w.map(this,function(c,d){return a.call(c,d,c)}))},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:[].sort,
splice:[].splice};w.fn.init.prototype=w.fn;w.extend=w.fn.extend=function(){var a,c,d,b,e,f=arguments[0]||{},h=1,k=arguments.length,l=!1;"boolean"===typeof f&&(l=f,f=arguments[1]||{},h=2);"object"===typeof f||w.isFunction(f)||(f={});k===h&&(f=this,--h);for(;h<k;h++)if(null!=(a=arguments[h]))for(c in a)d=f[c],b=a[c],f!==b&&(l&&b&&(w.isPlainObject(b)||(e=w.isArray(b)))?(e?(e=!1,d=d&&w.isArray(d)?d:[]):d=d&&w.isPlainObject(d)?d:{},f[c]=w.extend(l,d,b)):b!==g&&(f[c]=b));return f};w.extend({noConflict:function(a){b.$===
w&&(b.$=U);a&&b.jQuery===w&&(b.jQuery=Q);return w},isReady:!1,readyWait:1,holdReady:function(a){a?w.readyWait++:w.ready(!0)},ready:function(a){if(!0===a?!--w.readyWait:!w.isReady){if(!P.body)return setTimeout(w.ready,1);w.isReady=!0;!0!==a&&0<--w.readyWait||(W.resolveWith(P,[w]),w.fn.trigger&&w(P).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===w.type(a)},isArray:Array.isArray||function(a){return"array"===w.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&
isFinite(a)},type:function(a){return null==a?String(a):Ca[Z.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==w.type(a)||a.nodeType||w.isWindow(a))return!1;try{if(a.constructor&&!ia.call(a,"constructor")&&!ia.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var d in a);return d===g||ia.call(a,d)},isEmptyObject:function(a){for(var c in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,c,d){var b;if(!a||"string"!==typeof a)return null;
"boolean"===typeof c&&(d=c,c=0);c=c||P;if(b=ba.exec(a))return[c.createElement(b[1])];b=w.buildFragment([a],c,d?null:[]);return w.merge([],(b.cacheable?w.clone(b.fragment):b.fragment).childNodes)},parseJSON:function(a){if(!a||"string"!==typeof a)return null;a=w.trim(a);if(b.JSON&&b.JSON.parse)return b.JSON.parse(a);if($.test(a.replace(na,"@").replace(ga,"]").replace(ha,"")))return(new Function("return "+a))();w.error("Invalid JSON: "+a)},parseXML:function(a){var c,d;if(!a||"string"!==typeof a)return null;
try{b.DOMParser?(d=new DOMParser,c=d.parseFromString(a,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a))}catch(e){c=g}c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+a);return c},noop:function(){},globalEval:function(a){a&&aa.test(a)&&(b.execScript||function(a){b.eval.call(b,a)})(a)},camelCase:function(a){return a.replace(la,"ms-").replace(oa,Ja)},nodeName:function(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()},
each:function(a,c,d){var b,e=0,f=a.length,h=f===g||w.isFunction(a);if(d)if(h)for(b in a){if(!1===c.apply(a[b],d))break}else for(;e<f&&!1!==c.apply(a[e++],d););else if(h)for(b in a){if(!1===c.call(a[b],b,a[b]))break}else for(;e<f&&!1!==c.call(a[e],e,a[e++]););return a},trim:fa&&!fa.call("﻿ ")?function(a){return null==a?"":fa.call(a)}:function(a){return null==a?"":(a+"").replace(X,"")},makeArray:function(a,c){var d,b=c||[];null!=a&&(d=w.type(a),null==a.length||"string"===d||"function"===d||"regexp"===
d||w.isWindow(a)?Y.call(b,a):w.merge(b,a));return b},inArray:function(a,c,d){var b;if(c){if(ea)return ea.call(c,a,d);b=c.length;for(d=d?0>d?Math.max(0,b+d):d:0;d<b;d++)if(d in c&&c[d]===a)return d}return-1},merge:function(a,c){var d=c.length,b=a.length,e=0;if("number"===typeof d)for(;e<d;e++)a[b++]=c[e];else for(;c[e]!==g;)a[b++]=c[e++];a.length=b;return a},grep:function(a,c,d){var b,e=[],f=0,h=a.length;for(d=!!d;f<h;f++)b=!!c(a[f],f),d!==b&&e.push(a[f]);return e},map:function(a,c,d){var b,e,f=[],
h=0,k=a.length;if(a instanceof w||k!==g&&"number"===typeof k&&(0<k&&a[0]&&a[k-1]||0===k||w.isArray(a)))for(;h<k;h++)b=c(a[h],h,d),null!=b&&(f[f.length]=b);else for(e in a)b=c(a[e],e,d),null!=b&&(f[f.length]=b);return f.concat.apply([],f)},guid:1,proxy:function(a,c){var d,b;"string"===typeof c&&(d=a[c],c=a,a=d);if(!w.isFunction(a))return g;b=R.call(arguments,2);d=function(){return a.apply(c,b.concat(R.call(arguments)))};d.guid=a.guid=a.guid||w.guid++;return d},access:function(a,c,d,b,e,f,h){var k,
l=null==d,m=0,n=a.length;if(d&&"object"===typeof d){for(m in d)w.access(a,c,m,d[m],1,f,b);e=1}else if(b!==g){k=h===g&&w.isFunction(b);l&&(k?(k=c,c=function(a,c,d){return k.call(w(a),d)}):(c.call(a,b),c=null));if(c)for(;m<n;m++)c(a[m],d,k?b.call(a[m],m,c(a[m],d)):b,h);e=1}return e?a:l?c.call(a):n?c(a[0],d):f},now:function(){return(new Date).getTime()}});w.ready.promise=function(a){if(!W)if(W=w.Deferred(),"complete"===P.readyState)setTimeout(w.ready,1);else if(P.addEventListener)P.addEventListener("DOMContentLoaded",
wa,!1),b.addEventListener("load",w.ready,!1);else{P.attachEvent("onreadystatechange",wa);b.attachEvent("onload",w.ready);var c=!1;try{c=null==b.frameElement&&P.documentElement}catch(d){}c&&c.doScroll&&function ob(){if(!w.isReady){try{c.doScroll("left")}catch(a){return setTimeout(ob,50)}w.ready()}}()}return W.promise(a)};w.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,c){Ca["[object "+c+"]"]=c.toLowerCase()});V=w(P);var pa={};w.Callbacks=function(a){a="string"===
typeof a?pa[a]||r(a):w.extend({},a);var c,d,b,e,f,h,k=[],l=!a.once&&[],m=function(s){c=a.memory&&s;d=!0;h=e||0;e=0;f=k.length;for(b=!0;k&&h<f;h++)if(!1===k[h].apply(s[0],s[1])&&a.stopOnFalse){c=!1;break}b=!1;k&&(l?l.length&&m(l.shift()):c?k=[]:n.disable())},n={add:function(){if(k){var d=k.length;(function sb(c){w.each(c,function(c,d){var b=w.type(d);"function"===b?a.unique&&n.has(d)||k.push(d):d&&d.length&&"string"!==b&&sb(d)})})(arguments);b?f=k.length:c&&(e=d,m(c))}return this},remove:function(){k&&
w.each(arguments,function(a,c){for(var d;-1<(d=w.inArray(c,k,d));)k.splice(d,1),b&&(d<=f&&f--,d<=h&&h--)});return this},has:function(a){return-1<w.inArray(a,k)},empty:function(){k=[];return this},disable:function(){k=l=c=g;return this},disabled:function(){return!k},lock:function(){l=g;c||n.disable();return this},locked:function(){return!l},fireWith:function(a,c){c=c||[];c=[a,c.slice?c.slice():c];!k||d&&!l||(b?l.push(c):m(c));return this},fire:function(){n.fireWith(this,arguments);return this},fired:function(){return!!d}};
return n};w.extend({Deferred:function(a){var c=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],d="pending",b={state:function(){return d},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return w.Deferred(function(d){w.each(c,function(c,b){var f=b[0],h=a[c];e[b[1]](w.isFunction(h)?function(){var a=h.apply(this,arguments);if(a&&w.isFunction(a.promise))a.promise().done(d.resolve).fail(d.reject).progress(d.notify);
else d[f+"With"](this===e?d:this,[a])}:d[f])});a=null}).promise()},promise:function(a){return null!=a?w.extend(a,b):b}},e={};b.pipe=b.then;w.each(c,function(a,f){var h=f[2],k=f[3];b[f[1]]=h.add;k&&h.add(function(){d=k},c[a^1][2].disable,c[2][2].lock);e[f[0]]=h.fire;e[f[0]+"With"]=h.fireWith});b.promise(e);a&&a.call(e,e);return e},when:function(a){var c=0,d=R.call(arguments),b=d.length,e=1!==b||a&&w.isFunction(a.promise)?b:0,f=1===e?a:w.Deferred(),h=function(a,c,d){return function(b){c[a]=this;d[a]=
1<arguments.length?R.call(arguments):b;d===k?f.notifyWith(c,d):--e||f.resolveWith(c,d)}},k,l,m;if(1<b)for(k=Array(b),l=Array(b),m=Array(b);c<b;c++)d[c]&&w.isFunction(d[c].promise)?d[c].promise().done(h(c,m,d)).fail(f.reject).progress(h(c,l,k)):--e;e||f.resolveWith(m,d);return f.promise()}});w.support=function(){var a,c,d,e,f,h,k,l=P.createElement("div");l.setAttribute("className","t");l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c=l.getElementsByTagName("*");d=
l.getElementsByTagName("a")[0];if(!c||!d||!c.length)return{};e=P.createElement("select");f=e.appendChild(P.createElement("option"));c=l.getElementsByTagName("input")[0];d.style.cssText="top:1px;float:left;opacity:.5";a={leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,
checkOn:"on"===c.value,optSelected:f.selected,getSetAttribute:"t"!==l.className,enctype:!!P.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==P.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===P.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};c.checked=!0;a.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;a.optDisabled=
!f.disabled;try{delete l.test}catch(m){a.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",d=function(){a.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"),l.detachEvent("onclick",d));c=P.createElement("input");c.value="t";c.setAttribute("type","radio");a.radioValue="t"===c.value;c.setAttribute("checked","checked");c.setAttribute("name","t");l.appendChild(c);d=P.createDocumentFragment();d.appendChild(l.lastChild);a.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;
a.appendChecked=c.checked;d.removeChild(c);d.appendChild(l);if(l.attachEvent)for(h in{submit:!0,change:!0,focusin:!0})c="on"+h,k=c in l,k||(l.setAttribute(c,"return;"),k="function"===typeof l[c]),a[h+"Bubbles"]=k;w(function(){var c,d,e,f=P.getElementsByTagName("body")[0];f&&(c=P.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",f.insertBefore(c,f.firstChild),d=P.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",
e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",k=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",a.reliableHiddenOffsets=k&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",a.boxSizing=4===d.offsetWidth,a.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,b.getComputedStyle&&
(a.pixelPosition="1%"!==(b.getComputedStyle(d,null)||{}).top,a.boxSizingReliable="4px"===(b.getComputedStyle(d,null)||{width:"4px"}).width,e=P.createElement("div"),e.style.cssText=d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",e.style.marginRight=e.style.width="0",d.style.width="1px",d.appendChild(e),a.reliableMarginRight=!parseFloat((b.getComputedStyle(e,null)||{}).marginRight)),"undefined"!==typeof d.style.zoom&&(d.innerHTML="",d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",
a.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",a.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),f.removeChild(c))});d.removeChild(l);c=d=e=f=c=d=l=null;return a}();var za=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ga=/([A-Z])/g;w.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(w.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},
hasData:function(a){a=a.nodeType?w.cache[a[w.expando]]:a[w.expando];return!!a&&!q(a)},data:function(a,c,d,b){if(w.acceptData(a)){var e=w.expando,f="string"===typeof c,h=a.nodeType,k=h?w.cache:a,l=h?a[e]:a[e]&&e;if(l&&k[l]&&(b||k[l].data)||!f||d!==g){l||(h?a[e]=l=w.deletedIds.pop()||w.guid++:l=e);k[l]||(k[l]={},h||(k[l].toJSON=w.noop));if("object"===typeof c||"function"===typeof c)b?k[l]=w.extend(k[l],c):k[l].data=w.extend(k[l].data,c);a=k[l];b||(a.data||(a.data={}),a=a.data);d!==g&&(a[w.camelCase(c)]=
d);f?(d=a[c],null==d&&(d=a[w.camelCase(c)])):d=a;return d}}},removeData:function(a,c,d){if(w.acceptData(a)){var b,e,f,k=a.nodeType,h=k?w.cache:a,l=k?a[w.expando]:w.expando;if(h[l]){if(c&&(b=d?h[l]:h[l].data)){w.isArray(c)||(c in b?c=[c]:(c=w.camelCase(c),c=c in b?[c]:c.split(" ")));e=0;for(f=c.length;e<f;e++)delete b[c[e]];if(!(d?q:w.isEmptyObject)(b))return}if(!d&&(delete h[l].data,!q(h[l])))return;k?w.cleanData([a],!0):w.support.deleteExpando||h!=h.window?delete h[l]:h[l]=null}}},_data:function(a,
c,d){return w.data(a,c,d,!0)},acceptData:function(a){var c=a.nodeName&&w.noData[a.nodeName.toLowerCase()];return!c||!0!==c&&a.getAttribute("classid")===c}});w.fn.extend({data:function(a,c){var d,b,e,f,h,k=this[0],l=0,m=null;if(a===g){if(this.length&&(m=w.data(k),1===k.nodeType&&!w._data(k,"parsedAttrs"))){e=k.attributes;for(h=e.length;l<h;l++)f=e[l].name,f.indexOf("data-")||(f=w.camelCase(f.substring(5)),v(k,f,m[f]));w._data(k,"parsedAttrs",!0)}return m}if("object"===typeof a)return this.each(function(){w.data(this,
a)});d=a.split(".",2);d[1]=d[1]?"."+d[1]:"";b=d[1]+"!";return w.access(this,function(c){if(c===g)return m=this.triggerHandler("getData"+b,[d[0]]),m===g&&k&&(m=w.data(k,a),m=v(k,a,m)),m===g&&d[1]?this.data(d[0]):m;d[1]=c;this.each(function(){var e=w(this);e.triggerHandler("setData"+b,d);w.data(this,a,c);e.triggerHandler("changeData"+b,d)})},null,c,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){w.removeData(this,a)})}});w.extend({queue:function(a,c,d){var b;if(a)return c=
(c||"fx")+"queue",b=w._data(a,c),d&&(!b||w.isArray(d)?b=w._data(a,c,w.makeArray(d)):b.push(d)),b||[]},dequeue:function(a,c){c=c||"fx";var d=w.queue(a,c),b=d.length,e=d.shift(),f=w._queueHooks(a,c),k=function(){w.dequeue(a,c)};"inprogress"===e&&(e=d.shift(),b--);e&&("fx"===c&&d.unshift("inprogress"),delete f.stop,e.call(a,k,f));!b&&f&&f.empty.fire()},_queueHooks:function(a,c){var d=c+"queueHooks";return w._data(a,d)||w._data(a,d,{empty:w.Callbacks("once memory").add(function(){w.removeData(a,c+"queue",
!0);w.removeData(a,d,!0)})})}});w.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&(c=a,a="fx",d--);return arguments.length<d?w.queue(this[0],a):c===g?this:this.each(function(){var d=w.queue(this,a,c);w._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&w.dequeue(this,a)})},dequeue:function(a){return this.each(function(){w.dequeue(this,a)})},delay:function(a,c){a=w.fx?w.fx.speeds[a]||a:a;return this.queue(c||"fx",function(c,d){var b=setTimeout(c,a);d.stop=function(){clearTimeout(b)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,b=1,e=w.Deferred(),f=this,k=this.length,h=function(){--b||e.resolveWith(f,[f])};"string"!==typeof a&&(c=a,a=g);for(a=a||"fx";k--;)(d=w._data(f[k],a+"queueHooks"))&&d.empty&&(b++,d.empty.add(h));h();return e.promise(c)}});var ja,Ka,Da,Ua=/[\t\r\n]/g,tb=/\r/g,ub=/^(?:button|input)$/i,vb=/^(?:button|input|object|select|textarea)$/i,wb=/^a(?:rea|)$/i,Va=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
Wa=w.support.getSetAttribute;w.fn.extend({attr:function(a,c){return w.access(this,w.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){w.removeAttr(this,a)})},prop:function(a,c){return w.access(this,w.prop,a,c,1<arguments.length)},removeProp:function(a){a=w.propFix[a]||a;return this.each(function(){try{this[a]=g,delete this[a]}catch(c){}})},addClass:function(a){var c,d,b,e,f,k,h;if(w.isFunction(a))return this.each(function(c){w(this).addClass(a.call(this,c,this.className))});
if(a&&"string"===typeof a)for(c=a.split(S),d=0,b=this.length;d<b;d++)if(e=this[d],1===e.nodeType)if(e.className||1!==c.length){f=" "+e.className+" ";k=0;for(h=c.length;k<h;k++)0>f.indexOf(" "+c[k]+" ")&&(f+=c[k]+" ");e.className=w.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,b,e,f,k,h;if(w.isFunction(a))return this.each(function(c){w(this).removeClass(a.call(this,c,this.className))});if(a&&"string"===typeof a||a===g)for(c=(a||"").split(S),k=0,h=this.length;k<h;k++)if(b=
this[k],1===b.nodeType&&b.className){d=(" "+b.className+" ").replace(Ua," ");e=0;for(f=c.length;e<f;e++)for(;0<=d.indexOf(" "+c[e]+" ");)d=d.replace(" "+c[e]+" "," ");b.className=a?w.trim(d):""}return this},toggleClass:function(a,c){var d=typeof a,b="boolean"===typeof c;return w.isFunction(a)?this.each(function(d){w(this).toggleClass(a.call(this,d,this.className,c),c)}):this.each(function(){if("string"===d)for(var e,f=0,k=w(this),h=c,l=a.split(S);e=l[f++];)h=b?h:!k.hasClass(e),k[h?"addClass":"removeClass"](e);
else if("undefined"===d||"boolean"===d)this.className&&w._data(this,"__className__",this.className),this.className=this.className||!1===a?"":w._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&0<=(" "+this[c].className+" ").replace(Ua," ").indexOf(a))return!0;return!1},val:function(a){var c,d,b,e=this[0];if(arguments.length)return b=w.isFunction(a),this.each(function(d){var e=w(this);1===this.nodeType&&(d=b?a.call(this,d,
e.val()):a,null==d?d="":"number"===typeof d?d+="":w.isArray(d)&&(d=w.map(d,function(a){return null==a?"":a+""})),c=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,d,"value")!==g||(this.value=d))});if(e){if((c=w.valHooks[e.type]||w.valHooks[e.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(e,"value"))!==g)return d;d=e.value;return"string"===typeof d?d.replace(tb,""):null==d?"":d}}});w.extend({valHooks:{option:{get:function(a){var c=a.attributes.value;return!c||
c.specified?a.value:a.text}},select:{get:function(a){for(var c,d=a.options,b=a.selectedIndex,e=(a="select-one"===a.type||0>b)?null:[],f=a?b+1:d.length,k=0>b?f:a?b:0;k<f;k++)if(c=d[k],!(!c.selected&&k!==b||(w.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&w.nodeName(c.parentNode,"optgroup"))){c=w(c).val();if(a)return c;e.push(c)}return e},set:function(a,c){var d=w.makeArray(c);w(a).find("option").each(function(){this.selected=0<=w.inArray(w(this).val(),d)});
d.length||(a.selectedIndex=-1);return d}}},attrFn:{},attr:function(a,c,d,b){var e,f,k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(b&&w.isFunction(w.fn[c]))return w(a)[c](d);if("undefined"===typeof a.getAttribute)return w.prop(a,c,d);if(b=1!==k||!w.isXMLDoc(a))c=c.toLowerCase(),f=w.attrHooks[c]||(Va.test(c)?Ka:ja);if(d!==g)if(null===d)w.removeAttr(a,c);else{if(f&&"set"in f&&b&&(e=f.set(a,d,c))!==g)return e;a.setAttribute(c,d+"");return d}else{if(f&&"get"in f&&b&&null!==(e=f.get(a,c)))return e;e=a.getAttribute(c);
return null===e?g:e}}},removeAttr:function(a,c){var d,b,e,f,k=0;if(c&&1===a.nodeType)for(b=c.split(S);k<b.length;k++)if(e=b[k])d=w.propFix[e]||e,(f=Va.test(e))||w.attr(a,e,""),a.removeAttribute(Wa?e:d),f&&d in a&&(a[d]=!1)},attrHooks:{type:{set:function(a,c){if(ub.test(a.nodeName)&&a.parentNode)w.error("type property can't be changed");else if(!w.support.radioValue&&"radio"===c&&w.nodeName(a,"input")){var d=a.value;a.setAttribute("type",c);d&&(a.value=d);return c}}},value:{get:function(a,c){return ja&&
w.nodeName(a,"button")?ja.get(a,c):c in a?a.value:null},set:function(a,c,d){if(ja&&w.nodeName(a,"button"))return ja.set(a,c,d);a.value=c}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var b,e,f;f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if(f=1!==f||!w.isXMLDoc(a))c=
w.propFix[c]||c,e=w.propHooks[c];return d!==g?e&&"set"in e&&(b=e.set(a,d,c))!==g?b:a[c]=d:e&&"get"in e&&null!==(b=e.get(a,c))?b:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):vb.test(a.nodeName)||wb.test(a.nodeName)&&a.href?0:g}}}});Ka={get:function(a,c){var d,b=w.prop(a,c);return!0===b||"boolean"!==typeof b&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():g},set:function(a,c,d){!1===c?w.removeAttr(a,d):(c=w.propFix[d]||
d,c in a&&(a[c]=!0),a.setAttribute(d,d.toLowerCase()));return d}};Wa||(Da={name:!0,id:!0,coords:!0},ja=w.valHooks.button={get:function(a,c){var d;return(d=a.getAttributeNode(c))&&(Da[c]?""!==d.value:d.specified)?d.value:g},set:function(a,c,d){var b=a.getAttributeNode(d);b||(b=P.createAttribute(d),a.setAttributeNode(b));return b.value=c+""}},w.each(["width","height"],function(a,c){w.attrHooks[c]=w.extend(w.attrHooks[c],{set:function(a,d){if(""===d)return a.setAttribute(c,"auto"),d}})}),w.attrHooks.contenteditable=
{get:ja.get,set:function(a,c,d){""===c&&(c="false");ja.set(a,c,d)}});w.support.hrefNormalized||w.each(["href","src","width","height"],function(a,c){w.attrHooks[c]=w.extend(w.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null===a?g:a}})});w.support.style||(w.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||g},set:function(a,c){return a.style.cssText=c+""}});w.support.optSelected||(w.propHooks.selected=w.extend(w.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,
a.parentNode&&a.parentNode.selectedIndex;return null}}));w.support.enctype||(w.propFix.enctype="encoding");w.support.checkOn||w.each(["radio","checkbox"],function(){w.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});w.each(["radio","checkbox"],function(){w.valHooks[this]=w.extend(w.valHooks[this],{set:function(a,c){if(w.isArray(c))return a.checked=0<=w.inArray(w(a).val(),c)}})});var La=/^(?:textarea|input|select)$/i,Xa=/^([^\.]*|)(?:\.(.+)|)$/,xb=/(?:^|\s)hover(\.\S+|)\b/,
yb=/^key/,zb=/^(?:mouse|contextmenu)|click/,Ya=/^(?:focusinfocus|focusoutblur)$/,Za=function(a){return w.event.special.hover?a:a.replace(xb,"mouseenter$1 mouseleave$1")};w.event={add:function(a,c,d,b,e){var f,k,h,l,m,n,s,v,x;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(f=w._data(a))){d.handler&&(s=d,d=s.handler,e=s.selector);d.guid||(d.guid=w.guid++);h=f.events;h||(f.events=h={});k=f.handle;k||(f.handle=k=function(a){return"undefined"===typeof w||a&&w.event.triggered===a.type?g:w.event.dispatch.apply(k.elem,
arguments)},k.elem=a);c=w.trim(Za(c)).split(" ");for(f=0;f<c.length;f++)l=Xa.exec(c[f])||[],m=l[1],n=(l[2]||"").split(".").sort(),x=w.event.special[m]||{},m=(e?x.delegateType:x.bindType)||m,x=w.event.special[m]||{},l=w.extend({type:m,origType:l[1],data:b,handler:d,guid:d.guid,selector:e,needsContext:e&&w.expr.match.needsContext.test(e),namespace:n.join(".")},s),v=h[m],v||(v=h[m]=[],v.delegateCount=0,x.setup&&!1!==x.setup.call(a,b,n,k)||(a.addEventListener?a.addEventListener(m,k,!1):a.attachEvent&&
a.attachEvent("on"+m,k))),x.add&&(x.add.call(a,l),l.handler.guid||(l.handler.guid=d.guid)),e?v.splice(v.delegateCount++,0,l):v.push(l),w.event.global[m]=!0;a=null}},global:{},remove:function(a,c,d,b,e){var f,k,h,l,m,n,s,v,g,x,u=w.hasData(a)&&w._data(a);if(u&&(s=u.events)){c=w.trim(Za(c||"")).split(" ");for(f=0;f<c.length;f++)if(k=Xa.exec(c[f])||[],h=l=k[1],k=k[2],h){v=w.event.special[h]||{};h=(b?v.delegateType:v.bindType)||h;g=s[h]||[];m=g.length;k=k?RegExp("(^|\\.)"+k.split(".").sort().join("\\.(?:.*\\.|)")+
"(\\.|$)"):null;for(n=0;n<g.length;n++)x=g[n],!e&&l!==x.origType||d&&d.guid!==x.guid||k&&!k.test(x.namespace)||b&&!(b===x.selector||"**"===b&&x.selector)||(g.splice(n--,1),x.selector&&g.delegateCount--,v.remove&&v.remove.call(a,x));0===g.length&&m!==g.length&&(v.teardown&&!1!==v.teardown.call(a,k,u.handle)||w.removeEvent(a,h,u.handle),delete s[h])}else for(h in s)w.event.remove(a,h+c[f],d,b,!0);w.isEmptyObject(s)&&(delete u.handle,w.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,
changeData:!0},trigger:function(a,c,d,e){if(!d||3!==d.nodeType&&8!==d.nodeType){var f,k,h,l,m,n,s=a.type||a;h=[];if(!Ya.test(s+w.event.triggered)&&(0<=s.indexOf("!")&&(s=s.slice(0,-1),f=!0),0<=s.indexOf(".")&&(h=s.split("."),s=h.shift(),h.sort()),d&&!w.event.customEvent[s]||w.event.global[s]))if(a="object"===typeof a?a[w.expando]?a:new w.Event(s,a):new w.Event(s),a.type=s,a.isTrigger=!0,a.exclusive=f,a.namespace=h.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):
null,h=0>s.indexOf(":")?"on"+s:"",d){if(a.result=g,a.target||(a.target=d),c=null!=c?w.makeArray(c):[],c.unshift(a),l=w.event.special[s]||{},!l.trigger||!1!==l.trigger.apply(d,c)){n=[[d,l.bindType||s]];if(!e&&!l.noBubble&&!w.isWindow(d)){m=l.delegateType||s;f=Ya.test(m+s)?d:d.parentNode;for(k=d;f;f=f.parentNode)n.push([f,m]),k=f;k===(d.ownerDocument||P)&&n.push([k.defaultView||k.parentWindow||b,m])}for(k=0;k<n.length&&!a.isPropagationStopped();k++)f=n[k][0],a.type=n[k][1],(m=(w._data(f,"events")||
{})[a.type]&&w._data(f,"handle"))&&m.apply(f,c),(m=h&&f[h])&&w.acceptData(f)&&m.apply&&!1===m.apply(f,c)&&a.preventDefault();a.type=s;e||a.isDefaultPrevented()||l._default&&!1!==l._default.apply(d.ownerDocument,c)||"click"===s&&w.nodeName(d,"a")||!w.acceptData(d)||!h||!d[s]||("focus"===s||"blur"===s)&&0===a.target.offsetWidth||w.isWindow(d)||((k=d[h])&&(d[h]=null),w.event.triggered=s,d[s](),w.event.triggered=g,k&&(d[h]=k));return a.result}}else for(k in d=w.cache,d)d[k].events&&d[k].events[s]&&w.event.trigger(a,
c,d[k].handle.elem,!0)}},dispatch:function(a){a=w.event.fix(a||b.event);var c,d,e,f,k,h,l=(w._data(this,"events")||{})[a.type]||[],m=l.delegateCount,s=R.call(arguments),n=!a.exclusive&&!a.namespace,v=w.event.special[a.type]||{},x=[];s[0]=a;a.delegateTarget=this;if(!v.preDispatch||!1!==v.preDispatch.call(this,a)){if(m&&(!a.button||"click"!==a.type))for(d=a.target;d!=this;d=d.parentNode||this)if(!0!==d.disabled||"click"!==a.type){f={};k=[];for(c=0;c<m;c++)e=l[c],h=e.selector,f[h]===g&&(f[h]=e.needsContext?
0<=w(h,this).index(d):w.find(h,this,null,[d]).length),f[h]&&k.push(e);k.length&&x.push({elem:d,matches:k})}l.length>m&&x.push({elem:this,matches:l.slice(m)});for(c=0;c<x.length&&!a.isPropagationStopped();c++)for(f=x[c],a.currentTarget=f.elem,d=0;d<f.matches.length&&!a.isImmediatePropagationStopped();d++)if(e=f.matches[d],n||!a.namespace&&!e.namespace||a.namespace_re&&a.namespace_re.test(e.namespace))a.data=e.data,a.handleObj=e,e=((w.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,s),
e!==g&&(a.result=e,!1===e&&(a.preventDefault(),a.stopPropagation()));v.postDispatch&&v.postDispatch.call(this,a);return a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,c){null==a.which&&(a.which=null!=c.charCode?c.charCode:c.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,c){var d,b,e=c.button,f=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||P,b=d.documentElement,d=d.body,a.pageX=c.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));!a.relatedTarget&&f&&(a.relatedTarget=f===a.target?c.toElement:f);a.which||e===g||(a.which=e&1?1:e&2?3:e&4?2:0);return a}},fix:function(a){if(a[w.expando])return a;var c,
d,b=a,e=w.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;a=w.Event(b);for(c=f.length;c;)d=f[--c],a[d]=b[d];a.target||(a.target=b.srcElement||P);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return e.filter?e.filter(a,b):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,c,d){w.isWindow(this)&&(this.onbeforeunload=d)},teardown:function(a,c){this.onbeforeunload===c&&(this.onbeforeunload=
null)}}},simulate:function(a,c,d,b){a=w.extend(new w.Event,d,{type:a,isSimulated:!0,originalEvent:{}});b?w.event.trigger(a,null,c):w.event.dispatch.call(c,a);a.isDefaultPrevented()&&d.preventDefault()}};w.event.handle=w.event.dispatch;w.removeEvent=P.removeEventListener?function(a,c,d){a.removeEventListener&&a.removeEventListener(c,d,!1)}:function(a,c,d){c="on"+c;a.detachEvent&&("undefined"===typeof a[c]&&(a[c]=null),a.detachEvent(c,d))};w.Event=function(a,c){if(!(this instanceof w.Event))return new w.Event(a,
c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?u:p):this.type=a;c&&w.extend(this,c);this.timeStamp=a&&a.timeStamp||w.now();this[w.expando]=!0};w.Event.prototype={preventDefault:function(){this.isDefaultPrevented=u;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=u;var a=this.originalEvent;a&&(a.stopPropagation&&
a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u;this.stopPropagation()},isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p};w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,c){w.event.special[a]={delegateType:c,bindType:c,handle:function(a){var d,b=a.relatedTarget,e=a.handleObj;if(!b||b!==this&&!w.contains(this,b))a.type=e.origType,d=e.handler.apply(this,arguments),a.type=c;return d}}});w.support.submitBubbles||
(w.event.special.submit={setup:function(){if(w.nodeName(this,"form"))return!1;w.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=w.nodeName(a,"input")||w.nodeName(a,"button")?a.form:g)&&!w._data(a,"_submit_attached")&&(w.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),w._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&w.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(w.nodeName(this,
"form"))return!1;w.event.remove(this,"._submit")}});w.support.changeBubbles||(w.event.special.change={setup:function(){if(La.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)w.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);w.event.simulate("change",this,a,!0)});return!1}w.event.add(this,"beforeactivate._change",
function(a){a=a.target;La.test(a.nodeName)&&!w._data(a,"_change_attached")&&(w.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||w.event.simulate("change",this.parentNode,a,!0)}),w._data(a,"_change_attached",!0))})},handle:function(a){var c=a.target;if(this!==c||a.isSimulated||a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){w.event.remove(this,"._change");return!La.test(this.nodeName)}});
w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(a,c){var d=0,b=function(a){w.event.simulate(c,a.target,w.event.fix(a),!0)};w.event.special[c]={setup:function(){0===d++&&P.addEventListener(a,b,!0)},teardown:function(){0===--d&&P.removeEventListener(a,b,!0)}}});w.fn.extend({on:function(a,c,d,b,e){var f,k;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=g);for(k in a)this.on(k,c,d,a[k],e);return this}null==d&&null==b?(b=c,d=c=g):null==b&&("string"===typeof c?(b=d,d=
g):(b=d,d=c,c=g));if(!1===b)b=p;else if(!b)return this;1===e&&(f=b,b=function(a){w().off(a);return f.apply(this,arguments)},b.guid=f.guid||(f.guid=w.guid++));return this.each(function(){w.event.add(this,a,b,d,c)})},one:function(a,c,d,b){return this.on(a,c,d,b,1)},off:function(a,c,d){var b;if(a&&a.preventDefault&&a.handleObj)return b=a.handleObj,w(a.delegateTarget).off(b.namespace?b.origType+"."+b.namespace:b.origType,b.selector,b.handler),this;if("object"===typeof a){for(b in a)this.off(b,c,a[b]);
return this}if(!1===c||"function"===typeof c)d=c,c=g;!1===d&&(d=p);return this.each(function(){w.event.remove(this,a,d,c)})},bind:function(a,c,d){return this.on(a,null,c,d)},unbind:function(a,c){return this.off(a,null,c)},live:function(a,c,d){w(this.context).on(a,this.selector,c,d);return this},die:function(a,c){w(this.context).off(a,this.selector||"**",c);return this},delegate:function(a,c,d,b){return this.on(c,a,d,b)},undelegate:function(a,c,d){return 1===arguments.length?this.off(a,"**"):this.off(c,
a||"**",d)},trigger:function(a,c){return this.each(function(){w.event.trigger(a,c,this)})},triggerHandler:function(a,c){if(this[0])return w.event.trigger(a,c,this[0],!0)},toggle:function(a){var c=arguments,d=a.guid||w.guid++,b=0,e=function(d){var e=(w._data(this,"lastToggle"+a.guid)||0)%b;w._data(this,"lastToggle"+a.guid,e+1);d.preventDefault();return c[e].apply(this,arguments)||!1};for(e.guid=d;b<c.length;)c[b++].guid=d;return this.click(e)},hover:function(a,c){return this.mouseenter(a).mouseleave(c||
a)}});w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,c){w.fn[c]=function(a,d){null==d&&(d=a,a=null);return 0<arguments.length?this.on(c,null,a,d):this.trigger(c)};yb.test(c)&&(w.event.fixHooks[c]=w.event.keyHooks);zb.test(c)&&(w.event.fixHooks[c]=w.event.mouseHooks)});(function(a,c){function d(a,c,b,e){b=b||[];c=c||
F;var f,k,h,l,m=c.nodeType;if(!a||"string"!==typeof a)return b;if(1!==m&&9!==m)return[];h=z(c);if(!h&&!e&&(f=U.exec(a)))if(l=f[1])if(9===m)if((k=c.getElementById(l))&&k.parentNode){if(k.id===l)return b.push(k),b}else return b;else{if(c.ownerDocument&&(k=c.ownerDocument.getElementById(l))&&r(c,k)&&k.id===l)return b.push(k),b}else{if(f[2])return J.apply(b,P.call(c.getElementsByTagName(a),0)),b;if((l=f[3])&&za&&c.getElementsByClassName)return J.apply(b,P.call(c.getElementsByClassName(l),0)),b}return x(a.replace(na,
"$1"),c,b,e,h)}function b(a){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===a}}function e(a){return function(c){var d=c.nodeName.toLowerCase();return("input"===d||"button"===d)&&c.type===a}}function f(a){return ha(function(c){c=+c;return ha(function(d,b){for(var e,f=a([],d.length,c),k=f.length;k--;)d[e=f[k]]&&(d[e]=!(b[e]=d[e]))})})}function k(a,c,d){if(a===c)return d;for(a=a.nextSibling;a;){if(a===c)return-1;a=a.nextSibling}return 1}function h(a,c){var b,e,f,k,l,m,s;if(l=M[K][a+
" "])return c?0:l.slice(0);l=a;m=[];for(s=q.preFilter;l;){if(!b||(e=V.exec(l)))e&&(l=l.slice(e[0].length)||l),m.push(f=[]);b=!1;if(e=wa.exec(l))f.push(b=new H(e.shift())),l=l.slice(b.length),b.type=e[0].replace(na," ");for(k in q.filter)!(e=pa[k].exec(l))||s[k]&&!(e=s[k](e))||(f.push(b=new H(e.shift())),l=l.slice(b.length),b.type=k,b.matches=e);if(!b)break}return c?l.length:l?d.error(a):M(a,m).slice(0)}function l(a,c,d){var b=c.dir,e=d&&"parentNode"===c.dir,f=W++;return c.first?function(c,d,f){for(;c=
c[b];)if(e||1===c.nodeType)return a(c,d,f)}:function(c,d,k){if(!k)for(var h,l=E+" "+f+" ",m=l+p;c=c[b];){if(e||1===c.nodeType){if((h=c[K])===m)return c.sizset;if("string"===typeof h&&0===h.indexOf(l)){if(c.sizset)return c}else{c[K]=m;if(a(c,d,k))return c.sizset=!0,c;c.sizset=!1}}}else for(;c=c[b];)if((e||1===c.nodeType)&&a(c,d,k))return c}}function m(a){return 1<a.length?function(c,d,b){for(var e=a.length;e--;)if(!a[e](c,d,b))return!1;return!0}:a[0]}function s(a,c,d,b,e){for(var f,k=[],h=0,l=a.length,
m=null!=c;h<l;h++)if(f=a[h])if(!d||d(f,b,e))k.push(f),m&&c.push(h);return k}function n(a,c,b,e,f,k){e&&!e[K]&&(e=n(e));f&&!f[K]&&(f=n(f,k));return ha(function(k,h,l,m){var n,v,g=[],x=[],u=h.length,q;if(!(q=k)){q=c||"*";for(var p=l.nodeType?[l]:l,y=[],B=0,z=p.length;B<z;B++)d(q,p[B],y);q=y}q=!a||!k&&c?q:s(q,g,a,l,m);p=b?f||(k?a:u||e)?[]:h:q;b&&b(q,p,l,m);if(e)for(n=s(p,x),e(n,[],l,m),l=n.length;l--;)if(v=n[l])p[x[l]]=!(q[x[l]]=v);if(k){if(f||a){if(f){n=[];for(l=p.length;l--;)(v=p[l])&&n.push(q[l]=
v);f(null,p=[],n,m)}for(l=p.length;l--;)(v=p[l])&&-1<(n=f?la.call(k,v):g[l])&&(k[n]=!(h[n]=v))}}else p=s(p===h?p.splice(u,p.length):p),f?f(null,h,p,m):J.apply(h,p)})}function v(a){var c,d,b,e=a.length,f=q.relative[a[0].type];d=f||q.relative[" "];for(var k=f?1:0,h=l(function(a){return a===c},d,!0),s=l(function(a){return-1<la.call(c,a)},d,!0),g=[function(a,d,b){return!f&&(b||d!==C)||((c=d).nodeType?h(a,d,b):s(a,d,b))}];k<e;k++)if(d=q.relative[a[k].type])g=[l(m(g),d)];else{d=q.filter[a[k].type].apply(null,
a[k].matches);if(d[K]){for(b=++k;b<e&&!q.relative[a[b].type];b++);return n(1<k&&m(g),1<k&&a.slice(0,k-1).join("").replace(na,"$1"),d,k<b&&v(a.slice(k,b)),b<e&&v(a=a.slice(b)),b<e&&a.join(""))}g.push(d)}return m(g)}function g(a,c){var b=0<c.length,e=0<a.length,f=function(k,h,l,m,n){var v,g,x=[],u=0,y="0",B=k&&[],z=null!=n,r=C,A=k||e&&q.find.TAG("*",n&&h.parentNode||h),I=E+=null==r?1:Math.E;z&&(C=h!==F&&h,p=f.el);for(;null!=(n=A[y]);y++){if(e&&n){for(v=0;g=a[v];v++)if(g(n,h,l)){m.push(n);break}z&&(E=
I,p=++f.el)}b&&((n=!g&&n)&&u--,k&&B.push(n))}u+=y;if(b&&y!==u){for(v=0;g=c[v];v++)g(B,x,h,l);if(k){if(0<u)for(;y--;)B[y]||x[y]||(x[y]=O.call(m));x=s(x)}J.apply(m,x);z&&!k&&0<x.length&&1<u+c.length&&d.uniqueSort(m)}z&&(E=I,C=r);return B};f.el=0;return b?ha(f):f}function x(a,c,d,b,e){var f,k,l,m,n=h(a);if(!b&&1===n.length){k=n[0]=n[0].slice(0);if(2<k.length&&"ID"===(l=k[0]).type&&9===c.nodeType&&!e&&q.relative[k[1].type]){c=q.find.ID(l.matches[0].replace(ja,""),c,e)[0];if(!c)return d;a=a.slice(k.shift().length)}for(f=
pa.POS.test(a)?-1:k.length-1;0<=f;f--){l=k[f];if(q.relative[m=l.type])break;if(m=q.find[m])if(b=m(l.matches[0].replace(ja,""),Y.test(k[0].type)&&c.parentNode||c,e)){k.splice(f,1);a=b.length&&k.join("");if(!a)return J.apply(d,P.call(b,0)),d;break}}}A(a,n)(b,c,e,d,Y.test(a));return d}function u(){}var p,y,q,B,z,r,A,I,D,C,ga=!0,K=("sizcache"+Math.random()).replace(".",""),H=String,F=a.document,G=F.documentElement,E=0,W=0,O=[].pop,J=[].push,P=[].slice,la=[].indexOf||function(a){for(var c=0,d=this.length;c<
d;c++)if(this[c]===a)return c;return-1},ha=function(a,c){a[K]=null==c||c;return a},L=function(){var a={},c=[];return ha(function(d,b){c.push(d)>q.cacheLength&&delete a[c.shift()];return a[d+" "]=b},a)},N=L(),M=L(),oa=L(),L="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",Q=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+
L+")|[^:]|\\\\.)*|.*))\\)|)",na=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,V=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,wa=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,Ja=RegExp(Q),U=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Y=/[\x20\t\r\n\f]*[+~]/,R=/h\d/i,Ca=/input|select|textarea|button/i,ja=/\\(?!\\)/g,pa={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w",
"w*")+")"),ATTR:RegExp("^"+L),PSEUDO:RegExp("^"+Q),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},S=function(a){var c=F.createElement("div");try{return a(c)}catch(d){return!1}finally{}},L=S(function(a){a.appendChild(F.createComment(""));return!a.getElementsByTagName("*").length}),Z=S(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),Ga=S(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),za=S(function(a){a.innerHTML=
"<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length}),ea=S(function(a){a.id=K+0;a.innerHTML="<a name='"+K+"'></a><div name='"+K+"'></div>";G.insertBefore(a,G.firstChild);var c=F.getElementsByName&&F.getElementsByName(K).length===2+F.getElementsByName(K+0).length;y=!F.getElementById(K);G.removeChild(a);return c});try{P.call(G.childNodes,0)[0].nodeType}catch(Ka){P=
function(a){for(var c,d=[];c=this[a];a++)d.push(c);return d}}d.matches=function(a,c){return d(a,null,null,c)};d.matchesSelector=function(a,c){return 0<d(c,null,null,[a]).length};B=d.getText=function(a){var c,d="",b=0;if(c=a.nodeType)if(1===c||9===c||11===c){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)d+=B(a)}else{if(3===c||4===c)return a.nodeValue}else for(;c=a[b];b++)d+=B(c);return d};z=d.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?
"HTML"!==a.nodeName:!1};r=d.contains=G.contains?function(a,c){var d=9===a.nodeType?a.documentElement:a,b=c&&c.parentNode;return a===b||!!(b&&1===b.nodeType&&d.contains&&d.contains(b))}:G.compareDocumentPosition?function(a,c){return c&&!!(a.compareDocumentPosition(c)&16)}:function(a,c){for(;c=c.parentNode;)if(c===a)return!0;return!1};d.attr=function(a,c){var d,b=z(a);b||(c=c.toLowerCase());return(d=q.attrHandle[c])?d(a):b||Ga?a.getAttribute(c):(d=a.getAttributeNode(c))?"boolean"===typeof a[c]?a[c]?
c:null:d.specified?d.value:null:null};q=d.selectors={cacheLength:50,createPseudo:ha,match:pa,attrHandle:Z?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:y?function(a,c,d){if("undefined"!==typeof c.getElementById&&!d)return(a=c.getElementById(a))&&a.parentNode?[a]:[]}:function(a,d,b){if("undefined"!==typeof d.getElementById&&!b)return(d=d.getElementById(a))?d.id===a||"undefined"!==typeof d.getAttributeNode&&d.getAttributeNode("id").value===
a?[d]:c:[]},TAG:L?function(a,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(a)}:function(a,c){var d=c.getElementsByTagName(a);if("*"===a){for(var b,e=[],f=0;b=d[f];f++)1===b.nodeType&&e.push(b);return e}return d},NAME:ea&&function(a,c){if("undefined"!==typeof c.getElementsByName)return c.getElementsByName(name)},CLASS:za&&function(a,c,d){if("undefined"!==typeof c.getElementsByClassName&&!d)return c.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0},
" ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ja,"");a[3]=(a[4]||a[5]||"").replace(ja,"");"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1]?(a[2]||d.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&d.error(a[0]);return a},PSEUDO:function(a){var c,d;if(pa.CHILD.test(a[0]))return null;if(a[3])a[2]=
a[3];else if(c=a[4])Ja.test(c)&&(d=h(c,!0))&&(d=c.indexOf(")",c.length-d)-c.length)&&(c=c.slice(0,d),a[0]=a[0].slice(0,d)),a[2]=c;return a.slice(0,3)}},filter:{ID:y?function(a){a=a.replace(ja,"");return function(c){return c.getAttribute("id")===a}}:function(a){a=a.replace(ja,"");return function(c){return(c="undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id"))&&c.value===a}},TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(ja,"").toLowerCase();return function(c){return c.nodeName&&
c.nodeName.toLowerCase()===a}},CLASS:function(a){var c=N[K][a+" "];return c||(c=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&N(a,function(a){return c.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,b){return function(e,f){var k=d.attr(e,a);if(null==k)return"!="===c;if(!c)return!0;k+="";return"="===c?k===b:"!="===c?k!==b:"^="===c?b&&0===k.indexOf(b):"*="===c?b&&-1<k.indexOf(b):"$="===c?b&&k.substr(k.length-b.length)===b:"~="===
c?-1<(" "+k+" ").indexOf(b):"|="===c?k===b||k.substr(0,b.length+1)===b+"-":!1}},CHILD:function(a,c,d,b){return"nth"===a?function(a){var c,e;c=a.parentNode;if(1===d&&0===b)return!0;if(c)for(e=0,c=c.firstChild;c&&(1!==c.nodeType||(e++,a!==c));c=c.nextSibling);e-=b;return e===d||0===e%d&&0<=e/d}:function(c){var d=c;switch(a){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===a)return!0;d=c;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0}}},
PSEUDO:function(a,c){var b,e=q.pseudos[a]||q.setFilters[a.toLowerCase()]||d.error("unsupported pseudo: "+a);return e[K]?e(c):1<e.length?(b=[a,a,"",c],q.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,d){for(var b,f=e(a,c),k=f.length;k--;)b=la.call(a,f[k]),a[b]=!(d[b]=f[k])}):function(a){return e(a,0,b)}):e}},pseudos:{not:ha(function(a){var c=[],d=[],b=A(a.replace(na,"$1"));return b[K]?ha(function(a,c,d,e){e=b(a,null,e,[]);for(var f=a.length;f--;)if(d=e[f])a[f]=!(c[f]=d)}):function(a,e,f){c[0]=
a;b(c,null,f,d);return!d.pop()}}),has:ha(function(a){return function(c){return 0<d(a,c).length}}),contains:ha(function(a){return function(c){return-1<(c.textContent||c.innerText||B(c)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&!!a.checked||"option"===c&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!q.pseudos.empty(a)},
empty:function(a){var c;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(c=a.nodeType)||4===c)return!1;a=a.nextSibling}return!0},header:function(a){return R.test(a.nodeName)},text:function(a){var c,d;return"input"===a.nodeName.toLowerCase()&&"text"===(c=a.type)&&(null==(d=a.getAttribute("type"))||d.toLowerCase()===c)},radio:b("radio"),checkbox:b("checkbox"),file:b("file"),password:b("password"),image:b("image"),submit:e("submit"),reset:e("reset"),button:function(a){var c=a.nodeName.toLowerCase();return"input"===
c&&"button"===a.type||"button"===c},input:function(a){return Ca.test(a.nodeName)},focus:function(a){var c=a.ownerDocument;return a===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(){return[0]}),last:f(function(a,c){return[c-1]}),eq:f(function(a,c,d){return[0>d?d+c:d]}),even:f(function(a,c){for(var d=0;d<c;d+=2)a.push(d);return a}),odd:f(function(a,c){for(var d=1;d<c;d+=2)a.push(d);return a}),
lt:f(function(a,c,d){for(c=0>d?d+c:d;0<=--c;)a.push(c);return a}),gt:f(function(a,c,d){for(d=0>d?d+c:d;++d<c;)a.push(d);return a})}};I=G.compareDocumentPosition?function(a,c){return a===c?(D=!0,0):(a.compareDocumentPosition&&c.compareDocumentPosition?a.compareDocumentPosition(c)&4:a.compareDocumentPosition)?-1:1}:function(a,c){if(a===c)return D=!0,0;if(a.sourceIndex&&c.sourceIndex)return a.sourceIndex-c.sourceIndex;var d,b,e=[],f=[];d=a.parentNode;b=c.parentNode;var h=d;if(d===b)return k(a,c);if(!d)return-1;
if(!b)return 1;for(;h;)e.unshift(h),h=h.parentNode;for(h=b;h;)f.unshift(h),h=h.parentNode;d=e.length;b=f.length;for(h=0;h<d&&h<b;h++)if(e[h]!==f[h])return k(e[h],f[h]);return h===d?k(a,f[h],-1):k(e[h],c,1)};[0,0].sort(I);ga=!D;d.uniqueSort=function(a){var c,d=[],b=1,e=0;D=ga;a.sort(I);if(D){for(;c=a[b];b++)c===a[b-1]&&(e=d.push(b));for(;e--;)a.splice(d[e],1)}return a};d.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};A=d.compile=function(a,c){var d,b=[],e=[],f=oa[K][a+
" "];if(!f){c||(c=h(a));for(d=c.length;d--;)f=v(c[d]),f[K]?b.push(f):e.push(f);f=oa(a,g(e,b))}return f};F.querySelectorAll&&function(){var a,c=x,b=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],k=[":active"],l=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector;S(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||f.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");
a.querySelectorAll(":checked").length||f.push(":checked")});S(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&f.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")});f=RegExp(f.join("|"));x=function(a,d,e,k,l){if(!k&&!l&&!f.test(a)){var m,n,s=!0,v=K;n=d;m=9===d.nodeType&&a;if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){m=h(a);(s=d.getAttribute("id"))?v=s.replace(b,
"\\$&"):d.setAttribute("id",v);v="[id='"+v+"'] ";for(n=m.length;n--;)m[n]=v+m[n].join("");n=Y.test(a)&&d.parentNode||d;m=m.join(",")}if(m)try{return J.apply(e,P.call(n.querySelectorAll(m),0)),e}catch(g){}finally{s||d.removeAttribute("id")}}return c(a,d,e,k,l)};l&&(S(function(c){a=l.call(c,"div");try{l.call(c,"[test!='']:sizzle"),k.push("!=",Q)}catch(d){}}),k=RegExp(k.join("|")),d.matchesSelector=function(c,b){b=b.replace(e,"='$1']");if(!z(c)&&!k.test(b)&&!f.test(b))try{var h=l.call(c,b);if(h||a||
c.document&&11!==c.document.nodeType)return h}catch(m){}return 0<d(b,null,null,[c]).length})}();q.pseudos.nth=q.pseudos.eq;q.filters=u.prototype=q.pseudos;q.setFilters=new u;d.attr=w.attr;w.find=d;w.expr=d.selectors;w.expr[":"]=w.expr.pseudos;w.unique=d.uniqueSort;w.text=d.getText;w.isXMLDoc=d.isXML;w.contains=d.contains})(b);var Ab=/Until$/,Bb=/^(?:parents|prev(?:Until|All))/,pb=/^.[^:#\[\.,]*$/,$a=w.expr.match.needsContext,Cb={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(a){var c,
d,b,e,f,k,h=this;if("string"!==typeof a)return w(a).filter(function(){c=0;for(d=h.length;c<d;c++)if(w.contains(h[c],this))return!0});k=this.pushStack("","find",a);c=0;for(d=this.length;c<d;c++)if(b=k.length,w.find(a,this[c],k),0<c)for(e=b;e<k.length;e++)for(f=0;f<b;f++)if(k[f]===k[e]){k.splice(e--,1);break}return k},has:function(a){var c,d=w(a,this),b=d.length;return this.filter(function(){for(c=0;c<b;c++)if(w.contains(this,d[c]))return!0})},not:function(a){return this.pushStack(c(this,a,!1),"not",
a)},filter:function(a){return this.pushStack(c(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?$a.test(a)?0<=w(a,this.context).index(this[0]):0<w.filter(a,this).length:0<this.filter(a).length)},closest:function(a,c){for(var d,b=0,e=this.length,f=[],k=$a.test(a)||"string"!==typeof a?w(a,c||this.context):0;b<e;b++)for(d=this[b];d&&d.ownerDocument&&d!==c&&11!==d.nodeType;){if(k?-1<k.index(d):w.find.matchesSelector(d,a)){f.push(d);break}d=d.parentNode}f=1<f.length?w.unique(f):f;
return this.pushStack(f,"closest",a)},index:function(a){return a?"string"===typeof a?w.inArray(this[0],w(a)):w.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(c,d){var b="string"===typeof c?w(c,d):w.makeArray(c&&c.nodeType?[c]:c),e=w.merge(this.get(),b);return this.pushStack(a(b[0])||a(e[0])?e:w.unique(e))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});w.fn.andSelf=w.fn.addBack;w.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return w.dir(a,"parentNode")},parentsUntil:function(a,c,d){return w.dir(a,"parentNode",d)},next:function(a){return m(a,"nextSibling")},prev:function(a){return m(a,"previousSibling")},nextAll:function(a){return w.dir(a,"nextSibling")},prevAll:function(a){return w.dir(a,"previousSibling")},nextUntil:function(a,c,d){return w.dir(a,"nextSibling",d)},prevUntil:function(a,c,d){return w.dir(a,"previousSibling",d)},siblings:function(a){return w.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return w.sibling(a.firstChild)},contents:function(a){return w.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:w.merge([],a.childNodes)}},function(a,c){w.fn[a]=function(d,b){var e=w.map(this,c,d);Ab.test(a)||(b=d);b&&"string"===typeof b&&(e=w.filter(b,e));e=1<this.length&&!Cb[a]?w.unique(e):e;1<this.length&&Bb.test(a)&&(e=e.reverse());return this.pushStack(e,a,R.call(arguments).join(","))}});w.extend({filter:function(a,c,d){d&&(a=":not("+a+")");
return 1===c.length?w.find.matchesSelector(c[0],a)?[c[0]]:[]:w.find.matches(a,c)},dir:function(a,c,d){var b=[];for(a=a[c];a&&9!==a.nodeType&&(d===g||1!==a.nodeType||!w(a).is(d));)1===a.nodeType&&b.push(a),a=a[c];return b},sibling:function(a,c){for(var d=[];a;a=a.nextSibling)1===a.nodeType&&a!==c&&d.push(a);return d}});var Ra="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Db=/ jQuery\d+="(?:null|\d+)"/g,
Ma=/^\s+/,ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,Eb=/<tbody/i,Fb=/<|&#?\w+;/,Gb=/<(?:script|style|link)/i,Hb=/<(?:script|object|embed|option|style)/i,Na=RegExp("<(?:"+Ra+")[\\s/>]","i"),Sa=/^(?:checkbox|radio)$/,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ib=/\/(java|ecma)script/i,Jb=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,ma={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},db=f(P),Oa=db.appendChild(P.createElement("div"));ma.optgroup=ma.option;ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead;ma.th=ma.td;w.support.htmlSerialize||(ma._default=[1,"X<div>","</div>"]);w.fn.extend({text:function(a){return w.access(this,function(a){return a===g?w.text(this):this.empty().append((this[0]&&
this[0].ownerDocument||P).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(w.isFunction(a))return this.each(function(c){w(this).wrapAll(a.call(this,c))});if(this[0]){var c=w(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return w.isFunction(a)?this.each(function(c){w(this).wrapInner(a.call(this,
c))}):this.each(function(){var c=w(this),d=c.contents();d.length?d.wrapAll(a):c.append(a)})},wrap:function(a){var c=w.isFunction(a);return this.each(function(d){w(this).wrapAll(c?a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,
!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var c=w.clean(arguments);return this.pushStack(w.merge(c,this),"before",this.selector)}},after:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var c=w.clean(arguments);return this.pushStack(w.merge(this,
c),"after",this.selector)}},remove:function(a,c){for(var d,b=0;null!=(d=this[b]);b++)if(!a||w.filter(a,[d]).length)c||1!==d.nodeType||(w.cleanData(d.getElementsByTagName("*")),w.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a,c=0;null!=(a=this[c]);c++)for(1===a.nodeType&&w.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,c){a=null==a?!1:a;c=null==c?a:c;return this.map(function(){return w.clone(this,
a,c)})},html:function(a){return w.access(this,function(a){var c=this[0]||{},d=0,b=this.length;if(a===g)return 1===c.nodeType?c.innerHTML.replace(Db,""):g;if("string"===typeof a&&!(Gb.test(a)||!w.support.htmlSerialize&&Na.test(a)||!w.support.leadingWhitespace&&Ma.test(a)||ma[(bb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ab,"<$1></$2>");try{for(;d<b;d++)c=this[d]||{},1===c.nodeType&&(w.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(e){}}c&&this.empty().append(a)},null,a,arguments.length)},
replaceWith:function(c){if(!a(this[0])){if(w.isFunction(c))return this.each(function(a){var d=w(this),b=d.html();d.replaceWith(c.call(this,a,b))});"string"!==typeof c&&(c=w(c).detach());return this.each(function(){var a=this.nextSibling,d=this.parentNode;w(this).remove();a?w(a).before(c):w(d).append(c)})}return this.length?this.pushStack(w(w.isFunction(c)?c():c),"replaceWith",c):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var b,e,f,k=0,h=a[0],
l=[],m=this.length;if(!w.support.checkClone&&1<m&&"string"===typeof h&&cb.test(h))return this.each(function(){w(this).domManip(a,c,d)});if(w.isFunction(h))return this.each(function(b){var e=w(this);a[0]=h.call(this,b,c?e.html():g);e.domManip(a,c,d)});if(this[0]){b=w.buildFragment(a,this,l);f=b.fragment;e=f.firstChild;1===f.childNodes.length&&(f=e);if(e)for(c=c&&w.nodeName(e,"tr"),b=b.cacheable||m-1;k<m;k++)d.call(c&&w.nodeName(this[k],"table")?this[k].getElementsByTagName("tbody")[0]||this[k].appendChild(this[k].ownerDocument.createElement("tbody")):
this[k],k===b?f:w.clone(f,!0,!0));f=e=null;l.length&&w.each(l,function(a,c){c.src?w.ajax?w.ajax({url:c.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):w.error("no ajax"):w.globalEval((c.text||c.textContent||c.innerHTML||"").replace(Jb,""));c.parentNode&&c.parentNode.removeChild(c)})}return this}});w.buildFragment=function(a,c,d){var b,e,f,k=a[0];c=c||P;c=!c.nodeType&&c[0]||c;c=c.ownerDocument||c;1===a.length&&"string"===typeof k&&512>k.length&&c===P&&"<"===k.charAt(0)&&!(Hb.test(k)||
!w.support.checkClone&&cb.test(k)||!w.support.html5Clone&&Na.test(k))&&(e=!0,b=w.fragments[k],f=b!==g);b||(b=c.createDocumentFragment(),w.clean(a,c,b,d),e&&(w.fragments[k]=f&&b));return{fragment:b,cacheable:e}};w.fragments={};w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){w.fn[a]=function(d){var b,e=0,f=[];d=w(d);var k=d.length;b=1===this.length&&this[0].parentNode;if((null==b||b&&11===b.nodeType&&1===b.childNodes.length)&&
1===k)return d[c](this[0]),this;for(;e<k;e++)b=(0<e?this.clone(!0):this).get(),w(d[e])[c](b),f=f.concat(b);return this.pushStack(f,a,d.selector)}});w.extend({clone:function(a,c,b){var f,k,l,m;w.support.html5Clone||w.isXMLDoc(a)||!Na.test("<"+a.nodeName+">")?m=a.cloneNode(!0):(Oa.innerHTML=a.outerHTML,Oa.removeChild(m=Oa.firstChild));if(!(w.support.noCloneEvent&&w.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||w.isXMLDoc(a)))for(h(a,m),f=d(a),k=d(m),l=0;f[l];++l)k[l]&&h(f[l],k[l]);if(c&&
(e(a,m),b))for(f=d(a),k=d(m),l=0;f[l];++l)e(f[l],k[l]);return m},clean:function(a,c,d,b){var e,h,l,m,n,s,v=c===P&&db,g=[];c&&"undefined"!==typeof c.createDocumentFragment||(c=P);for(e=0;null!=(l=a[e]);e++)if("number"===typeof l&&(l+=""),l){if("string"===typeof l)if(Fb.test(l)){v=v||f(c);s=c.createElement("div");v.appendChild(s);l=l.replace(ab,"<$1></$2>");h=(bb.exec(l)||["",""])[1].toLowerCase();m=ma[h]||ma._default;n=m[0];for(s.innerHTML=m[1]+l+m[2];n--;)s=s.lastChild;if(!w.support.tbody)for(n=Eb.test(l),
m="table"!==h||n?"<table>"!==m[1]||n?[]:s.childNodes:s.firstChild&&s.firstChild.childNodes,h=m.length-1;0<=h;--h)w.nodeName(m[h],"tbody")&&!m[h].childNodes.length&&m[h].parentNode.removeChild(m[h]);!w.support.leadingWhitespace&&Ma.test(l)&&s.insertBefore(c.createTextNode(Ma.exec(l)[0]),s.firstChild);l=s.childNodes;s.parentNode.removeChild(s)}else l=c.createTextNode(l);l.nodeType?g.push(l):w.merge(g,l)}s&&(l=s=v=null);if(!w.support.appendChecked)for(e=0;null!=(l=g[e]);e++)w.nodeName(l,"input")?k(l):
"undefined"!==typeof l.getElementsByTagName&&w.grep(l.getElementsByTagName("input"),k);if(d)for(a=function(a){if(!a.type||Ib.test(a.type))return b?b.push(a.parentNode?a.parentNode.removeChild(a):a):d.appendChild(a)},e=0;null!=(l=g[e]);e++)w.nodeName(l,"script")&&a(l)||(d.appendChild(l),"undefined"!==typeof l.getElementsByTagName&&(l=w.grep(w.merge([],l.getElementsByTagName("script")),a),g.splice.apply(g,[e+1,0].concat(l)),e+=l.length));return g},cleanData:function(a,c){for(var d,b,e,f,k=0,h=w.expando,
l=w.cache,m=w.support.deleteExpando,n=w.event.special;null!=(e=a[k]);k++)if(c||w.acceptData(e))if(d=(b=e[h])&&l[b]){if(d.events)for(f in d.events)n[f]?w.event.remove(e,f):w.removeEvent(e,f,d.handle);l[b]&&(delete l[b],m?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,w.deletedIds.push(b))}}});(function(){var a,c;w.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||
0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a=w.uaMatch(M.userAgent);c={};a.browser&&(c[a.browser]=!0,c.version=a.version);c.chrome?c.webkit=!0:c.webkit&&(c.safari=!0);w.browser=c;w.sub=function(){function a(c,d){return new a.fn.init(c,d)}w.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(d,b){b&&b instanceof w&&!(b instanceof a)&&(b=a(b));return w.fn.init.call(this,
d,b,c)};a.fn.init.prototype=a.fn;var c=a(P);return a}})();var ka,ta,ua,Pa=/alpha\([^)]*\)/i,Kb=/opacity=([^)]*)/,Lb=/^(top|right|bottom|left)$/,Mb=/^(none|table(?!-c[ea]).+)/,eb=/^margin/,qb=RegExp("^("+da+")(.*)$","i"),Aa=RegExp("^("+da+")(?!px)[a-z%]+$","i"),Nb=RegExp("^([-+])=("+da+")","i"),Ha={BODY:"block"},Ob={position:"absolute",visibility:"hidden",display:"block"},fb={letterSpacing:0,fontWeight:400},qa=["Top","Right","Bottom","Left"],Ta=["Webkit","O","Moz","ms"],Pb=w.fn.toggle;w.fn.extend({css:function(a,
c){return w.access(this,function(a,c,d){return d!==g?w.style(a,c,d):w.css(a,c)},a,c,1<arguments.length)},show:function(){return s(this,!0)},hide:function(){return s(this)},toggle:function(a,c){var d="boolean"===typeof a;return w.isFunction(a)&&w.isFunction(c)?Pb.apply(this,arguments):this.each(function(){(d?a:y(this))?w(this).show():w(this).hide()})}});w.extend({cssHooks:{opacity:{get:function(a,c){if(c){var d=ka(a,"opacity");return""===d?"1":d}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,
opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,b){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,k,h=w.camelCase(c),m=a.style;c=w.cssProps[h]||(w.cssProps[h]=l(m,h));k=w.cssHooks[c]||w.cssHooks[h];if(d!==g){if(f=typeof d,"string"===f&&(e=Nb.exec(d))&&(d=(e[1]+1)*e[2]+parseFloat(w.css(a,c)),f="number"),!(null==d||"number"===f&&isNaN(d)||("number"!==f||w.cssNumber[h]||(d+="px"),k&&"set"in k&&(d=k.set(a,d,
b))===g)))try{m[c]=d}catch(n){}}else return k&&"get"in k&&(e=k.get(a,!1,b))!==g?e:m[c]}},css:function(a,c,d,b){var e,f;f=w.camelCase(c);c=w.cssProps[f]||(w.cssProps[f]=l(a.style,f));(f=w.cssHooks[c]||w.cssHooks[f])&&"get"in f&&(e=f.get(a,!0,b));e===g&&(e=ka(a,c));"normal"===e&&c in fb&&(e=fb[c]);return d||b!==g?(a=parseFloat(e),d||w.isNumeric(a)?a||0:e):e},swap:function(a,c,d){var b,e={};for(b in c)e[b]=a.style[b],a.style[b]=c[b];d=d.call(a);for(b in c)a.style[b]=e[b];return d}});b.getComputedStyle?
ka=function(a,c){var d,e,f,k,h=b.getComputedStyle(a,null),l=a.style;h&&(d=h.getPropertyValue(c)||h[c],""!==d||w.contains(a.ownerDocument,a)||(d=w.style(a,c)),Aa.test(d)&&eb.test(c)&&(e=l.width,f=l.minWidth,k=l.maxWidth,l.minWidth=l.maxWidth=l.width=d,d=h.width,l.width=e,l.minWidth=f,l.maxWidth=k));return d}:P.documentElement.currentStyle&&(ka=function(a,c){var d,b,e=a.currentStyle&&a.currentStyle[c],f=a.style;null==e&&f&&f[c]&&(e=f[c]);if(Aa.test(e)&&!Lb.test(c)){d=f.left;if(b=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=
a.currentStyle.left;f.left="fontSize"===c?"1em":e;e=f.pixelLeft+"px";f.left=d;b&&(a.runtimeStyle.left=b)}return""===e?"auto":e});w.each(["height","width"],function(a,c){w.cssHooks[c]={get:function(a,d,b){if(d)return 0===a.offsetWidth&&Mb.test(ka(a,"display"))?w.swap(a,Ob,function(){return B(a,c,b)}):B(a,c,b)},set:function(a,d,b){return n(a,d,b?x(a,c,b,w.support.boxSizing&&"border-box"===w.css(a,"boxSizing")):0)}}});w.support.opacity||(w.cssHooks.opacity={get:function(a,c){return Kb.test((c&&a.currentStyle?
a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":c?"1":""},set:function(a,c){var d=a.style,b=a.currentStyle,e=w.isNumeric(c)?"alpha(opacity="+100*c+")":"",f=b&&b.filter||d.filter||"";d.zoom=1;if(1<=c&&""===w.trim(f.replace(Pa,""))&&d.removeAttribute&&(d.removeAttribute("filter"),b&&!b.filter))return;d.filter=Pa.test(f)?f.replace(Pa,e):f+" "+e}});w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(a,c){return w.swap(a,{display:"inline-block"},function(){if(c)return ka(a,
"marginRight")})}});!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(a,c){w.cssHooks[c]={get:function(a,d){if(d){var b=ka(a,c);return Aa.test(b)?w(a).position()[c]+"px":b}}}})});w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!w.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ka(a,"display"))},w.expr.filters.visible=function(a){return!w.expr.filters.hidden(a)});w.each({margin:"",padding:"",border:"Width"},
function(a,c){w.cssHooks[a+c]={expand:function(d){var b="string"===typeof d?d.split(" "):[d],e={};for(d=0;4>d;d++)e[a+qa[d]+c]=b[d]||b[d-2]||b[0];return e}};eb.test(a)||(w.cssHooks[a+c].set=n)});var Qb=/%20/g,rb=/\[\]$/,gb=/\r?\n/g,Rb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Sb=/^(?:select|textarea)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
w.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Sb.test(this.nodeName)||Rb.test(this.type))}).map(function(a,c){var d=w(this).val();return null==d?null:w.isArray(d)?w.map(d,function(a,d){return{name:c.name,value:a.replace(gb,"\r\n")}}):{name:c.name,value:d.replace(gb,"\r\n")}}).get()}});w.param=function(a,c){var d,b=[],e=function(a,c){c=w.isFunction(c)?c():null==c?"":c;b[b.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)};c===g&&(c=w.ajaxSettings&&
w.ajaxSettings.traditional);if(w.isArray(a)||a.jquery&&!w.isPlainObject(a))w.each(a,function(){e(this.name,this.value)});else for(d in a)C(d,a[d],c,e);return b.join("&").replace(Qb,"+")};var ra,sa,Tb=/#.*$/,Ub=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Vb=/^(?:GET|HEAD)$/,Wb=/^\/\//,hb=/\?/,Xb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Yb=/([?&])_=[^&]*/,ib=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,jb=w.fn.load,Ia={},kb={},lb=["*/"]+["*"];try{sa=E.href}catch(ec){sa=P.createElement("a"),sa.href=
"",sa=sa.href}ra=ib.exec(sa.toLowerCase())||[];w.fn.load=function(a,c,d){if("string"!==typeof a&&jb)return jb.apply(this,arguments);if(!this.length)return this;var b,e,f,k=this,h=a.indexOf(" ");0<=h&&(b=a.slice(h,a.length),a=a.slice(0,h));w.isFunction(c)?(d=c,c=g):c&&"object"===typeof c&&(e="POST");w.ajax({url:a,type:e,dataType:"html",data:c,complete:function(a,c){d&&k.each(d,f||[a.responseText,c,a])}}).done(function(a){f=arguments;k.html(b?w("<div>").append(a.replace(Xb,"")).find(b):a)});return this};
w.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){w.fn[c]=function(a){return this.on(c,a)}});w.each(["get","post"],function(a,c){w[c]=function(a,d,b,e){w.isFunction(d)&&(e=e||b,b=d,d=g);return w.ajax({type:c,url:a,data:d,success:b,dataType:e})}});w.extend({getScript:function(a,c){return w.get(a,g,c,"script")},getJSON:function(a,c,d){return w.get(a,c,d,"json")},ajaxSetup:function(a,c){c?H(a,w.ajaxSettings):(c=a,a=w.ajaxSettings);H(a,c);return a},ajaxSettings:{url:sa,
isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(ra[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":lb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":b.String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},
flatOptions:{context:!0,url:!0}},ajaxPrefilter:D(Ia),ajaxTransport:D(kb),ajax:function(a,c){function d(a,c,f,l){var n,y,B,r,I=c;if(2!==z){z=2;h&&clearTimeout(h);k=g;e=l||"";A.readyState=0<a?4:0;if(f){r=s;l=A;var D,C,ga,K,F=r.contents,G=r.dataTypes,H=r.responseFields;for(C in H)C in f&&(l[H[C]]=f[C]);for(;"*"===G[0];)G.shift(),D===g&&(D=r.mimeType||l.getResponseHeader("content-type"));if(D)for(C in F)if(F[C]&&F[C].test(D)){G.unshift(C);break}if(G[0]in f)ga=G[0];else{for(C in f){if(!G[0]||r.converters[C+
" "+G[0]]){ga=C;break}K||(K=C)}ga=ga||K}ga?(ga!==G[0]&&G.unshift(ga),r=f[ga]):r=void 0}if(200<=a&&300>a||304===a)if(s.ifModified&&((f=A.getResponseHeader("Last-Modified"))&&(w.lastModified[b]=f),(f=A.getResponseHeader("Etag"))&&(w.etag[b]=f)),304===a)I="notmodified",n=!0;else{a:{y=s;B=r;var E,W,I=y.dataTypes.slice();D=I[0];C={};ga=0;y.dataFilter&&(B=y.dataFilter(B,y.dataType));if(I[1])for(E in y.converters)C[E.toLowerCase()]=y.converters[E];for(;f=I[++ga];)if("*"!==f){if("*"!==D&&D!==f){E=C[D+" "+
f]||C["* "+f];if(!E)for(W in C)if(n=W.split(" "),n[1]===f&&(E=C[D+" "+n[0]]||C["* "+n[0]])){!0===E?E=C[W]:!0!==C[W]&&(f=n[0],I.splice(ga--,0,f));break}if(!0!==E)if(E&&y["throws"])B=E(B);else try{B=E(B)}catch(O){n={state:"parsererror",error:E?O:"No conversion from "+D+" to "+f};break a}}D=f}n={state:"success",data:B}}I=n.state;y=n.data;B=n.error;n=!B}else if(B=I,!I||a)I="error",0>a&&(a=0);A.status=a;A.statusText=(c||I)+"";n?u.resolveWith(v,[y,I,A]):u.rejectWith(v,[A,I,B]);A.statusCode(q);q=g;m&&x.trigger("ajax"+
(n?"Success":"Error"),[A,s,n?y:B]);p.fireWith(v,[A,I]);m&&(x.trigger("ajaxComplete",[A,s]),--w.active||w.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=g);c=c||{};var b,e,f,k,h,l,m,n,s=w.ajaxSetup({},c),v=s.context||s,x=v!==s&&(v.nodeType||v instanceof w)?w(v):w.event,u=w.Deferred(),p=w.Callbacks("once memory"),q=s.statusCode||{},y={},B={},z=0,r="canceled",A={readyState:0,setRequestHeader:function(a,c){if(!z){var d=a.toLowerCase();a=B[d]=B[d]||a;y[a]=c}return this},getAllResponseHeaders:function(){return 2===
z?e:null},getResponseHeader:function(a){var c;if(2===z){if(!f)for(f={};c=Ub.exec(e);)f[c[1].toLowerCase()]=c[2];c=f[a.toLowerCase()]}return c===g?null:c},overrideMimeType:function(a){z||(s.mimeType=a);return this},abort:function(a){a=a||r;k&&k.abort(a);d(0,a);return this}};u.promise(A);A.success=A.done;A.error=A.fail;A.complete=p.add;A.statusCode=function(a){if(a){var c;if(2>z)for(c in a)q[c]=[q[c],a[c]];else c=a[A.status],A.always(c)}return this};s.url=((a||s.url)+"").replace(Tb,"").replace(Wb,ra[1]+
"//");s.dataTypes=w.trim(s.dataType||"*").toLowerCase().split(S);null==s.crossDomain&&(l=ib.exec(s.url.toLowerCase()),s.crossDomain=!(!l||l[1]===ra[1]&&l[2]===ra[2]&&(l[3]||("http:"===l[1]?80:443))==(ra[3]||("http:"===ra[1]?80:443))));s.data&&s.processData&&"string"!==typeof s.data&&(s.data=w.param(s.data,s.traditional));F(Ia,s,c,A);if(2===z)return A;m=s.global;s.type=s.type.toUpperCase();s.hasContent=!Vb.test(s.type);m&&0===w.active++&&w.event.trigger("ajaxStart");if(!s.hasContent&&(s.data&&(s.url+=
(hb.test(s.url)?"&":"?")+s.data,delete s.data),b=s.url,!1===s.cache)){l=w.now();var I=s.url.replace(Yb,"$1_="+l);s.url=I+(I===s.url?(hb.test(s.url)?"&":"?")+"_="+l:"")}(s.data&&s.hasContent&&!1!==s.contentType||c.contentType)&&A.setRequestHeader("Content-Type",s.contentType);s.ifModified&&(b=b||s.url,w.lastModified[b]&&A.setRequestHeader("If-Modified-Since",w.lastModified[b]),w.etag[b]&&A.setRequestHeader("If-None-Match",w.etag[b]));A.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?
s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+lb+"; q=0.01":""):s.accepts["*"]);for(n in s.headers)A.setRequestHeader(n,s.headers[n]);if(s.beforeSend&&(!1===s.beforeSend.call(v,A,s)||2===z))return A.abort();r="abort";for(n in{success:1,error:1,complete:1})A[n](s[n]);if(k=F(kb,s,c,A)){A.readyState=1;m&&x.trigger("ajaxSend",[A,s]);s.async&&0<s.timeout&&(h=setTimeout(function(){A.abort("timeout")},s.timeout));try{z=1,k.send(y,d)}catch(D){if(2>z)d(-1,D);else throw D;}}else d(-1,"No Transport");
return A},active:0,lastModified:{},etag:{}});var mb=[],Zb=/\?/,Ea=/(=)\?(?=&|$)|\?\?/,$b=w.now();w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=mb.pop()||w.expando+"_"+$b++;this[a]=!0;return a}});w.ajaxPrefilter("json jsonp",function(a,c,d){var e,f,k,h=a.data,l=a.url,m=!1!==a.jsonp,s=m&&Ea.test(l),n=m&&!s&&"string"===typeof h&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ea.test(h);if("jsonp"===a.dataTypes[0]||s||n)return e=a.jsonpCallback=w.isFunction(a.jsonpCallback)?
a.jsonpCallback():a.jsonpCallback,f=b[e],s?a.url=l.replace(Ea,"$1"+e):n?a.data=h.replace(Ea,"$1"+e):m&&(a.url+=(Zb.test(l)?"&":"?")+a.jsonp+"="+e),a.converters["script json"]=function(){k||w.error(e+" was not called");return k[0]},a.dataTypes[0]="json",b[e]=function(){k=arguments},d.always(function(){b[e]=f;a[e]&&(a.jsonpCallback=c.jsonpCallback,mb.push(e));k&&w.isFunction(f)&&f(k[0]);k=f=g}),"script"});w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){w.globalEval(a);return a}}});w.ajaxPrefilter("script",function(a){a.cache===g&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});w.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=P.head||P.getElementsByTagName("head")[0]||P.documentElement;return{send:function(b,e){c=P.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,
b){if(b||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=g,b||e(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var xa,Qa=b.ActiveXObject?function(){for(var a in xa)xa[a](0,1)}:!1,ac=0;w.ajaxSettings.xhr=b.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&G()))a:{try{a=new b.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}a=void 0}return a}:G;(function(a){w.extend(w.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(w.ajaxSettings.xhr());w.support.ajax&&w.ajaxTransport(function(a){if(!a.crossDomain||w.support.cors){var c;return{send:function(d,e){var f,k,h=a.xhr();a.username?h.open(a.type,a.url,a.async,a.username,a.password):h.open(a.type,a.url,a.async);if(a.xhrFields)for(k in a.xhrFields)h[k]=a.xhrFields[k];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType);a.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");try{for(k in d)h.setRequestHeader(k,
d[k])}catch(l){}h.send(a.hasContent&&a.data||null);c=function(d,b){var k,l,m,s,n;try{if(c&&(b||4===h.readyState))if(c=g,f&&(h.onreadystatechange=w.noop,Qa&&delete xa[f]),b)4!==h.readyState&&h.abort();else{k=h.status;m=h.getAllResponseHeaders();s={};(n=h.responseXML)&&n.documentElement&&(s.xml=n);try{s.text=h.responseText}catch(v){}try{l=h.statusText}catch(x){l=""}k||!a.isLocal||a.crossDomain?1223===k&&(k=204):k=s.text?200:404}}catch(u){b||e(-1,u)}s&&e(k,l,s,m)};a.async?4===h.readyState?setTimeout(c,
0):(f=++ac,Qa&&(xa||(xa={},w(b).unload(Qa)),xa[f]=c),h.onreadystatechange=c):c()},abort:function(){c&&c(0,1)}}}});var va,Fa,bc=/^(?:toggle|show|hide)$/,cc=RegExp("^(?:([-+])=|)("+da+")([a-z%]*)$","i"),dc=/queueHooks$/,Ba=[function(a,c,d){var b,e,f,k,h,l,m=this,s=a.style,n={},v=[],g=a.nodeType&&y(a);d.queue||(h=w._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,l=h.empty.fire,h.empty.fire=function(){h.unqueued||l()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--;w.queue(a,"fx").length||
h.empty.fire()})}));1===a.nodeType&&("height"in c||"width"in c)&&(d.overflow=[s.overflow,s.overflowX,s.overflowY],"inline"===w.css(a,"display")&&"none"===w.css(a,"float")&&(w.support.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?s.zoom=1:s.display="inline-block"));d.overflow&&(s.overflow="hidden",w.support.shrinkWrapBlocks||m.done(function(){s.overflow=d.overflow[0];s.overflowX=d.overflow[1];s.overflowY=d.overflow[2]}));for(b in c)f=c[b],bc.exec(f)&&(delete c[b],e=e||"toggle"===f,f!==(g?"hide":
"show")&&v.push(b));if(c=v.length)for(f=w._data(a,"fxshow")||w._data(a,"fxshow",{}),("hidden"in f)&&(g=f.hidden),e&&(f.hidden=!g),g?w(a).show():m.done(function(){w(a).hide()}),m.done(function(){var c;w.removeData(a,"fxshow",!0);for(c in n)w.style(a,c,n[c])}),b=0;b<c;b++)e=v[b],k=m.createTween(e,g?f[e]:0),n[e]=f[e]||w.style(a,e),e in f||(f[e]=k.start,g&&(k.end=k.start,k.start="width"===e||"height"===e?1:0))}],ya={"*":[function(a,c){var d,b,e=this.createTween(a,c),f=cc.exec(c),k=e.cur(),h=+k||0,l=1,
m=20;if(f){d=+f[2];b=f[3]||(w.cssNumber[a]?"":"px");if("px"!==b&&h){h=w.css(e.elem,a,!0)||d||1;do l=l||".5",h/=l,w.style(e.elem,a,h+b);while(l!==(l=e.cur()/k)&&1!==l&&--m)}e.unit=b;e.start=h;e.end=f[1]?h+(f[1]+1)*d:d}return e}]};w.Animation=w.extend(K,{tweener:function(a,c){w.isFunction(a)?(c=a,a=["*"]):a=a.split(" ");for(var d,b=0,e=a.length;b<e;b++)d=a[b],ya[d]=ya[d]||[],ya[d].unshift(c)},prefilter:function(a,c){c?Ba.unshift(a):Ba.push(a)}});w.Tween=J;J.prototype={constructor:J,init:function(a,
c,d,b,e,f){this.elem=a;this.prop=d;this.easing=e||"swing";this.options=c;this.start=this.now=this.cur();this.end=b;this.unit=f||(w.cssNumber[d]?"":"px")},cur:function(){var a=J.propHooks[this.prop];return a&&a.get?a.get(this):J.propHooks._default.get(this)},run:function(a){var c,d=J.propHooks[this.prop];this.pos=this.options.duration?c=w.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):c=a;this.now=(this.end-this.start)*c+this.start;this.options.step&&this.options.step.call(this.elem,
this.now,this);d&&d.set?d.set(this):J.propHooks._default.set(this);return this}};J.prototype.init.prototype=J.prototype;J.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=w.css(a.elem,a.prop,!1,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(w.fx.step[a.prop])w.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[w.cssProps[a.prop]]||w.cssHooks[a.prop])?w.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};J.propHooks.scrollTop=
J.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};w.each(["toggle","show","hide"],function(a,c){var d=w.fn[c];w.fn[c]=function(b,e,f){return null==b||"boolean"===typeof b||!a&&w.isFunction(b)&&w.isFunction(e)?d.apply(this,arguments):this.animate(N(c,!0),b,e,f)}});w.fn.extend({fadeTo:function(a,c,d,b){return this.filter(y).css("opacity",0).show().end().animate({opacity:c},a,d,b)},animate:function(a,c,d,b){var e=w.isEmptyObject(a),f=w.speed(c,d,b);
c=function(){var c=K(this,w.extend({},a),f);e&&c.stop(!0)};return e||!1===f.queue?this.each(c):this.queue(f.queue,c)},stop:function(a,c,d){var b=function(a){var c=a.stop;delete a.stop;c(d)};"string"!==typeof a&&(d=c,c=a,a=g);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var c=!0,e=null!=a&&a+"queueHooks",f=w.timers,k=w._data(this);if(e)k[e]&&k[e].stop&&b(k[e]);else for(e in k)k[e]&&k[e].stop&&dc.test(e)&&b(k[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(d),
c=!1,f.splice(e,1));!c&&d||w.dequeue(this,a)})}});w.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){w.fn[a]=function(a,d,b){return this.animate(c,a,d,b)}});w.speed=function(a,c,d){var b=a&&"object"===typeof a?w.extend({},a):{complete:d||!d&&c||w.isFunction(a)&&a,duration:a,easing:d&&c||c&&!w.isFunction(c)&&c};b.duration=w.fx.off?0:"number"===typeof b.duration?b.duration:b.duration in w.fx.speeds?
w.fx.speeds[b.duration]:w.fx.speeds._default;if(null==b.queue||!0===b.queue)b.queue="fx";b.old=b.complete;b.complete=function(){w.isFunction(b.old)&&b.old.call(this);b.queue&&w.dequeue(this,b.queue)};return b};w.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};w.timers=[];w.fx=J.prototype.init;w.fx.tick=function(){var a,c=w.timers,d=0;for(va=w.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||w.fx.stop();va=g};w.fx.timer=function(a){a()&&
w.timers.push(a)&&!Fa&&(Fa=setInterval(w.fx.tick,w.fx.interval))};w.fx.interval=13;w.fx.stop=function(){clearInterval(Fa);Fa=null};w.fx.speeds={slow:600,fast:200,_default:400};w.fx.step={};w.expr&&w.expr.filters&&(w.expr.filters.animated=function(a){return w.grep(w.timers,function(c){return a===c.elem}).length});var nb=/^(?:body|html)$/i;w.fn.offset=function(a){if(arguments.length)return a===g?this:this.each(function(c){w.offset.setOffset(this,a,c)});var c,d,b,e,f,k={top:0,left:0};if(b=(e=this[0])&&
e.ownerDocument){if((d=b.body)===e)return w.offset.bodyOffset(e);c=b.documentElement;if(!w.contains(c,e))return k;"undefined"!==typeof e.getBoundingClientRect&&(k=e.getBoundingClientRect());b=L(b);e=c.clientTop||d.clientTop||0;d=c.clientLeft||d.clientLeft||0;f=b.pageYOffset||c.scrollTop;c=b.pageXOffset||c.scrollLeft;return{top:k.top+f-e,left:k.left+c-d}}};w.offset={bodyOffset:function(a){var c=a.offsetTop,d=a.offsetLeft;w.support.doesNotIncludeMarginInBodyOffset&&(c+=parseFloat(w.css(a,"marginTop"))||
0,d+=parseFloat(w.css(a,"marginLeft"))||0);return{top:c,left:d}},setOffset:function(a,c,d){var b=w.css(a,"position");"static"===b&&(a.style.position="relative");var e=w(a),f=e.offset(),k=w.css(a,"top"),h=w.css(a,"left"),l={},m={};("absolute"===b||"fixed"===b)&&-1<w.inArray("auto",[k,h])?(m=e.position(),b=m.top,h=m.left):(b=parseFloat(k)||0,h=parseFloat(h)||0);w.isFunction(c)&&(c=c.call(a,d,f));null!=c.top&&(l.top=c.top-f.top+b);null!=c.left&&(l.left=c.left-f.left+h);"using"in c?c.using.call(a,l):
e.css(l)}};w.fn.extend({position:function(){if(this[0]){var a=this[0],c=this.offsetParent(),d=this.offset(),b=nb.test(c[0].nodeName)?{top:0,left:0}:c.offset();d.top-=parseFloat(w.css(a,"marginTop"))||0;d.left-=parseFloat(w.css(a,"marginLeft"))||0;b.top+=parseFloat(w.css(c[0],"borderTopWidth"))||0;b.left+=parseFloat(w.css(c[0],"borderLeftWidth"))||0;return{top:d.top-b.top,left:d.left-b.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||P.body;a&&!nb.test(a.nodeName)&&
"static"===w.css(a,"position");)a=a.offsetParent;return a||P.body})}});w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);w.fn[a]=function(b){return w.access(this,function(a,b,e){var f=L(a);if(e===g)return f?c in f?f[c]:f.document.documentElement[b]:a[b];f?f.scrollTo(d?w(f).scrollLeft():e,d?e:w(f).scrollTop()):a[b]=e},a,b,arguments.length,null)}});w.each({Height:"height",Width:"width"},function(a,c){w.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,
b){w.fn[b]=function(b,e){var f=arguments.length&&(d||"boolean"!==typeof b),k=d||(!0===b||!0===e?"margin":"border");return w.access(this,function(c,d,b){return w.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(d=c.documentElement,Math.max(c.body["scroll"+a],d["scroll"+a],c.body["offset"+a],d["offset"+a],d["client"+a])):b===g?w.css(c,d,b,k):w.style(c,d,b,k)},c,f?b:g,f,null)}})});b.jQuery=b.$=w;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return w})})(window);
define("lib/clone",["require"],function(b){return function(b){return JSON.parse(JSON.stringify(b))}});define("config",["require","lib/clone"],function(b){var g=b("lib/clone"),r={};"undefined"!==typeof Desmos&&Desmos.config&&(r=g(Desmos.config));b=location.search.match(/desmos_config=([^&]+)/);null!==b&&(r=JSON.parse(decodeURIComponent(b[1])));return{get:function(b){return r[b]},use:function(b,q){var p=g(r),u;for(u in b)r[u]=b[u];try{q()}finally{r=p}},all:function(){return g(r)}}});
define("pjs",[],function(){return function(b,g,r){function v(b){return"function"===typeof b}function q(){}function p(u,a){function m(){var a=new c;v(a.init)&&a.init.apply(a,arguments);return a}function c(){}a===r&&(a=u,u=Object);m.Bare=c;var f=q[b]=u[b],e=c[b]=m[b]=new q,h;e.constructor=m;m.mixin=function(a){c[b]=m[b]=p(m,a)[b];return m};return(m.open=function(a){h={};v(a)?h=a.call(m,e,f,m,u):"object"===typeof a&&(h=a);if("object"===typeof h)for(var c in h)g.call(h,c)&&(e[c]=h[c]);v(e.init)||(e.init=
u);return m})(a)}return p}("prototype",{}.hasOwnProperty)});
define("math/builtin",["require"],function(b){var g={mod:function(b,g){return b-g*Math.floor(b/g)},min:function(b,g){return b<g?b:g},max:function(b,g){return b>g?b:g},sign:function(b){return 0===b?0:0<b?1:0>b?-1:NaN},lcm:function(b,q){b=g.smartTruncate(b);q=g.smartTruncate(q);var p=g.getGCD(b,q);return Math.abs(b*q/p)},gcd:function(b,q){return g.getGCD(b,q)},nCr:function(b,q){b=g.smartTruncate(b);q=g.smartTruncate(q);if(q>b||0>b||0>q)return 0;for(var p=1,u=0;u<q;u++)p*=(b-u)/(u+1);return p},nPr:function(b,
q){b=g.smartTruncate(b);q=g.smartTruncate(q);if(q>b||0>b||0>q)return 0;for(var p=1,u=0;u<q;u++)p*=b-u;return p},factorial:function(b){return g.gamma(b+1)},_integerFactorial:function(b){if(b!==Math.floor(b)||0>b||170<b)return NaN;if(0===b||1===b)return 1;for(var g=1,p=2;p<=b;p++)g*=p;return g},gamma:function(b){return b===Math.floor(b)?g._integerFactorial(b-1):0>b?Math.PI/(Math.sin(Math.PI*b)*g.gamma(1-b)):Math.exp(g.lnGamma(b))},lnGamma:function(b){if(0>b)return NaN;for(var g=[57.15623566586292,-59.59796035547549,
14.136097974741746,-0.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6],p=0.9999999999999971,u=0;14>u;u++)p+=g[u]/(b+u+1);g=b+5.2421875;return(b+0.5)*Math.log(g)-g+Math.log(2.5066282746310007*p/b)},bernoulliTable:[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-86580.25311355312,
8553103/6,-2.7298231067816094E7],cotDerivative:function(b,q){if(b!==Math.floor(b)||0>b)return NaN;if(0===b)return 1/g.tan(q);var p=g.sin(q);if(1===b)return-1/(p*p);var u=g.cos(q);if(2===b)return 2*u/(p*p*p);var a=[0,2],m,c,f,e,h;for(c=3;c<=b;c++){m=[];for(f=0;f<c;f++)h=e=0,0<f&&(e=(c-f+1)*a[f-1]),f+2<c&&(h=(f+1)*a[f+1]),m.push(-(e+h));a=m}a=0;for(f=b-1;0<=f;f--)a=m[f]+u*a;return a/Math.pow(p,b+1)},polyGamma:function(b,q){if(0>b||b!==Math.floor(b))return NaN;var p=0===b%2?-1:1;if(0>q)return-p*g.polyGamma(b,
1-q)-Math.pow(Math.PI,b+1)*g.cotDerivative(b,Math.PI*q);for(var u=g.factorial(b),a=0,m=Math.pow(q,-(b+1));10>q;)a+=m,q++,m=Math.pow(q,-(b+1));for(var a=a+(0===b?-Math.log(q):m*q/b),a=a+0.5*m,c=g.bernoulliTable,f=b+1,e=2,m=m*q*f/e,h=1/(q*q),d=1;14>=d;d++)m*=h,a+=m*c[d-1],f++,e++,m*=f/e,f++,e++,m*=f/e;return u*p*a},getGCD:function(b,q){var p=g.smartTruncate(b),u=g.smartTruncate(q);0>p&&(p=-p);0>u&&(u=-u);if(u>p)var a=u,u=p,p=a;if(0===u)return p;for(a=p%u;0<a;)p=u,u=a,a=p%u;return u},toFraction:function(b,
g){if(Infinity===b)return{n:Infinity,d:1};if(-Infinity===b)return{n:-Infinity,d:1};if(!isFinite(b))return{n:NaN,d:1};var p,u=0,a=1,m=1,c=0,f,e;for(g||(g=1E6);;){p=Math.floor(b);f=p*a+u;e=p*c+m;if(e>g)break;u=a;m=c;a=f;c=e;if(b===p)break;b=1/(b-p)}return{n:a,d:c}},approx:function(b,g,p){var u=Math.max(Math.max(Math.abs(b),Math.abs(g)),1);p=void 0===p?0.5:Math.pow(0.5,p);return u===u+p*Math.abs(g-b)},smartTruncate:function(b){return 0>b?Math.ceil(b):Math.floor(b)},log_base:function(b,g){return Math.log(b)/
Math.log(g)},pow:function(b,q){if(0<=b||q===Math.floor(q))return Math.pow(b,q);var p=g.toFraction(q,100);return g.approx(p.n/p.d,q,2)&&1===p.d%2?(0===p.n%2?1:-1)*Math.pow(-b,q):NaN},nthroot:function(b,q){return g.pow(b,1/q)}},r=1/Math.PI;g.sin=function(b){return 0===2*r*b%2?0:Math.sin(b)};g.cos=function(b){return 1===Math.abs(2*r*b%2)?0:Math.cos(b)};g.tan=function(b){return 0===2*r*b%2?0:1===Math.abs(2*r*b%2)?Infinity:Math.tan(b)};g.sec=function(b){return 1===Math.abs(2*r*b%2)?Infinity:1/Math.cos(b)};
g.csc=function(b){return 0===2*r*b%2?Infinity:1/Math.sin(b)};g.cot=function(b){return 0===2*r*b%2?Infinity:1===Math.abs(2*r*b%2)?0:1/Math.tan(b)};g.acot=function(b){return Math.PI/2-Math.atan(b)};g.acsc=function(b){return Math.asin(1/b)};g.asec=function(b){return Math.acos(1/b)};g.sinh=function(b){return(Math.exp(b)-Math.exp(-b))/2};g.cosh=function(b){return(Math.exp(b)+Math.exp(-b))/2};g.tanh=function(b){return 0<b?(1-Math.exp(-2*b))/(1+Math.exp(-2*b)):(Math.exp(2*b)-1)/(Math.exp(2*b)+1)};g.sech=
function(b){return 1/g.cosh(b)};g.csch=function(b){return 1/g.sinh(b)};g.coth=function(b){return 1/g.tanh(b)};g.asinh=function(b){return Math.log(b+Math.sqrt(b*b+1))};g.acosh=function(b){return Math.log(b+Math.sqrt(b+1)*Math.sqrt(b-1))};g.atanh=function(b){return 0.5*Math.log((1+b)/(1-b))};g.asech=function(b){return Math.log(1/b+Math.sqrt(1/b+1)*Math.sqrt(1/b-1))};g.acsch=function(b){return Math.log(1/b+Math.sqrt(1/(b*b)+1))};g.acoth=function(b){return 0.5*Math.log((b+1)/(b-1))};return g});
define("math/evalframe",["require","pjs"],function(b){var g=b("pjs")(function(b){b.init=function(b){this.parentFrame=b instanceof g?b:null;this.variables={};this.functions={};this.evalStrings={};this.definitionIds={};if(this.parentFrame)for(var q in this.parentFrame.evalStrings)this.evalStrings[q]=this.parentFrame.getEvalStrings(q)};b.setVariable=function(b,g){this.variables[b]=g};b.getVariable=function(b){if(this.variables.hasOwnProperty(b))return this.variables[b];if(this.parentFrame)return this.parentFrame.getVariable(b);
throw"Variable '"+b+"' not defined";};b.setDefinitionId=function(b,g){this.definitionIds[b]=g};b.getDefinitionId=function(b){return this.definitionIds[b]};b.setFunction=function(b,g,p,u,a,m){this.functions[b]={arity:g,body:p,tree:u,source:m,args:a}};b.hasFunction=function(b){return this.functions.hasOwnProperty(b)?!0:this.parentFrame?this.parentFrame.hasFunction(b):!1};b.hasFunctionWithArity=function(b,g){return this.functions.hasOwnProperty(b)&&this.functions[b].arity==g?!0:this.parentFrame?this.parentFrame.hasFunction(b):
!1};b.hasVariable=function(b){return this.variables.hasOwnProperty(b)?!0:this.parentFrame?this.parentFrame.hasVariable(b):!1};b.getFunctionTree=function(b){if(this.functions.hasOwnProperty(b))return this.functions[b].tree;if(this.parentFrame)return this.parentFrame.getFunctionTree(b);throw"Function '"+b+"' not defined";};b.callFunction=function(b,g){if(this.functions.hasOwnProperty(b)){var p=this.functions[b];if(p.arity==g.length)return p.body.apply(null,g);throw"Function "+b+" expects "+p.arity+
" arguments, but was called with "+g.length;}if(this.parentFrame)return this.parentFrame.callFunction(b,g);throw"Function '"+b+"' not defined";};b.defines=function(b){return this.hasVariable(b)||this.hasFunction(b)};b.arity=function(b){if(this.hasVariable(b))return 0;if(this.hasFunction(b))return this.functions[b].arity;if(this.parentFrame)return this.parentFrame.arity(b)};b.setEvalStrings=function(b,g){this.evalStrings[b]=g};b.getEvalStrings=function(b){return this.evalStrings.hasOwnProperty(b)?
this.evalStrings[b]:{expression:b,statements:""}};b.functionMap=function(b){var g={};this.parentFrame&&!b&&(g=this.parentFrame.functionMap());for(var p in this.functions)this.functions.hasOwnProperty(p)&&(g[p]=this.functions[p].body);return g};b.leafFunctionMap=function(){return this.functionMap(!0)};b.functionSourceMap=function(b){var g={};this.parentFrame&&!b&&(g=this.parentFrame.functionSourceMap());for(var p in this.functions)this.functions.hasOwnProperty(p)&&this.functions[p].source&&(g[p]={args:this.functions[p].args,
source:this.functions[p].source});return g};b.leafFunctionSourceMap=function(){return this.functionSourceMap(!0)}});return g});
define("math/comparators",["require"],function(b){return{table:{"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},get:function(b,r){switch(r){case -1:return b?"<=":"<";case 0:return b?"=":"!=";case 1:return b?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1";}}}});
define("parser",[],function(){var b={trace:function(){},yy:{},symbols_:{error:2,sentence:3,expr:4,EOF:5,assignment:6,equation:7,function_declaration:8,ordered_pair_list:9,double_inequality:10,"boolean":11,identifier:12,"=":13,FUNCTION_PROTOTYPE:14,",":15,comparator:16,IDENTIFIER_BASE:17,ordered_pair_list_elements:18,ordered_pair:19,"[":20,"]":21,"(":22,")":23,expr_sum:24,"<":25,">":26,">=":27,"<=":28,"+":29,expr_product:30,"-":31,expr_atom_impmul:32,"*":33,expr_atom:34,"/":35,exponent:36,"^N":37,
"^I":38,"^":39,"{":40,"}":41,function_call:42,function_call_unary:43,trig_function_call:44,log_function_call:45,"left|":46,"right|":47,FRAC:48,SQRT:49,"!":50,repeated_operator:51,DERIVATIVE:52,expr_piecewise:53,constant:54,NUMBER:55,repeated_operator_symbol:56,SUM:57,PROD:58,_:59,"{_visible":60,piecewise_list:61,"}_visible":62,incomplete_piecewise_list:63,piecewise_element:64,":":65,trig_function:66,TRIG_FUNCTION:67,log_prefix:68,LN:69,LOG:70,LOG_BASE_N:71,function_argument_list:72,$accept:0,$end:1},
terminals_:{2:"error",5:"EOF",13:"=",14:"FUNCTION_PROTOTYPE",15:",",17:"IDENTIFIER_BASE",20:"[",21:"]",22:"(",23:")",25:"<",26:">",27:">=",28:"<=",29:"+",31:"-",33:"*",35:"/",37:"^N",38:"^I",39:"^",40:"{",41:"}",46:"left|",47:"right|",48:"FRAC",49:"SQRT",50:"!",52:"DERIVATIVE",55:"NUMBER",57:"SUM",58:"PROD",59:"_",60:"{_visible",62:"}_visible",65:":",67:"TRIG_FUNCTION",69:"LN",70:"LOG",71:"LOG_BASE_N"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,3],[3,2],[3,4],[3,1],[6,3],[6,3],[7,
3],[10,5],[12,1],[9,1],[18,1],[18,3],[19,5],[19,5],[4,1],[16,1],[16,1],[16,1],[16,1],[11,3],[11,3],[11,5],[24,3],[24,3],[24,1],[30,2],[30,3],[30,3],[30,1],[36,1],[36,1],[36,4],[32,1],[32,1],[32,1],[32,1],[32,1],[32,3],[32,3],[32,3],[32,2],[32,7],[32,4],[32,7],[32,2],[32,1],[32,2],[32,1],[34,1],[34,3],[34,2],[34,2],[34,2],[34,1],[56,1],[56,1],[51,9],[53,3],[53,2],[61,3],[61,1],[63,3],[63,1],[64,3],[64,1],[54,1],[54,2],[43,5],[43,4],[66,1],[44,4],[44,2],[44,7],[44,9],[44,3],[44,5],[68,1],[68,1],[68,
1],[68,3],[68,5],[45,4],[45,2],[45,5],[45,3],[42,4],[72,3],[72,3],[8,2]],performAction:function(b,g,q,p,u,a,m){g=a.length-1;switch(u){case 1:return a[g-1];case 2:return a[g-1];case 3:return a[g-1];case 4:return a[g-1];case 5:return a[g-1];case 6:return a[g-1];case 7:return a[g-1];case 8:return p.ErrorNode("What do you want variable '"+a[g-2].identifier+"' to equal?");case 9:return b=p.parseFunctionDeclaration(a[g-1]),p.ErrorNode("What do you want function '"+b.identifier.identifier+"' to equal?");
case 10:return p.ErrorNode("Points are written like this: (1, 2)");case 11:return p.ErrorNode("You haven't written anything yet");case 12:this.$=p.AssignmentNode(a[g-2],a[g]);break;case 13:this.$=p.AssignmentNode(a[g-2],p.ErrorNode);break;case 14:this.$=p.EquationNode(a[g-2],a[g]);break;case 15:this.$=p.DoubleInequalityNode(a[g-4],a[g-3],a[g-2],a[g-1],a[g]);break;case 16:this.$=p.IdentifierNode(b);p.setInput(this.$,this._$);break;case 17:this.$=p.OrderedPairListNode(a[g]);break;case 18:this.$=[a[g]];
break;case 19:a[g-2].push(a[g]);this.$=a[g-2];break;case 20:this.$=p.OrderedPairNode(a[g-3],a[g-1]);break;case 21:this.$=p.OrderedPairNode(a[g-3],a[g-1]);break;case 22:this.$=a[g];p.setInput(this.$,this._$);break;case 23:this.$="<";break;case 24:this.$=">";break;case 25:this.$=">=";break;case 26:this.$="<=";break;case 27:this.$=p.ComparatorNode(a[g-1],a[g-2],a[g]);break;case 28:this.$=p.ComparatorNode("===",a[g-2],a[g]);break;case 29:this.$=p.ChainedComparatorNode([a[g-3],a[g-1]],[a[g-4],a[g-2],a[g]]);
break;case 30:this.$=p.BinaryOperatorNode("+",a[g-2],a[g]);break;case 31:this.$=p.BinaryOperatorNode("-",a[g-2],a[g]);break;case 32:this.$=a[g];break;case 33:this.$=p.BinaryOperatorNode("*",a[g-1],a[g]);break;case 34:this.$=p.BinaryOperatorNode("*",a[g-2],a[g]);break;case 35:this.$=p.BinaryOperatorNode("/",a[g-2],a[g]);break;case 36:this.$=a[g];break;case 37:this.$=p.ConstantNode(Number(a[g]));break;case 38:this.$=p.IdentifierNode(a[g]);break;case 39:this.$=a[g-1];break;case 40:this.$=a[g];break;
case 41:this.$=a[g];break;case 42:this.$=a[g];break;case 43:this.$=a[g];break;case 44:this.$=a[g];break;case 45:this.$=a[g-1];break;case 46:this.$=a[g-1];break;case 47:this.$=p.FunctionNode(p.IdentifierNode("\\abs"),[a[g-1]]);break;case 48:this.$=p.BinaryOperatorNode("^",a[g-1],a[g]);break;case 49:this.$=p.BinaryOperatorNode("/",a[g-4],a[g-1]);break;case 50:this.$=p.FunctionNode(p.IdentifierNode("\\sqrt"),[a[g-1]]);break;case 51:this.$=p.FunctionNode(p.IdentifierNode("\\nthroot"),[a[g-1],a[g-4]]);
break;case 52:this.$=p.FunctionNode(p.IdentifierNode("\\factorial"),[a[g-1]]);break;case 53:this.$=a[g];break;case 54:this.$=p.DerivativeNode(p.IdentifierNode(a[g-1]),a[g]);break;case 55:this.$=a[g];break;case 56:this.$=a[g];break;case 57:this.$=p.NegationNode(p.BinaryOperatorNode("^",p.ConstantNode(Number(a[g-1])),a[g]));break;case 58:this.$=p.BinaryOperatorNode("^",a[g-1],a[g]);break;case 59:this.$=p.FunctionNode(p.IdentifierNode("\\factorial"),[a[g-1]]);break;case 60:this.$=p.NegationNode(a[g]);
break;case 61:this.$=a[g];break;case 62:this.$=p.SummationNode;break;case 63:this.$=p.ProductNode;break;case 64:this.$=a[g-8](a[g-5],a[g-3],a[g-1],a[g]);break;case 65:this.$=a[g-1];break;case 66:this.$=p.ConstantNode(1);break;case 67:this.$=a[g-2].append_else(p.PiecewiseNode(p.ConstantNode(!0),a[g]));break;case 68:this.$=a[g];break;case 69:this.$=a[g-2].append_else(a[g]);break;case 70:this.$=a[g];break;case 71:this.$=p.PiecewiseNode(a[g-2],a[g]);break;case 72:this.$=p.PiecewiseNode(a[g],p.ConstantNode(1));
break;case 73:this.$=p.ConstantNode(Number(b));break;case 74:this.$=p.ConstantNode(-a[g]);break;case 75:this.$=p.FunctionCallExponentNode(a[g-4],a[g-2],a[g]);break;case 76:this.$=p.FunctionNode(a[g-3],[a[g-1]]);break;case 77:this.$=p.IdentifierNode(b);break;case 78:this.$=p.FunctionNode(a[g-3],[a[g-1]]);break;case 79:if(!a[g].okForImplicitFunction())throw"Too complicated.  Use parens";this.$=p.FunctionNode(a[g-1],[a[g]]);break;case 80:if(!a[g].okForImplicitFunction())throw"Too complicated.  Use parens";
if(1!=a[g-2].value)throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=p.FunctionNode(p.IdentifierNode(p.inverses[a[g-6].identifier]),[a[g]]);break;case 81:if(1!=a[g-4].value)throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=p.FunctionNode(p.IdentifierNode(p.inverses[a[g-8].identifier]),[a[g-1]]);break;case 82:if(!a[g].okForImplicitFunction())throw"Too complicated.  Use parens";if("2"!=a[g-1])throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";
this.$=p.BinaryOperatorNode("^",p.FunctionNode(a[g-2],[a[g]]),p.ConstantNode(2));break;case 83:if("2"!=a[g-3])throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=p.BinaryOperatorNode("^",p.FunctionNode(a[g-4],[a[g-1]]),p.ConstantNode(2));break;case 84:this.$=p.ConstantNode(Math.E);break;case 85:this.$=p.ConstantNode(10);break;case 86:this.$=p.ConstantNode(Number(b));break;case 87:this.$=a[g];break;case 88:this.$=a[g-1];break;case 89:this.$=p.FunctionNode(p.IdentifierNode("log"),
[a[g-1],a[g-3]]);break;case 90:if(!a[g].okForImplicitFunction())throw"Too complicated.  Use parens";this.$=p.FunctionNode(p.IdentifierNode("log"),[a[g],a[g-1]]);break;case 91:if("2"!=a[g-3])throw"Only log^2 is supported.  Use parens";this.$=p.BinaryOperatorNode("^",p.FunctionNode(p.IdentifierNode("log"),[a[g-1],a[g-4]]),p.ConstantNode(2));break;case 92:if(!a[g].okForImplicitFunction())throw"Too complicated.  Use parens";if("2"!=a[g-1])throw"Only log^2 is supported.  Use parens";this.$=p.BinaryOperatorNode("^",
p.FunctionNode(p.IdentifierNode("log"),[a[g],a[g-2]]),p.ConstantNode(2));break;case 93:this.$=p.FunctionNode(a[g-3],a[g-1]);break;case 94:this.$=a[g-2].concat([a[g]]);break;case 95:this.$=[a[g-2],a[g]];break;case 96:b=p.parseFunctionDeclaration(a[g-1]),this.$=p.FunctionDeclarationNode(b.identifier,b.args,a[g]),this.$.setInputString(b.input_string)}},table:[{3:1,4:2,5:[1,11],6:3,7:4,8:5,9:6,10:7,11:8,12:9,14:[1,10],17:[1,14],18:13,19:16,20:[1,18],22:[1,19],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],
42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{1:[3]},{5:[1,45],13:[1,47],15:[1,46],16:48,25:[1,49],26:[1,50],27:[1,51],28:[1,52]},{5:[1,53]},{5:[1,54]},{5:[1,55]},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[2,40],13:[1,59],15:[2,40],17:[2,40],22:[1,60],25:[2,40],26:[2,40],27:[2,40],28:[2,40],29:[2,40],31:[2,40],33:[2,40],35:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],
46:[2,40],48:[2,40],49:[2,40],50:[2,40],52:[2,40],57:[2,40],58:[2,40],60:[2,40],67:[2,40],69:[2,40],70:[2,40],71:[2,40]},{4:62,5:[1,61],12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{1:[2,11]},{5:[2,22],13:[2,22],15:[2,22],17:[2,22],21:[2,22],22:[2,22],23:[2,22],25:[2,22],26:[2,22],27:[2,22],28:[2,
22],29:[1,65],31:[1,66],33:[2,22],35:[2,22],37:[2,22],38:[2,22],39:[2,22],40:[2,22],41:[2,22],46:[2,22],47:[2,22],48:[2,22],49:[2,22],50:[2,22],52:[2,22],57:[2,22],58:[2,22],60:[2,22],62:[2,22],65:[2,22],67:[2,22],69:[2,22],70:[2,22],71:[2,22]},{5:[2,17],15:[1,67]},{5:[2,16],13:[2,16],15:[2,16],17:[2,16],21:[2,16],22:[2,16],23:[2,16],25:[2,16],26:[2,16],27:[2,16],28:[2,16],29:[2,16],31:[2,16],33:[2,16],35:[2,16],37:[2,16],38:[2,16],39:[2,16],40:[2,16],41:[2,16],46:[2,16],47:[2,16],48:[2,16],49:[2,
16],50:[2,16],52:[2,16],55:[2,16],57:[2,16],58:[2,16],60:[2,16],62:[2,16],65:[2,16],67:[2,16],69:[2,16],70:[2,16],71:[2,16]},{5:[2,32],12:63,13:[2,32],15:[2,32],17:[1,14],21:[2,32],22:[1,64],23:[2,32],25:[2,32],26:[2,32],27:[2,32],28:[2,32],29:[2,32],31:[2,32],32:68,33:[1,69],35:[1,70],37:[2,32],38:[2,32],39:[2,32],40:[1,28],41:[2,32],42:24,43:25,44:26,45:27,46:[1,29],47:[2,32],48:[1,30],49:[1,31],50:[2,32],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,32],65:[2,32],66:35,67:[1,
39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,18],15:[2,18]},{5:[2,36],13:[2,36],15:[2,36],17:[2,36],21:[2,36],22:[2,36],23:[2,36],25:[2,36],26:[2,36],27:[2,36],28:[2,36],29:[2,36],31:[2,36],33:[2,36],35:[2,36],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,36],41:[2,36],46:[2,36],47:[2,36],48:[2,36],49:[2,36],50:[1,72],52:[2,36],57:[2,36],58:[2,36],60:[2,36],62:[2,36],65:[2,36],67:[2,36],69:[2,36],70:[2,36],71:[2,36]},{4:76,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,
43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:77,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,56],13:[2,56],15:[2,56],17:[2,56],21:[2,56],22:[2,56],23:[2,56],
25:[2,56],26:[2,56],27:[2,56],28:[2,56],29:[2,56],31:[2,56],33:[2,56],35:[2,56],37:[2,56],38:[2,56],39:[2,56],40:[2,56],41:[2,56],46:[2,56],47:[2,56],48:[2,56],49:[2,56],50:[2,56],52:[2,56],57:[2,56],58:[2,56],60:[2,56],62:[2,56],65:[2,56],67:[2,56],69:[2,56],70:[2,56],71:[2,56]},{12:63,17:[1,14],22:[1,64],31:[1,21],32:22,34:79,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,78],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,
41],71:[1,42]},{5:[2,61],13:[2,61],15:[2,61],17:[2,61],21:[2,61],22:[2,61],23:[2,61],25:[2,61],26:[2,61],27:[2,61],28:[2,61],29:[2,61],31:[2,61],33:[2,61],35:[2,61],36:80,37:[1,73],38:[1,74],39:[1,75],40:[2,61],41:[2,61],46:[2,61],47:[2,61],48:[2,61],49:[2,61],50:[1,81],52:[2,61],57:[2,61],58:[2,61],60:[2,61],62:[2,61],65:[2,61],67:[2,61],69:[2,61],70:[2,61],71:[2,61]},{5:[2,73],13:[2,73],15:[2,73],17:[2,73],21:[2,73],22:[2,73],23:[2,73],25:[2,73],26:[2,73],27:[2,73],28:[2,73],29:[2,73],31:[2,73],
33:[2,73],35:[2,73],37:[2,73],38:[2,73],39:[2,73],40:[2,73],41:[2,73],46:[2,73],47:[2,73],48:[2,73],49:[2,73],50:[2,73],52:[2,73],57:[2,73],58:[2,73],60:[2,73],62:[2,73],65:[2,73],67:[2,73],69:[2,73],70:[2,73],71:[2,73]},{5:[2,41],13:[2,41],15:[2,41],17:[2,41],21:[2,41],22:[2,41],23:[2,41],25:[2,41],26:[2,41],27:[2,41],28:[2,41],29:[2,41],31:[2,41],33:[2,41],35:[2,41],37:[2,41],38:[2,41],39:[2,41],40:[2,41],41:[2,41],46:[2,41],47:[2,41],48:[2,41],49:[2,41],50:[2,41],52:[2,41],57:[2,41],58:[2,41],
60:[2,41],62:[2,41],65:[2,41],67:[2,41],69:[2,41],70:[2,41],71:[2,41]},{5:[2,42],13:[2,42],15:[2,42],17:[2,42],21:[2,42],22:[2,42],23:[2,42],25:[2,42],26:[2,42],27:[2,42],28:[2,42],29:[2,42],31:[2,42],33:[2,42],35:[2,42],37:[2,42],38:[2,42],39:[2,42],40:[2,42],41:[2,42],46:[2,42],47:[2,42],48:[2,42],49:[2,42],50:[2,42],52:[2,42],57:[2,42],58:[2,42],60:[2,42],62:[2,42],65:[2,42],67:[2,42],69:[2,42],70:[2,42],71:[2,42]},{5:[2,43],13:[2,43],15:[2,43],17:[2,43],21:[2,43],22:[2,43],23:[2,43],25:[2,43],
26:[2,43],27:[2,43],28:[2,43],29:[2,43],31:[2,43],33:[2,43],35:[2,43],37:[2,43],38:[2,43],39:[2,43],40:[2,43],41:[2,43],46:[2,43],47:[2,43],48:[2,43],49:[2,43],50:[2,43],52:[2,43],57:[2,43],58:[2,43],60:[2,43],62:[2,43],65:[2,43],67:[2,43],69:[2,43],70:[2,43],71:[2,43]},{5:[2,44],13:[2,44],15:[2,44],17:[2,44],21:[2,44],22:[2,44],23:[2,44],25:[2,44],26:[2,44],27:[2,44],28:[2,44],29:[2,44],31:[2,44],33:[2,44],35:[2,44],37:[2,44],38:[2,44],39:[2,44],40:[2,44],41:[2,44],46:[2,44],47:[2,44],48:[2,44],
49:[2,44],50:[2,44],52:[2,44],57:[2,44],58:[2,44],60:[2,44],62:[2,44],65:[2,44],67:[2,44],69:[2,44],70:[2,44],71:[2,44]},{4:82,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:83,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,
31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{40:[1,84]},{20:[1,86],40:[1,85]},{5:[2,53],13:[2,53],15:[2,53],17:[2,53],21:[2,53],22:[2,53],23:[2,53],25:[2,53],26:[2,53],27:[2,53],28:[2,53],29:[2,53],31:[2,53],33:[2,53],35:[2,53],37:[2,53],38:[2,53],39:[2,53],40:[2,53],41:[2,53],46:[2,53],47:[2,53],48:[2,53],49:[2,53],50:[2,53],52:[2,53],57:[2,53],58:[2,53],60:[2,53],62:[2,53],65:[2,53],67:[2,53],69:[2,53],70:[2,
53],71:[2,53]},{12:63,17:[1,14],22:[1,64],30:87,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,55],13:[2,55],15:[2,55],17:[2,55],21:[2,55],22:[2,55],23:[2,55],25:[2,55],26:[2,55],27:[2,55],28:[2,55],29:[2,55],31:[2,55],33:[2,55],35:[2,55],37:[2,55],38:[2,55],39:[2,55],40:[2,55],41:[2,55],46:[2,55],47:[2,55],48:[2,55],49:[2,55],
50:[2,55],52:[2,55],57:[2,55],58:[2,55],60:[2,55],62:[2,55],65:[2,55],67:[2,55],69:[2,55],70:[2,55],71:[2,55]},{12:63,17:[1,14],22:[1,88],30:89,31:[1,21],32:22,34:17,37:[1,91],39:[1,90],40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,92],30:93,31:[1,21],32:22,34:17,37:[1,94],40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,
31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{59:[1,95]},{4:101,11:100,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],61:96,62:[1,97],63:98,64:99,66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,77],22:[2,77],31:[2,77],37:[2,77],39:[2,77],40:[2,77],46:[2,
77],48:[2,77],49:[2,77],52:[2,77],55:[2,77],57:[2,77],58:[2,77],60:[2,77],67:[2,77],69:[2,77],70:[2,77],71:[2,77]},{17:[2,84],22:[2,84],31:[2,84],37:[2,84],40:[2,84],46:[2,84],48:[2,84],49:[2,84],52:[2,84],55:[2,84],57:[2,84],58:[2,84],60:[2,84],67:[2,84],69:[2,84],70:[2,84],71:[2,84]},{17:[2,85],22:[2,85],31:[2,85],37:[2,85],40:[2,85],46:[2,85],48:[2,85],49:[2,85],52:[2,85],55:[2,85],57:[2,85],58:[2,85],59:[1,102],60:[2,85],67:[2,85],69:[2,85],70:[2,85],71:[2,85]},{17:[2,86],22:[2,86],31:[2,86],
37:[2,86],40:[2,86],46:[2,86],48:[2,86],49:[2,86],52:[2,86],55:[2,86],57:[2,86],58:[2,86],60:[2,86],67:[2,86],69:[2,86],70:[2,86],71:[2,86]},{59:[2,62]},{59:[2,63]},{1:[2,1]},{4:103,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:104,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,
28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:106,12:105,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,23],22:[2,23],31:[2,23],40:[2,23],46:[2,23],48:[2,
23],49:[2,23],52:[2,23],55:[2,23],57:[2,23],58:[2,23],60:[2,23],67:[2,23],69:[2,23],70:[2,23],71:[2,23]},{17:[2,24],22:[2,24],31:[2,24],40:[2,24],46:[2,24],48:[2,24],49:[2,24],52:[2,24],55:[2,24],57:[2,24],58:[2,24],60:[2,24],67:[2,24],69:[2,24],70:[2,24],71:[2,24]},{17:[2,25],22:[2,25],31:[2,25],40:[2,25],46:[2,25],48:[2,25],49:[2,25],52:[2,25],55:[2,25],57:[2,25],58:[2,25],60:[2,25],67:[2,25],69:[2,25],70:[2,25],71:[2,25]},{17:[2,26],22:[2,26],31:[2,26],40:[2,26],46:[2,26],48:[2,26],49:[2,26],52:[2,
26],55:[2,26],57:[2,26],58:[2,26],60:[2,26],67:[2,26],69:[2,26],70:[2,26],71:[2,26]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{2:[1,109],4:108,5:[1,107],12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:111,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,
43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42],72:110},{1:[2,9]},{5:[2,96]},{5:[2,40],13:[2,40],15:[2,40],17:[2,40],21:[2,40],22:[1,60],23:[2,40],25:[2,40],26:[2,40],27:[2,40],28:[2,40],29:[2,40],31:[2,40],33:[2,40],35:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],41:[2,40],46:[2,40],47:[2,40],48:[2,40],49:[2,40],50:[2,40],52:[2,40],57:[2,40],58:[2,40],60:[2,40],62:[2,40],
65:[2,40],67:[2,40],69:[2,40],70:[2,40],71:[2,40]},{4:112,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,64],30:113,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],
66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,64],30:114,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{19:115,20:[1,18],22:[1,116]},{5:[2,33],13:[2,33],15:[2,33],17:[2,33],21:[2,33],22:[2,33],23:[2,33],25:[2,33],26:[2,33],27:[2,33],28:[2,33],29:[2,33],31:[2,33],33:[2,33],35:[2,33],36:80,37:[1,73],38:[1,
74],39:[1,75],40:[2,33],41:[2,33],46:[2,33],47:[2,33],48:[2,33],49:[2,33],50:[1,81],52:[2,33],57:[2,33],58:[2,33],60:[2,33],62:[2,33],65:[2,33],67:[2,33],69:[2,33],70:[2,33],71:[2,33]},{12:63,17:[1,14],22:[1,64],31:[1,21],32:22,34:117,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,64],31:[1,21],32:22,34:118,40:[1,28],42:24,43:25,44:26,
45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,58],13:[2,58],15:[2,58],17:[2,58],21:[2,58],22:[2,58],23:[2,58],25:[2,58],26:[2,58],27:[2,58],28:[2,58],29:[2,58],31:[2,58],33:[2,58],35:[2,58],37:[2,58],38:[2,58],39:[2,58],40:[2,58],41:[2,58],46:[2,58],47:[2,58],48:[2,58],49:[2,58],50:[2,58],52:[2,58],57:[2,58],58:[2,58],60:[2,58],62:[2,58],65:[2,58],67:[2,58],69:[2,58],70:[2,58],
71:[2,58]},{5:[2,59],13:[2,59],15:[2,59],17:[2,59],21:[2,59],22:[2,59],23:[2,59],25:[2,59],26:[2,59],27:[2,59],28:[2,59],29:[2,59],31:[2,59],33:[2,59],35:[2,59],37:[2,59],38:[2,59],39:[2,59],40:[2,59],41:[2,59],46:[2,59],47:[2,59],48:[2,59],49:[2,59],50:[2,59],52:[2,59],57:[2,59],58:[2,59],60:[2,59],62:[2,59],65:[2,59],67:[2,59],69:[2,59],70:[2,59],71:[2,59]},{5:[2,37],13:[2,37],15:[2,37],17:[2,37],21:[2,37],22:[2,37],23:[2,37],25:[2,37],26:[2,37],27:[2,37],28:[2,37],29:[2,37],31:[2,37],33:[2,37],
35:[2,37],37:[2,37],38:[2,37],39:[2,37],40:[2,37],41:[2,37],46:[2,37],47:[2,37],48:[2,37],49:[2,37],50:[2,37],52:[2,37],55:[2,37],57:[2,37],58:[2,37],60:[2,37],62:[2,37],65:[2,37],67:[2,37],69:[2,37],70:[2,37],71:[2,37]},{5:[2,38],13:[2,38],15:[2,38],17:[2,38],21:[2,38],22:[2,38],23:[2,38],25:[2,38],26:[2,38],27:[2,38],28:[2,38],29:[2,38],31:[2,38],33:[2,38],35:[2,38],37:[2,38],38:[2,38],39:[2,38],40:[2,38],41:[2,38],46:[2,38],47:[2,38],48:[2,38],49:[2,38],50:[2,38],52:[2,38],55:[2,38],57:[2,38],
58:[2,38],60:[2,38],62:[2,38],65:[2,38],67:[2,38],69:[2,38],70:[2,38],71:[2,38]},{40:[1,119]},{15:[1,120]},{15:[1,121],23:[1,122]},{5:[2,74],13:[2,74],15:[2,74],17:[2,74],21:[2,74],22:[2,74],23:[2,74],25:[2,74],26:[2,74],27:[2,74],28:[2,74],29:[2,74],31:[2,74],33:[2,74],35:[2,74],36:123,37:[1,73],38:[1,74],39:[1,75],40:[2,74],41:[2,74],46:[2,74],47:[2,74],48:[2,74],49:[2,74],50:[2,74],52:[2,74],57:[2,74],58:[2,74],60:[2,74],62:[2,74],65:[2,74],67:[2,74],69:[2,74],70:[2,74],71:[2,74]},{5:[2,60],13:[2,
60],15:[2,60],17:[2,60],21:[2,60],22:[2,60],23:[2,60],25:[2,60],26:[2,60],27:[2,60],28:[2,60],29:[2,60],31:[2,60],33:[2,60],35:[2,60],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,60],41:[2,60],46:[2,60],47:[2,60],48:[2,60],49:[2,60],50:[1,72],52:[2,60],57:[2,60],58:[2,60],60:[2,60],62:[2,60],65:[2,60],67:[2,60],69:[2,60],70:[2,60],71:[2,60]},{5:[2,48],13:[2,48],15:[2,48],17:[2,48],21:[2,48],22:[2,48],23:[2,48],25:[2,48],26:[2,48],27:[2,48],28:[2,48],29:[2,48],31:[2,48],33:[2,48],35:[2,48],37:[2,48],
38:[2,48],39:[2,48],40:[2,48],41:[2,48],46:[2,48],47:[2,48],48:[2,48],49:[2,48],50:[2,48],52:[2,48],57:[2,48],58:[2,48],60:[2,48],62:[2,48],65:[2,48],67:[2,48],69:[2,48],70:[2,48],71:[2,48]},{5:[2,52],13:[2,52],15:[2,52],17:[2,52],21:[2,52],22:[2,52],23:[2,52],25:[2,52],26:[2,52],27:[2,52],28:[2,52],29:[2,52],31:[2,52],33:[2,52],35:[2,52],37:[2,52],38:[2,52],39:[2,52],40:[2,52],41:[2,52],46:[2,52],47:[2,52],48:[2,52],49:[2,52],50:[2,52],52:[2,52],57:[2,52],58:[2,52],60:[2,52],62:[2,52],65:[2,52],
67:[2,52],69:[2,52],70:[2,52],71:[2,52]},{41:[1,124]},{47:[1,125]},{4:126,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:127,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,
43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:128,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,54],12:63,13:[2,54],15:[2,54],17:[1,14],21:[2,54],22:[1,64],23:[2,54],25:[2,54],26:[2,54],27:[2,54],28:[2,54],29:[2,54],31:[2,54],32:68,33:[1,69],35:[1,70],37:[2,
54],38:[2,54],39:[2,54],40:[1,28],41:[2,54],42:24,43:25,44:26,45:27,46:[1,29],47:[2,54],48:[1,30],49:[1,31],50:[2,54],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,54],65:[2,54],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:129,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,
42]},{5:[2,79],12:63,13:[2,79],15:[2,79],17:[1,14],21:[2,79],22:[1,64],23:[2,79],25:[2,79],26:[2,79],27:[2,79],28:[2,79],29:[2,79],31:[2,79],32:68,33:[1,69],35:[1,70],37:[2,79],38:[2,79],39:[2,79],40:[1,28],41:[2,79],42:24,43:25,44:26,45:27,46:[1,29],47:[2,79],48:[1,30],49:[1,31],50:[2,79],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,79],65:[2,79],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{40:[1,130]},{12:63,17:[1,14],22:[1,132],30:131,31:[1,21],32:22,34:17,40:[1,28],
42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:133,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,90],12:63,13:[2,90],15:[2,90],17:[1,14],21:[2,90],22:[1,
64],23:[2,90],25:[2,90],26:[2,90],27:[2,90],28:[2,90],29:[2,90],31:[2,90],32:68,33:[1,69],35:[1,70],37:[2,90],38:[2,90],39:[2,90],40:[1,28],41:[2,90],42:24,43:25,44:26,45:27,46:[1,29],47:[2,90],48:[1,30],49:[1,31],50:[2,90],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,90],65:[2,90],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,134],30:135,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,
55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{40:[1,136]},{62:[1,137]},{5:[2,66],13:[2,66],15:[2,66],17:[2,66],21:[2,66],22:[2,66],23:[2,66],25:[2,66],26:[2,66],27:[2,66],28:[2,66],29:[2,66],31:[2,66],33:[2,66],35:[2,66],37:[2,66],38:[2,66],39:[2,66],40:[2,66],41:[2,66],46:[2,66],47:[2,66],48:[2,66],49:[2,66],50:[2,66],52:[2,66],57:[2,66],58:[2,66],60:[2,66],62:[2,66],65:[2,66],67:[2,66],69:[2,66],70:[2,66],71:[2,66]},{15:[1,138],62:[2,68]},{15:[2,
70],62:[2,70]},{15:[2,72],62:[2,72],65:[1,139]},{13:[1,141],16:140,25:[1,49],26:[1,50],27:[1,51],28:[1,52]},{12:142,17:[1,14],40:[1,143]},{5:[1,144]},{5:[2,14]},{5:[2,40],16:145,17:[2,40],22:[1,60],25:[1,49],26:[1,50],27:[1,51],28:[1,52],29:[2,40],31:[2,40],33:[2,40],35:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],46:[2,40],48:[2,40],49:[2,40],50:[2,40],52:[2,40],57:[2,40],58:[2,40],60:[2,40],67:[2,40],69:[2,40],70:[2,40],71:[2,40]},{5:[2,27],15:[2,27],16:146,25:[1,49],26:[1,50],27:[1,51],28:[1,
52],62:[2,27],65:[2,27]},{1:[2,8]},{5:[2,12]},{5:[2,13]},{15:[1,148],23:[1,147]},{15:[1,150],23:[1,149]},{23:[1,122]},{5:[2,30],12:63,13:[2,30],15:[2,30],17:[1,14],21:[2,30],22:[1,64],23:[2,30],25:[2,30],26:[2,30],27:[2,30],28:[2,30],29:[2,30],31:[2,30],32:68,33:[1,69],35:[1,70],37:[2,30],38:[2,30],39:[2,30],40:[1,28],41:[2,30],42:24,43:25,44:26,45:27,46:[1,29],47:[2,30],48:[1,30],49:[1,31],50:[2,30],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,30],65:[2,30],66:35,67:[1,39],68:36,
69:[1,40],70:[1,41],71:[1,42]},{5:[2,31],12:63,13:[2,31],15:[2,31],17:[1,14],21:[2,31],22:[1,64],23:[2,31],25:[2,31],26:[2,31],27:[2,31],28:[2,31],29:[2,31],31:[2,31],32:68,33:[1,69],35:[1,70],37:[2,31],38:[2,31],39:[2,31],40:[1,28],41:[2,31],42:24,43:25,44:26,45:27,46:[1,29],47:[2,31],48:[1,30],49:[1,31],50:[2,31],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,31],65:[2,31],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,19],15:[2,19]},{4:151,12:63,17:[1,14],22:[1,64],
24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,34],13:[2,34],15:[2,34],17:[2,34],21:[2,34],22:[2,34],23:[2,34],25:[2,34],26:[2,34],27:[2,34],28:[2,34],29:[2,34],31:[2,34],33:[2,34],35:[2,34],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,34],41:[2,34],46:[2,34],47:[2,34],48:[2,34],49:[2,34],50:[1,72],52:[2,34],57:[2,34],
58:[2,34],60:[2,34],62:[2,34],65:[2,34],67:[2,34],69:[2,34],70:[2,34],71:[2,34]},{5:[2,35],13:[2,35],15:[2,35],17:[2,35],21:[2,35],22:[2,35],23:[2,35],25:[2,35],26:[2,35],27:[2,35],28:[2,35],29:[2,35],31:[2,35],33:[2,35],35:[2,35],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,35],41:[2,35],46:[2,35],47:[2,35],48:[2,35],49:[2,35],50:[1,72],52:[2,35],57:[2,35],58:[2,35],60:[2,35],62:[2,35],65:[2,35],67:[2,35],69:[2,35],70:[2,35],71:[2,35]},{4:152,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,
40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:153,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:154,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],
32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,45],13:[2,45],15:[2,45],17:[2,45],21:[2,45],22:[2,45],23:[2,45],25:[2,45],26:[2,45],27:[2,45],28:[2,45],29:[2,45],31:[2,45],33:[2,45],35:[2,45],37:[2,45],38:[2,45],39:[2,45],40:[2,45],41:[2,45],46:[2,45],47:[2,45],48:[2,45],49:[2,45],50:[2,45],52:[2,45],57:[2,45],58:[2,45],60:[2,45],62:[2,45],
65:[2,45],67:[2,45],69:[2,45],70:[2,45],71:[2,45]},{5:[2,57],13:[2,57],15:[2,57],17:[2,57],21:[2,57],22:[2,57],23:[2,57],25:[2,57],26:[2,57],27:[2,57],28:[2,57],29:[2,57],31:[2,57],33:[2,57],35:[2,57],37:[2,57],38:[2,57],39:[2,57],40:[2,57],41:[2,57],46:[2,57],47:[2,57],48:[2,57],49:[2,57],50:[2,57],52:[2,57],57:[2,57],58:[2,57],60:[2,57],62:[2,57],65:[2,57],67:[2,57],69:[2,57],70:[2,57],71:[2,57]},{5:[2,46],13:[2,46],15:[2,46],17:[2,46],21:[2,46],22:[2,46],23:[2,46],25:[2,46],26:[2,46],27:[2,46],
28:[2,46],29:[2,46],31:[2,46],33:[2,46],35:[2,46],37:[2,46],38:[2,46],39:[2,46],40:[2,46],41:[2,46],46:[2,46],47:[2,46],48:[2,46],49:[2,46],50:[2,46],52:[2,46],57:[2,46],58:[2,46],60:[2,46],62:[2,46],65:[2,46],67:[2,46],69:[2,46],70:[2,46],71:[2,46]},{5:[2,47],13:[2,47],15:[2,47],17:[2,47],21:[2,47],22:[2,47],23:[2,47],25:[2,47],26:[2,47],27:[2,47],28:[2,47],29:[2,47],31:[2,47],33:[2,47],35:[2,47],37:[2,47],38:[2,47],39:[2,47],40:[2,47],41:[2,47],46:[2,47],47:[2,47],48:[2,47],49:[2,47],50:[2,47],
52:[2,47],57:[2,47],58:[2,47],60:[2,47],62:[2,47],65:[2,47],67:[2,47],69:[2,47],70:[2,47],71:[2,47]},{41:[1,155]},{41:[1,156]},{21:[1,157]},{23:[1,158]},{31:[1,159]},{5:[2,82],12:63,13:[2,82],15:[2,82],17:[1,14],21:[2,82],22:[1,64],23:[2,82],25:[2,82],26:[2,82],27:[2,82],28:[2,82],29:[2,82],31:[2,82],32:68,33:[1,69],35:[1,70],37:[2,82],38:[2,82],39:[2,82],40:[1,28],41:[2,82],42:24,43:25,44:26,45:27,46:[1,29],47:[2,82],48:[1,30],49:[1,31],50:[2,82],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,
38],62:[2,82],65:[2,82],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:160,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{23:[1,161]},{4:162,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,
54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,92],12:63,13:[2,92],15:[2,92],17:[1,14],21:[2,92],22:[1,64],23:[2,92],25:[2,92],26:[2,92],27:[2,92],28:[2,92],29:[2,92],31:[2,92],32:68,33:[1,69],35:[1,70],37:[2,92],38:[2,92],39:[2,92],40:[1,28],41:[2,92],42:24,43:25,44:26,45:27,46:[1,29],47:[2,92],48:[1,30],49:[1,31],50:[2,92],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,92],65:[2,92],66:35,67:[1,39],68:36,69:[1,40],
70:[1,41],71:[1,42]},{12:163,17:[1,14]},{5:[2,65],13:[2,65],15:[2,65],17:[2,65],21:[2,65],22:[2,65],23:[2,65],25:[2,65],26:[2,65],27:[2,65],28:[2,65],29:[2,65],31:[2,65],33:[2,65],35:[2,65],37:[2,65],38:[2,65],39:[2,65],40:[2,65],41:[2,65],46:[2,65],47:[2,65],48:[2,65],49:[2,65],50:[2,65],52:[2,65],57:[2,65],58:[2,65],60:[2,65],62:[2,65],65:[2,65],67:[2,65],69:[2,65],70:[2,65],71:[2,65]},{4:164,11:100,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,
29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],64:165,66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:166,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:106,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,
44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:167,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,87],22:[2,87],31:[2,87],37:[2,87],40:[2,87],46:[2,87],48:[2,87],49:[2,
87],52:[2,87],55:[2,87],57:[2,87],58:[2,87],60:[2,87],67:[2,87],69:[2,87],70:[2,87],71:[2,87]},{4:168,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{1:[2,10]},{4:169,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,
52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:170,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,93],13:[2,93],15:[2,93],17:[2,93],21:[2,93],22:[2,93],23:[2,93],25:[2,93],26:[2,93],27:[2,93],28:[2,93],29:[2,93],31:[2,
93],33:[2,93],35:[2,93],37:[2,93],38:[2,93],39:[2,93],40:[2,93],41:[2,93],46:[2,93],47:[2,93],48:[2,93],49:[2,93],50:[2,93],52:[2,93],57:[2,93],58:[2,93],60:[2,93],62:[2,93],65:[2,93],67:[2,93],69:[2,93],70:[2,93],71:[2,93]},{4:171,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,76],13:[2,76],
15:[2,76],17:[2,76],21:[2,76],22:[2,76],23:[2,76],25:[2,76],26:[2,76],27:[2,76],28:[2,76],29:[2,76],31:[2,76],33:[2,76],35:[2,76],36:172,37:[1,73],38:[1,74],39:[1,75],40:[2,76],41:[2,76],46:[2,76],47:[2,76],48:[2,76],49:[2,76],50:[2,76],52:[2,76],57:[2,76],58:[2,76],60:[2,76],62:[2,76],65:[2,76],67:[2,76],69:[2,76],70:[2,76],71:[2,76]},{4:173,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,
23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{15:[1,121]},{41:[1,174]},{21:[1,175]},{23:[1,176]},{40:[1,177]},{5:[2,50],13:[2,50],15:[2,50],17:[2,50],21:[2,50],22:[2,50],23:[2,50],25:[2,50],26:[2,50],27:[2,50],28:[2,50],29:[2,50],31:[2,50],33:[2,50],35:[2,50],37:[2,50],38:[2,50],39:[2,50],40:[2,50],41:[2,50],46:[2,50],47:[2,50],48:[2,50],49:[2,50],50:[2,50],52:[2,50],57:[2,50],58:[2,50],60:[2,50],62:[2,50],65:[2,50],67:[2,50],69:[2,50],70:[2,50],71:[2,
50]},{40:[1,178]},{5:[2,78],13:[2,78],15:[2,78],17:[2,78],21:[2,78],22:[2,78],23:[2,78],25:[2,78],26:[2,78],27:[2,78],28:[2,78],29:[2,78],31:[2,78],33:[2,78],35:[2,78],37:[2,78],38:[2,78],39:[2,78],40:[2,78],41:[2,78],46:[2,78],47:[2,78],48:[2,78],49:[2,78],50:[2,78],52:[2,78],57:[2,78],58:[2,78],60:[2,78],62:[2,78],65:[2,78],67:[2,78],69:[2,78],70:[2,78],71:[2,78]},{31:[1,180],54:179,55:[1,23]},{23:[1,181]},{5:[2,89],13:[2,89],15:[2,89],17:[2,89],21:[2,89],22:[2,89],23:[2,89],25:[2,89],26:[2,89],
27:[2,89],28:[2,89],29:[2,89],31:[2,89],33:[2,89],35:[2,89],37:[2,89],38:[2,89],39:[2,89],40:[2,89],41:[2,89],46:[2,89],47:[2,89],48:[2,89],49:[2,89],50:[2,89],52:[2,89],57:[2,89],58:[2,89],60:[2,89],62:[2,89],65:[2,89],67:[2,89],69:[2,89],70:[2,89],71:[2,89]},{23:[1,182]},{13:[1,183]},{13:[1,141],16:140,25:[1,49],26:[1,50],27:[1,51],28:[1,52],62:[2,67]},{15:[2,69],62:[2,69]},{15:[2,71],62:[2,71]},{15:[2,28],62:[2,28],65:[2,28]},{41:[1,184]},{5:[2,15]},{5:[2,29],15:[2,29],62:[2,29],65:[2,29]},{15:[2,
94],23:[2,94]},{5:[2,75],13:[2,75],15:[2,75],17:[2,75],21:[2,75],22:[2,75],23:[2,75],25:[2,75],26:[2,75],27:[2,75],28:[2,75],29:[2,75],31:[2,75],33:[2,75],35:[2,75],37:[2,75],38:[2,75],39:[2,75],40:[2,75],41:[2,75],46:[2,75],47:[2,75],48:[2,75],49:[2,75],50:[2,75],52:[2,75],57:[2,75],58:[2,75],60:[2,75],62:[2,75],65:[2,75],67:[2,75],69:[2,75],70:[2,75],71:[2,75]},{15:[2,95],23:[2,95]},{5:[2,39],13:[2,39],15:[2,39],17:[2,39],21:[2,39],22:[2,39],23:[2,39],25:[2,39],26:[2,39],27:[2,39],28:[2,39],29:[2,
39],31:[2,39],33:[2,39],35:[2,39],37:[2,39],38:[2,39],39:[2,39],40:[2,39],41:[2,39],46:[2,39],47:[2,39],48:[2,39],49:[2,39],50:[2,39],52:[2,39],55:[2,39],57:[2,39],58:[2,39],60:[2,39],62:[2,39],65:[2,39],67:[2,39],69:[2,39],70:[2,39],71:[2,39]},{5:[2,20],15:[2,20]},{5:[2,21],15:[2,21]},{4:185,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,
39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:186,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{41:[1,187]},{55:[1,188]},{5:[2,83],13:[2,83],15:[2,83],17:[2,83],21:[2,83],22:[2,83],23:[2,83],25:[2,83],26:[2,83],27:[2,83],28:[2,83],29:[2,83],31:[2,83],33:[2,83],35:[2,83],37:[2,83],38:[2,83],39:[2,
83],40:[2,83],41:[2,83],46:[2,83],47:[2,83],48:[2,83],49:[2,83],50:[2,83],52:[2,83],57:[2,83],58:[2,83],60:[2,83],62:[2,83],65:[2,83],67:[2,83],69:[2,83],70:[2,83],71:[2,83]},{5:[2,91],13:[2,91],15:[2,91],17:[2,91],21:[2,91],22:[2,91],23:[2,91],25:[2,91],26:[2,91],27:[2,91],28:[2,91],29:[2,91],31:[2,91],33:[2,91],35:[2,91],37:[2,91],38:[2,91],39:[2,91],40:[2,91],41:[2,91],46:[2,91],47:[2,91],48:[2,91],49:[2,91],50:[2,91],52:[2,91],57:[2,91],58:[2,91],60:[2,91],62:[2,91],65:[2,91],67:[2,91],69:[2,
91],70:[2,91],71:[2,91]},{4:189,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,88],22:[2,88],31:[2,88],37:[2,88],40:[2,88],46:[2,88],48:[2,88],49:[2,88],52:[2,88],55:[2,88],57:[2,88],58:[2,88],60:[2,88],67:[2,88],69:[2,88],70:[2,88],71:[2,88]},{41:[1,190]},{41:[1,191]},{12:63,17:[1,14],22:[1,
193],30:192,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{41:[2,74]},{41:[1,194]},{5:[2,49],13:[2,49],15:[2,49],17:[2,49],21:[2,49],22:[2,49],23:[2,49],25:[2,49],26:[2,49],27:[2,49],28:[2,49],29:[2,49],31:[2,49],33:[2,49],35:[2,49],37:[2,49],38:[2,49],39:[2,49],40:[2,49],41:[2,49],46:[2,49],47:[2,49],48:[2,49],49:[2,49],50:[2,49],52:[2,
49],57:[2,49],58:[2,49],60:[2,49],62:[2,49],65:[2,49],67:[2,49],69:[2,49],70:[2,49],71:[2,49]},{5:[2,51],13:[2,51],15:[2,51],17:[2,51],21:[2,51],22:[2,51],23:[2,51],25:[2,51],26:[2,51],27:[2,51],28:[2,51],29:[2,51],31:[2,51],33:[2,51],35:[2,51],37:[2,51],38:[2,51],39:[2,51],40:[2,51],41:[2,51],46:[2,51],47:[2,51],48:[2,51],49:[2,51],50:[2,51],52:[2,51],57:[2,51],58:[2,51],60:[2,51],62:[2,51],65:[2,51],67:[2,51],69:[2,51],70:[2,51],71:[2,51]},{5:[2,80],12:63,13:[2,80],15:[2,80],17:[1,14],21:[2,80],
22:[1,64],23:[2,80],25:[2,80],26:[2,80],27:[2,80],28:[2,80],29:[2,80],31:[2,80],32:68,33:[1,69],35:[1,70],37:[2,80],38:[2,80],39:[2,80],40:[1,28],41:[2,80],42:24,43:25,44:26,45:27,46:[1,29],47:[2,80],48:[1,30],49:[1,31],50:[2,80],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,80],65:[2,80],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:195,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,
33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{36:196,37:[1,73],38:[1,74],39:[1,75]},{23:[1,197]},{4:198,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,81],13:[2,81],15:[2,81],17:[2,81],21:[2,81],22:[2,81],23:[2,81],25:[2,
81],26:[2,81],27:[2,81],28:[2,81],29:[2,81],31:[2,81],33:[2,81],35:[2,81],37:[2,81],38:[2,81],39:[2,81],40:[2,81],41:[2,81],46:[2,81],47:[2,81],48:[2,81],49:[2,81],50:[2,81],52:[2,81],57:[2,81],58:[2,81],60:[2,81],62:[2,81],65:[2,81],67:[2,81],69:[2,81],70:[2,81],71:[2,81]},{5:[2,64],13:[2,64],15:[2,64],17:[2,64],21:[2,64],22:[2,64],23:[2,64],25:[2,64],26:[2,64],27:[2,64],28:[2,64],29:[2,64],31:[2,64],33:[2,64],35:[2,64],37:[2,64],38:[2,64],39:[2,64],40:[2,64],41:[2,64],46:[2,64],47:[2,64],48:[2,
64],49:[2,64],50:[2,64],52:[2,64],57:[2,64],58:[2,64],60:[2,64],62:[2,64],65:[2,64],67:[2,64],69:[2,64],70:[2,64],71:[2,64]}],defaultActions:{11:[2,11],43:[2,62],44:[2,63],45:[2,1],53:[2,2],54:[2,3],55:[2,4],56:[2,5],57:[2,6],58:[2,7],61:[2,9],62:[2,96],104:[2,14],107:[2,8],108:[2,12],109:[2,13],144:[2,10],169:[2,15],188:[2,74]},parseError:function(b,g){throw Error(b);},parse:function(b){function g(){var a;a=q.lexer.lex()||1;"number"!==typeof a&&(a=q.symbols_[a]||a);return a}var q=this,p=[0],u=[null],
a=[],m=this.table,c="",f=0,e=0,h=0;this.lexer.setInput(b);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});b=this.lexer.yylloc;a.push(b);var d=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var k,l,y,s,n={},x,B;;){y=p[p.length-1];if(this.defaultActions[y])s=this.defaultActions[y];else{if(null===k||"undefined"==typeof k)k=g();s=m[y]&&m[y][k]}if("undefined"===
typeof s||!s.length||!s[0]){s="";if(!h){l=[];for(x in m[y])this.terminals_[x]&&2<x&&l.push("'"+this.terminals_[x]+"'");s=this.lexer.showPosition?"Parse error on line "+(f+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+l.join(", ")+", got '"+(this.terminals_[k]||k)+"'":"Parse error on line "+(f+1)+": Unexpected "+(1==k?"end of input":"'"+(this.terminals_[k]||k)+"'");this.parseError(s,{text:this.lexer.match,token:this.terminals_[k]||k,line:this.lexer.yylineno,loc:b,expected:l})}if(3==h){if(1==k)throw Error(s||
"Parsing halted.");e=this.lexer.yyleng;c=this.lexer.yytext;f=this.lexer.yylineno;b=this.lexer.yylloc;k=g()}for(;!((2).toString()in m[y]);){if(0===y)throw Error(s||"Parsing halted.");p.length-=2;u.length-=1;a.length-=1;y=p[p.length-1]}l=2==k?null:k;k=2;y=p[p.length-1];s=m[y]&&m[y][2];h=3}if(s[0]instanceof Array&&1<s.length)throw Error("Parse Error: multiple actions possible at state: "+y+", token: "+k);switch(s[0]){case 1:p.push(k);u.push(this.lexer.yytext);a.push(this.lexer.yylloc);p.push(s[1]);k=
null;l?(k=l,l=null):(e=this.lexer.yyleng,c=this.lexer.yytext,f=this.lexer.yylineno,b=this.lexer.yylloc,0<h&&h--);break;case 2:B=this.productions_[s[1]][1];n.$=u[u.length-B];n._$={first_line:a[a.length-(B||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(B||1)].first_column,last_column:a[a.length-1].last_column};d&&(n._$.range=[a[a.length-(B||1)].range[0],a[a.length-1].range[1]]);y=this.performAction.call(n,c,e,f,this.yy,s[1],u,a);if("undefined"!==typeof y)return y;B&&(p=p.slice(0,
-2*B),u=u.slice(0,-1*B),a=a.slice(0,-1*B));p.push(this.productions_[s[1]][0]);u.push(n.$);a.push(n._$);y=m[p[p.length-2]][p[p.length-1]];p.push(y);break;case 3:return!0}}return!0}},g=function(){return{EOF:1,parseError:function(b,g){if(this.yy.parser)this.yy.parser.parseError(b,g);else throw Error(b);},setInput:function(b){this._input=b;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,
last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var b=this._input[0];this.yytext+=b;this.yyleng++;this.offset++;this.match+=b;this.matched+=b;b.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return b},unput:function(b){var g=b.length,q=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input;this.yytext=this.yytext.substr(0,
this.yytext.length-g-1);this.offset-=g;b=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);q.length-1&&(this.yylineno-=q.length-1);var p=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:q?(q.length===b.length?this.yylloc.first_column:0)+b[b.length-q.length].length-q[0].length:this.yylloc.first_column-g};this.options.ranges&&
(this.yylloc.range=[p[0],p[0]+this.yyleng-g]);return this},more:function(){this._more=!0;return this},less:function(b){this.unput(this.match.slice(b))},pastInput:function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(20<b.length?"...":"")+b.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var b=this.match;20>b.length&&(b+=this._input.substr(0,20-b.length));return(b.substr(0,20)+(20<b.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var b=this.pastInput(),
g=Array(b.length+1).join("-");return b+this.upcomingInput()+"\n"+g+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var b,g,q;this._more||(this.match=this.yytext="");for(var p=this._currentRules(),u=0;u<p.length&&(!(g=this._input.match(this.rules[p[u]]))||b&&!(g[0].length>b[0].length)||(b=g,q=u,this.options.flex));u++);if(b){if(g=b[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=g.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,
last_column:g?g[g.length-1].length-g[g.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length};this.yytext+=b[0];this.match+=b[0];this.matches=b;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(b[0].length);this.matched+=b[0];b=this.performAction.call(this,this.yy,this,p[q],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(b)return b}else return""===
this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return"undefined"!==typeof b?b:this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-
2]},pushState:function(b){this.begin(b)},options:{},performAction:function(b,g,q,p){switch(q){case 1:return 40;case 2:return 41;case 3:return"MATH_SHIFT";case 4:return g.yytext=this.matches[this.matches.length-1],37;case 5:return g.yytext=this.matches[this.matches.length-1],38;case 6:return 39;case 7:return 55;case 8:return 33;case 9:return 35;case 10:return g.yytext=this.matches[3],52;case 11:return g.yytext=this.matches[this.matches.length-1],71;case 12:return 69;case 13:return 70;case 14:return 48;
case 15:return 49;case 16:return 57;case 17:return 58;case 18:return 46;case 19:return 47;case 20:return 31;case 21:return 29;case 22:return 13;case 23:return 59;case 24:return 50;case 25:return 5;case 26:return 22;case 27:return 23;case 28:return 20;case 29:return 21;case 30:return 60;case 31:return 62;case 32:return 65;case 33:return 27;case 34:return 28;case 35:return 26;case 36:return 25;case 37:return 15;case 38:return 14;case 39:return 67;case 40:return g.yytext="\\sign",17;case 41:return g.yytext=
"\\gcd",17;case 42:return g.yytext="\\lcm",17;case 43:return 17;case 45:return"UNRECOGNIZED"}},rules:[/^(?:(\\space|\\:|\s)+)/,/^(?:\{)/,/^(?:\})/,/^(?:\$)/,/^(?:\^([0-9]))/,/^(?:\^([a-zA-Z]))/,/^(?:\^)/,/^(?:[0-9]+(\.[0-9]+)?|(\.[0-9]+))/,/^(?:\*|(\\cdot))/,/^(?:\/)/,/^(?:(\\frac((?:\s|\\space|\\:)*)\{d\}\{d(((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))\}))/,/^(?:(\\log)((?:\s|\\space|\\:)*)*_([0-9]))/,/^(?:(\\ln))/,/^(?:(\\log))/,/^(?:(\\frac))/,/^(?:(\\sqrt))/,/^(?:(\\sum))/,/^(?:(\\prod))/,
/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:-)/,/^(?:\+)/,/^(?:=)/,/^(?:[_])/,/^(?:!)/,/^(?:$)/,/^(?:(\()|\\left\()/,/^(?:(\))|\\right\))/,/^(?:(\[)|\\left\[)/,/^(?:(\])|\\right\])/,/^(?:(\\\{)|\\left\\\{)/,/^(?:(\\\})|\\right\\\})/,/^(?::)/,/^(?:(\\ge|>=))/,/^(?:(\\le|<=))/,/^(?:(\\gt|>))/,/^(?:(\\lt|<))/,/^(?:,)/,/^(?:(###)(((?:\s|\\space|\\:)*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)((?:\s|\\space|\\:)*)(\\left\(|\()((?:\s|\\space|\\:)*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)(((?:\s|\\space|\\:)*),((?:\s|\\space|\\:)*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)((?:\s|\\space|\\:)*))*((?:\s|\\space|\\:)*)(\\right\)|\))((?:\s|\\space|\\:)*)=))/,
/^(?:(\\(arc)?(sin|cos|tan|cot|sec|csc)h?))/,/^(?:(\\signum))/,/^(?:(\\(gcf|mcd)))/,/^(?:(\\mcm))/,/^(?:((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))/,/^(?:(###))/,/^(?:.)/],conditions:{conditional:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,
45],inclusive:!0}}}}();b.lexer=g;return b});define("math/inverses",[],function(){var b={};"sin cos tan cot sec csc sinh cosh tanh coth sech csch".split(" ").forEach(function(g){b[g]="arc"+g;b["arc"+g]=g});return b});var define_enum_constant,enum_strings={},debuggable_enums=!0;define_enum_constant=function(b){this[b]=b};define_enum_constant("EXPRESSION");define_enum_constant("FUNCTION_DEFINITION");define_enum_constant("VARIABLE_DEFINITION");define_enum_constant("ORDERED_PAIR_LIST");define_enum_constant("DOUBLE_INEQUALITY");
define_enum_constant("COMPARATOR");define_enum_constant("CHAINED_COMPARATOR");define_enum_constant("EQUATION");define_enum_constant("CONSTANT");define_enum_constant("IDENTIFIER");define("math/enums",function(){});
define("math/parser_util","require pjs ./evalframe ./comparators parser ./inverses ./builtin ./enums".split(" "),function(b){var g=b("pjs"),r=b("./evalframe"),v=b("./comparators"),q=b("parser"),p=b("./inverses"),u=b("./builtin");b("./enums");var a={};q.yy.inverses=p;b=a.ParseNode=g(function(a){a.init=function(){this._dependencies={};this._referencedSymbols={}};a.setInputString=function(a){this._inputString=a};a.getInputString=function(){return this._inputString};a.statementType=EXPRESSION;a.assigns=
null;a.valid=!0;a.exportDefinitionsTo=function(a,c){};a.evaluateOnce=function(a){return"Unable to evaluate"};a.addDependency=function(a,c){this.referenceSymbol(a);if(this._dependencies.hasOwnProperty(a)){var d=this._dependencies[a];if(c!==d&&(1!==c||0!==d))if(0===c&&1===d)this._dependencies[a]=c;else{if(0===c||0===d)throw"You're referencing '"+a+"' as both a function and a variable. Make up your mind!";throw"You're referencing '"+a+"' as both a "+d+"-variable and a "+c+"-variable function. Make up your mind!";
}}else this._dependencies[a]=c};a.referenceSymbol=function(a){this._referencedSymbols[a]=!0};a.shadowVariable=function(a){this.referenceSymbol(a);if(this._dependencies.hasOwnProperty(a))if(1>=this._dependencies[a])delete this._dependencies[a];else throw"Cannot redefine function "+a+" as a variable";};a.addDependencies=function(a){for(var c in a)a.hasOwnProperty(c)&&this.addDependency(c,a[c])};a.references=function(a){if(this._referencedSymbols[a])return!0};a.dependencies=function(){return this._dependencies};
a.getEvalStrings=function(){throw"Cannot call getEvalStrings on base ParseNode";};a.polynomialOrder=function(){return Infinity};a.uid_counter=[0];a.tmp=function(){return"tmp"+this.uid_counter[0]++};a.okForImplicitFunction=function(){return!1}});a.AssignmentNode=g(b,function(a,c){a.init=function(a,d){c.init.call(this);this.assigns=a;this.referenceSymbol(this.assigns.identifier);this.arity=0;this.expression=d;this.addDependencies(d.dependencies());this.lhs=a;this.rhs=d;this.dependencies().hasOwnProperty(this.assigns.identifier)&&
(this.statementType=EQUATION)};a.statementType=VARIABLE_DEFINITION;a.evaluateOnce=function(a){return this.expression.evaluateOnce(a)};a.exportDefinitionsTo=function(a,c){if(this.statementType!==EQUATION)try{var d=this.expression.evaluateOnce(a),b=f(d);a.setVariable(this.assigns.identifier,b);a.setEvalStrings(this.assigns.identifier,b.getEvalStrings(a))}catch(e){a.setVariable(this.assigns.identifier,this.expression),a.setEvalStrings(this.assigns.identifier,this.expression.getEvalStrings(a))}};a.getEvalStrings=
function(a){return this.statementType===EQUATION?c.getEvalStrings(a):this.expression.getEvalStrings(a)};a.toString=function(){return this.assigns+" = "+this.expression}});a.DoubleInequalityNode=g(b,function(a,c){a.init=function(d,b,e,f,k){c.init.call(this);this._inequalities=[];if(v.table[b].direction!=v.table[f].direction)throw"Double inequalities must both go the same way, e.g. 1 < y < 2";this.direction=v.table[b].direction;this.inclusive=v.table[b].inclusive&&v.table[f].inclusive;var h=v.get(this.inclusive,
this.direction),l=s(h,d,k),h=m(l,d),l=m(l,k);this._inequalities.push(s(b,e,h));this._inequalities.push(s(f,e,l));this.addDependencies(e.dependencies());this.addDependencies(d.dependencies());this.addDependencies(k.dependencies());a.statementType=DOUBLE_INEQUALITY};a.getInequality=function(a){return this._inequalities[a]}});a.EquationNode=g(b,function(a,c){a.init=function(a,d){c.init.call(this);this.lhs=a;this.rhs=d;this.addDependencies(a.dependencies());this.addDependencies(d.dependencies())};a.statementType=
EQUATION;a.toString=function(){return this.lhs+" = "+this.rhs}});var m=a.PiecewiseNode=g(b,function(a,c){a.init=function(a,d,b){c.init.call(this);this.condition=a;this.if_expr=d;this.frozen=!1;b&&(this.else_expr=b,this.addDependencies(this.else_expr._partial_dependencies()));this.addDependencies(a.dependencies());this.addDependencies(d.dependencies())};a._partial_dependencies=function(){return c.dependencies};a.append_else=function(a){if(this.frozen)throw"Programming Error - please treat me as immutable.  Cannot change PiecewiseNode after getting dependencies";
this.else_expr?this.else_expr.append_else(a):this.else_expr=a;this.addDependencies(a.dependencies());return this};a.evaluateOnce=function(a){this.frozen=!0;if(this.condition.evaluateOnce(a))return this.if_expr.evaluateOnce(a);if(this.else_expr)return this.else_expr.evaluateOnce(a)};a.getEvalStrings=function(a){var c=this.condition.getEvalStrings(a),d=this.if_expr.getEvalStrings(a);a=this.else_expr?this.else_expr.getEvalStrings(a):{statements:"",expression:"undefined"};var b=this.tmp();return{expression:b,
statements:"var "+b+";"+c.statements+"if("+c.expression+") {"+d.statements+b+"="+d.expression+";}else{"+a.statements+b+"="+a.expression+";}"}};a.polynomialOrder=function(a,c){return this.dependencies().hasOwnProperty(c)?Infinity:0};a.quadraticCoefficients=function(a,c){return[0,0,this.evaluateOnce(a)]};a.polynomialEvalStrings=function(a,c,d){a=this.getEvalStrings(a);return{statements:a.statements,expressions:[a.expression]}};a.toString=function(){if(!this.else_expr)return"\\left\\{"+this.condition+
": "+this.if_expr+"\\right\\}";var a;a=this.else_expr.condition&&!0===this.else_expr.condition.value?String(this.else_expr.if_expr):String(this.else_expr).replace(/^\\left\\\{(.*)\\right\\\}$/,"$1");return"\\left\\{"+this.condition+": "+this.if_expr+", "+a+"\\right\\}"}});a.OrderedPairNode=g(b,function(a,c){a.init=function(a,d){c.init.call(this);this.children=[a,d];this.addDependencies(a.dependencies());this.addDependencies(d.dependencies())};a.getEvalStrings=function(a){var c=this.children[0].getEvalStrings(a);
a=this.children[1].getEvalStrings(a);return{statements:c.statements+a.statements,expression:"["+c.expression+","+a.expression+"]"}};a.evaluateOnce=function(a){return[this.children[0].evaluateOnce(a),this.children[1].evaluateOnce(a)]};this.toString=function(){return"\\left("+this.children[0]+", "+this.children[1]+"\\right)"}});var c=a.ErrorNode=g(b,function(a,c){a.init=function(a){c.init.call(this);this.error_msg=a};a.valid=!1;this.evaluateOnce=function(a){return this.error_msg}}),f=a.ConstantNode=
g(b,function(a,c){a.init=function(a){c.init.call(this);this.value=a};a.evaluateOnce=function(a){return this.value};a.getEvalStrings=function(){return{expression:0>this.value?"("+String(this.value)+")":String(this.value),statements:""}};a.quadraticCoefficients=function(a,c){return[0,0,this.value]};a.polynomialEvalStrings=function(a,c,d){return{statements:"",expressions:["("+String(this.value)+")"]}};a.polynomialOrder=function(a,c){return 0};a.okForImplicitFunction=function(){return!0};a.toString=function(){return String(this.value)};
a.statementType=CONSTANT}),e=a.NegationNode=g(b,function(a,c){a.init=function(a){c.init.call(this);this.expression=a;this.addDependencies(this.expression.dependencies())};a.evaluateOnce=function(a){return-this.expression.evaluateOnce(a)};a.quadraticCoefficients=function(a,c){var d=this.expression.quadraticCoefficients(a,c);return[-d[0],-d[1],-d[2]]};a.polynomialEvalStrings=function(a,c,d){a=this.expression.polynomialEvalStrings(a,c,d);for(c=0;c<a.expressions.length;c++)a.expressions[c]="(-"+a.expressions[c]+
")";return a};a.polynomialOrder=function(a,c){return this.expression.polynomialOrder(a,c)};a.getEvalStrings=function(a){a=this.expression.getEvalStrings(a);return{expression:"(-"+a.expression+")",statements:a.statements}};a.toString=function(){return"-"+this.expression}}),h=a.IdentifierNode=g(b,function(a,c){a.init=function(a){c.init.call(this);a=a.replace("\\","");a=a.replace("{","");this.identifier=a=a.replace("}","");this.addDependency(this.identifier,0)};a.evaluateOnce=function(a){return a.getVariable(this.identifier).evaluateOnce(a)};
a.getEvalStrings=function(a){return a.getEvalStrings(this.identifier)};a.quadraticCoefficients=function(a,c){return c===this.identifier?[0,1,0]:a.getVariable(this.identifier).quadraticCoefficients(a,c)};a.polynomialEvalStrings=function(a,c,d){return c===this.identifier?{statements:"",expressions:["0","1"]}:d===this.identifier?{statements:"",expressions:[this.identifier]}:a.getVariable(this.identifier).polynomialEvalStrings(a,c,d)};a.polynomialOrder=function(a,c){return c===this.identifier?1:a.hasVariable(this.identifier)?
a.getVariable(this.identifier).polynomialOrder(a,c):0};a.okForImplicitFunction=function(){return!0};a.toString=function(){var a=this.identifier.match(/^([^_]+)(_(.*))?$/),c=a[1],a=a[3];1<c.length&&(c="\\"+c);return a?c+"_{"+a+"}":c};a.statementType=IDENTIFIER});a.ChainedComparatorNode=g(b,function(a,c){a.init=function(a,d){c.init.call(this);if(2!==a.length||3!==d.length)throw"Can't chain more than 2 comparators";this.comparators=a;this.args=d;for(var b=0;3>b;b++)this.addDependencies(d[b].dependencies());
this.node1=s(this.comparators[0],this.args[0],this.args[1]);this.node2=s(this.comparators[1],this.args[1],this.args[2])};a.evaluateOnce=function(a){return this.node1.evaluateOnce(a)&&this.node2.evaluateOnce(a)};a.getEvalStrings=function(a){var c=this.node1.getEvalStrings(a);a=this.node2.getEvalStrings(a);return{expression:"("+c.expression+"&&"+a.expression+")",statements:c.statements+a.statements}};a.toString=function(){return[this.args[0],this.comparators[0],this.args[1],this.comparators[1],this.args[2]].join(" ")};
a.statementType=CHAINED_COMPARATOR});var d={"+":"arg1+arg2","-":"arg1-arg2","*":"arg1*arg2","/":"arg1/arg2",">":"arg1>arg2","<":"arg1<arg2",">=":"arg1>=arg2","<=":"arg1<=arg2","===":"arg1===arg2","^":"this.pow(arg1, arg2)"},k={},l;for(l in d)d.hasOwnProperty(l)&&(p="^"===l?u.pow:new Function(["arg1","arg2"],"return "+d[l]),k[l]=p);var y=a.BinaryOperatorNode=g(b,function(a,c){a.init=function(a,d,b){c.init.call(this);this.args=[d,b];this.operator=a;this.evaluator=k[a];this.addDependencies(this.args[0].dependencies());
this.addDependencies(this.args[1].dependencies())};a.evaluateOnce=function(a){return this.evaluator(this.args[0].evaluateOnce(a),this.args[1].evaluateOnce(a))};a.getEvalStrings=function(a){var c=this.args[0].getEvalStrings(a);a=this.args[1].getEvalStrings(a);return{expression:"("+d[this.operator].replace("arg1",c.expression).replace("arg2",a.expression)+")",statements:c.statements+a.statements}};a.quadraticCoefficients=function(a,c){var d=this.args[0].quadraticCoefficients(a,c),b=this.args[1].quadraticCoefficients(a,
c);switch(this.operator){case "+":return[d[0]+b[0],d[1]+b[1],d[2]+b[2]];case "-":return[d[0]-b[0],d[1]-b[1],d[2]-b[2]];case "*":for(var e=[0,0,0,0,0],f=0;2>=f;f++)for(var k=0;2>=k;k++)e[f+k]+=d[f]*b[k];d=e.splice(0,2);if(0!==d[0]||0!==d[1])break;return e;case "/":if(0!==b[0]||0!==b[1])break;return[d[0]/b[2],d[1]/b[2],d[2]/b[2]];case "^":if(0!==b[0]||0!==b[1])break;if(0===d[0]&&0===d[1])return[0,0,this.evaluator(d[2],b[2])];if(1===b[2])return d;if(2===b[2]){if(0!==d[0])break;return[d[1]*d[1],2*d[1]*
d[2],d[2]*d[2]]}}return[NaN,NaN,NaN]};a.polynomialEvalStrings=function(a,c,d){var b=this.args[0].polynomialEvalStrings(a,c,d);c=this.args[1].polynomialEvalStrings(a,c,d);d=b.expressions.length-1;var e=c.expressions.length-1,f=b.statements+c.statements,k=[],h,l;switch(this.operator){case "+":case "-":for(a=0;a<=Math.min(d,e);a++)k[a]="("+b.expressions[a]+this.operator+c.expressions[a]+")";for(a=Math.min(d,e)+1;a<=Math.max(d,e);a++)"+"===this.operator&&(k[a]=d>e?b.expressions[a]:c.expressions[a]),"-"===
this.operator&&(k[a]=d>e?b.expressions[a]:"(-"+c.expressions[a]+")");return{statements:f,expressions:k};case "*":for(a=0;a<=d;a++)for(h=0;h<=e;h++)l="("+b.expressions[a]+"*"+c.expressions[h]+")",k[a+h]=void 0===k[a+h]?l:k[a+h]+("+"+l);for(a=0;a<k.length;a++)k[a]="("+k[a]+")";return{statements:f,expressions:k};case "/":if(1<=e)throw"can't solve for variable in denominator";for(a=0;a<=d;a++)k[a]="(("+b.expressions[a]+")/("+c.expressions[0]+"))";return{statements:f,expressions:k};case "^":if(1<=e)throw"can't solve for variable in exponent";
if(0===d)return{statements:f,expressions:["this.pow("+b.expressions[0]+","+c.expressions[0]+")"]};switch(this.args[1].evaluateOnce(a)){case 0:return{statements:"",expressions:["1"]};case 1:return c;case 2:for(a=0;a<=d;a++)for(h=0;h<=d;h++)l="("+b.expressions[a]+"*"+b.expressions[h]+")",k[a+h]=void 0===k[a+h]?l:k[a+h]+("+"+l);for(a=0;a<k.length;a++)k[a]="("+k[a]+")";return{statements:f,expressions:k}}}throw"Unable to compile polyomial representation of BinaryOperatorNode";};a.polynomialOrder=function(a,
c){var d=this.args[0].polynomialOrder(a,c),b=this.args[1].polynomialOrder(a,c);switch(this.operator){case "+":case "-":return Math.max(d,b);case "*":return d+b;case "/":if(0<b)break;return d;case "^":if(0===d&&0===b)return 0;try{var e=this.args[1].evaluateOnce(a);if(e!==Math.round(e))break;if(0>e)break;return e*d}catch(f){}}return Infinity};a.okForImplicitFunction=function(){return this.args[0].okForImplicitFunction()&&this.args[1].okForImplicitFunction()};a.toString=function(){if("^"===this.operator){var a=
this.args[0],c=this.args[1],d=a.toString(),b=c.toString();a instanceof y&&(d="("+d+")");c instanceof y&&(b="{"+b+"}");return d+"^"+b}if("/"===this.operator)return"\\frac{"+this.args[0]+"}{"+this.args[1]+"}";if("*"===this.operator){a=this.args[0];c=this.args[1];d=String(a);b=String(c);if(a instanceof y&&("+"===a.operator||"-"===a.operator)||a instanceof e)d="("+d+")";if(c instanceof y&&("+"===c.operator||"-"===c.operator)||c instanceof e)b="("+b+")";return d+"*"+b}return this.args[0]+" "+this.operator+
" "+this.args[1]}}),s=a.ComparatorNode=g(y,function(a,c){a.init=function(a,d,b){c.init.call(this,a,d,b)};a.polynomialOrder=function(a,c){var d=this.args[0].polynomialOrder(a,c),b=this.args[1].polynomialOrder(a,c);return Math.max(d,b)};a.quadraticCoefficients=function(a,c){return[NaN,NaN,NaN]};a.statementType=COMPARATOR}),n=a.FunctionNode=g(b,function(a,c){a.init=function(a,d){c.init.call(this);this.identifier=a;this.args=d;this.arity=this.args.length;this.addDependency(this.identifier.identifier,
this.arity);for(var b=0;b<d.length;b++)this.addDependencies(d[b].dependencies())};a.evaluateOnce=function(a){if(1<this.arity||a.hasFunction(this.identifier.identifier))return a.callFunction(this.identifier.identifier,this.args.map(function(c){return c.evaluateOnce(a)}));if(1===this.args.length&&a.hasVariable(this.identifier.identifier))return this.args[0].evaluateOnce(a)*a.getVariable(this.identifier.identifier).evaluateOnce(a)};a.getEvalStrings=function(a){if(1<this.arity||a.hasFunction(this.identifier.identifier)){var c=
this.args.map(function(c){return c.getEvalStrings(a)}),d=c.map(function(a){return a.expression}),c=c.map(function(a){return a.statements}).join("");return{expression:"this."+this.identifier.identifier+"("+d.join(",")+")",statements:c}}d=h(this.identifier.identifier);return y("*",d,this.args[0]).getEvalStrings(a)};a.quadraticCoefficients=function(a,c){if(1<this.arity||a.hasFunction(this.identifier.identifier)){var d=this.args.map(function(d){return d.polynomialOrder(a,c)});if(0===Math.max.apply(null,
d))return[0,0,this.evaluateOnce(a)];d=a.getFunctionTree(this.identifier.identifier);if(!d)throw"Can't solve equations with "+this.identifier.identifier;for(var b=r(a),e=0;e<d.arity;e++)b.setVariable(d.args[e].identifier,this.args[e]);return d.expression.quadraticCoefficients(b,c)}d=h(this.identifier.identifier);return y("*",d,this.args[0]).quadraticCoefficients(a,c)};a.polynomialEvalStrings=function(a,c,d){if(1<this.arity||a.hasFunction(this.identifier.identifier)){var b=this.args.map(function(b){return b.polynomialEvalStrings(a,
c,d)}).map(function(a){return a.expressions.length-1});if(0===Math.max.apply(null,b))return b=this.getEvalStrings(a),{statements:b.statements,expressions:[b.expression]}}else return b=h(this.identifier.identifier),y("*",b,this.args[0]).polynomialEvalStrings(a,c,d)};a.polynomialOrder=function(a,c){if(1<this.arity||a.hasFunction(this.identifier.identifier)){var d=this.args.map(function(d){return d.polynomialOrder(a,c)});return 0===Math.max.apply(null,d)?0:Infinity}d=h(this.identifier.identifier);return y("*",
d,this.args[0]).polynomialOrder(a,c)};a.toString=function(){return"sqrt"===this.identifier.identifier?this.identifier+"{"+this.args[0]+"}":this.identifier+"("+this.args.join(", ")+")"}});a.FunctionCallExponentNode=g(b,function(a,c){a.init=function(a,d,b){c.init.call(this);this.identifier=a;this.arg=d;this.exponent=b;this.as_function_node=y("^",n(this.identifier,[this.arg]),this.exponent);this.as_multiplication_node=y("*",this.identifier,y("^",this.arg,this.exponent));this.addDependency(this.identifier.identifier,
1);this.addDependencies(this.arg.dependencies());this.addDependencies(this.exponent.dependencies())};a.getEquivalentNode=function(a){return a.hasFunction(this.identifier.identifier)?this.as_function_node:this.as_multiplication_node};a.evaluateOnce=function(a){return this.getEquivalentNode(a).evaluateOnce(a)};a.getEvalStrings=function(a){return this.getEquivalentNode(a).getEvalStrings(a)};a.polynomialOrder=function(a,c){return this.getEquivalentNode(a).polynomialOrder(a,c)};a.quadraticCoefficients=
function(a,c){return this.getEquivalentNode(a).quadraticCoefficients(a,c)};a.polynomialEvalStrings=function(a,c,d){return this.getEquivalentNode(a).polynomialEvalStrings(a,c,d)};a.toString=function(){return this.as_function_node.toString()}});a.FunctionDeclarationNode=g(b,function(a,c){a.init=function(a,d,b){c.init.call(this);this.assigns=a;this.referenceSymbol(this.assigns.identifier);this.args=d;this.arity=this.args.length;this.expression=b;this.passed_variables=this.args.map(function(a){return a.identifier});
a=this.expression.dependencies();for(var e in a)if(a.hasOwnProperty(e))if(d=a[e],0<=this.passed_variables.indexOf(e)){if(1<d)throw"Cannot call argument "+e+" as a function";}else this.addDependency(e,d)};a.statementType=FUNCTION_DEFINITION;a.exportDefinitionsTo=function(a,c){var d=this.expression.getEvalStrings(a),d=d.statements+"return "+d.expression,b=this.args.map(function(a){return a.identifier}),e=c.compile(b,d);a.setFunction(this.assigns.identifier,this.args.length,e,this,b,d)};a.passedVariables=
function(){return this.passed_variables};a.evaluateOnce=function(a){return"Defines function "+this.assigns.identifier};a.getEvalStrings=function(a){return this.expression.getEvalStrings(a)};a.toString=function(){return this.assigns+"\\left("+this.args.join(", ")+"\\right) = "+this.expression}});var x=a.DerivativeNode=g(b,function(a,c){a.init=function(a,d){c.init.call(this);this.derivative_variable=a;this.expression=d;this.addDependencies(d.dependencies());this.addDependency(a.identifier,0)};a.evaluateOnce=
function(a){var c=this.derivative_variable,d=this.expression.takeDerivative(a,c);if(!(d instanceof x))return d.evaluateOnce(a);d=a.getVariable(c.identifier).evaluateOnce(a);a=r(a);a.setVariable(c.identifier,f(d-5E-5));var b=this.expression.evaluateOnce(a);a.setVariable(c.identifier,f(d+5E-5));return(this.expression.evaluateOnce(a)-b)/1E-4};a.getEvalStrings=function(a){var c=this.derivative_variable,d=this.expression.takeDerivative(a,c);if(!(d instanceof x))return d.getEvalStrings(a);var d=this.tmp(),
b=this.tmp(),e=this.tmp(),f=this.tmp(),k=c.getEvalStrings(a),k=k.statements+"var "+b+"="+k.expression+";";a=this.expression.getEvalStrings(a);return{expression:d,statements:k+(c.identifier+"="+b+"-(5e-5);"+a.statements+"var "+f+"="+a.expression+";")+(c.identifier+"="+b+"+(5e-5);"+a.statements+"var "+e+"="+a.expression+";")+("var "+d+"=("+e+"-"+f+")/(2*(5e-5));")+(c.identifier+"="+b+";")}};a.toString=function(){return"\\frac{d}{d"+this.derivative_variable+"}\\left("+this.expression+"\\right)"}}),u=
a.RepeatedOperatorNode=g(b,function(a,c){a.init=function(a,d,b,e){c.init.call(this);this.index=a;this.lower_bound=d;this.upper_bound=b;this.summand=e;this.addDependencies(this.lower_bound.dependencies());this.addDependencies(this.upper_bound.dependencies());this.addDependencies(this.summand.dependencies());this.shadowVariable(this.index.identifier)};a.evaluateOnce=function(a){var c=r(a),d=Math.round(this.lower_bound.evaluateOnce(a));a=Math.round(this.upper_bound.evaluateOnce(a));var b=this.starting_value;
if(isFinite(a-d))for(;d<=a;d++)c.setVariable(this.index.identifier,f(d)),b=this.fn(b,this.summand.evaluateOnce(c));else b=a<d?this.starting_value:NaN;return b};a.getEvalStrings=function(a){var c=this.tmp(),d=this.index.identifier,b=this.tmp(),e=this.tmp(),f=this.lower_bound.getEvalStrings(a),k=this.upper_bound.getEvalStrings(a);a=this.summand.getEvalStrings(a);return{expression:c,statements:f.statements+"var "+b+" = Math.round("+f.expression+");"+(k.statements+"var "+e+" = Math.round("+k.expression+
");")+("var "+c+"="+this.starting_value+";")+("if(!isFinite("+e+"-"+b+")) {"+c+"=("+e+"<"+b+"?"+this.starting_value+":NaN);}else{"+("for (var "+d+"="+b+";"+d+"<="+e+";"+d+"++) {"+a.statements+c+this.in_place_operator+a.expression+"};")+"}")}}});a.SummationNode=g(u,function(a,c){a.init=function(a,d,b,e){c.init.call(this,a,d,b,e)};a.starting_value=0;a.in_place_operator="+=";a.fn=function(a,c){return a+c};a.toString=function(){return"\\sum_{"+this.index+"="+this.lower_bound+"}^{"+this.upper_bound+"} "+
this.summand}});a.ProductNode=g(u,function(a,c){a.init=function(a,d,b,e){c.init.call(this,a,d,b,e)};a.starting_value=1;a.in_place_operator="*=";a.fn=function(a,c){return a*c};a.toString=function(){return"\\prod_{"+this.index+"="+this.lower_bound+"}^{"+this.upper_bound+"} "+this.summand}});a.OrderedPairListNode=g(b,function(a,c){a.init=function(a){c.init.call(this);this.elements=a;for(var d=0;d<a.length;d++)this.addDependencies(a[d].dependencies())};a.evaluateOnce=function(a){return this.elements.map(function(c){return c.evaluateOnce(a)})};
a.getEvalStrings=function(a){for(var c="",d="[",b=0;b<this.elements.length;b++){var e=this.elements[b].getEvalStrings(a),c=c+e.statements,d=d+e.expression;b<this.elements.length-1&&(this.expression+=",")}return{statements:c,expression:d+"]"}};a.toString=function(){return"\\left("+this.elements.join(", ")+"\\right)"};a.statementType=ORDERED_PAIR_LIST});for(var B in a)a.hasOwnProperty(B)&&(q.yy[B]=a[B]);q.yy.parseFunctionDeclaration=function(a){a=a.replace("###","");var c=RegExp("((?:[a-zA-Z]|\\\\[a-zA-Z]+)(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?)(?:\\\\left)?\\(((?:(?:[a-zA-Z]|\\\\[a-zA-Z]+)(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?(?:\\,(?:[a-zA-Z]|\\\\[a-zA-Z]+)(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?)*))(?:\\\\right)?\\)=");
a=a.replace(/(?:\s|\\space|\\\:)*/g,"");c=c.exec(a);return{identifier:h(c[1]),args:c[2].split(",").map(h),input_string:a.split("=")[0]}};a.parse=function(a){return q.parse("###"+a)};a.tryParse=function(d){try{return a.parse(d)}catch(b){return c(b)}};q.yy.setInput=function(a,c){a.setInputString(q.yy.lexer.matched.slice(Math.max(3,c.first_column),c.last_column))};q.yy.parseError=function(a,c){throw"Sorry - I don't understand this";};return a});
define("math/quadratic",["require"],function(b){return{formula:function(b,r){if(3!=b.length)throw"Where did you learn the quadratic formula?";var v=b[0],q=b[1],p=b[2];if(0===v)return[-p/q,-p/q];var u=Math.sqrt(q*q-4*v*p),p=(-q+u)/(2*v),v=(-q-u)/(2*v);return 0===r?p:1===r?v:[p,v]},inequalityRegions:function(b){var r=b[0],v=b[1];b=b[2];if(0===r&&0===v)return 0<b?[NaN,-1E305,1E305,NaN]:[NaN,NaN,NaN,NaN];if(0===r)return 0<v?[NaN,NaN,NaN,-b/v]:[-b/v,NaN,NaN,NaN];var q=Math.sqrt(v*v-4*r*b);if(!isFinite(q))return 0<
r?[NaN,-1E305,1E305,NaN]:[NaN,NaN,NaN,NaN];b=(-v+q)/(2*r);v=(-v-q)/(2*r);return 0<r?[v,NaN,NaN,b]:[NaN,b,v,NaN]},formulaEvalStrings:function(b){switch(b.expressions.length){case 2:return b=b.statements+"return -"+b.expressions[0]+"/"+b.expressions[1],[b];case 3:return b=b.statements+"var coeffs = ["+b.expressions[2]+","+b.expressions[1]+","+b.expressions[0]+"];",[b+"return this.quadraticFormula(coeffs, 0);",b+"return this.quadraticFormula(coeffs, 1);"]}},inequalityRegionEvalStrings:function(b){for(var r=
b.expressions.slice();3>r.length;)r.push("0");b=b.statements+"var coeffs = ["+r[2]+","+r[1]+","+r[0]+"];";return[b+"return this.quadraticInequalityRegions(coeffs)[0]",b+"return this.quadraticInequalityRegions(coeffs)[1]",b+"return this.quadraticInequalityRegions(coeffs)[2]",b+"return this.quadraticInequalityRegions(coeffs)[3]"]}}});
define("math/builtinframe","require ./builtin ./evalframe ./parser_util ./inverses math/quadratic".split(" "),function(b){var g=b("./builtin"),r=b("./evalframe"),v=b("./parser_util"),q=b("./inverses");b=b("math/quadratic");var v=v.ConstantNode,p=r();p.setVariable("pi",v(Math.PI));p.setEvalStrings("pi",{expression:String(Math.PI),statements:""});p.setVariable("tau",v(2*Math.PI));p.setEvalStrings("tau",{expression:String(2*Math.PI),statements:""});p.setVariable("e",v(Math.E));p.setEvalStrings("e",{expression:String(Math.E),
statements:""});p.setDegreeMode=function(b){p._angleMultiplier=b?Math.PI/180:1};p.setDegreeMode(!1);p.setFunction("angleMultiplier",1,function(){return p._angleMultiplier});r=function(b,a,m){p.setFunction(b,1,function(c){return a(c*p._angleMultiplier)});p.setFunction(q[b],1,function(a){return m(a)/p._angleMultiplier})};r("sin",g.sin,Math.asin);r("cos",g.cos,Math.acos);r("tan",g.tan,Math.atan);r("cot",g.cot,g.acot);r("sec",g.sec,g.asec);r("csc",g.csc,g.acsc);r=function(b,a,m){p.setFunction(b,1,a);
p.setFunction(q[b],1,m)};r("sinh",g.sinh,g.asinh);r("cosh",g.cosh,g.acosh);r("tanh",g.tanh,g.atanh);r("coth",g.coth,g.acoth);r("sech",g.sech,g.asech);r("csch",g.csch,g.acsch);p.setFunction("pow",2,g.pow);p.setFunction("sqrt",1,Math.sqrt);p.setFunction("nthroot",2,g.nthroot);p.setFunction("log",2,g.log_base);p.setFunction("exp",1,Math.exp);p.setFunction("floor",1,Math.floor);p.setFunction("ceil",1,Math.ceil);p.setFunction("round",1,Math.round);p.setFunction("abs",1,Math.abs);p.setFunction("mod",2,
g.mod);p.setFunction("max",2,g.max);p.setFunction("min",2,g.min);p.setFunction("sign",1,g.sign);p.setFunction("lcm",2,g.lcm);p.setFunction("gcd",2,g.gcd);p.setFunction("nCr",2,g.nCr);p.setFunction("nPr",2,g.nPr);p.setFunction("factorial",1,g.factorial);p.setFunction("polyGamma",2,g.polyGamma);p.setFunction("quadraticFormula",2,b.formula);p.setFunction("quadraticInequalityRegions",1,b.inequalityRegions);return p});
(function(){function b(a,c,d){if(a===c)return 0!==a||1/a==1/c;if(null==a||null==c)return a===c;a._chain&&(a=a._wrapped);c._chain&&(c=c._wrapped);if(a.isEqual&&z.isFunction(a.isEqual))return a.isEqual(c);if(c.isEqual&&z.isFunction(c.isEqual))return c.isEqual(a);var e=m.call(a);if(e!=m.call(c))return!1;switch(e){case "[object String]":return a==String(c);case "[object Number]":return a!=+a?c!=+c:0==a?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==
c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var f=d.length;f--;)if(d[f]==a)return!0;d.push(a);var f=0,k=!0;if("[object Array]"==e){if(f=a.length,k=f==c.length)for(;f--&&(k=f in a==f in c&&b(a[f],c[f],d)););}else{if("constructor"in a!="constructor"in c||a.constructor!=c.constructor)return!1;for(var h in a)if(z.has(a,h)&&(f++,!(k=z.has(c,h)&&b(a[h],c[h],d))))break;if(k){for(h in c)if(z.has(c,h)&&!f--)break;
k=!f}}d.pop();return k}var g=this,r=g._,v={},q=Array.prototype,p=Object.prototype,u=q.slice,a=q.unshift,m=p.toString,c=p.hasOwnProperty,f=q.forEach,e=q.map,h=q.reduce,d=q.reduceRight,k=q.filter,l=q.every,y=q.some,s=q.indexOf,n=q.lastIndexOf,p=Array.isArray,x=Object.keys,B=Function.prototype.bind,z=function(a){return new N(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=z),exports._=z):g._=z;z.VERSION="1.3.3";var C=z.each=z.forEach=function(a,
c,d){if(null!=a)if(f&&a.forEach===f)a.forEach(c,d);else if(a.length===+a.length)for(var b=0,e=a.length;b<e&&!(b in a&&c.call(d,a[b],b,a)===v);b++);else for(b in a)if(z.has(a,b)&&c.call(d,a[b],b,a)===v)break};z.map=z.collect=function(a,c,d){var b=[];if(null==a)return b;if(e&&a.map===e)return a.map(c,d);C(a,function(a,e,f){b[b.length]=c.call(d,a,e,f)});a.length===+a.length&&(b.length=a.length);return b};z.reduce=z.foldl=z.inject=function(a,c,d,b){var e=2<arguments.length;null==a&&(a=[]);if(h&&a.reduce===
h)return b&&(c=z.bind(c,b)),e?a.reduce(c,d):a.reduce(c);C(a,function(a,f,k){e?d=c.call(b,d,a,f,k):(d=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return d};z.reduceRight=z.foldr=function(a,c,b,e){var f=2<arguments.length;null==a&&(a=[]);if(d&&a.reduceRight===d)return e&&(c=z.bind(c,e)),f?a.reduceRight(c,b):a.reduceRight(c);var k=z.toArray(a).reverse();e&&!f&&(c=z.bind(c,e));return f?z.reduce(k,c,b,e):z.reduce(k,c)};z.find=z.detect=function(a,c,d){var b;D(a,function(a,
e,f){if(c.call(d,a,e,f))return b=a,!0});return b};z.filter=z.select=function(a,c,d){var b=[];if(null==a)return b;if(k&&a.filter===k)return a.filter(c,d);C(a,function(a,e,f){c.call(d,a,e,f)&&(b[b.length]=a)});return b};z.reject=function(a,c,d){var b=[];if(null==a)return b;C(a,function(a,e,f){c.call(d,a,e,f)||(b[b.length]=a)});return b};z.every=z.all=function(a,c,d){var b=!0;if(null==a)return b;if(l&&a.every===l)return a.every(c,d);C(a,function(a,e,f){if(!(b=b&&c.call(d,a,e,f)))return v});return!!b};
var D=z.some=z.any=function(a,c,d){c||(c=z.identity);var b=!1;if(null==a)return b;if(y&&a.some===y)return a.some(c,d);C(a,function(a,e,f){if(b||(b=c.call(d,a,e,f)))return v});return!!b};z.include=z.contains=function(a,c){var d=!1;return null==a?d:s&&a.indexOf===s?-1!=a.indexOf(c):d=D(a,function(a){return a===c})};z.invoke=function(a,c){var d=u.call(arguments,2);return z.map(a,function(a){return(z.isFunction(c)?c||a:a[c]).apply(a,d)})};z.pluck=function(a,c){return z.map(a,function(a){return a[c]})};
z.max=function(a,c,d){if(!c&&z.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!c&&z.isEmpty(a))return-Infinity;var b={computed:-Infinity};C(a,function(a,e,f){e=c?c.call(d,a,e,f):a;e>=b.computed&&(b={value:a,computed:e})});return b.value};z.min=function(a,c,d){if(!c&&z.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!c&&z.isEmpty(a))return Infinity;var b={computed:Infinity};C(a,function(a,e,f){e=c?c.call(d,a,e,f):a;e<b.computed&&(b={value:a,computed:e})});return b.value};z.shuffle=
function(a){var c=[],d;C(a,function(a,b,e){d=Math.floor(Math.random()*(b+1));c[b]=c[d];c[d]=a});return c};z.sortBy=function(a,c,d){var b=z.isFunction(c)?c:function(a){return a[c]};return z.pluck(z.map(a,function(a,c,e){return{value:a,criteria:b.call(d,a,c,e)}}).sort(function(a,c){var d=a.criteria,b=c.criteria;return void 0===d?1:void 0===b?-1:d<b?-1:d>b?1:0}),"value")};z.groupBy=function(a,c){var d={},b=z.isFunction(c)?c:function(a){return a[c]};C(a,function(a,c){var e=b(a,c);(d[e]||(d[e]=[])).push(a)});
return d};z.sortedIndex=function(a,c,d){d||(d=z.identity);for(var b=0,e=a.length;b<e;){var f=b+e>>1;d(a[f])<d(c)?b=f+1:e=f}return b};z.toArray=function(a){return a?z.isArray(a)||z.isArguments(a)?u.call(a):a.toArray&&z.isFunction(a.toArray)?a.toArray():z.values(a):[]};z.size=function(a){return z.isArray(a)?a.length:z.keys(a).length};z.first=z.head=z.take=function(a,c,d){return null==c||d?a[0]:u.call(a,0,c)};z.initial=function(a,c,d){return u.call(a,0,a.length-(null==c||d?1:c))};z.last=function(a,c,
d){return null==c||d?a[a.length-1]:u.call(a,Math.max(a.length-c,0))};z.rest=z.tail=function(a,c,d){return u.call(a,null==c||d?1:c)};z.compact=function(a){return z.filter(a,function(a){return!!a})};z.flatten=function(a,c){return z.reduce(a,function(a,d){if(z.isArray(d))return a.concat(c?d:z.flatten(d));a[a.length]=d;return a},[])};z.without=function(a){return z.difference(a,u.call(arguments,1))};z.uniq=z.unique=function(a,c,d){d=d?z.map(a,d):a;var b=[];3>a.length&&(c=!0);z.reduce(d,function(d,e,f){(c?
z.last(d)===e&&d.length:z.include(d,e))||(d.push(e),b.push(a[f]));return d},[]);return b};z.union=function(){return z.uniq(z.flatten(arguments,!0))};z.intersection=z.intersect=function(a){var c=u.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(c,function(c){return 0<=z.indexOf(c,a)})})};z.difference=function(a){var c=z.flatten(u.call(arguments,1),!0);return z.filter(a,function(a){return!z.include(c,a)})};z.zip=function(){for(var a=u.call(arguments),c=z.max(z.pluck(a,"length")),
d=Array(c),b=0;b<c;b++)d[b]=z.pluck(a,""+b);return d};z.indexOf=function(a,c,d){if(null==a)return-1;var b;if(d)return d=z.sortedIndex(a,c),a[d]===c?d:-1;if(s&&a.indexOf===s)return a.indexOf(c);d=0;for(b=a.length;d<b;d++)if(d in a&&a[d]===c)return d;return-1};z.lastIndexOf=function(a,c){if(null==a)return-1;if(n&&a.lastIndexOf===n)return a.lastIndexOf(c);for(var d=a.length;d--;)if(d in a&&a[d]===c)return d;return-1};z.range=function(a,c,d){1>=arguments.length&&(c=a||0,a=0);d=arguments[2]||1;for(var b=
Math.max(Math.ceil((c-a)/d),0),e=0,f=Array(b);e<b;)f[e++]=a,a+=d;return f};var F=function(){};z.bind=function(a,c){var d,b;if(a.bind===B&&B)return B.apply(a,u.call(arguments,1));if(!z.isFunction(a))throw new TypeError;b=u.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(c,b.concat(u.call(arguments)));F.prototype=a.prototype;var e=new F,f=a.apply(e,b.concat(u.call(arguments)));return Object(f)===f?f:e}};z.bindAll=function(a){var c=u.call(arguments,1);0==c.length&&(c=z.functions(a));
C(c,function(c){a[c]=z.bind(a[c],a)});return a};z.memoize=function(a,c){var d={};c||(c=z.identity);return function(){var b=c.apply(this,arguments);return z.has(d,b)?d[b]:d[b]=a.apply(this,arguments)}};z.delay=function(a,c){var d=u.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},c)};z.defer=function(a){return z.delay.apply(z,[a,1].concat(u.call(arguments,1)))};z.throttle=function(a,c){var d,b,e,f,k,h,l=z.debounce(function(){k=f=!1},c);return function(){d=this;b=arguments;e||
(e=setTimeout(function(){e=null;k&&a.apply(d,b);l()},c));f?k=!0:h=a.apply(d,b);l();f=!0;return h}};z.debounce=function(a,c,d){var b;return function(){var e=this,f=arguments;d&&!b&&a.apply(e,f);clearTimeout(b);b=setTimeout(function(){b=null;d||a.apply(e,f)},c)}};z.once=function(a){var c=!1,d;return function(){if(c)return d;c=!0;return d=a.apply(this,arguments)}};z.wrap=function(a,c){return function(){var d=[a].concat(u.call(arguments,0));return c.apply(this,d)}};z.compose=function(){var a=arguments;
return function(){for(var c=arguments,d=a.length-1;0<=d;d--)c=[a[d].apply(this,c)];return c[0]}};z.after=function(a,c){return 0>=a?c():function(){if(1>--a)return c.apply(this,arguments)}};z.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)z.has(a,d)&&(c[c.length]=d);return c};z.values=function(a){return z.map(a,z.identity)};z.functions=z.methods=function(a){var c=[],d;for(d in a)z.isFunction(a[d])&&c.push(d);return c.sort()};z.extend=function(a){C(u.call(arguments,
1),function(c){for(var d in c)a[d]=c[d]});return a};z.pick=function(a){var c={};C(z.flatten(u.call(arguments,1)),function(d){d in a&&(c[d]=a[d])});return c};z.defaults=function(a){C(u.call(arguments,1),function(c){for(var d in c)null==a[d]&&(a[d]=c[d])});return a};z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a};z.tap=function(a,c){c(a);return a};z.isEqual=function(a,c){return b(a,c,[])};z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===
a.length;for(var c in a)if(z.has(a,c))return!1;return!0};z.isElement=function(a){return!(!a||1!=a.nodeType)};z.isArray=p||function(a){return"[object Array]"==m.call(a)};z.isObject=function(a){return a===Object(a)};z.isArguments=function(a){return"[object Arguments]"==m.call(a)};z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))});z.isFunction=function(a){return"[object Function]"==m.call(a)};z.isString=function(a){return"[object String]"==m.call(a)};z.isNumber=function(a){return"[object Number]"==
m.call(a)};z.isFinite=function(a){return z.isNumber(a)&&isFinite(a)};z.isNaN=function(a){return a!==a};z.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==m.call(a)};z.isDate=function(a){return"[object Date]"==m.call(a)};z.isRegExp=function(a){return"[object RegExp]"==m.call(a)};z.isNull=function(a){return null===a};z.isUndefined=function(a){return void 0===a};z.has=function(a,d){return c.call(a,d)};z.noConflict=function(){g._=r;return this};z.identity=function(a){return a};z.times=
function(a,c,d){for(var b=0;b<a;b++)c.call(d,b)};z.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};z.result=function(a,c){if(null==a)return null;var d=a[c];return z.isFunction(d)?d.call(a):d};z.mixin=function(a){C(z.functions(a),function(c){V(c,z[c]=a[c])})};var H=0;z.uniqueId=function(a){var c=H++;return a?a+c:c};z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};var G=/.^/,I={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},A;for(A in I)I[I[A]]=A;var K=/\\|'|\r|\n|\t|\u2028|\u2029/g,O=/\\(\\|'|r|n|t|u2028|u2029)/g,J=function(a){return a.replace(O,function(a,c){return I[c]})};z.template=function(a,c,d){d=z.defaults(d||{},z.templateSettings);a="__p+='"+a.replace(K,function(a){return"\\"+I[a]}).replace(d.escape||G,function(a,c){return"'+\n_.escape("+J(c)+")+\n'"}).replace(d.interpolate||G,function(a,c){return"'+\n("+
J(c)+")+\n'"}).replace(d.evaluate||G,function(a,c){return"';\n"+J(c)+"\n;__p+='"})+"';\n";d.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var b=new Function(d.variable||"obj","_",a);if(c)return b(c,z);c=function(a){return b.call(this,a,z)};c.source="function("+(d.variable||"obj")+"){\n"+a+"}";return c};z.chain=function(a){return z(a).chain()};var N=function(a){this._wrapped=a};z.prototype=N.prototype;
var L=function(a,c){return c?z(a).chain():a},V=function(c,d){N.prototype[c]=function(){var c=u.call(arguments);a.call(c,this._wrapped);return L(d.apply(z,c),this._chain)}};z.mixin(z);C("pop push reverse shift sort splice unshift".split(" "),function(a){var c=q[a];N.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);var b=d.length;"shift"!=a&&"splice"!=a||0!==b||delete d[0];return L(d,this._chain)}});C(["concat","join","slice"],function(a){var c=q[a];N.prototype[a]=function(){return L(c.apply(this._wrapped,
arguments),this._chain)}});N.prototype.chain=function(){this._chain=!0;return this};N.prototype.value=function(){return this._wrapped}}).call(this);define("underscore",function(b){return function(){return b._}}(this));
define("numeric",[],function(){var b="undefined"===typeof exports?function(){}:exports;"undefined"!==typeof global&&(global.numeric=b);b.version="1.2.6";b.bench=function(b,r){var v,q,p;"undefined"===typeof r&&(r=15);p=0.5;for(v=new Date;;){for(q=p*=2;3<q;q-=4)b(),b(),b(),b();for(;0<q;)b(),q--;q=new Date;if(q-v>r)break}for(q=p;3<q;q-=4)b(),b(),b(),b();for(;0<q;)b(),q--;q=new Date;return 1E3*(3*p-1)/(q-v)};b._myIndexOf=function(b){var r=this.length,v;for(v=0;v<r;++v)if(this[v]===b)return v;return-1};
b.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:b._myIndexOf;b.precision=4;b.largeArray=50;b.compile=function(){var g=Array.prototype.slice.call(arguments),r=g.pop(),r="return function ("+g.join(",")+") {"+r+";}";return(new Function(["numeric"],r))(b)};b.prettyPrint=function(g){function r(g){if(0===g)return"0";if(isNaN(g))return"NaN";if(0>g)return"-"+r(-g);if(isFinite(g)){var u=Math.floor(Math.log(g)/Math.log(10));g/=Math.pow(10,u);g=g.toPrecision(b.precision);10===parseFloat(g)&&(u++,
g=(1).toPrecision(b.precision));return parseFloat(g).toString()+"e"+u.toString()}return"Infinity"}function v(g){var u;if("undefined"===typeof g)return q.push(Array(b.precision+8).join(" ")),!1;if("string"===typeof g)return q.push('"'+g+'"'),!1;if("boolean"===typeof g)return q.push(g.toString()),!1;if("number"===typeof g){var a=r(g);u=g.toPrecision(b.precision);g=parseFloat(g.toString()).toString();g=[a,u,g,parseFloat(u).toString(),parseFloat(g).toString()];for(u=1;u<g.length;u++)g[u].length<a.length&&
(a=g[u]);q.push(Array(b.precision+8-a.length).join(" ")+a);return!1}if(null===g)return q.push("null"),!1;if("function"===typeof g){q.push(g.toString());a=!1;for(u in g)g.hasOwnProperty(u)&&(a?q.push(",\n"):q.push("\n{"),a=!0,q.push(u),q.push(": \n"),v(g[u]));a&&q.push("}\n");return!0}if(g instanceof Array){if(g.length>b.largeArray)return q.push("...Large Array..."),!0;a=!1;q.push("[");for(u=0;u<g.length;u++)0<u&&(q.push(","),a&&q.push("\n ")),a=v(g[u]);q.push("]");return!0}q.push("{");a=!1;for(u in g)g.hasOwnProperty(u)&&
(a&&q.push(",\n"),a=!0,q.push(u),q.push(": \n"),v(g[u]));q.push("}");return!0}var q=[];v(g);return q.join("")};b.parseDate=function(b){function r(b){if("string"===typeof b)return Date.parse(b.replace(/-/g,"/"));if(!(b instanceof Array))throw Error("parseDate: parameter must be arrays of strings");var g=[],p;for(p=0;p<b.length;p++)g[p]=r(b[p]);return g}return r(b)};b.parseFloat=function(b){function r(b){if("string"===typeof b)return parseFloat(b);if(!(b instanceof Array))throw Error("parseFloat: parameter must be arrays of strings");
var g=[],p;for(p=0;p<b.length;p++)g[p]=r(b[p]);return g}return r(b)};b.parseCSV=function(b){b=b.split("\n");var r,v,q=[],p=/(([^'",]*)|('[^']*')|("[^"]*")),/g,u=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,a=0;for(v=0;v<b.length;v++){var m=(b[v]+",").match(p),c;if(0<m.length){q[a]=[];for(r=0;r<m.length;r++)c=m[r].substr(0,m[r].length-1),u.test(c)?q[a][r]=parseFloat(c):q[a][r]=c;a++}}return q};b.toCSV=function(g){var r,v,q,p,u;q=b.dim(g)[0];u=[];for(r=
0;r<q;r++){p=[];for(v=0;v<q;v++)p[v]=g[r][v].toString();u[r]=p.join(", ")}return u.join("\n")+"\n"};b.getURL=function(b){var r=new XMLHttpRequest;r.open("GET",b,!1);r.send();return r};b.imageURL=function(b){function r(a,c,b){"undefined"===typeof c&&(c=0);"undefined"===typeof b&&(b=a.length);for(var e=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,
450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,
4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,
3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,
2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,
2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,
755167117],f=-1,m=0;c<b;c++)m=(f^a[c])&255,f=f>>>8^e[m];return f^-1}var v=b[0].length,q=b[0][0].length,p,u,a,m,c,f,e=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,q>>24&255,q>>16&255,q>>8&255,q&255,v>>24&255,v>>16&255,v>>8&255,v&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];p=r(e,12,29);e[29]=p>>24&255;e[30]=p>>16&255;e[31]=p>>8&255;e[32]=p&255;p=1;for(c=u=0;c<v;c++){c<v-1?e.push(0):e.push(1);m=3*q+1+(0===c)&255;a=3*q+1+(0===c)>>8&255;e.push(m);e.push(a);e.push(~m&255);e.push(~a&255);0===
c&&e.push(0);for(f=0;f<q;f++)for(a=0;3>a;a++)m=b[a][c][f],m=255<m?255:0>m?0:Math.round(m),p=(p+m)%65521,u=(u+p)%65521,e.push(m);e.push(0)}b=(u<<16)+p;e.push(b>>24&255);e.push(b>>16&255);e.push(b>>8&255);e.push(b&255);b=e.length-41;e[33]=b>>24&255;e[34]=b>>16&255;e[35]=b>>8&255;e[36]=b&255;p=r(e,37);e.push(p>>24&255);e.push(p>>16&255);e.push(p>>8&255);e.push(p&255);e.push(0);e.push(0);e.push(0);e.push(0);e.push(73);e.push(69);e.push(78);e.push(68);e.push(174);e.push(66);e.push(96);e.push(130);return"data:image/png;base64,"+
function(a){var c=a.length,b,e,f,m,g,x="";for(b=0;b<c;b+=3)e=a[b],f=a[b+1],m=a[b+2],g=e>>2,e=((e&3)<<4)+(f>>4),f=((f&15)<<2)+(m>>6),m&=63,b+1>=c?f=m=64:b+2>=c&&(m=64),x+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m);return x}(e)};b._dim=
function(b){for(var r=[];"object"===typeof b;)r.push(b.length),b=b[0];return r};b.dim=function(g){var r,v;return"object"===typeof g?(r=g[0],"object"===typeof r?(v=r[0],"object"===typeof v?b._dim(g):[g.length,r.length]):[g.length]):[]};b.mapreduce=function(g,r){return b.compile("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+r+';\nif(typeof x === "number") { var xi = x; '+g+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+
g+";\n    xi = x[i-1];\n    "+g+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+g+"\n}\nreturn accum;")};b.mapreduce2=function(g,r){return b.compile("x","var n = x.length;\nvar i,xi;\n"+r+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+g+";\n}\nreturn accum;")};b.same=function r(b,q){var p,u;if(!(b instanceof Array&&q instanceof Array))return!1;u=b.length;if(u!==q.length)return!1;for(p=0;p<u;p++)if(b[p]!==q[p])if("object"===typeof b[p]){if(!r(b[p],q[p]))return!1}else return!1;return!0};b.rep=function(r,
v,q){"undefined"===typeof q&&(q=0);var p=r[q],u=Array(p);if(q===r.length-1){for(p-=2;0<=p;p-=2)u[p+1]=v,u[p]=v;-1===p&&(u[0]=v);return u}for(p-=1;0<=p;p--)u[p]=b.rep(r,v,q+1);return u};b.dotMMsmall=function(b,v){var q,p,u,a,m,c,f,e,h,d;q=b.length;a=v.length;m=v[0].length;c=Array(q);for(q-=1;0<=q;q--){f=Array(m);e=b[q];for(u=m-1;0<=u;u--){h=e[a-1]*v[a-1][u];for(p=a-2;1<=p;p-=2)d=p-1,h+=e[p]*v[p][u]+e[d]*v[d][u];0===p&&(h+=e[0]*v[0][u]);f[u]=h}c[q]=f}return c};b._getCol=function(b,v,q){var p;for(p=
b.length-1;0<p;--p)q[p]=b[p][v],--p,q[p]=b[p][v];0===p&&(q[0]=b[0][v])};b.dotMMbig=function(r,v){var q=b._getCol,p=Array(v.length),u=r.length,a=v[0].length,m=Array(u),c=b.dotVV,f,e;--u;for(f=u;-1!==f;--f)m[f]=Array(a);--a;for(f=a;-1!==f;--f)for(q(v,f,p),e=u;-1!==e;--e)a=r[e],m[e][f]=c(a,p);return m};b.dotMV=function(r,v){for(var q=r.length,p=Array(q),u=b.dotVV,q=q-1;0<=q;q--)p[q]=u(r[q],v);return p};b.dotVM=function(b,v){var q,p,u,a,m,c;u=b.length;q=v[0].length;a=Array(q);for(p=q-1;0<=p;p--){m=b[u-
1]*v[u-1][p];for(q=u-2;1<=q;q-=2)c=q-1,m+=b[q]*v[q][p]+b[c]*v[c][p];0===q&&(m+=b[0]*v[0][p]);a[p]=m}return a};b.dotVV=function(b,v){var q;q=b.length;var p,u=b[q-1]*v[q-1];for(q-=2;1<=q;q-=2)p=q-1,u+=b[q]*v[q]+b[p]*v[p];0===q&&(u+=b[0]*v[0]);return u};b.dot=function(r,v){var q=b.dim;switch(1E3*q(r).length+q(v).length){case 2002:return 10>v.length?b.dotMMsmall(r,v):b.dotMMbig(r,v);case 2001:return b.dotMV(r,v);case 1002:return b.dotVM(r,v);case 1001:return b.dotVV(r,v);case 1E3:return b.mulVS(r,v);
case 1:return b.mulSV(r,v);case 0:return r*v;default:throw Error("numeric.dot only works on vectors and matrices");}};b.diag=function(b){var v,q,p,u=b.length,a=Array(u),m;for(v=u-1;0<=v;v--){m=Array(u);q=v+2;for(p=u-1;p>=q;p-=2)m[p]=0,m[p-1]=0;p>v&&(m[p]=0);m[v]=b[v];for(p=v-1;1<=p;p-=2)m[p]=0,m[p-1]=0;0===p&&(m[0]=0);a[v]=m}return a};b.getDiag=function(b){for(var v=Math.min(b.length,b[0].length),q=Array(v),v=v-1;1<=v;--v)q[v]=b[v][v],--v,q[v]=b[v][v];0===v&&(q[0]=b[0][0]);return q};b.identity=function(r){return b.diag(b.rep([r],
1))};b.pointwise=function(r,v,q){"undefined"===typeof q&&(q="");var p=[],u,a=/\[i\]$/,m,c="",f=!1;for(u=0;u<r.length;u++)a.test(r[u])?c=m=r[u].substring(0,r[u].length-3):m=r[u],"ret"===m&&(f=!0),p.push(m);p[r.length]="_s";p[r.length+1]="_k";p[r.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+c+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(f?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+r.join(",")+",_s,_k+1);\n    return ret;\n}\n"+
q+"\nfor(i=_n-1;i!==-1;--i) {\n    "+v+"\n}\nreturn ret;";return b.compile.apply(null,p)};b.pointwise2=function(r,v,q){"undefined"===typeof q&&(q="");var p=[],u,a=/\[i\]$/,m,c="",f=!1;for(u=0;u<r.length;u++)a.test(r[u])?c=m=r[u].substring(0,r[u].length-3):m=r[u],"ret"===m&&(f=!0),p.push(m);p[r.length]="var _n = "+c+".length;\nvar i"+(f?"":", ret = Array(_n)")+";\n"+q+"\nfor(i=_n-1;i!==-1;--i) {\n"+v+"\n}\nreturn ret;";return b.compile.apply(null,p)};b._biforeach=function v(b,p,u,a,m){if(a===u.length-
1)m(b,p);else{var c;for(c=u[a]-1;0<=c;c--)v("object"===typeof b?b[c]:b,"object"===typeof p?p[c]:p,u,a+1,m)}};b._biforeach2=function q(b,u,a,m,c){if(m===a.length-1)return c(b,u);var f;f=a[m];var e=Array(f);for(f-=1;0<=f;--f)e[f]=q("object"===typeof b?b[f]:b,"object"===typeof u?u[f]:u,a,m+1,c);return e};b._foreach=function p(b,a,m,c){if(m===a.length-1)c(b);else{var f;for(f=a[m]-1;0<=f;f--)p(b[f],a,m+1,c)}};b._foreach2=function u(a,b,c,f){if(c===b.length-1)return f(a);var e;e=b[c];var h=Array(e);for(e-=
1;0<=e;e--)h[e]=u(a[e],b,c+1,f);return h};b.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};b.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="};b.mathfuns="abs acos asin atan ceil cos exp floor log round sin sqrt tan isNaN isFinite".split(" ");b.mathfuns2=["atan2","pow","max",
"min"];b.ops1={neg:"-",not:"!",bnot:"~",clone:""};b.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],
inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]};(function(){var u,a;for(u=0;u<b.mathfuns2.length;++u)a=b.mathfuns2[u],b.ops2[a]=a;for(u in b.ops2)if(b.ops2.hasOwnProperty(u)){a=b.ops2[u];var m,c,f="";-1!==b.myIndexOf.call(b.mathfuns2,u)?(f="var "+a+" = Math."+a+";\n",m=function(c,b,d){return c+" = "+a+"("+b+","+d+")"},c=function(c,b){return c+" = "+a+"("+c+","+b+")"}):(m=function(c,b,d){return c+" = "+b+" "+a+" "+d},c=b.opseq.hasOwnProperty(u+"eq")?function(c,b){return c+" "+
a+"= "+b}:function(c,b){return c+" = "+c+" "+a+" "+b});b[u+"VV"]=b.pointwise2(["x[i]","y[i]"],m("ret[i]","x[i]","y[i]"),f);b[u+"SV"]=b.pointwise2(["x","y[i]"],m("ret[i]","x","y[i]"),f);b[u+"VS"]=b.pointwise2(["x[i]","y"],m("ret[i]","x[i]","y"),f);b[u]=b.compile("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+u+"VV, VS = numeric."+u+"VS, SV = numeric."+u+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+
c("x","y")+"\n}\nreturn x;\n");b[a]=b[u];b[u+"eqV"]=b.pointwise2(["ret[i]","x[i]"],c("ret[i]","x[i]"),f);b[u+"eqS"]=b.pointwise2(["ret[i]","x"],c("ret[i]","x"),f);b[u+"eq"]=b.compile("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+u+"eqV, S = numeric."+u+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(u=0;u<b.mathfuns2.length;++u)a=
b.mathfuns2[u],delete b.ops2[a];for(u=0;u<b.mathfuns.length;++u)a=b.mathfuns[u],b.ops1[a]=a;for(u in b.ops1)b.ops1.hasOwnProperty(u)&&(f="",a=b.ops1[u],-1!==b.myIndexOf.call(b.mathfuns,u)&&Math.hasOwnProperty(a)&&(f="var "+a+" = Math."+a+";\n"),b[u+"eqV"]=b.pointwise2(["ret[i]"],"ret[i] = "+a+"(ret[i]);",f),b[u+"eq"]=b.compile("x",'if(typeof x !== "object") return '+a+"x\nvar i;\nvar V = numeric."+u+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),b[u+"V"]=b.pointwise2(["x[i]"],
"ret[i] = "+a+"(x[i]);",f),b[u]=b.compile("x",'if(typeof x !== "object") return '+a+"(x)\nvar i;\nvar V = numeric."+u+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(u=0;u<b.mathfuns.length;++u)a=b.mathfuns[u],delete b.ops1[a];for(u in b.mapreducers)b.mapreducers.hasOwnProperty(u)&&(a=b.mapreducers[u],b[u+"V"]=b.mapreduce2(a[0],a[1]),b[u]=b.compile("x","s","k",a[1]+'if(typeof x !== "object") {    xi = x;\n'+a[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+
u+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+a[0]+";\n}\nreturn accum;\n"))})();b.truncVV=b.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;");b.truncVS=b.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;");b.truncSV=b.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;");b.trunc=function(u,a){return"object"===typeof u?"object"===typeof a?b.truncVV(u,a):
b.truncVS(u,a):"object"===typeof a?b.truncSV(u,a):Math.round(u/a)*a};b.inv=function(u){var a=b.dim(u),m=Math.abs,c=a[0],a=a[1],f=b.clone(u),e,h,d=b.identity(c),k,l,y,s,n;for(s=0;s<a;++s){h=u=-1;for(y=s;y!==c;++y)n=m(f[y][s]),n>h&&(u=y,h=n);h=f[u];f[u]=f[s];f[s]=h;l=d[u];d[u]=d[s];d[s]=l;u=h[s];for(n=s;n!==a;++n)h[n]/=u;for(n=a-1;-1!==n;--n)l[n]/=u;for(y=c-1;-1!==y;--y)if(y!==s){e=f[y];k=d[y];u=e[s];for(n=s+1;n!==a;++n)e[n]-=h[n]*u;for(n=a-1;0<n;--n)k[n]-=l[n]*u,--n,k[n]-=l[n]*u;0===n&&(k[0]-=l[0]*
u)}}return d};b.det=function(u){var a=b.dim(u);if(2!==a.length||a[0]!==a[1])throw Error("numeric: det() only works on square matrices");var a=a[0],m=1,c,f,e=b.clone(u),h,d,k,l;for(u=0;u<a-1;u++){f=u;for(c=u+1;c<a;c++)Math.abs(e[c][u])>Math.abs(e[f][u])&&(f=c);f!==u&&(c=e[f],e[f]=e[u],e[u]=c,m*=-1);h=e[u];for(c=u+1;c<a;c++){d=e[c];k=d[u]/h[u];for(f=u+1;f<a-1;f+=2)l=f+1,d[f]-=h[f]*k,d[l]-=h[l]*k;f!==a&&(d[f]-=h[f]*k)}if(0===h[u])return 0;m*=h[u]}return m*e[u][u]};b.transpose=function(b){var a,m;a=b.length;
var c=b[0].length,f=Array(c),e,h,d;for(m=0;m<c;m++)f[m]=Array(a);for(a-=1;1<=a;a-=2){h=b[a];e=b[a-1];for(m=c-1;1<=m;--m)d=f[m],d[a]=h[m],d[a-1]=e[m],--m,d=f[m],d[a]=h[m],d[a-1]=e[m];0===m&&(d=f[0],d[a]=h[0],d[a-1]=e[0])}if(0===a){e=b[0];for(m=c-1;1<=m;--m)f[m][0]=e[m],--m,f[m][0]=e[m];0===m&&(f[0][0]=e[0])}return f};b.negtranspose=function(b){var a,m;a=b.length;var c=b[0].length,f=Array(c),e,h,d;for(m=0;m<c;m++)f[m]=Array(a);for(a-=1;1<=a;a-=2){h=b[a];e=b[a-1];for(m=c-1;1<=m;--m)d=f[m],d[a]=-h[m],
d[a-1]=-e[m],--m,d=f[m],d[a]=-h[m],d[a-1]=-e[m];0===m&&(d=f[0],d[a]=-h[0],d[a-1]=-e[0])}if(0===a){e=b[0];for(m=c-1;1<=m;--m)f[m][0]=-e[m],--m,f[m][0]=-e[m];0===m&&(f[0][0]=-e[0])}return f};b._random=function a(b,c){var f;f=b[c];var e=Array(f),h;if(c===b.length-1){h=Math.random;for(f-=1;1<=f;f-=2)e[f]=h(),e[f-1]=h();0===f&&(e[0]=h());return e}for(f-=1;0<=f;f--)e[f]=a(b,c+1);return e};b.random=function(a){return b._random(a,0)};b.norm2=function(a){return Math.sqrt(b.norm2Squared(a))};b.linspace=function(a,
b,c){"undefined"===typeof c&&(c=Math.max(Math.round(b-a)+1,1));if(2>c)return 1===c?[a]:[];var f,e=Array(c);c--;for(f=c;0<=f;f--)e[f]=(f*b+(c-f)*a)/c;return e};b.getBlock=function(a,m,c){function f(a,b){var k,l=m[b];k=c[b]-l;var y=Array(k);if(b===e.length-1){for(;0<=k;k--)y[k]=a[k+l];return y}for(;0<=k;k--)y[k]=f(a[k+l],b+1);return y}var e=b.dim(a);return f(a,0)};b.setBlock=function(a,m,c,f){function e(a,b,f){var y,s=m[f],n=c[f]-s;if(f===h.length-1)for(y=n;0<=y;y--)a[y+s]=b[y];for(y=n;0<=y;y--)e(a[y+
s],b[y],f+1)}var h=b.dim(a);e(a,f,0);return a};b.getRange=function(a,b,c){for(var f=b.length,e=c.length,h,d=Array(f),k,l,f=f-1;-1!==f;--f)for(d[f]=Array(e),k=d[f],l=a[b[f]],h=e-1;-1!==h;--h)k[h]=l[c[h]];return d};b.blockMatrix=function(a){var m=b.dim(a);if(4>m.length)return b.blockMatrix([a]);var c=m[0],m=m[1],f,e,h,d;for(h=e=f=0;h<c;++h)f+=a[h][0].length;for(d=0;d<m;++d)e+=a[0][d][0].length;var k=Array(f);for(h=0;h<f;++h)k[h]=Array(e);var l=0,y,s,n,x,B;for(h=0;h<c;++h){y=e;for(d=m-1;-1!==d;--d)for(f=
a[h][d],y-=f[0].length,n=f.length-1;-1!==n;--n)for(B=f[n],s=k[l+n],x=B.length-1;-1!==x;--x)s[y+x]=B[x];l+=a[h][0].length}return k};b.tensor=function(a,m){if("number"===typeof a||"number"===typeof m)return b.mul(a,m);var c=b.dim(a),f=b.dim(m);if(1!==c.length||1!==f.length)throw Error("numeric: tensor product is only defined for vectors");var e=c[0],f=f[0],c=Array(e),h,d,k;for(h=e-1;0<=h;h--){e=Array(f);k=a[h];for(d=f-1;3<=d;--d)e[d]=k*m[d],--d,e[d]=k*m[d],--d,e[d]=k*m[d],--d,e[d]=k*m[d];for(;0<=d;)e[d]=
k*m[d],--d;c[h]=e}return c};b.T=function(a,b){this.x=a;this.y=b};b.t=function(a,m){return new b.T(a,m)};b.Tbinop=function(a,m,c,f,e){if("string"!==typeof e){var h;e="";for(h in b)b.hasOwnProperty(h)&&(0<=a.indexOf(h)||0<=m.indexOf(h)||0<=c.indexOf(h)||0<=f.indexOf(h))&&1<h.length&&(e+="var "+h+" = numeric."+h+";\n")}return b.compile(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+e+"\nif(x.y) {  if(y.y) {    return new numeric.T("+f+");\n  }\n  return new numeric.T("+
c+");\n}\nif(y.y) {\n  return new numeric.T("+m+");\n}\nreturn new numeric.T("+a+");\n")};b.T.prototype.add=b.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");b.T.prototype.sub=b.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");b.T.prototype.mul=b.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");b.T.prototype.reciprocal=
function(){var a=b.mul,m=b.div;return this.y?(a=b.add(a(this.x,this.x),a(this.y,this.y)),new b.T(m(this.x,a),m(b.neg(this.y),a))):new T(m(1,this.x))};b.T.prototype.div=function(a){a instanceof b.T||(a=new b.T(a));if(a.y)return this.mul(a.reciprocal());var m=b.div;return this.y?new b.T(m(this.x,a.x),m(this.y,a.x)):new b.T(m(this.x,a.x))};b.T.prototype.dot=b.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");
b.T.prototype.transpose=function(){var a=b.transpose,m=this.x,c=this.y;return c?new b.T(a(m),a(c)):new b.T(a(m))};b.T.prototype.transjugate=function(){var a=b.transpose,m=this.x,c=this.y;return c?new b.T(a(m),b.negtranspose(c)):new b.T(a(m))};b.Tunop=function(a,m,c){"string"!==typeof c&&(c="");return b.compile("var x = this;\n"+c+"\nif(x.y) {  "+m+";\n}\n"+a+";\n")};b.T.prototype.exp=b.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;");
b.T.prototype.conj=b.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");b.T.prototype.neg=b.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;");b.T.prototype.sin=b.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");b.T.prototype.cos=b.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");b.T.prototype.abs=b.Tunop("return new numeric.T(numeric.abs(x.x));",
"return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;");b.T.prototype.log=b.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);");b.T.prototype.norm2=b.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));");b.T.prototype.inv=function(){if("undefined"===typeof this.y)return new b.T(b.inv(this.x));
var a=this.x.length,m,c,f,e=b.identity(a),h=b.rep([a,a],0),d=b.clone(this.x),k=b.clone(this.y),l,y,s,n,x,B,z,C,D,F,H,G;for(m=0;m<a;m++){D=d[m][m];F=k[m][m];s=D*D+F*F;f=m;for(c=m+1;c<a;c++)D=d[c][m],F=k[c][m],l=D*D+F*F,l>s&&(f=c,s=l);f!==m&&(c=d[m],d[m]=d[f],d[f]=c,c=k[m],k[m]=k[f],k[f]=c,c=e[m],e[m]=e[f],e[f]=c,c=h[m],h[m]=h[f],h[f]=c);l=d[m];y=k[m];x=e[m];B=h[m];D=l[m];F=y[m];for(c=m+1;c<a;c++)H=l[c],G=y[c],l[c]=(H*D+G*F)/s,y[c]=(G*D-H*F)/s;for(c=0;c<a;c++)H=x[c],G=B[c],x[c]=(H*D+G*F)/s,B[c]=(G*
D-H*F)/s;for(c=m+1;c<a;c++){s=d[c];n=k[c];z=e[c];C=h[c];D=s[m];F=n[m];for(f=m+1;f<a;f++)H=l[f],G=y[f],s[f]-=H*D-G*F,n[f]-=G*D+H*F;for(f=0;f<a;f++)H=x[f],G=B[f],z[f]-=H*D-G*F,C[f]-=G*D+H*F}}for(m=a-1;0<m;m--)for(x=e[m],B=h[m],c=m-1;0<=c;c--)for(z=e[c],C=h[c],D=d[c][m],F=k[c][m],f=a-1;0<=f;f--)H=x[f],G=B[f],z[f]-=D*H-F*G,C[f]-=D*G+F*H;return new b.T(e,h)};b.T.prototype.get=function(a){var m=this.x,c=this.y,f=0,e,h=a.length;if(c){for(;f<h;)e=a[f],m=m[e],c=c[e],f++;return new b.T(m,c)}for(;f<h;)e=a[f],
m=m[e],f++;return new b.T(m)};b.T.prototype.set=function(a,m){var c=this.x,f=this.y,e=0,h,d=a.length,k=m.x,l=m.y;if(0===d)return l?this.y=l:f&&(this.y=void 0),this.x=c,this;if(l){f||(this.y=f=b.rep(b.dim(c),0));for(;e<d-1;)h=a[e],c=c[h],f=f[h],e++;h=a[e];c[h]=k;f[h]=l;return this}if(f){for(;e<d-1;)h=a[e],c=c[h],f=f[h],e++;h=a[e];c[h]=k;f[h]=k instanceof Array?b.rep(b.dim(k),0):0;return this}for(;e<d-1;)h=a[e],c=c[h],e++;h=a[e];c[h]=k;return this};b.T.prototype.getRows=function(a,m){var c=m-a+1,f,
e=Array(c),h=this.x,d=this.y;for(f=a;f<=m;f++)e[f-a]=h[f];if(d){c=Array(c);for(f=a;f<=m;f++)c[f-a]=d[f];return new b.T(e,c)}return new b.T(e)};b.T.prototype.setRows=function(a,m,c){var f=this.x,e=this.y,h=c.x,d=c.y;for(c=a;c<=m;c++)f[c]=h[c-a];if(d)for(e||(this.y=e=b.rep(b.dim(f),0)),c=a;c<=m;c++)e[c]=d[c-a];else if(e)for(c=a;c<=m;c++)e[c]=b.rep([h[c-a].length],0);return this};b.T.prototype.getRow=function(a){var m=this.x,c=this.y;return c?new b.T(m[a],c[a]):new b.T(m[a])};b.T.prototype.setRow=function(a,
m){var c=this.x,f=this.y,e=m.x,h=m.y;c[a]=e;h?(f||(this.y=f=b.rep(b.dim(c),0)),f[a]=h):f&&b.rep([e.length],0);return this};b.T.prototype.getBlock=function(a,m){var c=this.x,f=this.y,e=b.getBlock;return f?new b.T(e(c,a,m),e(f,a,m)):new b.T(e(c,a,m))};b.T.prototype.setBlock=function(a,m,c){c instanceof b.T||(c=new b.T(c));var f=this.x,e=this.y,h=b.setBlock,d=c.x;if(c=c.y)return e||(e=this.y=b.rep(b.dim(this),0)),h(f,a,m,d),h(e,a,m,c),this;h(f,a,m,d);e&&h(e,a,m,b.rep(b.dim(d),0))};b.T.rep=function(a,
m){var c=b.T;m instanceof c||(m=new c(m));var f=m.x,e=m.y,h=b.rep;return e?new c(h(a,f),h(a,e)):new c(h(a,f))};b.T.diag=function(a){a instanceof b.T||(a=new b.T(a));var m=a.x;a=a.y;var c=b.diag;return a?new b.T(c(m),c(a)):new b.T(c(m))};b.T.eig=function(){if(this.y)throw Error("eig: not implemented for complex matrices.");return b.eig(this.x)};b.T.identity=function(a){return new b.T(b.identity(a))};b.T.prototype.getDiag=function(){var a=b,m=this.x,c=this.y;return c?new a.T(a.getDiag(m),a.getDiag(c)):
new a.T(a.getDiag(m))};b.house=function(a){var m=b.clone(a);a=(0<=a[0]?1:-1)*b.norm2(a);m[0]+=a;a=b.norm2(m);if(0===a)throw Error("eig: internal error");return b.div(m,a)};b.toUpperHessenberg=function(a){var m=b.dim(a);if(2!==m.length||m[0]!==m[1])throw Error("numeric: toUpperHessenberg() only works on square matrices");var m=m[0],c,f,e,h=b.clone(a),d,k,l,y=b.identity(m);for(c=0;c<m-2;c++){f=Array(m-c-1);for(a=c+1;a<m;a++)f[a-c-1]=h[a][c];if(0<b.norm2(f)){e=b.house(f);f=b.getBlock(h,[c+1,c],[m-1,
m-1]);d=b.tensor(e,b.dot(e,f));for(a=c+1;a<m;a++)for(k=h[a],l=d[a-c-1],f=c;f<m;f++)k[f]-=2*l[f-c];f=b.getBlock(h,[0,c+1],[m-1,m-1]);d=b.tensor(b.dot(f,e),e);for(a=0;a<m;a++)for(k=h[a],l=d[a],f=c+1;f<m;f++)k[f]-=2*l[f-c-1];f=Array(m-c-1);for(a=c+1;a<m;a++)f[a-c-1]=y[a];d=b.tensor(e,b.dot(e,f));for(a=c+1;a<m;a++)for(e=y[a],l=d[a-c-1],f=0;f<m;f++)e[f]-=2*l[f]}}return{H:h,Q:y}};b.epsilon=2.220446049250313E-16;b.QRFrancis=function(a,m){"undefined"===typeof m&&(m=1E4);a=b.clone(a);b.clone(a);var c=b.dim(a)[0],
f,e,h,d,k,l,y=b.identity(c),s,n,x;if(3>c)return{Q:y,B:[[0,c-1]]};var B=b.epsilon;for(x=0;x<m;x++){for(h=0;h<c-1;h++)if(Math.abs(a[h+1][h])<B*(Math.abs(a[h][h])+Math.abs(a[h+1][h+1]))){x=b.QRFrancis(b.getBlock(a,[0,0],[h,h]),m);B=b.QRFrancis(b.getBlock(a,[h+1,h+1],[c-1,c-1]),m);d=Array(h+1);for(l=0;l<=h;l++)d[l]=y[l];d=b.dot(x.Q,d);for(l=0;l<=h;l++)y[l]=d[l];d=Array(c-h-1);for(l=h+1;l<c;l++)d[l-h-1]=y[l];d=b.dot(B.Q,d);for(l=h+1;l<c;l++)y[l]=d[l-h-1];return{Q:y,B:x.B.concat(b.add(B.B,h+1))}}h=a[c-
2][c-2];f=a[c-2][c-1];d=a[c-1][c-2];k=a[c-1][c-1];l=h+k;d=h*k-f*d;h=b.getBlock(a,[0,0],[2,2]);l*l>=4*d?(f=0.5*(l+Math.sqrt(l*l-4*d)),l=0.5*(l-Math.sqrt(l*l-4*d)),h=b.add(b.sub(b.dot(h,h),b.mul(h,f+l)),b.diag(b.rep([3],f*l)))):h=b.add(b.sub(b.dot(h,h),b.mul(h,l)),b.diag(b.rep([3],d)));f=[h[0][0],h[1][0],h[2][0]];e=b.house(f);d=[a[0],a[1],a[2]];d=b.tensor(e,b.dot(e,d));for(l=0;3>l;l++)for(s=a[l],n=d[l],f=0;f<c;f++)s[f]-=2*n[f];d=b.getBlock(a,[0,0],[c-1,2]);d=b.tensor(b.dot(d,e),e);for(l=0;l<c;l++)for(s=
a[l],n=d[l],f=0;3>f;f++)s[f]-=2*n[f];d=[y[0],y[1],y[2]];d=b.tensor(e,b.dot(e,d));for(l=0;3>l;l++)for(e=y[l],n=d[l],f=0;f<c;f++)e[f]-=2*n[f];for(h=0;h<c-2;h++){for(f=h;f<=h+1;f++)if(Math.abs(a[f+1][f])<B*(Math.abs(a[f][f])+Math.abs(a[f+1][f+1]))){x=b.QRFrancis(b.getBlock(a,[0,0],[f,f]),m);B=b.QRFrancis(b.getBlock(a,[f+1,f+1],[c-1,c-1]),m);d=Array(f+1);for(l=0;l<=f;l++)d[l]=y[l];d=b.dot(x.Q,d);for(l=0;l<=f;l++)y[l]=d[l];d=Array(c-f-1);for(l=f+1;l<c;l++)d[l-f-1]=y[l];d=b.dot(B.Q,d);for(l=f+1;l<c;l++)y[l]=
d[l-f-1];return{Q:y,B:x.B.concat(b.add(B.B,f+1))}}k=Math.min(c-1,h+3);f=Array(k-h);for(l=h+1;l<=k;l++)f[l-h-1]=a[l][h];e=b.house(f);d=b.getBlock(a,[h+1,h],[k,c-1]);d=b.tensor(e,b.dot(e,d));for(l=h+1;l<=k;l++)for(s=a[l],n=d[l-h-1],f=h;f<c;f++)s[f]-=2*n[f-h];d=b.getBlock(a,[0,h+1],[c-1,k]);d=b.tensor(b.dot(d,e),e);for(l=0;l<c;l++)for(s=a[l],n=d[l],f=h+1;f<=k;f++)s[f]-=2*n[f-h-1];d=Array(k-h);for(l=h+1;l<=k;l++)d[l-h-1]=y[l];d=b.tensor(e,b.dot(e,d));for(l=h+1;l<=k;l++)for(e=y[l],n=d[l-h-1],f=0;f<c;f++)e[f]-=
2*n[f]}}throw Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");};b.eig=function(a,m){for(var c=b.toUpperHessenberg(a),f=b.QRFrancis(c.H,m),e=b.T,h=a.length,d,h=f.B,k=b.dot(f.Q,b.dot(c.H,b.transpose(f.Q))),f=new e(b.dot(f.Q,c.Q)),l,y=h.length,s,n,x,B,z,C,D,F,H=Math.sqrt,c=0;c<y;c++)if(d=h[c][0],d!==h[c][1]&&(s=d+1,n=k[d][d],x=k[d][s],B=k[s][d],z=k[s][s],0!==x||0!==B))l=-n-z,C=n*z-x*B,C=l*l-4*C,0<=C?(l=0>l?-0.5*(l-H(C)):-0.5*(l+H(C)),D=(n-l)*(n-l)+x*x,F=B*B+(z-l)*(z-l),
D>F?(D=H(D),n=(n-l)/D,x/=D):(F=H(F),n=B/F,x=(z-l)/F),l=new e([[x,-n],[n,x]])):(l*=-0.5,C=0.5*H(-C),D=(n-l)*(n-l)+x*x,F=B*B+(z-l)*(z-l),D>F?(D=H(D+C*C),n=(n-l)/D,x/=D,l=0,C/=D):(F=H(F+C*C),n=B/F,x=(z-l)/F,l=C/F,C=0),l=new e([[x,-n],[n,x]],[[l,C],[C,-l]])),f.setRows(d,s,l.dot(f.getRows(d,s)));e=f.dot(a).dot(f.transjugate());h=a.length;k=b.T.identity(h);for(s=0;s<h;s++)if(0<s)for(c=s-1;0<=c;c--)d=e.get([c,c]),y=e.get([s,s]),b.neq(d.x,y.x)||b.neq(d.y,y.y)?(l=e.getRow(c).getBlock([c],[s-1]),C=k.getRow(s).getBlock([c],
[s-1]),k.set([s,c],e.get([c,s]).neg().sub(l.dot(C)).div(d.sub(y)))):k.setRow(s,k.getRow(c));for(s=0;s<h;s++)l=k.getRow(s),k.setRow(s,l.div(l.norm2()));k=k.transpose();k=f.transjugate().dot(k);return{lambda:e.getDiag(),E:k}};b.ccsSparse=function(a){var b=a.length,c,f,e,h=[];for(f=b-1;-1!==f;--f)for(e in c=a[f],c){for(e=parseInt(e);e>=h.length;)h[h.length]=0;0!==c[e]&&h[e]++}c=h.length;var d=Array(c+1);for(f=d[0]=0;f<c;++f)d[f+1]=d[f]+h[f];var k=Array(d[c]),l=Array(d[c]);for(f=b-1;-1!==f;--f)for(e in c=
a[f],c)0!==c[e]&&(h[e]--,k[d[e]+h[e]]=f,l[d[e]+h[e]]=c[e]);return[d,k,l]};b.ccsFull=function(a){var m=a[0],c=a[1],f=a[2],e=b.ccsDim(a);a=e[1];for(var h,d,k=b.rep([e[0],a],0),e=0;e<a;e++)for(h=m[e],d=m[e+1];h<d;++h)k[c[h]][e]=f[h];return k};b.ccsTSolve=function(a,m,c,f,e){function h(a){var b;if(0===c[a]){c[a]=1;for(b=d[a];b<d[a+1];++b)h(k[b]);e[s]=a;++s}}var d=a[0],k=a[1];a=a[2];var l=d.length-1,y=Math.max,s=0;"undefined"===typeof f&&(c=b.rep([l],0));"undefined"===typeof f&&(f=b.linspace(0,c.length-
1));"undefined"===typeof e&&(e=[]);for(var n,x,B,l=f.length-1;-1!==l;--l)h(f[l]);e.length=s;for(l=e.length-1;-1!==l;--l)c[e[l]]=0;for(l=f.length-1;-1!==l;--l)n=f[l],c[n]=m[n];for(l=e.length-1;-1!==l;--l){n=e[l];x=d[n];m=y(d[n+1],x);for(f=x;f!==m;++f)if(k[f]===n){c[n]/=a[f];break}B=c[n];for(f=x;f!==m;++f)x=k[f],x!==n&&(c[x]-=B*a[f])}return c};b.ccsDFS=function(a){this.k=Array(a);this.k1=Array(a);this.j=Array(a)};b.ccsDFS.prototype.dfs=function(a,b,c,f,e,h){var d=0,k=e.length,l=this.k,y=this.k1,s=this.j,
n,x;if(0===f[a])for(f[a]=1,s[0]=a,l[0]=n=b[a],y[0]=x=b[a+1];;)if(n>=x){e[k]=s[d];if(0===d)break;++k;--d;n=l[d];x=y[d]}else a=h[c[n]],0===f[a]?(f[a]=1,l[d]=n,++d,s[d]=a,n=b[a],y[d]=x=b[a+1]):++n};b.ccsLPSolve=function(a,b,c,f,e,h,d){var k=a[0],l=a[1];a=a[2];var y=b[0],s=b[1];b=b[2];var n;n=y[e];y=y[e+1];f.length=0;for(e=n;e<y;++e)d.dfs(h[s[e]],k,l,c,f,h);for(e=f.length-1;-1!==e;--e)c[f[e]]=0;for(e=n;e!==y;++e)d=h[s[e]],c[d]=b[e];for(e=f.length-1;-1!==e;--e){d=f[e];y=k[d];s=k[d+1];for(b=y;b<s;++b)if(h[l[b]]===
d){c[d]/=a[b];break}n=c[d];for(b=y;b<s;++b)y=h[l[b]],y!==d&&(c[y]-=n*a[b])}return c};b.ccsLUP1=function(a,m){var c=a[0].length-1,f=[b.rep([c+1],0),[],[]],e=[b.rep([c+1],0),[],[]],h=f[0],d=f[1],k=f[2],l=e[0],y=e[1],s=e[2],n=b.rep([c],0),x=b.rep([c],0),B,z,C,D,F,H,G,I=b.ccsLPSolve,A=Math.abs,K=b.linspace(0,c-1),O=b.linspace(0,c-1),J=new b.ccsDFS(c);"undefined"===typeof m&&(m=1);for(B=0;B<c;++B){I(f,a,n,x,B,O,J);F=D=-1;for(z=x.length-1;-1!==z;--z)C=x[z],C<=B||(H=A(n[C]),H>D&&(F=C,D=H));A(n[B])<m*D&&
(z=K[B],D=K[F],K[B]=D,O[D]=B,K[F]=z,O[z]=F,D=n[B],n[B]=n[F],n[F]=D);D=h[B];F=l[B];G=n[B];d[D]=K[B];k[D]=1;++D;for(z=x.length-1;-1!==z;--z)C=x[z],H=n[C],x[z]=0,n[C]=0,C<=B?(y[F]=C,s[F]=H,++F):(d[D]=K[C],k[D]=H/G,++D);h[B+1]=D;l[B+1]=F}for(z=d.length-1;-1!==z;--z)d[z]=O[d[z]];return{L:f,U:e,P:K,Pinv:O}};b.ccsDFS0=function(a){this.k=Array(a);this.k1=Array(a);this.j=Array(a)};b.ccsDFS0.prototype.dfs=function(a,b,c,f,e,h,d){d=0;var k=e.length,l=this.k,y=this.k1,s=this.j,n,x;if(0===f[a])for(f[a]=1,s[0]=
a,l[0]=n=b[h[a]],y[0]=x=b[h[a]+1];;){if(isNaN(n))throw Error("Ow!");if(n>=x){e[k]=h[s[d]];if(0===d)break;++k;--d;n=l[d];x=y[d]}else a=c[n],0===f[a]?(f[a]=1,l[d]=n,++d,s[d]=a,a=h[a],n=b[a],y[d]=x=b[a+1]):++n}};b.ccsLPSolve0=function(a,b,c,f,e,h,d,k){var l=a[0],y=a[1];a=a[2];var s=b[0],n=b[1];b=b[2];var x;x=s[e];s=s[e+1];f.length=0;for(e=x;e<s;++e)k.dfs(n[e],l,y,c,f,h,d);for(e=f.length-1;-1!==e;--e)h=f[e],c[d[h]]=0;for(e=x;e!==s;++e)h=n[e],c[h]=b[e];for(e=f.length-1;-1!==e;--e){h=f[e];n=d[h];k=l[h];
h=l[h+1];for(b=k;b<h;++b)if(y[b]===n){c[n]/=a[b];break}x=c[n];for(b=k;b<h;++b)c[y[b]]-=x*a[b];c[n]=x}};b.ccsLUP0=function(a,m){var c=a[0].length-1,f=[b.rep([c+1],0),[],[]],e=[b.rep([c+1],0),[],[]],h=f[0],d=f[1],k=f[2],l=e[0],y=e[1],s=e[2],n=b.rep([c],0),x=b.rep([c],0),B,z,C,D,F,H,G,I=b.ccsLPSolve0,A=Math.abs,K=b.linspace(0,c-1),O=b.linspace(0,c-1),J=new b.ccsDFS0(c);"undefined"===typeof m&&(m=1);for(B=0;B<c;++B){I(f,a,n,x,B,O,K,J);F=D=-1;for(z=x.length-1;-1!==z;--z)C=x[z],C<=B||(H=A(n[K[C]]),H>D&&
(F=C,D=H));A(n[K[B]])<m*D&&(z=K[B],D=K[F],K[B]=D,O[D]=B,K[F]=z,O[z]=F);D=h[B];F=l[B];G=n[K[B]];d[D]=K[B];k[D]=1;++D;for(z=x.length-1;-1!==z;--z)C=x[z],H=n[K[C]],x[z]=0,n[K[C]]=0,C<=B?(y[F]=C,s[F]=H,++F):(d[D]=K[C],k[D]=H/G,++D);h[B+1]=D;l[B+1]=F}for(z=d.length-1;-1!==z;--z)d[z]=O[d[z]];return{L:f,U:e,P:K,Pinv:O}};b.ccsLUP=b.ccsLUP0;b.ccsDim=function(a){return[b.sup(a[1])+1,a[0].length-1]};b.ccsGetBlock=function(a,m,c){var f=b.ccsDim(a),e=f[0],h=f[1];"undefined"===typeof m?m=b.linspace(0,e-1):"number"===
typeof m&&(m=[m]);"undefined"===typeof c?c=b.linspace(0,h-1):"number"===typeof c&&(c=[c]);var d,f=m.length,k=c.length,l,h=b.rep([h],0),y=[],s=[],n=[h,y,s],x=a[0],B=a[1];a=a[2];for(var z=b.rep([e],0),C=0,D=b.rep([e],0),e=0;e<k;++e){d=c[e];var F=x[d],H=x[d+1];for(d=F;d<H;++d)l=B[d],D[l]=1,z[l]=a[d];for(d=0;d<f;++d)l=m[d],D[l]&&(y[C]=d,s[C]=z[m[d]],++C);for(d=F;d<H;++d)l=B[d],D[l]=0;h[e+1]=C}return n};b.ccsDot=function(a,m){var c=a[0],f=a[1],e=a[2],h=m[0],d=m[1],k=m[2],l=b.ccsDim(a),y=b.ccsDim(m),s=
l[0],y=y[1],l=b.rep([s],0),n=b.rep([s],0),s=Array(s),x=b.rep([y],0),B=[],z=[],C=[x,B,z],D,F,H,G,I,A,K,O;for(H=0;H!==y;++H){G=h[H];I=h[H+1];K=0;for(F=G;F<I;++F)for(G=d[F],O=k[F],D=c[G],G=c[G+1];D<G;++D)A=f[D],0===n[A]&&(s[K]=A,n[A]=1,K+=1),l[A]+=e[D]*O;G=x[H];I=G+K;x[H+1]=I;for(F=K-1;-1!==F;--F)O=G+F,D=s[F],B[O]=D,z[O]=l[D],n[D]=0,l[D]=0;x[H+1]=x[H]+K}return C};b.ccsLUPSolve=function(a,m){var c=a.L,f=a.U,e=m[0],h=!1;"object"!==typeof e&&(m=[[0,m.length],b.linspace(0,m.length-1),m],e=m[0],h=!0);var d=
m[1],k=m[2],l=c[0].length-1,y=e.length-1,s=b.rep([l],0),n=Array(l),x=b.rep([l],0),l=Array(l),B=b.rep([y+1],0),z=[],C=[],D=b.ccsTSolve,F,H,G,I,A,K=0;for(F=0;F<y;++F){I=0;H=e[F];for(G=e[F+1];H<G;++H)A=a.Pinv[d[H]],l[I]=A,x[A]=k[H],++I;l.length=I;D(c,x,s,l,n);for(H=l.length-1;-1!==H;--H)x[l[H]]=0;D(f,s,x,n,l);if(h)return x;for(H=n.length-1;-1!==H;--H)s[n[H]]=0;for(H=l.length-1;-1!==H;--H)A=l[H],z[K]=A,C[K]=x[A],x[A]=0,++K;B[F+1]=K}return[B,z,C]};b.ccsbinop=function(a,m){"undefined"===typeof m&&(m="");
return b.compile("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+m+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+
a+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")};(function(){var a,m,c,f;for(a in b.ops2)m=isFinite(eval("1"+b.ops2[a]+"0"))?"[Y[0],Y[1],numeric."+a+"(X,Y[2])]":"NaN",c=isFinite(eval("0"+b.ops2[a]+"1"))?"[X[0],X[1],numeric."+a+"(X[2],Y)]":"NaN",f=isFinite(eval("1"+b.ops2[a]+"0"))&&isFinite(eval("0"+b.ops2[a]+"1"))?"numeric.ccs"+a+"MM(X,Y)":"NaN",b["ccs"+a+"MM"]=
b.ccsbinop("zk = xk "+b.ops2[a]+"yk;"),b["ccs"+a]=b.compile("X","Y",'if(typeof X === "number") return '+m+';\nif(typeof Y === "number") return '+c+";\nreturn "+f+";\n")})();b.ccsScatter=function(a){var m=a[0],c=a[1];a=a[2];var f=b.sup(c)+1,e=m.length,h=b.rep([f],0),d=Array(e),k=Array(e),l=b.rep([f],0),y;for(y=0;y<e;++y)l[c[y]]++;for(y=0;y<f;++y)h[y+1]=h[y]+l[y];var f=h.slice(0),s;for(y=0;y<e;++y)s=c[y],l=f[s],d[l]=m[y],k[l]=a[y],f[s]+=1;return[h,d,k]};b.ccsGather=function(a){var b=a[0],c=a[1];a=a[2];
var f=b.length-1,e=c.length,h=Array(e),d=Array(e),e=Array(e),k,l,y,s;for(k=s=0;k<f;++k)for(l=b[k],y=b[k+1];l!==y;++l)d[s]=k,h[s]=c[l],e[s]=a[l],++s;return[h,d,e]};b.sdim=function m(c,b,e){"undefined"===typeof b&&(b=[]);if("object"!==typeof c)return b;"undefined"===typeof e&&(e=0);e in b||(b[e]=0);c.length>b[e]&&(b[e]=c.length);for(var h in c)c.hasOwnProperty(h)&&m(c[h],b,e+1);return b};b.sclone=function c(f,e,h){"undefined"===typeof e&&(e=0);"undefined"===typeof h&&(h=b.sdim(f).length);var d,k=Array(f.length);
if(e===h-1){for(d in f)f.hasOwnProperty(d)&&(k[d]=f[d]);return k}for(d in f)f.hasOwnProperty(d)&&(k[d]=c(f[d],e+1,h));return k};b.sdiag=function(c){for(var b=c.length,e=Array(b),h,b=b-1;1<=b;b-=2)h=b-1,e[b]=[],e[b][b]=c[b],e[h]=[],e[h][h]=c[h];0===b&&(e[0]=[],e[0][0]=c[b]);return e};b.sidentity=function(c){return b.sdiag(b.rep([c],1))};b.stranspose=function(c){var b=[],e,h,d;for(e in c)if(c.hasOwnProperty(e))for(h in d=c[e],d)d.hasOwnProperty(h)&&("object"!==typeof b[h]&&(b[h]=[]),b[h][e]=d[h]);return b};
b.sLUP=function(c,b){throw Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");};b.sdotMM=function(c,f){var e=c.length,h=b.stranspose(f),d=h.length,k,l,y,s,n,x=Array(e),B;for(l=e-1;0<=l;l--){B=[];e=c[l];for(s=d-1;0<=s;s--){n=0;k=h[s];for(y in e)e.hasOwnProperty(y)&&y in k&&(n+=e[y]*k[y]);n&&(B[s]=n)}x[l]=B}return x};b.sdotMV=function(c,b){var e=c.length,h,d,k=Array(e),l;for(h=e-1;0<=h;h--){e=c[h];l=0;for(d in e)e.hasOwnProperty(d)&&
b[d]&&(l+=e[d]*b[d]);l&&(k[h]=l)}return k};b.sdotVM=function(c,b){var e,h,d,k,l=[];for(e in c)if(c.hasOwnProperty(e))for(h in d=b[e],k=c[e],d)d.hasOwnProperty(h)&&(l[h]||(l[h]=0),l[h]+=k*d[h]);return l};b.sdotVV=function(c,b){var e,h=0;for(e in c)c[e]&&b[e]&&(h+=c[e]*b[e]);return h};b.sdot=function(c,f){var e=b.sdim(c).length,h=b.sdim(f).length;switch(1E3*e+h){case 0:return c*f;case 1001:return b.sdotVV(c,f);case 2001:return b.sdotMV(c,f);case 1002:return b.sdotVM(c,f);case 2002:return b.sdotMM(c,
f);default:throw Error("numeric.sdot not implemented for tensors of order "+e+" and "+h);}};b.sscatter=function(c){var b,e,h,d=c.length,k=[],l;for(e=c[0].length-1;0<=e;--e)if(c[d-1][e]){l=k;for(h=0;h<d-2;h++)b=c[h][e],l[b]||(l[b]=[]),l=l[b];l[c[h][e]]=c[h+1][e]}return k};b.sgather=function f(b,h,d){"undefined"===typeof h&&(h=[]);"undefined"===typeof d&&(d=[]);var k,l,y;k=d.length;for(l in b)if(b.hasOwnProperty(l))if(d[k]=parseInt(l),y=b[l],"number"===typeof y){if(y){if(0===h.length)for(l=k+1;0<=l;--l)h[l]=
[];for(l=k;0<=l;--l)h[l].push(d[l]);h[k+1].push(y)}}else f(y,h,d);d.length>k&&d.pop();return h};b.cLU=function(f){var e=f[0],h=f[1],d=f[2],k=e.length;f=0;var l,y,s;for(l=0;l<k;l++)e[l]>f&&(f=e[l]);f++;var n=Array(f),x=Array(f),B=b.rep([f],Infinity),z=b.rep([f],-Infinity),C,D;for(s=0;s<k;s++)l=e[s],y=h[s],y<B[l]&&(B[l]=y),y>z[l]&&(z[l]=y);for(l=0;l<f-1;l++)z[l]>z[l+1]&&(z[l+1]=z[l]);for(l=f-1;1<=l;l--)B[l]<B[l-1]&&(B[l-1]=B[l]);for(l=0;l<f;l++)x[l]=b.rep([z[l]-B[l]+1],0),n[l]=b.rep([l-B[l]],0);for(s=
0;s<k;s++)l=e[s],x[l][h[s]-B[l]]=d[s];for(l=0;l<f-1;l++)for(e=l-B[l],d=x[l],y=l+1;B[y]<=l&&y<f;y++)if(h=l-B[y],k=z[l]-l,C=x[y],D=C[h]/d[e]){for(s=1;s<=k;s++)C[s+h]-=D*d[s+e];n[y][l-B[y]]=D}d=[];C=[];s=[];D=[];var F=[],H=[],G,I;for(l=G=k=0;l<f;l++){e=B[l];h=z[l];I=x[l];for(y=l;y<=h;y++)I[y-e]&&(d[k]=l,C[k]=y,s[k]=I[y-e],k++);I=n[l];for(y=e;y<l;y++)I[y-e]&&(D[G]=l,F[G]=y,H[G]=I[y-e],G++);D[G]=l;F[G]=l;H[G]=1;G++}return{U:[d,C,s],L:[D,F,H]}};b.cLUsolve=function(f,e){var h=f.L,d=f.U,k=b.clone(e),l=h[1],
h=h[2],y=d[1],s=d[2],d=d[0].length,n=k.length,x,B;for(x=B=0;x<n;x++){for(;l[B]<x;)k[x]-=h[B]*k[l[B]],B++;B++}B=d-1;for(x=n-1;0<=x;x--){for(;y[B]>x;)k[x]-=s[B]*k[y[B]],B--;k[x]/=s[B];B--}return k};b.cgrid=function(f,e){"number"===typeof f&&(f=[f,f]);var h=b.rep(f,-1),d,k,l;if("function"!==typeof e)switch(e){case "L":e=function(b,d){return b>=f[0]/2||d<f[1]/2};break;default:e=function(b,d){return!0}}l=0;for(d=1;d<f[0]-1;d++)for(k=1;k<f[1]-1;k++)e(d,k)&&(h[d][k]=l,l++);return h};b.cdelsq=function(f){var e=
[[-1,0],[0,-1],[0,1],[1,0]],h=b.dim(f),d=h[0],h=h[1],k,l,y,s,n,x=[],B=[],z=[];for(k=1;k<d-1;k++)for(l=1;l<h-1;l++)if(!(0>f[k][l])){for(y=0;4>y;y++)s=k+e[y][0],n=l+e[y][1],0>f[s][n]||(x.push(f[k][l]),B.push(f[s][n]),z.push(-1));x.push(f[k][l]);B.push(f[k][l]);z.push(4)}return[x,B,z]};b.cdotMV=function(f,e){var h,d=f[0],k=f[1],l=f[2],y,s=d.length;for(y=h=0;y<s;y++)d[y]>h&&(h=d[y]);h++;h=b.rep([h],0);for(y=0;y<s;y++)h[d[y]]+=l[y]*e[k[y]];return h};b.Spline=function(b,e,h,d,k){this.x=b;this.yl=e;this.yr=
h;this.kl=d;this.kr=k};b.Spline.prototype._at=function(f,e){var h=this.x,d=this.yl,k=this.yr,l=this.kr,y,s=b.add,n=b.sub,x=b.mul;y=n(x(this.kl[e],h[e+1]-h[e]),n(k[e+1],d[e]));l=s(x(l[e+1],h[e]-h[e+1]),n(k[e+1],d[e]));h=(f-h[e])/(h[e+1]-h[e]);n=h*(1-h);return s(s(s(x(1-h,d[e]),x(h,k[e+1])),x(y,n*(1-h))),x(l,n*h))};b.Spline.prototype.at=function(b){if("number"===typeof b){var e=this.x,h=e.length,d,k,l=Math.floor;d=0;for(h-=1;1<h-d;)k=l((d+h)/2),e[k]<=b?d=k:h=k;return this._at(b,d)}h=b.length;e=Array(h);
for(d=h-1;-1!==d;--d)e[d]=this.at(b[d]);return e};b.Spline.prototype.diff=function(){for(var f=this.x,e=this.yl,h=this.yr,d=this.kl,k=this.kr,l=e.length,y,s,n=Array(l),x=Array(l),B=b.add,z=b.mul,C=b.div,D=b.sub,l=l-1;-1!==l;--l)y=f[l+1]-f[l],s=D(h[l+1],e[l]),n[l]=C(B(z(s,6),z(d[l],-4*y),z(k[l+1],-2*y)),y*y),x[l+1]=C(B(z(s,-6),z(d[l],2*y),z(k[l+1],4*y)),y*y);return new b.Spline(f,d,k,n,x)};b.Spline.prototype.roots=function(){var b=[],e=this.x,h=this.yl,d=this.yr,k=this.kl,l=this.kr;"number"===typeof h[0]&&
(h=[h],d=[d],k=[k],l=[l]);var y=h.length,s=e.length-1,n,x,B,z,C,D,F,b=Array(y),H,G,I,A,K,O,J,N,L,V=Math.sqrt;for(n=0;n!==y;++n){z=h[n];C=d[n];D=k[n];F=l[n];H=[];for(x=0;x!==s;x++){0<x&&0>C[x]*z[x]&&H.push(e[x]);B=e[x+1]-e[x];A=z[x];K=C[x+1];G=D[x]/B;I=F[x+1]/B;O=(G-I+3*(A-K))*(G-I+3*(A-K))+12*I*A;B=I+3*A+2*G-3*K;A=3*(I+G+2*(A-K));0>=O?(G=B/A,O=G>e[x]&&G<e[x+1]?[e[x],G,e[x+1]]:[e[x],e[x+1]]):(G=(B-V(O))/A,J=(B+V(O))/A,O=[e[x]],G>e[x]&&G<e[x+1]&&O.push(G),J>e[x]&&J<e[x+1]&&O.push(J),O.push(e[x+1]));
K=O[0];G=this._at(K,x);for(B=0;B<O.length-1;B++)if(N=O[B+1],J=this._at(N,x),0===G)H.push(K),K=N,G=J;else if(0===J||0<G*J)K=N,G=J;else{for(I=0;;){L=(G*N-J*K)/(G-J);if(L<=K||L>=N)break;A=this._at(L,x);if(0<A*J)N=L,J=A,-1===I&&(G*=0.5),I=-1;else if(0<A*G)K=L,G=A,1===I&&(J*=0.5),I=1;else break}H.push(L);K=O[B+1];G=this._at(K,x)}0===J&&H.push(N)}b[n]=H}return"number"===typeof this.yl[0]?b[0]:b};b.spline=function(f,e,h,d){var k=f.length,l=[],y=[],s=[],n,x=b.sub,B=b.mul,z=b.add;for(n=k-2;0<=n;n--)y[n]=f[n+
1]-f[n],s[n]=x(e[n+1],e[n]);if("string"===typeof h||"string"===typeof d)h=d="periodic";x=[[],[],[]];switch(typeof h){case "undefined":l[0]=B(3/(y[0]*y[0]),s[0]);x[0].push(0,0);x[1].push(0,1);x[2].push(2/y[0],1/y[0]);break;case "string":l[0]=z(B(3/(y[k-2]*y[k-2]),s[k-2]),B(3/(y[0]*y[0]),s[0]));x[0].push(0,0,0);x[1].push(k-2,0,1);x[2].push(1/y[k-2],2/y[k-2]+2/y[0],1/y[0]);break;default:l[0]=h,x[0].push(0),x[1].push(0),x[2].push(1)}for(n=1;n<k-1;n++)l[n]=z(B(3/(y[n-1]*y[n-1]),s[n-1]),B(3/(y[n]*y[n]),
s[n])),x[0].push(n,n,n),x[1].push(n-1,n,n+1),x[2].push(1/y[n-1],2/y[n-1]+2/y[n],1/y[n]);switch(typeof d){case "undefined":l[k-1]=B(3/(y[k-2]*y[k-2]),s[k-2]);x[0].push(k-1,k-1);x[1].push(k-2,k-1);x[2].push(1/y[k-2],2/y[k-2]);break;case "string":x[1][x[1].length-1]=0;break;default:l[k-1]=d,x[0].push(k-1),x[1].push(k-1),x[2].push(1)}l="number"!==typeof l[0]?b.transpose(l):[l];d=Array(l.length);if("string"===typeof h)for(n=d.length-1;-1!==n;--n)d[n]=b.ccsLUPSolve(b.ccsLUP(b.ccsScatter(x)),l[n]),d[n][k-
1]=d[n][0];else for(n=d.length-1;-1!==n;--n)d[n]=b.cLUsolve(b.cLU(x),l[n]);d="number"===typeof e[0]?d[0]:b.transpose(d);return new b.Spline(f,e,e,d,d)};b.fftpow2=function e(b,d){var k=b.length;if(1!==k){var l=Math.cos,y=Math.sin,s,n,x=Array(k/2),B=Array(k/2),z=Array(k/2),C=Array(k/2);n=k/2;for(s=k-1;-1!==s;--s)--n,z[n]=b[s],C[n]=d[s],--s,x[n]=b[s],B[n]=d[s];e(x,B);e(z,C);n=k/2;var D,F=-6.283185307179586/k,H;for(s=k-1;-1!==s;--s)--n,-1===n&&(n=k/2-1),D=F*s,H=l(D),D=y(D),b[s]=x[n]+H*z[n]-D*C[n],d[s]=
B[n]+H*C[n]+D*z[n]}};b._ifftpow2=function h(b,k){var l=b.length;if(1!==l){var y=Math.cos,s=Math.sin,n,x,B=Array(l/2),z=Array(l/2),C=Array(l/2),D=Array(l/2);x=l/2;for(n=l-1;-1!==n;--n)--x,C[x]=b[n],D[x]=k[n],--n,B[x]=b[n],z[x]=k[n];h(B,z);h(C,D);x=l/2;var F,H=6.283185307179586/l,G;for(n=l-1;-1!==n;--n)--x,-1===x&&(x=l/2-1),F=H*n,G=y(F),F=s(F),b[n]=B[x]+G*C[x]-F*D[x],k[n]=z[x]+G*D[x]+F*C[x]}};b.ifftpow2=function(h,d){b._ifftpow2(h,d);b.diveq(h,h.length);b.diveq(d,d.length)};b.convpow2=function(h,d,
k,l){b.fftpow2(h,d);b.fftpow2(k,l);var y,s,n,x,B;for(y=h.length-1;-1!==y;--y)s=h[y],x=d[y],n=k[y],B=l[y],h[y]=s*n-x*B,d[y]=s*B+x*n;b.ifftpow2(h,d)};b.T.prototype.fft=function(){var h=this.x,d=this.y,k=h.length,l=Math.log,y=l(2),l=Math.ceil(l(2*k-1)/y),s=Math.pow(2,l),l=b.rep([s],0),y=b.rep([s],0),n=Math.cos,x=Math.sin,B,z=-3.141592653589793/k,C=b.rep([s],0),D=b.rep([s],0);for(B=0;B<k;B++)C[B]=h[B];if("undefined"!==typeof d)for(B=0;B<k;B++)D[B]=d[B];for(B=l[0]=1;B<=s/2;B++)h=z*B*B,l[B]=n(h),y[B]=x(h),
l[s-B]=n(h),y[s-B]=x(h);h=new b.T(C,D);d=new b.T(l,y);h=h.mul(d);b.convpow2(h.x,h.y,b.clone(d.x),b.neg(d.y));h=h.mul(d);h.x.length=k;h.y.length=k;return h};b.T.prototype.ifft=function(){var h=this.x,d=this.y,k=h.length,l=Math.log,y=l(2),l=Math.ceil(l(2*k-1)/y),s=Math.pow(2,l),l=b.rep([s],0),y=b.rep([s],0),n=Math.cos,x=Math.sin,B,z=3.141592653589793/k,C=b.rep([s],0),D=b.rep([s],0);for(B=0;B<k;B++)C[B]=h[B];if("undefined"!==typeof d)for(B=0;B<k;B++)D[B]=d[B];for(B=l[0]=1;B<=s/2;B++)h=z*B*B,l[B]=n(h),
y[B]=x(h),l[s-B]=n(h),y[s-B]=x(h);h=new b.T(C,D);d=new b.T(l,y);h=h.mul(d);b.convpow2(h.x,h.y,b.clone(d.x),b.neg(d.y));h=h.mul(d);h.x.length=k;h.y.length=k;return h.div(k)};b.gradient=function(h,d){var k=d.length,l=h(d);if(isNaN(l))throw Error("gradient: f(x) is a NaN!");var y=Math.max,s,n=b.clone(d),x,B,z=Array(k),C,y=Math.max,D=Math.abs,F=Math.min,H,G,I,A=0,K;for(s=0;s<k;s++)for(var O=y(1E-6*l,1E-8);;){++A;if(20<A)throw Error("Numerical gradient fails");n[s]=d[s]+O;x=h(n);n[s]=d[s]-O;B=h(n);n[s]=
d[s];if(isNaN(x)||isNaN(B))O/=16;else if(z[s]=(x-B)/(2*O),H=d[s]-O,G=d[s],I=d[s]+O,C=(x-l)/O,K=(l-B)/O,x=y(D(z[s]),D(l),D(x),D(B),D(H),D(G),D(I),1E-8),C=F(y(D(C-z[s]),D(K-z[s]),D(C-K))/x,O/x),0.001<C)O/=16;else break}return z};b.uncmin=function(h,d,k,l,y,s,n){var x=b.gradient;"undefined"===typeof n&&(n={});"undefined"===typeof k&&(k=1E-8);"undefined"===typeof l&&(l=function(b){return x(h,b)});"undefined"===typeof y&&(y=1E3);d=b.clone(d);var B=d.length,z=h(d),C,D;if(isNaN(z))throw Error("uncmin: f(x0) is a NaN!");
var F=Math.max,H=b.norm2;k=F(k,b.epsilon);var G,I;n=n.Hinv||b.identity(B);var B=b.dot,F=b.sub,A=b.add,K=b.tensor,O=b.div,J=b.mul,N=b.all,L=b.isFinite,V=b.neg,W=0,P,E,M,Q,U="";for(I=l(d);W<y;){if("function"===typeof s&&s(W,d,z,I,n)){U="Callback returned true";break}if(!N(L(I))){U="Gradient has Infinity or NaN";break}G=V(B(n,I));if(!N(L(G))){U="Search direction has Infinity or NaN";break}Q=H(G);if(Q<k){U="Newton step smaller than tol";break}M=1;D=B(I,G);for(E=d;W<y&&!(M*Q<k);)if(P=J(G,M),E=A(d,P),C=
h(E),C-z>=0.1*M*D||isNaN(C))M*=0.5,++W;else break;if(M*Q<k){U="Line search step size smaller than tol";break}if(W===y){U="maxit reached during line search";break}D=l(E);d=F(D,I);I=B(d,P);z=B(n,d);n=F(A(n,J((I+B(d,z))/(I*I),K(P,P))),O(A(K(z,P),K(P,z)),I));d=E;z=C;I=D;++W}return{solution:d,f:z,gradient:I,invHessian:n,iterations:W,message:U}};b.Dopri=function(b,d,k,l,y,s,n){this.x=b;this.y=d;this.f=k;this.ymid=l;this.iterations=y;this.events=n;this.message=s};b.Dopri.prototype._at=function(h,d){var k=
this.x,l=this.y,y=this.f,s=this.ymid,n,x,B,z=b.add,C=b.mul,D=b.sub,F;n=k[d];x=k[d+1];k=l[d];l=l[d+1];B=n+0.5*(x-n);s=s[d];F=D(y[d],C(k,1/(n-B)+2/(n-x)));y=D(y[d+1],C(l,1/(x-B)+2/(x-n)));n=[(h-x)*(h-x)*(h-B)/((n-x)*(n-x))/(n-B),(h-n)*(h-n)*(h-x)*(h-x)/((n-B)*(n-B))/((x-B)*(x-B)),(h-n)*(h-n)*(h-B)/((x-n)*(x-n))/(x-B),(h-n)*(h-x)*(h-x)*(h-B)/((n-x)*(n-x))/(n-B),(h-x)*(h-n)*(h-n)*(h-B)/((n-x)*(n-x))/(x-B)];return z(z(z(z(C(k,n[0]),C(s,n[1])),C(l,n[2])),C(F,n[3])),C(y,n[4]))};b.Dopri.prototype.at=function(b){var d,
k,l,y=Math.floor;if("number"!==typeof b){d=b.length;k=Array(d);for(d-=1;-1!==d;--d)k[d]=this.at(b[d]);return k}var s=this.x;d=0;for(k=s.length-1;1<k-d;)l=y(0.5*(d+k)),s[l]<=b?d=l:k=l;return this._at(b,d)};b.dopri=function(h,d,k,l,y,s,n){"undefined"===typeof y&&(y=1E-6);"undefined"===typeof s&&(s=1E3);var x=[h],B=[k],z=[l(h,k)],C,D,F,H,G,I,A=[],K=[0.075,0.225],O=[44/45,-56/15,32/9],J=[19372/6561,-25360/2187,64448/6561,-212/729],N=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],L=[35/384,0,500/1113,
125/192,-2187/6784,11/84],V=[0.10013431883002395,0,0.3918321794184259,-0.02982460176594817,0.05893268337240795,-0.04497888809104361,0.023904308236133973],W=[0.2,0.3,0.8,8/9,1,1],P=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,0.025],E=0,M,Q=(d-h)/10,U=0,Y=b.add,R=b.mul,ea=Math.min,Z=Math.abs,ia=b.norminf,fa=Math.pow,w=b.any,da=b.lt,aa=b.and,S,X,ca=new b.Dopri(x,B,z,A,-1,"");for("function"===typeof n&&(S=n(h,k));h<d&&U<s;)if(++U,h+Q>d&&(Q=d-h),C=l(h+W[0]*Q,Y(k,R(0.2*Q,z[E]))),D=l(h+W[1]*Q,Y(Y(k,
R(K[0]*Q,z[E])),R(K[1]*Q,C))),F=l(h+W[2]*Q,Y(Y(Y(k,R(O[0]*Q,z[E])),R(O[1]*Q,C)),R(O[2]*Q,D))),H=l(h+W[3]*Q,Y(Y(Y(Y(k,R(J[0]*Q,z[E])),R(J[1]*Q,C)),R(J[2]*Q,D)),R(J[3]*Q,F))),G=l(h+W[4]*Q,Y(Y(Y(Y(Y(k,R(N[0]*Q,z[E])),R(N[1]*Q,C)),R(N[2]*Q,D)),R(N[3]*Q,F)),R(N[4]*Q,H))),C=Y(Y(Y(Y(Y(k,R(z[E],Q*L[0])),R(D,Q*L[2])),R(F,Q*L[3])),R(H,Q*L[4])),R(G,Q*L[5])),I=l(h+Q,C),M=Y(Y(Y(Y(Y(R(z[E],Q*P[0]),R(D,Q*P[2])),R(F,Q*P[3])),R(H,Q*P[4])),R(G,Q*P[5])),R(I,Q*P[6])),M="number"===typeof M?Z(M):ia(M),M>y){if(Q=0.2*Q*
fa(y/M,0.25),h+Q===h){ca.msg="Step size became too small";break}}else{A[E]=Y(Y(Y(Y(Y(Y(k,R(z[E],Q*V[0])),R(D,Q*V[2])),R(F,Q*V[3])),R(H,Q*V[4])),R(G,Q*V[5])),R(I,Q*V[6]));++E;x[E]=h+Q;B[E]=C;z[E]=I;if("function"===typeof n){var ba;D=h;F=h+0.5*Q;var $;X=n(F,A[E-1]);k=aa(da(S,0),da(0,X));w(k)||(D=F,F=h+Q,S=X,X=n(F,C),k=aa(da(S,0),da(0,X)));if(w(k)){d=0;for(s=y=1;;){if("number"===typeof S)$=(s*X*D-y*S*F)/(s*X-y*S);else for($=F,x=S.length-1;-1!==x;--x)0>S[x]&&0<X[x]&&($=ea($,(s*X[x]*D-y*S[x]*F)/(s*X[x]-
y*S[x])));if($<=D||$>=F)break;ba=ca._at($,E-1);B=n($,ba);x=aa(da(S,0),da(0,B));w(x)?(F=$,X=B,k=x,s=1,y=-1===d?0.5*y:1,d=-1):(D=$,S=B,y=1,s=1===d?0.5*s:1,d=1)}C=ca._at(0.5*(h+$),E-1);ca.f[E]=l($,ba);ca.x[E]=$;ca.y[E]=ba;ca.ymid[E-1]=C;ca.events=k;ca.iterations=U;return ca}}h+=Q;k=C;S=X;Q=ea(0.8*Q*fa(y/M,0.25),4*Q)}ca.iterations=U;return ca};b.LU=function(h,d){var k=Math.abs,l,y,s,n,x,B,z=h.length,C=z-1,D=Array(z);d||(h=b.clone(h));for(s=0;s<z;++s){x=s;n=h[s];B=k(n[s]);for(y=s+1;y<z;++y)l=k(h[y][s]),
B<l&&(B=l,x=y);D[s]=x;x!=s&&(h[s]=h[x],h[x]=n,n=h[s]);y=n[s];for(l=s+1;l<z;++l)h[l][s]/=y;for(l=s+1;l<z;++l){x=h[l];for(y=s+1;y<C;++y)x[y]-=x[s]*n[y],++y,x[y]-=x[s]*n[y];y===C&&(x[y]-=x[s]*n[y])}}return{LU:h,P:D}};b.LUsolve=function(h,d){var k,l,y=h.LU,s=y.length,n=b.clone(d),x=h.P,B;for(k=s-1;-1!==k;--k)n[k]=d[k];for(k=0;k<s;++k)for(l=x[k],x[k]!==k&&(B=n[k],n[k]=n[l],n[l]=B),B=y[k],l=0;l<k;++l)n[k]-=n[l]*B[l];for(k=s-1;0<=k;--k){B=y[k];for(l=k+1;l<s;++l)n[k]-=n[l]*B[l];n[k]/=B[k]}return n};b.solve=
function(h,d,k){return b.LUsolve(b.LU(h,k),d)};b.echelonize=function(h){var d=b.dim(h),k=d[0],d=d[1],l=b.identity(k),y=Array(k),s,n,x,B,z,C,D,F,H=Math.abs,G=b.diveq;h=b.clone(h);for(s=0;s<k;++s){x=0;z=h[s];C=l[s];for(n=1;n<d;++n)H(z[x])<H(z[n])&&(x=n);y[s]=x;G(C,z[x]);G(z,z[x]);for(n=0;n<k;++n)if(n!==s){D=h[n];F=D[x];for(B=d-1;-1!==B;--B)D[B]-=z[B]*F;D=l[n];for(B=k-1;-1!==B;--B)D[B]-=C[B]*F}}return{I:l,A:h,P:y}};b.__solveLP=function(h,d,k,l,y,s,n){var x=b.sum,B=b.mul,z=b.sub,C=b.dot,D=b.div,F=b.add,
H=h.length,G=k.length,I,A=!1,K=1;b.transpose(d);var O=b.transpose,J=Math.sqrt,N=Math.abs,L=Math.min,V=b.all,W=b.gt,P=Array(H),E=Array(G);b.rep([G],1);var M=b.solve,Q=z(k,C(d,s)),U,Y=C(h,h);for(U=0;U<y;++U){var R;for(R=G-1;-1!==R;--R)E[R]=D(d[R],Q[R]);I=O(E);for(R=H-1;-1!==R;--R)P[R]=x(I[R]);K=0.25*N(Y/C(h,P));R=100*J(Y/C(P,P));if(!isFinite(K)||K>R)K=R;A=F(h,B(K,P));I=C(I,E);for(R=H-1;-1!==R;--R)I[R][R]+=1;I=M(I,D(A,K),!0);var Q=D(Q,C(d,I)),ea=1;for(R=G-1;-1!==R;--R)0>Q[R]&&(ea=L(ea,-0.999*Q[R]));
I=z(s,B(I,ea));Q=z(k,C(d,I));if(!V(W(Q,0)))return{solution:s,message:"",iterations:U};s=I;if(K<l)return{solution:I,message:"",iterations:U};if(n)for(K=C(h,A),ea=C(d,A),A=!0,R=G-1;-1!==R;--R){if(0>K*ea[R]){A=!1;break}}else A=0<=s[H-1]?!1:!0;if(A)return{solution:I,message:"Unbounded",iterations:U}}return{solution:s,message:"maximum iteration count exceeded",iterations:U}};b._solveLP=function(h,d,k,l,y){var s=h.length,n=k.length,x=b.sub,B=b.dot,z=b.rep([s],0).concat([1]),n=b.rep([n,1],-1),C=b.blockMatrix([[d,
n]]),n=b.rep([s],0).concat(Math.max(0,b.sup(b.neg(k)))+1),z=b.__solveLP(z,C,k,l,y,n,!1),n=b.clone(z.solution);n.length=s;if(0>b.inf(x(k,B(d,n))))return{solution:NaN,message:"Infeasible",iterations:z.iterations};h=b.__solveLP(h,d,k,l,y-z.iterations,n,!0);h.iterations+=z.iterations;return h};b.solveLP=function(h,d,k,l,y,s,n){"undefined"===typeof n&&(n=1E3);"undefined"===typeof s&&(s=b.epsilon);if("undefined"===typeof l)return b._solveLP(h,d,k,s,n);var x=l.length,B=l[0].length,z=d.length,C=b.echelonize(l),
D=b.rep([B],0),F=C.P,H=[],G;for(G=F.length-1;-1!==G;--G)D[F[G]]=1;for(G=B-1;-1!==G;--G)0===D[G]&&H.push(G);G=b.getRange;x=b.linspace(0,x-1);z=b.linspace(0,z-1);l=G(l,x,H);x=G(d,z,F);G=G(d,z,H);d=b.dot;z=b.sub;B=d(x,C.I);x=z(G,d(B,l));k=z(k,d(B,y));B=Array(F.length);D=Array(H.length);for(G=F.length-1;-1!==G;--G)B[G]=h[F[G]];for(G=H.length-1;-1!==G;--G)D[G]=h[H[G]];G=z(D,d(B,d(C.I,l)));s=b._solveLP(G,x,k,s,n);n=s.solution;if(n!==n)return s;y=d(C.I,z(y,d(l,n)));h=Array(h.length);for(G=F.length-1;-1!==
G;--G)h[F[G]]=y[G];for(G=H.length-1;-1!==G;--G)h[H[G]]=n[G];return{solution:h,message:s.message,iterations:s.iterations}};b.MPStoLP=function(h){function d(b){throw Error("MPStoLP: "+b+"\nLine "+s+": "+h[s]+"\nCurrent state: "+l[k]+"\n");}h instanceof String&&h.split("\n");var k=0,l="Initial state;NAME;ROWS;COLUMNS;RHS;BOUNDS;ENDATA".split(";"),y=h.length,s,n,x,B=0,z={},C=[],D=0,F={},H=0,G,I=[],A=[],K=[];for(s=0;s<y;++s){x=h[s];var O=x.match(/\S*/g),J=[];for(n=0;n<O.length;++n)""!==O[n]&&J.push(O[n]);
if(0!==J.length){for(n=0;n<l.length&&x.substr(0,l[n].length)!==l[n];++n);if(n<l.length){if(k=n,1===n&&(G=J[1]),6===n)return{name:G,c:I,A:b.transpose(A),b:K,rows:z,vars:F}}else switch(k){case 0:case 1:d("Unexpected line");case 2:switch(J[0]){case "N":0===B?B=J[1]:d("Two or more N rows");break;case "L":z[J[1]]=D;C[D]=1;K[D]=0;++D;break;case "G":z[J[1]]=D;C[D]=-1;K[D]=0;++D;break;case "E":z[J[1]]=D;C[D]=0;K[D]=0;++D;break;default:d("Parse error "+b.prettyPrint(J))}break;case 3:F.hasOwnProperty(J[0])||
(F[J[0]]=H,I[H]=0,A[H]=b.rep([D],0),++H);x=F[J[0]];for(n=1;n<J.length;n+=2)J[n]===B?I[x]=parseFloat(J[n+1]):(O=z[J[n]],A[x][O]=(0>C[O]?-1:1)*parseFloat(J[n+1]));break;case 4:for(n=1;n<J.length;n+=2)K[z[J[n]]]=(0>C[z[J[n]]]?-1:1)*parseFloat(J[n+1]);break;case 6:d("Internal error")}}}d("Reached end of file without ENDATA")};b.seedrandom={pow:Math.pow,random:Math.random};(function(b,d,k,l,y,s,n){function x(b){var d,h,l=this,s=b.length,n=0,x=l.i=l.j=l.m=0;l.S=[];l.c=[];for(s||(b=[s++]);n<k;)l.S[n]=n++;
for(n=0;n<k;n++)d=l.S[n],x=x+d+b[n%s]&k-1,h=l.S[x],l.S[n]=h,l.S[x]=d;l.g=function(b){var d=l.S,h=l.i+1&k-1,s=d[h],n=l.j+s&k-1,x=d[n];d[h]=x;d[n]=s;for(var y=d[s+x&k-1];--b;)h=h+1&k-1,s=d[h],n=n+s&k-1,x=d[n],d[h]=x,d[n]=s,y=y*k+d[s+x&k-1];l.i=h;l.j=n;return y};l.g(k)}function B(b,d,k,h,l){k=[];l=typeof b;if(d&&"object"==l)for(h in b)if(5>h.indexOf("S"))try{k.push(B(b[h],d-1))}catch(s){}return k.length?k:b+("string"!=l?"\x00":"")}function z(b,d,h,l){b+="";for(l=h=0;l<b.length;l++){var s=d,n=l&k-1,x=
(h^=19*d[l&k-1])+b.charCodeAt(l);s[n]=x&k-1}b="";for(l in d)b+=String.fromCharCode(d[l]);return b}d.seedrandom=function(C,D){var F=[],H;C=z(B(D?[C,b]:arguments.length?C:[(new Date).getTime(),b,window],3),F);H=new x(F);z(H.S,b);d.random=function(){for(var b=H.g(l),d=n,h=0;b<y;)b=(b+h)*k,d*=k,h=H.g(1);for(;b>=s;)b/=2,d/=2,h>>>=1;return(b+h)/d};return C};n=d.pow(k,l);y=d.pow(2,y);s=2*y;z(d.random(),b)})([],b.seedrandom,256,6,52);(function(b){function d(b){if("object"!==typeof b)return b;var k=[],h,l=
b.length;for(h=0;h<l;h++)k[h+1]=d(b[h]);return k}function k(b){if("object"!==typeof b)return b;var d=[],h,l=b.length;for(h=1;h<l;h++)d[h-1]=k(b[h]);return d}function l(b,d,k){var h,l,s;for(d=1;d<=k;d+=1){b[d][d]=1/b[d][d];s=-b[d][d];for(h=1;h<d;h+=1)b[h][d]*=s;h=d+1;if(k<h)break;for(l=h;l<=k;l+=1)for(s=b[d][l],b[d][l]=0,h=1;h<=d;h+=1)b[h][l]+=s*b[h][d]}}function y(b,d,k,h){var l,s,n;for(l=1;l<=k;l+=1){n=0;for(d=1;d<l;d+=1)n+=b[d][l]*h[d];h[l]=(h[l]-n)/b[l][l]}for(s=1;s<=k;s+=1)for(l=k+1-s,h[l]/=b[l][l],
n=-h[l],d=1;d<l;d+=1)h[d]+=n*b[d][l]}function s(b,d,k,h){var l,s,n,y,I;for(l=1;l<=k;l+=1){h[1]=l;I=0;s=l-1;if(!(1>s))for(n=1;n<=s;n+=1){y=b[n][l];for(d=1;d<n;d+=1)y-=b[d][l]*b[d][n];y/=b[n][n];b[n][l]=y;I+=y*y}I=b[l][l]-I;if(0>=I)break;b[l][l]=Math.sqrt(I);h[1]=0}}function n(b,d,k,h,n,F,H,G,I,A,K,O,J,N,L,V){function W(){for(E=1;E<=h;E+=1){S=0;for(M=1;M<=h;M+=1)S+=b[M][E]*H[M][da];L[E]=S}U=ea;for(E=1;E<=h;E+=1)L[U+E]=0;for(M=J+1;M<=h;M+=1)for(E=1;E<=h;E+=1)L[U+E]+=b[E][M]*L[M];na=!0;for(E=J;1<=E;E-=
1){S=L[E];Q=ia+E*(E+3)/2;U=Q-E;for(M=E+1;M<=J;M+=1)S-=L[Q]*L[Z+M],Q+=M;S/=L[U];L[Z+E]=S;if(O[E]<K)break;if(0>S)break;na=!1;R=E}if(!na)for(X=L[w+R]/L[Z+R],E=1;E<=J&&!(O[E]<K)&&!(0>L[Z+E]);E+=1)aa=L[w+E]/L[Z+E],aa<X&&(X=aa,R=E);S=0;for(E=ea+1;E<=ea+h;E+=1)S+=L[E]*L[E];if(Math.abs(S)<=la){if(na)return V[1]=1,999;for(E=1;E<=J;E+=1)L[w+E]-=X*L[Z+E];L[w+J+1]+=X;return 700}S=0;for(E=1;E<=h;E+=1)S+=L[ea+E]*H[E][da];ca=-L[fa+da]/S;ga=!0;!na&&X<ca&&(ca=X,ga=!1);for(E=1;E<=h;E+=1)n[E]+=ca*L[ea+E],Math.abs(n[E])<
la&&(n[E]=0);F[1]+=ca*S*(ca/2+L[w+J+1]);for(E=1;E<=J;E+=1)L[w+E]-=ca*L[Z+E];L[w+J+1]+=ca;if(ga){J+=1;O[J]=da;Q=ia+(J-1)*J/2+1;for(E=1;E<=J-1;E+=1)L[Q]=L[E],Q+=1;if(J===h)L[Q]=L[h];else{for(E=h;E>=J+1&&0!==L[E];E-=1){ba=Math.max(Math.abs(L[E-1]),Math.abs(L[E]));$=Math.min(Math.abs(L[E-1]),Math.abs(L[E]));aa=0<=L[E-1]?Math.abs(ba*Math.sqrt(1+$*$/(ba*ba))):-Math.abs(ba*Math.sqrt(1+$*$/(ba*ba)));ba=L[E-1]/aa;$=L[E]/aa;if(1===ba)break;if(0===ba)for(L[E-1]=$*aa,M=1;M<=h;M+=1)aa=b[M][E-1],b[M][E-1]=b[M][E],
b[M][E]=aa;else for(L[E-1]=aa,ha=$/(1+ba),M=1;M<=h;M+=1)aa=ba*b[M][E-1]+$*b[M][E],b[M][E]=ha*(b[M][E-1]+aa)-b[M][E],b[M][E-1]=aa}L[Q]=L[J]}}else{S=-G[da];for(M=1;M<=h;M+=1)S+=n[M]*H[M][da];if(da>K)L[fa+da]=S;else if(L[fa+da]=-Math.abs(S),0<S){for(M=1;M<=h;M+=1)H[M][da]=-H[M][da];G[da]=-G[da]}return 700}return 0}function P(){Q=ia+R*(R+1)/2+1;U=Q+R;if(0===L[U])return 798;ba=Math.max(Math.abs(L[U-1]),Math.abs(L[U]));$=Math.min(Math.abs(L[U-1]),Math.abs(L[U]));aa=0<=L[U-1]?Math.abs(ba*Math.sqrt(1+$*$/
(ba*ba))):-Math.abs(ba*Math.sqrt(1+$*$/(ba*ba)));ba=L[U-1]/aa;$=L[U]/aa;if(1===ba)return 798;if(0===ba){for(E=R+1;E<=J;E+=1)aa=L[U-1],L[U-1]=L[U],L[U]=aa,U+=E;for(E=1;E<=h;E+=1)aa=b[E][R],b[E][R]=b[E][R+1],b[E][R+1]=aa}else{ha=$/(1+ba);for(E=R+1;E<=J;E+=1)aa=ba*L[U-1]+$*L[U],L[U]=ha*(L[U-1]+aa)-L[U],L[U-1]=aa,U+=E;for(E=1;E<=h;E+=1)aa=ba*b[E][R]+$*b[E][R+1],b[E][R+1]=ha*(b[E][R]+aa)-b[E][R+1],b[E][R]=aa}return 0}var E,M,Q,U,Y,R,ea,Z,ia,fa,w,da,aa,S,X,ca,ba,$,ha,na,ga,la,oa;I=Math.min(h,A);Q=2*h+I*
(I+5)/2+2*A+1;la=1E-60;do la+=la,Y=1+0.1*la,oa=1+0.2*la;while(1>=Y||1>=oa);for(E=1;E<=h;E+=1)L[E]=d[E];for(E=h+1;E<=Q;E+=1)L[E]=0;for(E=1;E<=A;E+=1)O[E]=0;Y=[];if(0===V[1]){s(b,k,h,Y);if(0!==Y[1]){V[1]=2;return}y(b,k,h,d);l(b,k,h)}else{for(M=1;M<=h;M+=1)for(n[M]=0,E=1;E<=M;E+=1)n[M]+=b[E][M]*d[E];for(M=1;M<=h;M+=1)for(d[M]=0,E=M;E<=h;E+=1)d[M]+=b[M][E]*n[E]}F[1]=0;for(M=1;M<=h;M+=1)for(n[M]=d[M],F[1]+=L[M]*n[M],L[M]=0,E=M+1;E<=h;E+=1)b[E][M]=0;F[1]=-F[1]/2;V[1]=0;ea=h;Z=ea+h;w=Z+I;ia=w+I+1;fa=ia+
I*(I+1)/2;d=fa+A;for(E=1;E<=A;E+=1){S=0;for(M=1;M<=h;M+=1)S+=H[M][E]*H[M][E];L[d+E]=Math.sqrt(S)}J=0;N[1]=0;for(k=N[2]=0;;){N[1]+=1;Q=fa;for(E=1;E<=A;E+=1){Q+=1;S=-G[E];for(M=1;M<=h;M+=1)S+=H[M][E]*n[M];Math.abs(S)<la&&(S=0);if(E>K)L[Q]=S;else if(L[Q]=-Math.abs(S),0<S){for(M=1;M<=h;M+=1)H[M][E]=-H[M][E];G[E]=-G[E]}}for(E=1;E<=J;E+=1)L[fa+O[E]]=0;aa=da=0;for(E=1;E<=A;E+=1)L[fa+E]<aa*L[d+E]&&(da=E,aa=L[fa+E]/L[d+E]);k=0===da?999:0;if(999===k)break;for(;;){k=W();if(0===k)break;if(999===k)return;if(700===
k){if(R!==J)for(;;){P();U=Q-R;for(E=1;E<=R;E+=1)L[U]=L[Q],Q+=1,U+=1;L[w+R]=L[w+R+1];O[R]=O[R+1];R+=1;k=R<J?797:0;if(797!==k)break}L[w+J]=L[w+J+1];L[w+J+1]=0;O[J]=0;J-=1;N[2]+=1}}}}b.solveQP=function(b,h,l,s,y,F){b=d(b);h=d(h);l=d(l);var H,G,I,A,K=[],O=[],J=[],N=[],L=[];y=y||0;F=F?d(F):[void 0,0];s=s?d(s):[];G=b.length-1;I=l[1].length-1;if(!s)for(H=1;H<=I;H+=1)s[H]=0;for(H=1;H<=I;H+=1)O[H]=0;A=Math.min(G,I);for(H=1;H<=G;H+=1)J[H]=0;K[1]=0;for(H=1;H<=2*G+A*(A+5)/2+2*I+1;H+=1)N[H]=0;for(H=1;2>=H;H+=
1)L[H]=0;n(b,h,G,G,J,K,l,s,G,I,y,O,0,L,N,F);b="";1===F[1]&&(b="constraints are inconsistent, no solution!");2===F[1]&&(b="matrix D in quadratic function is not positive definite!");return{solution:k(J),value:k(K),unconstrained_solution:k(h),iterations:k(L),iact:k(O),message:b}}})(b);b.svd=function(h){function d(b,d){b=Math.abs(b);d=Math.abs(d);return b>d?b*Math.sqrt(1+d*d/b/b):0==d?b:d*Math.sqrt(1+b*b/d/d)}var k;k=b.epsilon;var l=1E-64/k,y=0,s=0,n=0,x=0,B=0;h=b.clone(h);var z=h.length,C=h[0].length;
if(z<C)throw"Need more rows than columns";for(var D=Array(C),F=Array(C),s=0;s<C;s++)D[s]=F[s]=0;for(var H=b.rep([C,C],0),G=0,I=0,A=0,K=0,O=0,J=0,N=0,s=0;s<C;s++){D[s]=I;N=0;B=s+1;for(n=s;n<z;n++)N+=h[n][s]*h[n][s];if(N<=l)I=0;else for(G=h[s][s],I=Math.sqrt(N),0<=G&&(I=-I),A=G*I-N,h[s][s]=G-I,n=B;n<C;n++){N=0;for(x=s;x<z;x++)N+=h[x][s]*h[x][n];G=N/A;for(x=s;x<z;x++)h[x][n]+=G*h[x][s]}F[s]=I;N=0;for(n=B;n<C;n++)N+=h[s][n]*h[s][n];if(N<=l)I=0;else{G=h[s][s+1];I=Math.sqrt(N);0<=G&&(I=-I);A=G*I-N;h[s][s+
1]=G-I;for(n=B;n<C;n++)D[n]=h[s][n]/A;for(n=B;n<z;n++){N=0;for(x=B;x<C;x++)N+=h[n][x]*h[s][x];for(x=B;x<C;x++)h[n][x]+=N*D[x]}}O=Math.abs(F[s])+Math.abs(D[s]);O>K&&(K=O)}for(s=C-1;-1!=s;s+=-1){if(0!=I){A=I*h[s][s+1];for(n=B;n<C;n++)H[n][s]=h[s][n]/A;for(n=B;n<C;n++){N=0;for(x=B;x<C;x++)N+=h[s][x]*H[x][n];for(x=B;x<C;x++)H[x][n]+=N*H[x][s]}}for(n=B;n<C;n++)H[s][n]=0,H[n][s]=0;H[s][s]=1;I=D[s];B=s}for(s=C-1;-1!=s;s+=-1){B=s+1;I=F[s];for(n=B;n<C;n++)h[s][n]=0;if(0!=I){A=h[s][s]*I;for(n=B;n<C;n++){N=
0;for(x=B;x<z;x++)N+=h[x][s]*h[x][n];G=N/A;for(x=s;x<z;x++)h[x][n]+=G*h[x][s]}for(n=s;n<z;n++)h[n][s]/=I}else for(n=s;n<z;n++)h[n][s]=0;h[s][s]+=1}k*=K;for(x=C-1;-1!=x;x+=-1)for(l=0;50>l;l++){s=!1;for(B=x;-1!=B;B+=-1){if(Math.abs(D[B])<=k){s=!0;break}if(Math.abs(F[B-1])<=k)break}if(!s)for(y=0,N=1,K=B-1,s=B;s<x+1;s++){G=N*D[s];D[s]*=y;if(Math.abs(G)<=k)break;I=F[s];A=d(G,I);F[s]=A;y=I/A;N=-G/A;for(n=0;n<z;n++)O=h[n][K],J=h[n][s],h[n][K]=O*y+J*N,h[n][s]=-O*N+J*y}J=F[x];if(B==x){if(0>J)for(F[x]=-J,n=
0;n<C;n++)H[n][x]=-H[n][x];break}if(49<=l)throw"Error: no convergence.";K=F[B];O=F[x-1];I=D[x-1];A=D[x];G=((O-J)*(O+J)+(I-A)*(I+A))/(2*A*O);I=d(G,1);G=0>G?((K-J)*(K+J)+A*(O/(G-I)-A))/K:((K-J)*(K+J)+A*(O/(G+I)-A))/K;N=y=1;for(s=B+1;s<x+1;s++){I=D[s];O=F[s];A=N*I;I*=y;J=d(G,A);D[s-1]=J;y=G/J;N=A/J;G=K*y+I*N;I=-K*N+I*y;A=O*N;O*=y;for(n=0;n<C;n++)K=H[n][s-1],J=H[n][s],H[n][s-1]=K*y+J*N,H[n][s]=-K*N+J*y;J=d(G,A);F[s-1]=J;y=G/J;N=A/J;G=y*I+N*O;K=-N*I+y*O;for(n=0;n<z;n++)O=h[n][s-1],J=h[n][s],h[n][s-1]=
O*y+J*N,h[n][s]=-O*N+J*y}D[B]=0;D[x]=G;F[x]=K}for(s=0;s<F.length;s++)F[s]<k&&(F[s]=0);for(s=0;s<C;s++)for(n=s-1;0<=n;n--)if(F[n]<F[s]){y=F[n];F[n]=F[s];F[s]=y;for(x=0;x<h.length;x++)k=h[x][s],h[x][s]=h[x][n],h[x][n]=k;for(x=0;x<H.length;x++)k=H[x][s],H[x][s]=H[x][n],H[x][n]=k;s=n}return{U:h,S:F,V:H}};return b});
define("math/distance",["require","math/builtin","numeric"],function(b){var g=b("math/builtin"),r=b("numeric"),v={hypot:function(b,g){return 0===b&&0===g?0:Math.abs(b)>Math.abs(g)?Math.abs(b)*Math.sqrt(g/b*(g/b)+1):Math.abs(g)*Math.sqrt(b/g*(b/g)+1)},mean:function(b,g){return 0<b===0<g?b+0.5*(g-b):0.5*(b+g)},dot:function(b,g,u,a){return b*u+g*a},pointToSegmentParameter:function(b,g,u,a,m,c){var f=this.hypot(m-u,c-a);return 0===f?0:this.dot((b-u)/f,(g-a)/f,(m-u)/f,(c-a)/f)},closestPointOnSegment:function(b,
g,u,a,m,c){b=this.pointToSegmentParameter(b,g,u,a,m,c);return 0>=b?[u,a]:1<=b?[m,c]:[u+b*(m-u),a+b*(c-a)]},pointToSegment:function(b,g,u,a,m,c){u=this.closestPointOnSegment(b,g,u,a,m,c);return this.hypot(b-u[0],g-u[1])},isLine:function(b,p,u,a,m,c){b=r.svd([[b,p,1],[u,a,1],[m,c,1]]).S;return g.approx(b[b.length-1]/b[0],0)},isCircle:function(b,p,u,a,m,c,f,e){b=r.svd([[b*b+p*p,b,p,1],[u*u+a*a,u,a,1],[m*m+c*c,m,c,1],[f*f+e*e,f,e,1]]).S;return g.approx(b[b.length-1]/b[0],0)},isConic:function(b,p,u,a,
m,c,f,e,h,d,k,l){b=r.svd([[b*b,p*p,2*b*p,b,p,1],[u*u,a*a,2*u*a,u,a,1],[m*m,c*c,2*m*c,m,c,1],[f*f,e*e,2*f*e,f,e,1],[h*h,d*d,2*h*d,h,d,1],[k*k,l*l,2*k*l,k,l,1]]).S;return g.approx(b[b.length-1]/b[0],0)},conicQuadraticParameters:function(b,g,u,a,m,c,f,e,h,d){return{a:r.det([[g*g,2*b*g,b,g,1],[a*a,2*u*a,u,a,1],[c*c,2*m*c,m,c,1],[e*e,2*f*e,f,e,1],[d*d,2*h*d,h,d,1]]),b:r.det([[b*b,g*g,b,g,1],[u*u,a*a,u,a,1],[m*m,c*c,m,c,1],[f*f,e*e,f,e,1],[h*h,d*d,h,d,1]]),c:-r.det([[b*b,2*b*g,b,g,1],[u*u,2*u*a,u,a,1],
[m*m,2*m*c,m,c,1],[f*f,2*f*e,f,e,1],[h*h,2*h*d,h,d,1]])}},classifyConic:function(b,p,u,a,m,c,f,e,h,d,k,l){if(v.isLine(b,p,m,c,k,l))return"line";if(v.isCircle(b,p,u,a,h,d,k,l))return"circle";if(!v.isConic(b,p,u,a,m,c,f,e,h,d,k,l))return"none";b=v.conicQuadraticParameters(b,p,u,a,m,c,f,e,h,d);p=r.svd([[b.a,b.b],[b.b,b.c]]).S;return g.approx(p[p.length-1]/p[0],0,20)?"parabola":b.b*b.b>b.a*b.c?"hyperbola":"ellipse"}};return v});
define("math/poi",["require","./builtin","./distance"],function(b){function g(a,c){var b;a>c&&(b=a,a=c,c=b);b=0<a;var f=0<c,m=0.01<Math.abs(a),g=0.01<Math.abs(c);if(m||g)return e.mean(a,c);if(0===a)return c*Math.abs(c);if(0===c)return a*Math.abs(a);if(b!==f)return 0;b=b?Math.sqrt(a*c):-Math.sqrt(a*c);return b>=a&&c>=b?b:e.mean(a,c)}function r(a,c,b,e,f){if(isFinite(c)&&isFinite(e)&&0>c!==0>e)for(;;){var m=g(a,b),n=f(m);if(!isFinite(n))return null;if(m===a||m===b)return Math.abs(c)<=Math.abs(e)?[a,
c]:[b,e];if(0===n)return v(a,c,m,n,b,e,f);0>c!==0>n?(b=m,e=n):(a=m,c=n)}}function v(a,c,b,e,f,m,n){var x;if(isFinite(e))return isFinite(c)||(x=q(a,c,b,e,n),a=x[0],c=x[1]),isFinite(m)||(x=q(b,e,f,m,n),f=x[0],m=x[1]),a=c===e?[a,c]:p(a,c,b,e,n,e),b=m===e?[f,m]:p(b,e,f,m,n,e),b=g(a[0],b[0]),[b,n(b)]}function q(a,c,b,e,f){if(isFinite(c)!==isFinite(e))for(;;){var m=g(a,b),n=f(m);if(m===a||m===b)return isFinite(c)?[a,c]:[b,e];isFinite(n)!==isFinite(c)?(b=m,e=n):(a=m,c=n)}}function p(a,c,b,e,f,m){if(c===
m!==(e===m))for(;;){var n=g(a,b),x=f(n);if(n===a||n===b)return c===m?[a,c]:[b,e];x===m!==(c===m)?(b=n,e=x):(a=n,c=x)}}function u(a,c,b,e,f,m,n){if(a<b&&b<f&&isFinite(c)&&isFinite(e)&&isFinite(m)&&c!==e&&e!==m&&e>c===e>m)for(;;){var x=g(a,b),u=n(x),p=g(b,f),q=n(p);if(!isFinite(u)||!isFinite(q))return null;if(x===a||x===b||p===b||p===f)return u>e===e>c?[x,u]:q>e===e>c?[p,q]:[b,e];if(u===e||q===e)return v(a,c,b,e,f,m,n);u>c===e>c&&u>c===u>e?(f=b,m=e,b=x,e=u):q>m===e>m&&q>e===q>m?(a=b,c=e,b=p,e=q):(a=
x,c=u,f=p,m=q)}}function a(a,c,b,e,f,m,g,x){var u=Math.abs(e-c),p=Math.abs(m-e),q=Math.abs(x-m);return u>p&&u>q?[[a,c],[b,e]]:q>p&&q>u?[[f,m],[g,x]]:[[b,e],[f,m]]}function m(a,c){for(var b,e={x:[],y:[]},f,m,g,x,u,p=0,q=a.length;p<q;p++){b=a[p];u=void 0;0===b[1]&&(u=[b[0],b[1]]);for(var D=0,F=b.length;D<F-2;D+=2)(f=b[D],m=b[D+1],g=b[D+2],x=b[D+3],u)?0!==x&&(u[0]!==b[0]&&(f=v(u[0],u[1],f,m,g,x,c),e.x.push(f[0]),e.y.push(f[1])),u=void 0):0===x?u=[f,m]:0>m!==0>x&&(f=r(f,m,g,x,c))&&(e.x.push(f[0]),e.y.push(f[1]))}return e}
function c(a,c){for(var b,e={x:[],y:[]},f,m,g,x,p,q,C,D=0,F=a.length;D<F;D++){b=a[D];for(var H=0,G=b.length;H<G-4;H+=2)if(f=b[H],m=b[H+1],g=b[H+2],x=b[H+3],p=b[H+4],q=b[H+5],isFinite(m)&&isFinite(x)&&isFinite(q))if(m!==x&&x===q)C=[f,m];else if(m===x&&x!==q&&C)x>C[1]===x>q&&(f=v(C[0],C[1],g,x,p,q,c),e.x.push(f[0]),e.y.push(f[1])),C=void 0;else if((m!==x||x!==q)&&x>m===x>q)if(c.derivative)0<c.derivative(f)!==0<c.derivative(p)&&(f=r(f,c.derivative(f),p,c.derivative(p),c.derivative))&&(e.x.push(f[0]),
e.y.push(c(f[0])));else if(f=u(f,m,g,x,p,q,c))e.x.push(f[0]),e.y.push(f[1])}return e}var f=b("./builtin"),e=b("./distance");return{bisectJump:function(c,b,f,l,m,s,n,x){if(c<f&&f<m&&isFinite(b)&&isFinite(l)&&isFinite(s))for(;;){var u=g(c,f),p=n(u),v=g(f,m),r=n(v),F=Math.abs(p-e.mean(b,l)),H=Math.abs(r-e.mean(l,s));x||(x=0);if(F<=x&&H<=x)return null;if(!isFinite(p))return c=q(c,b,u,p,n),f=q(u,p,m,s,n),[c,f];if(!isFinite(r))return c=q(c,b,v,r,n),f=q(v,r,m,s,n),[c,f];if(u!==c&&u!==f||v!==f&&v!==m){if(u===
c||u===f)return a(c,b,f,l,v,r,m,s);if(v===f||v===m)return a(c,b,u,p,f,l,m,s)}else return Math.abs(l-b)>Math.abs(s-l)?(c=[c,b],f=[f,l]):(c=[f,l],f=[m,s]),[c,f];F>H?(m=f,s=l,f=u,l=p):(c=f,b=l,f=v,l=r)}},bisectExtremum:u,bisectFinite:q,bisectZero:r,findExtrema:c,findZeros:m,findPOIs:function(a,b){for(var e=m(a,b),f=a.length,g=[],s=[],n=0;n<f;n++){var u=a[n];0===parseFloat(u[1].toFixed(7))&&(g.push(u[0]),s.push(u[1]));0===parseFloat(u[u.length-1].toFixed(7))&&(g.push(u[u.length-2]),s.push(u[u.length-
1]))}e.x.push.apply(e.x,g);e.y.push.apply(e.y,s);f=b(0);f=isFinite(f)?{x:[0],y:[b(0)]}:{x:[],y:[]};return{zeros:e,intercept:f,extrema:c(a,b)}},findIntersections:function(a,b,e){var l=function(a){return e(a)-b(a)},g=m(a,l),s=c(a,l);a=0;for(l=s.x.length;a<l;a++)f.approx(s.y[a],0)&&(g.x.push(s.x[a]),g.y.push(s.y[a]));a=0;for(l=g.x.length;a<l;a++)g.y[a]=b(g.x[a]);return g},INTERSECTION:1001,ZERO:1002,INTERCEPT:1003,EXTREMUM:1004,EDGE:1005,DEFINITION:1006}});
define("graphing/graphmode",{X:1,Y:2,XYPOINT:3,XYPOINT_MOVABLE:4,PARAMETRIC:5,POLAR:6,POLYGONFILL:7});
define("math/plotter","require ./distance ./poi graphing/graphmode ./builtinframe config".split(" "),function(b){var g=b("./distance"),r=b("./poi"),v=b("graphing/graphmode"),q=b("./builtinframe"),p=b("config"),u={Accumulator:function(a){var b,c;a?(b=a.xtolerance||a.tolerance||0,c=a.ytolerance||a.tolerance||0):b=c=0;return{xtolerance:b,ytolerance:c,segments:[],segment:null,pivotPoint:null,pendingPoint:null,addPoint:function(f){this.n+=1;var e=this.pivotPoint;if(this.segment)if(0>b&&0>c)this.segment.push(f[0],
f[1]);else{if(e){var h;h=[this.segment[this.segment.length-2],this.segment[this.segment.length-1]];var d=e,e=f,k=b,l=c;a&&a.map&&(h=a.map(h),d=a.map(d),e=a.map(e));var u=g.pointToSegmentParameter(e[0],e[1],h[0],h[1],d[0],d[1]);1>u?h=!1:(h=[h[0]+u*(d[0]-h[0]),h[1]+u*(d[1]-h[1])],h=Math.abs(e[0]-h[0])<=k&&Math.abs(e[1]-h[1])<=l);h||(this.flushPending(),this.pivotPoint=f)}else this.pivotPoint=f;this.pendingPoint=f}else this.segment=[f[0],f[1]]},flushPending:function(){this.pendingPoint&&(this.segment.push(this.pendingPoint[0],
this.pendingPoint[1]),this.pendingPoint=this.pivotPoint=null)},breakSegment:function(){this.flushPending();this.segment&&(2<this.segment.length&&this.segments.push(this.segment),this.segment=null)},getSegments:function(){this.breakSegment();return this.segments}}},sampleParametricNaive:function(a,b){for(var c=u.Accumulator(),f,e=b.min;e<=b.max+b.step/2;e+=b.step)f=a(e),isFinite(f[0])&&isFinite(f[1])?c.addPoint(f):c.breakSegment();return c.getSegments()},sampleXYNaive:function(a,b){for(var c=u.Accumulator(b),
f,e=b.min;e<=b.max+b.step/2;e+=b.step)f=a(e),isFinite(f)?c.addPoint([e,f]):c.breakSegment();return c.getSegments()},sampleXY:function(a,b){var c=u.Accumulator(b),f,e=b.min,h=a(e),d=[e,h],k;b&&(k=b.ytolerance||b.tolerance);var l=function(b,d){if(isFinite(k)&&!(0>=k)){var e;e=g.mean(b[0],d[0]);if(e=r.bisectJump(b[0],b[1],e,a(e),d[0],d[1],a,k))c.addPoint(e[0]),c.breakSegment(),c.addPoint(e[1])}};isFinite(h)&&c.addPoint([e,h]);for(e+=b.step;e<=b.max+b.step/2;e+=b.step)h=a(e),isFinite(h)&&isFinite(d[1])?
(l(d,[e,h]),c.addPoint([e,h])):isFinite(h)&&!isFinite(d[1])?(f=r.bisectFinite(d[0],d[1],e,h,a),f[0]!==e&&c.addPoint(f),l(f,[e,h]),c.addPoint([e,h])):!isFinite(h)&&isFinite(d[1])&&(f=r.bisectFinite(d[0],d[1],e,h,a),l(d,f),f[0]!==d[0]&&c.addPoint(f),c.breakSegment()),d=[e,h];return c.getSegments()},findPiPeriod:function(a,b,c){function f(a,b){var f=0===b%2?1:-1;if(!c&&-1===f)return!1;for(var k=b*(Math.PI/q._angleMultiplier),h=[e,e+1,e+2,e+3],l=0,m=h.length;l<m;l++)if(isFinite(a(h[l]))!==isFinite(a(h[l]+
k))||Math.abs(a(h[l])-f*a(h[l]+k))>d)return!1;return!0}var e=b.min,h=b.max-b.min,d=b.xtolerance&&b.ytolerance?Math.min(b.xtolerance,b.ytolerance):b.tolerance;b=Math.floor(h/(Math.PI/q._angleMultiplier));for(var k,l,h=1;h<=b;h++)if(f(a,h)){l=h;for(k=2;k*h<=b;k++)f(a,k*h)||(l=void 0);if(l)break}return l?l*(Math.PI/q._angleMultiplier):null},mapPolar:function(a){return[a[1]*Math.cos(a[0]),a[1]*Math.sin(a[0])]},samplePolar:function(a,b){b.map=this.mapPolar;return this.sampleXY(a,b)},eachStep:function(a,
b){for(var c=a.min,f=a.max,e=f-c,h=Math.ceil(e/a.step),e=e/h,d=0;d<h;d++)b(c+d*e);b(f)},sampleParametricRecursive:function(a,b){if(b.max<b.min)return[];var c=u.Accumulator(b),f,e;b?(f=b.xtolerance||b.tolerance||0,e=b.ytolerance||b.tolerance||0):f=e=0;var h=b.min,d=a(h);isFinite(d[0])&&isFinite(d[1])&&c.addPoint(d);var k;this.eachStep(b,function(b){k=a(b);u.subsampleParametricRecursive(a,h,d,b,k,10,c,f,e);h=b;d=k});return c.getSegments()},subsampleParametricRecursive:function(a,b,c,f,e,h,d,k,l){if(f!==
b){var p=g.mean(b,f),s=a(p,!0),n=isFinite(c[0])&&isFinite(c[1]),x=isFinite(e[0])&&isFinite(e[1]),q=isFinite(s[0])&&isFinite(s[1]);if(0===h||p===b||p===f)d.breakSegment(),x&&d.addPoint(e);else if(n||x)if(n!=x){for(var x=b,v=f,r=c,D=e;b!==p&&p!==f;)q==n?(b=p,c=s,n=q):(f=p,e=s),p=b+(f-b)/2,s=a(p,!0),q=isFinite(s[0])&&isFinite(s[1]);n?(u.subsampleParametricRecursive(a,x,r,b,c,h-1,d,k,l),d.breakSegment()):(d.breakSegment(),d.addPoint(e),u.subsampleParametricRecursive(a,f,e,v,D,h-1,d,k,l))}else{if(n&&q&&
x&&(n=g.pointToSegmentParameter(s[0],s[1],c[0],c[1],e[0],e[1]),0.2<n&&0.8>n&&Math.abs(s[0]-(c[0]+n*(e[0]-c[0])))<=k&&Math.abs(s[1]-(c[1]+n*(e[1]-c[1])))<=l)){d.addPoint(e);return}c[0]===s[0]&&c[1]===s[1]||u.subsampleParametricRecursive(a,b,c,p,s,h-1,d,k,l);e[0]===s[0]&&e[1]===s[1]||u.subsampleParametricRecursive(a,p,s,f,e,h-1,d,k,l)}}},validateViewState:function(a){return a&&a.viewport.xmax>a.viewport.xmin&&a.viewport.ymax>a.viewport.ymin&&0<a.screen.width&&0<a.screen.height?!0:!1},computeDomain:function(a,
b,c){var f=a.viewport.xmin,e=a.viewport.xmax,h=a.viewport.ymin,d=a.viewport.ymax,k=a.oversample||4,l=1/k*(e-f)/a.screen.width;a=1/k*(d-h)/a.screen.height;var k=b.isLinear,g;switch(b.graphMode){case v.X:g={min:h,max:d,xtolerance:a,ytolerance:l,step:k?d-h:a};break;case v.Y:g={min:f,max:e,xtolerance:l,ytolerance:a,step:k?e-f:l};break;case v.POLAR:g={min:0,max:6*(2*Math.PI/q._angleMultiplier),step:2*Math.PI/q._angleMultiplier/1E3,tolerance:Math.min(l,a)};if(b=u.findPiPeriod(c,g,"="===b.operator))g.max=
g.min+b;break;case v.PARAMETRIC:g={min:b.domain.min,max:b.domain.max,step:b.domain.step,xtolerance:l,ytolerance:a}}return g},classifyBranchConic:function(a){if(p.get("conic")){var b,c;if(1===a.length&&4===a[0].length)return"line";for(var f=0;f<a.length;f++){var e=a[f],h=e.length;if(12>h)return"unknown";try{c=g.classifyConic(e[0],e[1],e[2*Math.floor(1*h/12)],e[2*Math.floor(1*h/12)+1],e[2*Math.floor(2*h/12)],e[2*Math.floor(2*h/12)+1],e[2*Math.floor(3*h/12)],e[2*Math.floor(3*h/12)+1],e[2*Math.floor(4*
h/12)],e[2*Math.floor(4*h/12)+1],e[h-2],e[h-1])}catch(d){return"unknown"}if("none"===c||b&&c!==b)return"none";b=c}return b}},computeGraphData:function(a,b,c){a=u.computeDomain(a,b,c);if(!a)return[];var f;switch(b.graphMode){case v.X:case v.Y:f=u.sampleXY(c,a);break;case v.POLAR:f=u.samplePolar(c,a);break;case v.PARAMETRIC:a.step||(a.step=(a.max-a.min)/1E3),f=u.sampleParametricRecursive(c,a)}a=[];b.graphMode!==v.PARAMETRIC&&(a=r.findPOIs(f,c),f=u.interleaveExtrema(f,a));if(b.graphMode===v.X)for(var e in a)a.hasOwnProperty(e)&&
(c=a[e].y,a[e].y=a[e].x,a[e].x=c);return[{segments:f,graphMode:b.graphMode,color:b.color,style:b.style,operator:b.operator,poi:a,conic:u.classifyBranchConic(f),expr:null}]},interleaveExtrema:function(a,b){for(var c=a.length,f,e=Array(c),h,d,k=b.extrema,l=0,g=k.x.length,s=0;s<c;s++){f=a[s];d=f.length;h=[];for(var n=0;n<d;n+=2){for(;l<g&&k.x[l]<=f[n];)k.x[l]!==f[n]&&h.push(k.x[l],k.y[l]),l++;h.push(f[n],f[n+1])}e[s]=h}return e},polygonsFromSegments:function(a,b,c){for(var f=function(a){a=a[a.length-
1];return a[a.length-2]},e=[],h=0,d=0,k=[],l=[],g=-Infinity,s=-Infinity;;){if(g<=s){if(h>=b.length)break;l.push(b[h++])}if(s<=g){if(d>=a.length)break;k.push(a[d++])}g=f(l);s=f(k);g==s&&(e.push(u.polygonFromSegments(k,l,c)),l=[],k=[])}return e},polygonFromSegments:function(a,b,c){var f,e,h,d=[],k;switch(c){case v.POLAR:k=this.mapPolar;break;case v.X:k=function(a){return[a[1],a[0]]}}for(c=0;c<a.length;c++)for(h=a[c],f=0;f<h.length;f+=2)e=[h[f],h[f+1]],k&&(e=k(e)),d.push(e[0],e[1]);for(c=b.length-1;0<=
c;c--)for(h=b[c],f=h.length-2;0<=f;f-=2)e=[h[f],h[f+1]],k&&(e=k(e)),d.push(e[0],e[1]);return d}};return u});define("main/fake_i18n",["require","underscore"],function(b){var g=b("underscore");return{t:function(b,v){g.each(v,function(g,p){b=b.split("__"+p+"__").join(g)});return b},init:function(){}}});
define("math/evaluationstate",["require","pjs","graphing/graphmode","math/comparators"],function(b){var g=b("pjs"),r=b("graphing/graphmode"),v=b("math/comparators");return g(function(b){b.init=function(b,g,a){var m;this.error=b.error;if(this.is_graphable=a&&a.isGraphable())m=b.graph_info.graphMode;if(this.is_evaluable=a&&a.isEvaluable())this.zero_values=a.getZeroValues();this.is_point_list=m===r.XYPOINT||m===r.XYPOINT_MOVABLE;this.is_parametric=m===r.PARAMETRIC;if(this.is_shade_between=this.is_graphable&&
!!a.shade_between)this.shade_between_operators=a.getOperators();this.is_double_inequality=this.is_shade_between&&2==a.getOperators().length;a?(this.operator=a.getOperator(),this.assignment=a.getAssignedVariable(),this.variables=a.getSlidableVariables(),this.simple_constant=a.getSliderValue(),this.is_inequality=this.is_double_inequality||0!==v.table[this.operator].direction):this.variables=[];this.is_animatable=(this.is_slidable=!!b.slider)&&!this.is_graphable;b.moveIds&&(this.move_ids=b.moveIds);
if(this.is_tableable=this.is_graphable&&!this.is_parametric&&!a.is_solved_equation&&"="===this.operator&&!this.is_double_inequality)if(this.table_info=a.getTableInfo(),b=this.table_info.independent_variable,"y"===b||"theta"===b)this.is_tableable=!1,delete this.table_info}})});define("graphing/columnmode",{POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"});
define("math/derivative",["require","./parser_util","./evalframe"],function(b){var g=b("./parser_util"),r=b("./evalframe"),v=g.DerivativeNode,q=g.ConstantNode,p=g.NegationNode,u=g.ParseNode,a=g.BinaryOperatorNode,m=g.FunctionNode,c=g.FunctionDeclarationNode,f=g.FunctionCallExponentNode,e=g.IdentifierNode;b=g.RepeatedOperatorNode;var h=g.SummationNode,d=g.ChainedComparatorNode,k=g.PiecewiseNode,l=g.AssignmentNode;v.open(function(a){a.takeDerivative=function(a,b){if(this.freeOf(a,b))return q(0);var c=
this.expression.takeDerivative(a,this.derivative_variable);return c instanceof v?g.DerivativeNode(b,c):c.takeDerivative(a,b)};a.freeOf=function(a,b){return this.expression.freeOf(a,b)};a.substitute=function(a){var b=this.expression.takeDerivative(a,this.derivative_variable);if(b instanceof v){if(a.hasVariable(this.derivative_variable.identifier))throw"Can't substitute for derivative variable if derivative can't be taken symbolically";return v(this.derivative_variable,this.expression)}return b.substitute(a)}});
u.open(function(a){a.takeDerivative=function(a,b){return v(b,this)};a.freeOf=function(a,b){return!1}});var y={chain:function(b,c,d,e){return e.freeOf(b,c)?q(0):a.reduce("*",d,e.takeDerivative(b,c))}};(function(){for(var a=[],b=[],c=0;9>c;c++)a.push(e("a_{"+c+u.prototype.tmp()+"}")),b.push(RegExp("a_"+c,"g"));var d=function(c){for(var d=0;d<a.length;d++)c=c.replace(b[d],a[d].toString());return c};y.substituteFn=function(b){var c=g.parse(d(b)),e=r();return function(b){for(var d=b.length,f=0;f<d;f++)e.setVariable(a[f].identifier,
b[f]);return c.substitute(e)}}})();a.reduce=function(b,c,d){switch(b){case "+":if(c instanceof q&&d instanceof q)return q(c.value+d.value);if(c instanceof q&&0===c.value)return d;if(d instanceof q&&0===d.value)return c;break;case "-":if(c instanceof q&&d instanceof q)return q(c.value-d.value);if(d instanceof q&&0===d.value)return c;break;case "*":if(c instanceof q&&d instanceof q)return q(c.value*d.value);if(c instanceof q&&1===c.value)return d;if(d instanceof q&&1===d.value)return c;break;case "/":if(d instanceof
q&&1===d.value)return c;if(c instanceof q&&d instanceof q)return q(c/d);break;case "^":if(d instanceof q&&1===d.value)return c}return a(b,c,d)};p.reduce=function(a){return a instanceof q?q(-a.value):a instanceof p?a.expression:p(a)};a.open(function(b,c){var d=y.substituteFn("a_1*a_0^{a_1 - 1}"),e=y.substituteFn("a_0^{a_1}*\\ln(a_0)");b.takeDerivative=function(b,f){if(this.freeOf(b,f))return q(0);var k=this.args[0],h=this.args[1];switch(this.operator){case "+":return a.reduce("+",k.takeDerivative(b,
f),h.takeDerivative(b,f));case "-":return a.reduce("-",k.takeDerivative(b,f),h.takeDerivative(b,f));case "*":return a.reduce("+",y.chain(b,f,h,k),y.chain(b,f,k,h));case "/":return a.reduce("/",a.reduce("-",y.chain(b,f,h,k),y.chain(b,f,k,h)),a.reduce("^",h,q(2)));case "^":return a.reduce("+",y.chain(b,f,d(this.args),k),y.chain(b,f,e(this.args),h));default:return c.takeDerivative.call(this,b,f)}};b.freeOf=function(a,b){return this.args[0].freeOf(a,b)&&this.args[1].freeOf(a,b)};b.substitute=function(b){return a.reduce(this.operator,
this.args[0].substitute(b),this.args[1].substitute(b))}});d.open(function(a){a.freeOf=function(a,b){return this.args.every(function(c){return c.freeOf(a,b)})};a.substitute=function(a){return d(this.comparators,this.args.map(function(b){return b.substitute(a)}))}});q.open(function(a){a.takeDerivative=function(){return q(0)};a.freeOf=function(a,b){return!0};a.substitute=function(a){return this}});m.open(function(b,c){var d={exp:["\\exp(a_0)"],sqrt:["\\frac{1}{2*\\sqrt{a_0}}"],sin:["\\angleMultiplier(1)*\\cos(a_0)"],
cos:["-\\angleMultiplier(1)*\\sin(a_0)"],tan:["\\angleMultiplier(1)*(\\sec(a_0))^2"],arcsin:["\\frac{1}{\\angleMultiplier(1)*\\sqrt{1 - a_0^2}}"],arccos:["\\frac{-1}{\\angleMultiplier(1)*\\sqrt{1 - a_0^2}}"],arctan:["\\frac{1}{\\angleMultiplier(1)*(1 + a_0^2)}"],sinh:["\\cosh(a_0)"],cosh:["\\sinh(a_0)"],tanh:["(\\sech(a_0))^2"],arcsinh:["\\frac{1}{\\sqrt{a_0^2 + 1}}"],arccosh:["\\frac{1}{\\sqrt{a_0^2 - 1}}"],arctanh:["\\frac{1}{1 - a_0^2}"],factorial:["(a_0)!*\\polyGamma(0, a_0 + 1)"],floor:["\\left\\{ \\mod(a_0, 1) > 0: 0 \\right\\}"],
ceil:["\\left\\{ \\mod(a_0, 1) > 0: 0 \\right\\}"],round:["\\left\\{ \\abs(\\mod(a_0, 1) - 0.5) > 0: 0 \\right\\}"],abs:["\\left\\{ \\abs(a_0) > 0: \\sign(a_0) \\right\\}"],sign:["\\left\\{ \\abs(a_0) > 0: 0 \\right\\}"],angleMultiplier:["0"],log:["\\left\\{a_0 > 0: \\frac{1}{a_0*\\ln(a_1)}\\right\\}","\\frac{-\\log_{a_1}(a_0)}{a_1*\\ln(a_1)}"],pow:["a_1*a_0^{a_1 - 1}","a_0^{a_1}*\\ln(a_0)"],nthroot:["a_0^{1/a_1 - 1}/a_1","-\\frac{a_0^{1/a_1}*\\ln(a_0)}{a_1^2}"],polyGamma:["0/0","\\polyGamma(1 + a_0, a_1)"],
min:["\\left\\{ a_0 < a_1 : 1, a_0 > a_1 : 0 \\right\\}","\\left\\{ a_1 < a_0 : 1, a_1 > a_0 : 0 \\right\\}"],max:["\\left\\{ a_0 > a_1 : 1, a_0 < a_1 : 0 \\right\\}","\\left\\{ a_1 > a_0 : 1, a_1 < a_0 : 0 \\right\\}"],mod:["\\left\\{ \\abs(\\mod(a_0, a_1)) > 0: 1 \\right\\}","\\left\\{ \\mod(a_0/a_1, 1) > 0: -\\floor(a_0/a_1) \\right\\}"]},f={};(function(){var a=y.substituteFn,b;for(b in d)d.hasOwnProperty(b)&&(f[b]=d[b].map(a))})();var k=function(b,c){f[c]=[function(c){return p.reduce(a.reduce("/",
f[b][0](c),a.reduce("^",m(e(b),c),q(2))))}]};[["sin","csc"],["cos","sec"],["tan","cot"],["sinh","csch"],["cosh","sech"],["tanh","coth"]].forEach(function(a){k(a[0],a[1])});var h=function(b,c){f[c]=[function(c){return p.reduce(a.reduce("/",f[b][0]([a.reduce("/",q(1),c[0])]),a.reduce("^",c[0],q(2))))}]};[["arcsin","arccsc"],["arccos","arcsec"],["arctan","arccot"],["arcsinh","arccsch"],["arccosh","arcsech"],["arctanh","arccoth"]].forEach(function(a){h(a[0],a[1])});var l=function(){return q(NaN)},g=function(a){f[a]=
[l,l]};"lcm gcd nCr nPr mcm mcd".split(" ").forEach(g);["quadraticFormula","quadraticInequalityRegions"].forEach(g);b.takeDerivative=function(b,d){function e(c,f){return 0>f?c:e(a.reduce("+",c,y.chain(b,d,l[f](h),h[f])),f-1)}if(this.freeOf(b,d))return q(0);var k=this.identifier.identifier,h=this.args,l;if(f.hasOwnProperty(k))l=f[k];else if(b.hasFunction(k))l=b.getFunctionTree(k).computePartials(b);else return 1===this.args.length&&b.hasVariable(k)?a("*",this.identifier,this.args[0]).takeDerivative(b,
d):c.takeDerivative.call(this,b,d);k=h.length;k=y.chain(b,d,l[k-1](h),h[k-1]);return e(k,this.args.length-2)};b.freeOf=function(a,b){return this.args.every(function(c){return c.freeOf(a,b)})&&this.identifier.freeOf(a,b)};b.substitute=function(a){return m(this.identifier,this.args.map(function(b){return b.substitute(a)}))}});c.open(function(a){a.computePartials=function(a){var b=this;return b.args.map(function(c){var d=b.expression.takeDerivative(a,c);return function(c){for(var f=r(a),k=r(a),h,l=0;l<
b.args.length;l++)h=e(b.tmp()),f.setVariable(b.args[l].identifier,h),k.setVariable(h.identifier,c[l]);return d.substitute(f).substitute(k)}})}});f.open(function(a){a.takeDerivative=function(a,b){return this.getEquivalentNode(a).takeDerivative(a,b)};a.freeOf=function(a,b){return this.getEquivalentNode(a).freeOf(a,b)};a.substitute=function(a){return f(this.identifier.substitute(a),this.arg.substitute(a),this.exponent.substitute(a))}});e.open(function(a){a.takeDerivative=function(a,b){return b.identifier===
this.identifier?q(1):a.hasVariable(this.identifier)?a.getVariable(this.identifier).takeDerivative(a,b):q(0)};a.freeOf=function(a,b){return b.identifier===this.identifier?!1:a.hasVariable(this.identifier)?a.getVariable(this.identifier).freeOf(a,b):!0};a.substitute=function(a){return a.hasVariable(this.identifier)?a.getVariable(this.identifier).substitute(a):this}});p.open(function(a){a.takeDerivative=function(a,b){return this.freeOf(a,b)?q(0):p.reduce(this.expression.takeDerivative(a,b))};a.freeOf=
function(a,b){return this.expression.freeOf(a,b)};a.substitute=function(a){return p.reduce(this.expression.substitute(a))}});k.open(function(a){a.takeDerivative=function(a,b){if(this.freeOf(a,b))return q(0);var c=k(this.condition,this.if_expr.takeDerivative(a,b));this.else_expr&&c.append_else(this.else_expr.takeDerivative(a,b));return c};a.freeOf=function(a,b){return this.else_expr?this.condition.freeOf(a,b)&&this.if_expr.freeOf(a,b)&&this.else_expr.freeOf(a,b):this.condition.freeOf(a,b)&&this.if_expr.freeOf(a,
b)};a.substitute=function(a){var b=k(this.condition.substitute(a),this.if_expr.substitute(a));this.else_expr&&b.append_else(this.else_expr.substitute(a));return b}});b.open(function(a){a.freeOf=function(a,b){return this.index.freeOf(a,b)&&this.lower_bound.freeOf(a,b)&&this.upper_bound.freeOf(a,b)&&this.summand.freeOf(a,b)};a.substitute=function(a){var b=this.index,c=r(a),d;d=e(this.tmp());c.setVariable(b.identifier,d);b=this.constructor;return b(d,this.lower_bound.substitute(a),this.upper_bound.substitute(a),
this.summand.substitute(c))}});h.open(function(a){a.takeDerivative=function(a,b){return this.freeOf(a,b)?q(0):h(this.index,this.lower_bound,this.upper_bound,this.summand.takeDerivative(a,b))}});(function(){var a=function(a,b){return this.expression.takeDerivative(a,b)};l.open(function(b){b.substitute=function(a){return l(this.assigns,this.expression.substitute(a))};b.expressionDerivative=a});c.open(function(b){b.substitute=function(a){return c(this.assigns,this.args,this.expression.substitute(a))};
b.expressionDerivative=a})})()});
define("math/evaluatorobject","require underscore pjs main/fake_i18n ./parser_util ./plotter ./comparators ./evalframe ./quadratic ./evaluationstate graphing/graphmode graphing/columnmode ./derivative".split(" "),function(b){function g(a){for(var b=[],c=[],d=a.length,e=0;e<d;e++)b.push(a[e][0]),c.push(a[e][1]);return{defined:{x:b,y:c}}}var r=b("underscore"),v=b("pjs"),q=b("main/fake_i18n"),p=b("./parser_util"),u=b("./plotter"),a=b("./comparators"),m=b("./evalframe"),c=b("./quadratic"),f=b("./evaluationstate"),
e=b("graphing/graphmode"),h=b("graphing/columnmode");b("./derivative");var d={name:"ERROR"},k={name:"WARNING"},l={name:"EVALUABLE"},y={name:"GRAPHABLE"},s={name:"SILENT"},n={},x=p.ConstantNode,B=p.IdentifierNode,z=p.ErrorNode,C=p.BinaryOperatorNode;b=v(function(a){a.init=function(a){this._context=a;this._analysis=null;this.compiler=a.compiler};a.exportDefinitionsTo=function(a){};a.getAllIds=function(){return[]};a.cleanupId=function(a){throw"base analysis object can't cleanup ID";};a.invalidate=function(){this._analysis=
null};a.getAnalysis=function(){this._analysis||this._context.updateAnalysis();return this._analysis};a.setAnalysis=function(a){this._analysis=a};a.shouldIntersect=function(){return!1};a.isEvaluable=function(){return this.getAnalysis().status==l};a.isGraphable=function(){return this.getAnalysis().status==y};a.isGraphed=function(){return this.isGraphable()};a.graphModeFromVariables=function(a,b){return"x"===b||"y"===a?e.X:"r"===b&&"theta"===a||"r"===b&&void 0===a||void 0===b&&"theta"===a?e.POLAR:e.Y};
a.setGraphMode=function(a,b,c){"y"!==c||b||(b="x");"x"!==c||b||(b="y");"r"!==c||b||(b="theta");a||(a=this.graphModeFromVariables(b,c));this._analysis.graph_info={color:this._statement.color,style:this._statement.style,graphMode:a,independent:b,dependent:c,operator:this.getOperator(),domain:this._statement.domain};return y};a.computeGraphData=function(a){};a.getStatus=function(){return this.getAnalysis().status};a.getAssignedVariable=function(){return null};a.compile=function(){};a.getSlidableVariables=
function(){return[]};a.getSliderValue=function(){return NaN};a.getZeroValues=function(){return[]};a.addFreeVariables=function(a){for(var b=0;b<a.length;b++){var c=a[b];-1<this._analysis.free_variables.indexOf(c)||this._analysis.free_variables.push(c)}}});var D=v(b,function(a,b){a.init=function(a,c,d){b.init.call(this,a);this._statement=c;this._tree=d;this.id=c.id;this.color=c.color;this.style=c.style;this.domain=c.domain};a.isGraphed=function(){return this.isGraphable()&&this._statement.shouldGraph};
a.getAllIds=function(){return[this.id]};a.getGraphInfo=function(){return this._analysis.graph_info};a.shouldIntersect=function(){if(!this.isGraphed())return!1;var a=this.getGraphInfo().graphMode;return a===e.Y||a===e.X};a.computeGraphData=function(a){var b={},c=this._context.getFrame(),d=this.compile(c);d.fn.derivative=this.compileDerivative(c).fn;var e=this._analysis.graph_info;1===this._tree.polynomialOrder(c,e.independent)&&(e.isLinear=!0);b[this.id]=u.computeGraphData(a,e,d.fn);b[this.id][0].compiled=
d;return b};a.getEvaluationState=function(){return f(this._analysis,this._context,this)};a.computeStatus=function(){return this.markError(q.t("Unimplemented status check"))};a.getZeroValues=function(){return[{val:this._tree.evaluateOnce(this._context.getFrame()),operator:"="}]};a.referencesSymbol=function(a){return this._tree.references(a)};a.referencedSymbols=function(a){return this._tree._referencedSymbols};a.getSlidableVariables=function(){for(var a=this._analysis.free_variables,b=[],c=0;c<a.length;c++){var d=
a[c];this._context.assignmentForbidden(d)||this._analysis.hasOwnProperty("solution")&&d==this._analysis.solution.variable||b.push(d)}return b};a.exportedSymbols=function(){var a={};this._tree.assigns&&(a[this._tree.assigns.identifier]=this._tree.arity);return a};a.exportDefinitionsTo=function(a,b){if(this._tree.assigns){var c=this._tree.assigns.identifier;this._context.assignmentForbidden(c)||(this._tree.exportDefinitionsTo(a,this.compiler),a.setDefinitionId(c,b))}};a.shadowedSymbols=function(){return[]};
a.getDependencies=function(){return this._tree.dependencies()};a.getType=function(){return this._tree.statementType};a.freeVariablesError=function(a){for(var b=0;b<a.length;b++)if(!this._context.assignmentForbidden(a[b]))return a=q.t("Too many free variables to graph.  Try defining '__variable__'",{variable:a[b]}),this.markError(a);return this.markError(q.t("Too many free variables.  I don't know what to do with this"))};a.getParseError=function(){return this._tree.valid?void 0:this._tree.error_msg};
a.markError=function(a){this._analysis.error=a;return this._analysis.status=d};a.evaluateOnce=function(a){return this._tree.evaluateOnce(a)};a.evalStrings=function(a){return this._tree.getEvalStrings(a)};a.compileAllBranches=function(a){return[this.compile(a)]};a.compile=function(a){a=this.compile_to_strings(a,this.independent_variable());a.fn=this.compiler.compile(a.args,a.function_string);return a};a.compileDerivative=function(a){var b=this.independent_variable(),c=B(b),c=this._tree.expressionDerivative?
this._tree.expressionDerivative(a,c):this._tree.takeDerivative(a,c);a=D(this._context,this._statement,c).compile_to_strings(a,b);a.fn=this.compiler.compile(a.args,a.function_string);return a};a.independent_variable=function(){if(this._analysis.status===y)return this._analysis.graph_info.independent;if(1===this._analysis.free_variables.length)return this._analysis.free_variables[0]};a.compile_to_strings=function(a,b){var c=this._tree.getEvalStrings(a);return{args:[b],function_string:c.statements+"return "+
c.expression}};a.getOperator=function(){return"="};a.getTableInfo=function(){};a.getTableInfo=function(){return{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.getInputString(),by_reference:!1}}});n[EXPRESSION]=v(D,function(a,b){a.computeStatus=function(a){a=this._analysis.free_variables;if(0===a.length)return l;if(1===a.length)switch(a[0]){case "x":return this.setGraphMode(e.Y,"x");case "y":return this.markError(q.t("Maybe you wanted to plot x as a function of y?"));
case "r":case "theta":return this.markError(q.t("Maybe you wanted to plot r as a function of θ?"));default:return this.markError(q.t("Maybe you wanted to plot x or y as a function of __variable__ ?",{variable:a[0]}))}return this.freeVariablesError(a)}});n[FUNCTION_DEFINITION]=v(D,function(a,b){a.init=function(a,c,d){b.init.call(this,a,c,d);this.arity=this._tree.arity};a.shadowedSymbols=function(){return this._tree.passed_variables};a.computeStatus=function(a){if(1===this._tree.arity)return this._tree.assigns.identifier===
this._tree.passed_variables[0]?this.markError(q.t("You can't use __identifier__ as both the function name and the argument",this._tree.assigns.identifier)):0<this._analysis.free_variables.length?this.markError(q.t("Every variable you use in the function must be defined.  Either define __variable__or pass it in as an argument",{variable:this._analysis.free_variables[0]})):this.setGraphMode(void 0,this._tree.passed_variables[0],this._tree.assigns.identifier);if(1<this._tree.arity)return k};a.addFreeVariables=
function(a){for(var b=this._tree.passedVariables(),c=0;c<a.length;c++){var d=a[c];-1<b.indexOf(d)||-1<this._analysis.free_variables.indexOf(d)||(this.markError(q.t("Every variable you use in the function must be defined.  Either define '__variable__' or pass it in as an argument",{variable:d})),this._analysis.free_variables.push(d))}};a.conflictError=function(a){a=q.t("'__symbol__' is already defined, so you can't reuse it as one of the parameters of this function",{symbol:a});return this.markError(a)};
a.getTableInfo=function(){return this._context.assignmentForbidden(this._tree.assigns.identifier)?{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.expression.getInputString(),by_reference:!1}:{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.getInputString(),by_reference:!0}};a.getSlidableVariables=function(){for(var a=this._analysis.free_variables,b=[],c=0;c<a.length;c++){var d=a[c];this._context.assignmentForbidden(d)||
b.push(d)}return b}});n[VARIABLE_DEFINITION]=v(D,function(a,b){a.computeStatus=function(a){a=this._tree.assigns.identifier;var b=this._analysis.free_variables;if("theta"===a)return this.markError(q.t("Sorry - can't graph θ as a function of anything yet"));if(0===b.length){if(b=this._tree.expression instanceof x)this._analysis.slider=!0;return-1!=="xyr".indexOf(a)?this.setGraphMode(void 0,void 0,a):b?s:l}return 1===b.length?b[0]===a?this.markError(q.t("Cannot define __variable__ in terms of itself."),
{variable:b[0]}):"r"===b[0]?this.markError(q.t("Maybe you wanted to plot r as a function of θ?")):this.setGraphMode(void 0,b[0],a):this.freeVariablesError(b)};a.getAssignedVariable=function(){return this._tree.assigns.identifier};a.getSliderValue=function(){return this._tree.expression instanceof x?this._tree.evaluateOnce():b.getSliderValue()};a.getTableInfo=function(){return this._context.assignmentForbidden(this._tree.assigns.identifier)?{independent_variable:this._analysis.graph_info.independent,
dependent_column:this._tree.expression.getInputString(),by_reference:!1}:{independent_variable:this._analysis.graph_info.independent,dependent_column:this._analysis.graph_info.dependent,by_reference:!0}}});n[IDENTIFIER]=v(D,function(a,b){a.computeStatus=function(a){a=this._analysis.free_variables;return 1===a.length&&"x"===a[0]?this.setGraphMode(e.Y,"x"):0<a.length?s:l}});n[CONSTANT]=v(D,function(a,b){a.computeStatus=function(a){return s};a.getSliderValue=function(){return this._tree.evaluateOnce()}});
n[ORDERED_PAIR_LIST]=v(D,function(a,b){a.computeMovable=function(a){var b=this;if(b._analysis.status==y&&0===b._analysis.free_variables.length&&1===b._tree.elements.length){var c,d=[void 0,void 0];b._tree.elements[0].children.forEach(function(e,f){if(e instanceof B){var k=a.getDefinitionId(e.identifier);void 0!==k&&b._context.statements[k]._analysis.slider&&(c=!0,d[f]=k)}});c&&(b._analysis.movable=!0,b._analysis.graph_info.graphMode===e.XYPOINT&&(b._analysis.graph_info.graphMode=e.XYPOINT_MOVABLE),
d[1]===d[0]&&(d[1]=void 0),b._analysis.moveIds=d)}};a.computeStatus=function(a){a=this._analysis.free_variables;if(0===a.length)return this.setGraphMode(e.XYPOINT);if(1===a.length)return"t"===a[0]&&1==this._tree.elements.length?this.setGraphMode(e.PARAMETRIC,"t"):this.markError(q.t("Define '__variable__' to plot this point, or make each coordinate a function of 't' to plot it as a parametric function",{variable:a[0]}));if(1<a.length)return this.freeVariablesError(a)};a.getSlidableVariables=function(){var a=
b.getSlidableVariables.call(this),c=a.indexOf("t");-1<c&&a.splice(c,1);return a};a.computeGraphData=function(a){var b=this._analysis.graph_info,c={};if(b.graphMode===e.XYPOINT||b.graphMode===e.XYPOINT_MOVABLE)return a=this._tree.evaluateOnce(this._context.getFrame()),b={segments:[a],graphMode:b.graphMode,color:this._statement.color,style:this._statement.style,poi:g(a)},c[this.id]=[b],c;var d=this.compile(this._context.getFrame());c[this.id]=u.computeGraphData(a,b,function(a){return d.fn(a)[0]});return c};
a.getTableInfo=function(){return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:this._tree.evaluateOnce(this._context.getFrame())}}});n[DOUBLE_INEQUALITY]=v(D,function(b,c){b.init=function(a,b,d){c.init.call(this,a,b,d);this._inequalities=[];for(var e=0;2>e;e++){var f=d.getInequality(e);this._inequalities.push(n[COMPARATOR](a,b,f))}};b.shade_between=!0;b.computeStatus=function(a){for(var b=0;2>b;b++)this._inequalities[b].setAnalysis({free_variables:this._analysis.free_variables});
b=this._inequalities.map(function(b){b._analysis.status=b.computeStatus(a);return b._analysis.status});return b[0]===y&&b[1]===y?(this._analysis.graph_info=this._inequalities[0]._analysis.graph_info,this._analysis.graph_info.graphMode===e.POLAR?this.markError(q.t("Two-sided inequalities are only supported for x and y.  You can do one-sided polar inequalities.")):y):this.markError(q.t("One or more sub-inequality had an error"))};b.computeGraphData=function(b){var c=this.id,d={};d[c]=[];for(var f=function(b){b.operator=
a.get(a.table[b.operator].inclusive,0)},k=0;2>k;k++){var h=this._inequalities[k].computeGraphData(b)[c].slice(0,4);h.forEach(f);d[c].push.apply(d[c],h)}b=d[c][0].graphMode;f=u.polygonsFromSegments(d[c][4].segments,d[c][0].segments,b);d[c].push({graphMode:e.POLYGONFILL,segments:f,poi:{}});f=u.polygonsFromSegments(d[c][7].segments,d[c][3].segments,b);d[c].push({graphMode:e.POLYGONFILL,segments:f,poi:{}});return d};b.compileAllBranches=function(a){for(var b=[],c=0;2>c;c++)b.push.apply(b,this._inequalities[c].compileAllBranches(a));
return b};b.getOperators=function(){return[this._inequalities[0].getOperator(),this._inequalities[1].getOperator()]}});n[EQUATION]=v(D,function(a,b){a.init=function(a,c,d){b.init.call(this,a,c,d);this.temp_tree=C("-",this._tree.lhs,this._tree.rhs)};a.is_solved_equation=!0;a.computeStatus=function(a){var b=this._analysis.free_variables;if(2<b.length)return this.freeVariablesError(b);if(2===b.length)return"x"===b[0]&&"y"===b[1]||"y"===b[0]&&"x"===b[1]?(b=this.temp_tree.polynomialOrder(a,"x"),2>=this.temp_tree.polynomialOrder(a,
"y")?this.setGraphMode(e.Y,"x","y"):2>=b?this.setGraphMode(e.X,"y","x"):this.markError(q.t("Equation is too complicated.  One variable needs to be quadratic."))):this.markError(q.t("You can only plot implicit equations of x and y"));if(1===b.length)return(a=this.solveEvaluable(a))?(this._analysis.solution=a,l):this.markError(q.t("Sorry - unable to solve this equation.  Try something like a quadratic?"));if(0===b.length)return this.markError(q.t("This equation has no variables in it - there's nothing to solve"))};
a.solveEvaluable=function(a){if(1!=this._analysis.free_variables.length)return!1;var b=this._analysis.free_variables[0];switch(this.temp_tree.polynomialOrder(a,b)){case 1:a=this.temp_tree.quadraticCoefficients(a,b);a=[-a[2]/a[1]];break;case 2:a=this.temp_tree.quadraticCoefficients(a,b);a=c.formula(a);break;default:return!1}return{roots:a,variable:b}};a.getZeroValues=function(){for(var a=[],b=this._analysis.solution.roots,c=0;c<b.length;c++)a.push({val:b[c],operator:"="});return a};a.getAssignedVariable=
function(){switch(this._analysis.status){case l:return this._analysis.solution.variable;case y:return this._analysis.graph_info.dependent}};a.computeGraphData=function(a){var b={},c=this.compileAllBranches(this._context.getFrame()),d=this._analysis.graph_info;b[this.id]=[];for(var e=0;e<c.length;e++){var f=u.computeGraphData(a,d,c[e].fn)[0];f.compiled=c[e];b[this.id].push(f)}return b};a.compileAllBranches=function(a){var b=[],d=this._analysis.graph_info.independent;a=this.temp_tree.polynomialEvalStrings(a,
this._analysis.graph_info.dependent,d);a=c.formulaEvalStrings(a);for(var d=[d],e=0;e<a.length;e++)b.push({fn:this.compiler.compile(d,a[e]),args:d,function_string:a[e]});return b}});n[COMPARATOR]=v(D,function(b,d){b.init=function(b,c,e){d.init.call(this,b,c,e);this.temp_tree=1===a.table[this._tree.operator].direction?C("-",this._tree.args[0],this._tree.args[1]):C("-",this._tree.args[1],this._tree.args[0])};b.getDependencies=function(){var a=this._tree.dependencies();return r.isEqual(a,{r:0,theta:0})?
(this.addFreeVariables(["r","theta"]),[]):r.isEqual(a,{r:0})?(this.addFreeVariables(["r"]),[]):a};b.computeStatus=function(a){var b=this._analysis.free_variables;if(0===b.length)return l;var c={x:!0,y:!0,r:!0},d=b[0],f=b[1];if(1===b.length){if(!c.hasOwnProperty(d))return this.markError(q.t("We only plot inequalities of x and y, or r and theta"));a=this.temp_tree.polynomialOrder(a,d);return"r"===d&&1<a?this.markError(q.t("We only plot polar inequalities that are first order in r.")):2<a?this.markError(q.t("Equation too complicated. One variable needs to be quadratic")):
this.setGraphMode(void 0,void 0,d)}c={x:"y",y:"x",r:"theta",theta:"r"};if(2===b.length){if(c[d]!==f)return this.markError(q.t("We only plot inequalities of x and y, or r and theta"));if("r"===d||"r"===f)return a=this.temp_tree.polynomialOrder(a,"r"),1<a?this.markError(q.t("We only plot polar inequalities that are first order in r.")):this.setGraphMode(e.POLAR,"theta","r");d=this.temp_tree.polynomialOrder(a,"x");a=this.temp_tree.polynomialOrder(a,"y");return 2>=a?this.setGraphMode(e.Y,"x","y"):2>=
d?this.setGraphMode(e.X,"y","x"):this.markError(q.t("Equation is too complicated.  One variable needs to be quadratic."))}};b.computeGraphData=function(b){for(var c={},d=this.compileAllBranches(this._context.getFrame()),f=this._analysis.graph_info,k=this._tree.operator,h=c[this.id]=[],l,g=[-1,0,0,1],m=0;4>m;m++)l=u.computeGraphData(b,f,d[m].fn)[0],l.compiled=d[m],l.operator=a.get(a.table[k].inclusive,g[m]),h.push(l);b=u.polygonsFromSegments(h[1].segments,h[2].segments,h[1].graphMode);h.push({graphMode:e.POLYGONFILL,
segments:b,poi:{}});return c};b.compileAllBranches=function(a){var b=[],d=this._analysis.graph_info.independent;a=this.temp_tree.polynomialEvalStrings(a,this._analysis.graph_info.dependent,d);a=c.inequalityRegionEvalStrings(a);for(var d=[d],e=0;e<a.length;e++)b.push({fn:this.compiler.compile(d,a[e]),args:d,function_string:a[e]});return b};b.getOperator=function(){return this._tree.operator};b.getSlidableVariables=function(){return d.getSlidableVariables.call(this).filter(function(a){return"r"!==a})}});
n[CHAINED_COMPARATOR]=v(D,function(a,b){a.computeStatus=function(a){return 0===this._analysis.free_variables.length?l:this.markError(q.t("We only graph solved double inequalities. Try sin(x) < y < cos(x)."))}});var F=v(b,function(a,b){a.init=function(a,c){b.init.call(this,a);this._description=c;this.id=c.id;this.ids_to_clean=[];this.columns=[];this.cell_tree=[];for(var d=0;d<this._description.columns.length;d++){""===this._description.columns[d].latex&&0<d&&(this._description.columns[d].latex="\\emptycolumn_"+
d);var e=H(this._context,this._description.columns[d]);this.columns.push(e);this.cell_tree[d]=[];for(var e=this._description.columns[d].values,f=0;f<e.length;f++)""===e[f].trim()?this.cell_tree[d][f]=z(""):this.cell_tree[d][f]=p.tryParse(e[f])}this.columns[0]._tree&&this.columns[0]._tree instanceof B?(this.shadowed_symbols=[this.columns[0]._tree.identifier],d=this.shadowed_symbols[0],"y"===d&&(this.parse_error=q.t("Sorry - can't make a table based on y yet.  Try x?")),"r"===d&&(this.parse_error=q.t("Sorry - can't make a table based on r yet.  Try x?"))):
(this.parse_error=q.t("Tables need a single variable for their first independent column"),this.shadowed_symbols=[])};a.isGraphed=function(){return!0};a.cleanupId=function(a){this.ids_to_clean.push(a)};a.getAllIds=function(){for(var a=[this.id],b=0;b<this.columns.length;b++)a.push(this.columns[b].id);return a};a.exportedSymbols=function(){return[]};a.shadowedSymbols=function(){return this.shadowed_symbols};a.getDependencies=function(){for(var a={},b,c=0;c<this.columns.length;c++){var d=this.columns[c].getDependencies();
for(b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);for(d=0;d<this.cell_tree[c].length;d++){var e=this.cell_tree[c][d].dependencies();for(b in e)a[b]=e[b]}}return a};a.referencesSymbol=function(a){for(var b=0;b<this.columns.length;b++){if(this.columns[b].referencesSymbol(a))return!0;for(var c=0;c<this.cell_tree[b].length;c++)if(this.cell_tree[b][c].references(a))return!0}return!1};a.getParseError=function(){return this.parse_error?this.parse_error:this.columns[0].getParseError()};a.computeStatus=function(a){if(this.getParseError())return d;
for(var b=0;b<this.columns.length;b++){this.columns[b]._analysis.free_variables=[];var c=this.columns[b].getDependencies(),e;for(e in c)c.hasOwnProperty(e)&&1>=c[e]&&!a.defines(e)&&this.columns[b].addFreeVariables([e]);this.columns[b]._analysis.status=this.columns[b].computeStatus(a)}return y};a.invalidate=function(){b.invalidate.call(this);this.columns.forEach(function(a){a.invalidate()})};a.setAnalysis=function(a){b.setAnalysis.call(this,a);this.columns.forEach(function(a){a.setAnalysis({})})};
a.getEvaluationState=function(){var a,b=this._description.columns[0].values.length,c=[],d,e=[],f=m(this._context.getFrame()),k=m(this._context.getFrame());d=m(this._context.getFrame());for(var h,l,g=0;g<this.columns.length;g++){var s=!1,n=!1;h=null;if(this.columns[g]._tree instanceof B){d=this.columns[g]._tree.identifier;f.defines(d)||(s=!0);if(0===g){s||(h=q.t("First column must be independent"));if("y"===d||"theta"==d||"r"==d)h=q.t("We don't do the right thing for tables with independent __symbol__ yet",
{symbol:d});h||k.setVariable(d,x(0))}h||f.setVariable(d,x(0));e[g]=d}if(!s&&(h=this.columns[g].getParseError(),!h)){try{a=this.columns[g].evaluateOnce(k),n=!0}catch(u){n=!1}try{a=this.columns[g].evaluateOnce(f),"number"!==typeof a&&(h=a)}catch(p){h=p}}this.columns[g].getParseError()&&(this.error=this.columns[g].getParseError());var y=[];if(!h)for(var v=0;v<b;v++){d=m(this._context.getFrame());for(var r=0;r<g;r++)if(!c[r].dependent&&!c[r].error){var z=c[r].values[v];"number"===typeof z&&d.setVariable(e[r],
x(z))}if(s)if(r=this.cell_tree[g][v],r.hasOwnProperty("error_msg"))l=r.error_msg;else try{l=r.evaluateOnce(d)}catch(I){l=I}else try{l=this.columns[g].evaluateOnce(d)}catch(w){l=""}y.push(l)}c.push({dependent:!s,discrete:!n,error:h,values:y})}return c};a.computeGraphData=function(a){for(var b,c,d,f,k,m=this.getEvaluationState(),n={};this.ids_to_clean.length;)n[this.ids_to_clean.pop()]={};for(var p=1;p<m.length;p++){var x=this._description.columns[p];b=this.columns[p].id;m[p].error&&(n[b]={});n[b]=
[];c=x.columnMode;var q=c===h.LINES||c===h.POINTS_AND_LINES,B=x.hidden;if((c===h.POINTS||c===h.POINTS_AND_LINES)&&!B){var v=[];for(f=0;f<m[0].values.length;f++)c=m[0].values[f],d=m[p].values[f],"number"===typeof c&&"number"===typeof d&&v.push([c,d]);c={segments:[v],graphMode:e.XYPOINT,poi:g(v),color:x.color,style:x.style};n[b].push(c)}if(q&&!B&&m[p].discrete){v=u.Accumulator();for(f=0;f<m[0].values.length;f++)c=m[0].values[f],d=m[p].values[f],"number"===typeof c&&"number"===typeof d?v.addPoint([c,
d]):v.breakSegment();c={segments:v.getSegments(),graphMode:e.PARAMETRIC,poi:[],color:x.color,style:x.style};n[b].push(c)}if(q&&!B&&!m[p].discrete){if(this.columns[p].getStatus()===y){x=this.columns[p].computeGraphData(a);if(1!==x[b].length)throw"Programming error - graphData for table columns must be singleton";n[b].push(x[b][0])}if(this.columns[p].getStatus()===l||this.columns[p].getStatus()===s)try{k=this.columns[p].evaluateOnce(this._context.getFrame());var r={graphMode:e.Y,independent:"x",dependent:"y",
operator:"="},z=this.compileConstantFunction(k),I=u.computeGraphData(a,r,z.fn);I[0].compiled=z;if(1!==I.length)throw"Programming error - graphData for table columns must be singleton";n[b].push(I[0])}catch(C){}}}return n};a.compileConstantFunction=function(a){a={args:[],function_string:"return "+String(a)};a.fn=new Function(a.args,a.function_string);return a};a.getGraphInfo=function(){return{graphMode:e.Y}};a.shouldIntersect=function(){return!0};a.compileAllBranches=function(a){return this.columns.slice(1).filter(function(a){return a.getStatus()===
y}).map(function(b){return b.compile(a)})}}),H=function(a,b){switch(b.type){case "table":return F(a,b);case "statement":case void 0:var c=p.tryParse(b.latex);return(0,n[c.statementType])(a,b,c);default:throw"Unrecognized statement type "+b.type;}};return{createAnalysisObject:H,status:{ERROR:d,WARNING:k,EVALUABLE:l,GRAPHABLE:y,SILENT:s}}});
define("math/functions",["require","underscore","pjs"],function(b){var g=b("underscore");return b("pjs")(function(b){b.init=function(){var b={};this.compile=function(q,p){var u=new Function(q,p);return g.bind(u,b)};this.register=function(g,p){b[g]=p}};b.dehydrateGraphData=function(b){for(var g=0;g<b.length;g++)b[g].compiled&&delete b[g].compiled.fn};b.rehydrateGraphData=function(b){for(var g=0;g<b.length;g++)b[g].compiled&&(b[g].compiled.fn=this.compile(b[g].compiled.args,b[g].compiled.function_string))};
b.updateFromFunctionMap=function(b){for(var g in b)b.hasOwnProperty(g)&&this.register(g,b[g])};b.updateFromSourceMap=function(b){for(var g in b)if(b.hasOwnProperty(g)){var p=b[g];this.register(g,this.compile(p.args,p.source))}}})});
define("math/evaluatorcontext","require pjs underscore ./plotter ./evalframe ./evaluatorobject ./poi ./functions config graphing/graphmode main/fake_i18n".split(" "),function(b){var g=b("pjs"),r=b("underscore"),v=b("./plotter"),q=b("./evalframe"),p=b("./evaluatorobject"),u=b("./poi"),a=b("./functions"),m=b("config"),c=b("graphing/graphmode"),f=b("main/fake_i18n");return g(function(b){b.triggerGraphComputed=function(){};b.triggerStatusChange=function(){};b.triggerRemoveGraph=function(){};b.triggerRender=
function(){};b.triggerRenderSlowly=function(){};b.triggerDidAddStatement=function(){};b.triggerDidRemoveStatement=function(){};b.triggerDidSetCompleteState=function(){};b.triggerDidSetDegreeMode=function(){};b.triggerDidUpdateIntersections=function(){};b.triggerDidUpdateFunctionMap=function(){};b.init=function(b){b||(b=q());this.parent_frame=b;this.statements={};this.analysis=null;this.current_state={};this.dirty={};this.graph_changed=[];this.compiler=a();this.intersectIds={};b=b.functionMap();for(var c in b)this.compiler.register(c,
b[c])};b.eachStatement=function(a){for(var b in this.statements)a.apply(this,[this.statements[b]])};b.processChangeSet=function(a){var b,c;a.isCompleteState&&(this.statements={},this.invalidate());a.viewState&&this.setViewState(a.viewState);a.hasOwnProperty("degreeMode")&&this.setDegreeMode(a.degreeMode);a.hasOwnProperty("intersectIds")&&(this.intersectIds=a.intersectIds);if(a.statements)for(var e in a.statements){var f=a.statements[e];if(null===f){if(!a.isCompleteState&&this.statements.hasOwnProperty(e)&&
(b=this.statements[e].getAllIds()),this.removeStatement(e),!a.isCompleteState&&b){for(f=0;f<b.length;f++)this.triggerRemoveGraph(b[f]);this.triggerDidRemoveStatement(e)}}else this.addStatement(f),a.isCompleteState||this.triggerDidAddStatement(f)}a.hasOwnProperty("intersectId")&&this.updateIntersections(a.intersectId);a.isCompleteState&&(this.triggerDidSetCompleteState(a.statements),c=this.triggerRender,this.triggerRender=this.triggerRenderSlowly,this.publishing_paused=!1);this.publishChanges();a.isCompleteState&&
(this.triggerRender=c)};b.setViewState=function(a){r.isEqual(a,this.viewState)||(this.viewState=a,this.invalidate())};b.setDegreeMode=function(a){this.parent_frame.setDegreeMode(a);this.invalidate();this.triggerDidSetDegreeMode(a)};b.publishing_paused=!1;b.changes_pending=!1;b.pausePublishing=function(){this.publishing_paused=!0};b.resumePublishing=function(){this.publishing_paused=!1;this.changes_pending&&this.publishChanges()};b.publishChanges=function(){this.publishing_paused?this.changes_pending=
!0:(this.changes_pending=!1,this.publishAllStatuses(),v.validateViewState(this.viewState)&&this.graphAllChanged())};b.publishAllStatuses=function(){var a={},b=this.current_state;this.current_state={};this.eachStatement(function(c){c=c.id;var e=this.getEvaluationState(c);JSON.stringify(e)!==JSON.stringify(b[c])&&(a[c]=e);this.current_state[c]=e});this.triggerStatusChange(a)};b.graphAllChanged=function(){if(this.graph_changed.length){var a=this.viewState,b,c;for(c=0;c<this.graph_changed.length;c++)b=
this.graph_changed[c],this.statements.hasOwnProperty(b)&&(this.statements[b].isGraphed()?this.graph(b,a):this.triggerRemoveGraph(b));a={};for(c=0;c<this.graph_changed.length;c++)a[this.graph_changed[c]]=!0;this.graph_changed=[];for(b in this.intersectIds)this.intersectIds.hasOwnProperty(b)&&(a.hasOwnProperty(b)||this.updateIntersections(b));this.triggerRender()}};b.graph=function(a,b){if(b){var c=this.statements[a],e=c.computeGraphData(b);if(this.intersectIds.hasOwnProperty(a)&&c.shouldIntersect()&&
e.hasOwnProperty(a)){for(var c=this.findSomeIntersectionsWith(a),f=0;f<c.intersections.length;f++)e[a][f].poi.intersections=c.intersections[f];c.streamRest()}for(var h in e)this.triggerGraphComputed(h,e[h])}};b.updateIntersections=function(a){var b=this.statements[a];b&&b.shouldIntersect()?this.findSomeIntersectionsWith(a).streamRest():this.triggerDidUpdateIntersections(a,[])};var h={};b.findSomeIntersectionsWith=function(a){this.cancelIntersectionStreaming(a);var b=this,e=Array.prototype.push,f=
b.statements[a].getGraphInfo(),g=f.graphMode,m=b.statements[a].compileAllBranches(b.getFrame()),p=v.computeDomain(b.viewState,f,null),q=[],r;for(r in b.statements)b.statements.hasOwnProperty(r)&&String(r)!==String(a)&&q.push(b.statements[r]);for(var C=[],f=0;f<m.length;f++)C[f]={x:[],y:[],intersects:[]};var D=q.length-1,F=!1,H=function(){var f=new Date,y=!1,r,z,O,J,N,L;for(D;0<=D;D--){if(20<new Date-f){if(!F)return;h[a]=setTimeout(H,60);if(!y)return;b.triggerDidUpdateIntersections(a,C);return}J=q[D];
if(J.shouldIntersect()&&J.getGraphInfo().graphMode===g){N=J.compileAllBranches(b.getFrame());for(var V=0;V<m.length;V++){r=m[V].fn;for(var W=0;W<N.length;W++){z=N[W].fn;O=v.sampleXY(function(a){return z(a)-r(a)},p);O=u.findIntersections(O,r,z);O.x.length&&(y=!0);O.intersects=Array(O.x.length);L=0;for(var P=O.x.length;L<P;L++)O.intersects[L]=J.id;g===c.X&&(L=O.y,O.y=O.x,O.x=L);e.apply(C[V].x,O.x);e.apply(C[V].y,O.y);e.apply(C[V].intersects,O.intersects)}}}}F&&y&&(b.triggerDidUpdateIntersections(a,
C),b.cancelIntersectionStreaming(a))};H();return{intersections:C,streamRest:function(){b.triggerDidUpdateIntersections(a,C);F=!0;H()}}};b.cancelIntersectionStreaming=function(a){clearTimeout(h[a]);delete h[a]};b.cancelAllIntersectionStreaming=function(){for(var a in h[a])h.hasOwnProperty(a)&&this.cancelIntersectionStreaming(a)};b.addStatement=function(a){if(a){var b=a.id;this.markDirty(b);var c;this.statements.hasOwnProperty(b)&&(c=this.statements[b].getAllIds());this.statements[b]=p.createAnalysisObject(this,
a);if(c)for(var e=0;e<c.length;e++){var f=c[e];f!=b&&this.statements[b].cleanupId(f)}this.markClean(a.id);this.markDirty(a.id)}};b.removeStatement=function(a){this.statements.hasOwnProperty(a)&&(this.markDirty(a),delete this.statements[a])};b.recompute=function(){this.invalidate();this.publishChanges()};b.invalidate=function(){this.analysis=null;this.current_state={};this.cancelAllIntersectionStreaming()};b.markDirty=function(a){if(!this.dirty[a]&&(this.dirty[a]=!0,this.cancelIntersectionStreaming(a),
this.statements[a]))for(var b in this.statements[a].exportedSymbols())this.markSymbolDirty(b)};b.markSymbolDirty=function(a){this.assignmentForbidden(a)||this.eachStatement(function(b){b.referencesSymbol(a)&&this.markDirty(b.id)})};b.markClean=function(a){delete this.dirty[a]};b.isDirty=function(a){return this.dirty.hasOwnProperty(a)};b.getFrame=function(){return this.getAnalysis().frame};b.getAnalysis=function(){this.updateAnalysis();return this.analysis};b.getType=function(a){return this.statements[a].getType()};
b.updateAnalysis=function(){if(this.hasOwnProperty("partial_analysis"))throw"Programming error - two overlapping call to updateAnalysis";var a=[],b;if(this.analysis){for(b in this.dirty)a.push(b);if(0===a.length)return}else for(b in this.statements)a.push(b);delete this.analysis;var c=this.partial_analysis={};try{c.frame=q(this.parent_frame);this.eachStatement(function(a){var b=a.id;c[b]={};a.setAnalysis(c[b]);if(a=a.getParseError())c[b].error=a});c.assignments=this.analyzeAssignments();this.markVariableConflicts(c.assignments);
this.analyzeDependencies(c);for(var e=0;e<c.dependencyOrder.length;e++)b=c.dependencyOrder[e],this.statements[b].exportDefinitionsTo(c.frame,b);this.graph_changed=a;this.dirty={};var f=c.frame.leafFunctionMap(),h;for(h in f)this.compiler.register(h,f[h]);this.triggerDidUpdateFunctionMap(c.frame);this.analyzeStatus(c);m.get("dragpoints")&&this.analyzeMovable(c);this.analysis=this.partial_analysis}catch(g){this.invalidate()}finally{delete this.partial_analysis}};b.evaluateOnce=function(a){if(!this.statements.hasOwnProperty(a))throw"Statement "+
a+" not defined";return this.statements[a].evaluateOnce(this.getFrame())};b.compile=function(a){return this.statements[a].compile(this.getFrame())};b.evalStrings=function(a){return this.statements[a].evalStrings(this.getFrame())};b.analyzeStatus=function(a){this.eachStatement(function(b){var c=this.partial_analysis[b.id];c.error&&(c.status=p.status.ERROR);c.status||(c.status=b.computeStatus(a.frame))})};b.assignmentForbidden=function(a){return"x"===a||"y"===a||"theta"===a};b.getStatus=function(a){return void 0===
this.getAnalysis()[a]?void 0:this.getAnalysis()[a].status};b.getEvaluationState=function(a){this.getAnalysis();return this.statements[a].getEvaluationState()};b.analyzeAssignments=function(){var a={};this.eachStatement(function(b){var c=b.exportedSymbols(),e;for(e in c)this.assignmentForbidden(e)||(this.parent_frame&&this.parent_frame.defines(e)?b.markError(f.t("Cannot redefine __symbol__",{symbol:e})):(a.hasOwnProperty(e)||(a[e]=[]),a[e].push({id:b.id,arity:c[e]})))});return a};b.markVariableConflicts=
function(a){this.eachStatement(function(b){for(var c=b.shadowedSymbols(),e=0;e<c.length;e++){var f=c[e];a.hasOwnProperty(f)&&b.conflictError(f)}})};b.analyzeDependencies=function(a){var b=[],c=[],e={},h={},g;for(g in this.statements){var m=a[g];m.free_variables=[];if(this.statements.hasOwnProperty(g)){var u=this.statements[g].getDependencies();e[g]=0;for(var p in u)if(u.hasOwnProperty(p)){var q=u[p];if(this.parent_frame){if(1>=q&&this.parent_frame.hasVariable(p))continue;if(1<=q&&this.parent_frame.hasFunctionWithArity(p,
q))continue}var v=a.assignments[p];if(this.parent_frame&&this.parent_frame.defines(p))v=this.parent_frame.arity(p),0===v&&(m.error=f.t("Cannot call constant __dependency__ as a function",{dependency:p})),m.error=0<v?f.t("__dependency__ is a function that requires __real_arity__ arguments",{dependency:p,real_arity:v}):f.t("Something has gone wrong.  Please report this to desmos.com support");else{v&&0!==v.length||(1>=q?this.statements[g].addFreeVariables([p]):m.error=f.t("Function __dependency__ isn't defined. Try defining it in a new expression",
{dependency:p}));if(v&&1===v.length){var r=v[0].arity;if(r===q||0===r&&1===q)h.hasOwnProperty(p)||(h[p]=[]),h[p].push(g),e[g]++;else if(0===r)m.error=f.t("'__dependency__' is a variable, so can't be used as a function",{dependency:p});else if(1==r)m.error=f.t("Function '__dependency__' requires an argument. ",{dependency:p})+f.t("For example, try typing: __dependency__(x)",{dependency:p});else{for(var q=[],H=0;H<r;H++)q[H]=H+1;q=p+"("+q.join(", ")+")";m.error=f.t("Function '__dependency__' requires __assignment_arity__ arguments. ",
{dependency:p,assignment_arity:r})+f.t("For example, try typing: __recommendation__",{recommendation:q})}}v&&1<v.length&&(m.error=f.t("'__dependency__' is defined more than once. Try deleting all but one definition of '__dependency__'",{dependency:p}))}}0===e[g]&&c.push(g)}}for(;c.length;)if(m=c.pop(),!a[m].error){b.push(m);var u=this.statements[m].exportedSymbols(),G;for(G in u)if(u=h[G])for(;u.length;)p=u.pop(),this.statements[p].addFreeVariables(a[m].free_variables),e[p]--,0===e[p]&&(delete e[p],
c.push(p))}for(g in e)e.hasOwnProperty(g)&&0!==e[g]&&(a[g].unresolved=!0,a[g].error=f.t("Circular dependency"));a.dependencyOrder=b};b.analyzeMovable=function(a){this.eachStatement(function(b){b.computeMovable&&b.computeMovable(a.frame)})}})});
define("worker/workercore",["require","math/evaluatorcontext","math/builtinframe","math/derivative"],function(b){var g=b("math/evaluatorcontext"),r=b("math/builtinframe");b("math/derivative");return function(b){var q=g(r);q.triggerGraphComputed=function(g,u){for(var a=0;a<u.length;a++)u[a].compiled&&delete u[a].compiled.fn;b("graphComputed",{id:g,graphData:u})};q.triggerDidUpdateIntersections=function(g,u){b("updateIntersections",{id:g,intersections:u})};q.triggerDidUpdateFunctionMap=function(g){b("updateFunctionMap",
g.leafFunctionSourceMap())};q.triggerRender=function(){b("render")};q.triggerRenderSlowly=function(){b("renderSlowly")};q.triggerRemoveGraph=function(g){b("removeGraph",g)};q.triggerDidSetDegreeMode=function(g){b("setDegreeMode",g)};q.triggerStatusChange=function(g){b("statusChange",g)};return{processChangeSet:function(g){q.processChangeSet(g);b("processChangeSet",g)}}}});
define("worker/fakeworker",["require","worker/workercore"],function(b){var g=b("worker/workercore");return function(b){var v={},q=g(function(g,u){b({data:{type:g,payload:u}})});v.postMessage=function(b){setTimeout(function(){q.processChangeSet(b)},0)};return v}});
define("api/cross_origin_worker",["require"],function(b){return function(b,r){var v=window.location,q=document.createElement("a");q.href=b;var p=JSON.stringify(r.all());if(q.protocol===v.protocol&&q.host===v.host)return b;var v="Desmos = {}; Desmos.config = JSON.parse('"+p+"');"+("importScripts('"+b+"');"),u;try{u=new Blob([v],{type:"application/javascript"})}catch(a){u=new (window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder),u.append(v),u=u.getBlob("application/javascript")}return(window.URL||
window.webkitURL).createObjectURL(u)}});
define("main/evaluator","require pjs math/builtinframe worker/fakeworker math/functions api/cross_origin_worker config".split(" "),function(b){var g=b("pjs"),r=b("math/builtinframe"),v=b("worker/fakeworker"),q=b("math/functions"),p=b("api/cross_origin_worker"),u=b("config");return g(function(a){a.triggerStatusChange=function(a){};a.triggerRemove=function(a){};a.triggerGraphComputed=function(a,b){};a.triggerUpdateIntersections=function(a,b){};a.triggerRender=function(){};a.triggerRenderSlowly=function(){};
a.init=function(a){this.functions=q();this.changeSet=null;this.jobsInWorker=0;this.syncId=1;this.processingDisabled=!1;var b=function(){this.worker=v(this.processMessage.bind(this));this.spawnNewWorker=function(){}}.bind(this);if(a)try{this.workerPath=p(a,u),this.spawnNewWorker()}catch(e){b()}else b();this.syncRequests=[];this.listeners.setDegreeMode=function(a){r.setDegreeMode(a)};this.functions.updateFromFunctionMap(r.functionMap())};a.spawnNewWorker=function(){this.worker&&this.worker.terminate();
this.worker=new Worker(this.workerPath);this.worker.addEventListener("message",this.processMessage.bind(this));this.worker.onerror=function(a){};this.jobsInWorker=0};a.processMessage=function(a){this.listeners[a.data.type].call(this,a.data.payload)};a.listeners={};a.listeners.processChangeSet=function(a){for(a=a.syncId;this.syncRequests.length&&this.syncRequests[0].id<=a;)this.syncRequests.shift().callback();this.jobsInWorker--;this.processChangeSet()};a.listeners.log=function(a){};a.listeners.removeGraph=
function(a){this.triggerRemove(a)};a.listeners.graphComputed=function(a){this.functions.rehydrateGraphData(a.graphData);this.triggerGraphComputed(a.id,a.graphData)};a.listeners.updateFunctionMap=function(a){this.functions.updateFromSourceMap(a)};a.listeners.updateIntersections=function(a){this.triggerUpdateIntersections(a.id,a.intersections)};a.listeners.statusChange=function(a){this.triggerStatusChange(a)};a.listeners.render=function(){this.triggerRender()};a.listeners.renderSlowly=function(){this.triggerRenderSlowly()};
a._disableProcessing=function(){this.processingDisabled=!0};a._enableProcessing=function(){this.processingDisabled=!1;this.processChangeSet()};a.batch=function(a){var b=this.processingDisabled;this._disableProcessing();try{a()}finally{b||this._enableProcessing()}};a.processChangeSet=function(){if(this.changeSet&&!(this.processingDisabled||0<this.jobsInWorker)){var a=this.changeSet;this.jobsInWorker++;this.changeSet=null;this.worker.postMessage(a)}};var b=function(a){return function(){this.changeSet||
(this.changeSet={});a.apply(this,arguments);this.processChangeSet()}};a.setViewState=b(function(a){this.changeSet.viewState=a});a.setCompleteState=b(function(a){0<this.jobsInWorker&&this.spawnNewWorker();this.changeSet.isCompleteState=!0;this.changeSet.statements=a});a.addStatement=b(function(a){this.changeSet.statements||(this.changeSet.statements={});this.changeSet.statements[a.id]=a});a.addStatements=b(function(a){for(var b=0;b<a.length;b++)this.addStatement(a[b])});a.removeStatement=b(function(a){this.changeSet.statements||
(this.changeSet.statements={});this.changeSet.statements[a]=null});a.removeStatements=b(function(a){for(var b=0;b<a.length;b++)this.removeStatement(a[b])});a.setIntersectIds=b(function(a){this.changeSet.intersectIds=a});a.updateIntersections=b(function(a){this.changeSet.intersectId=a});a.setDegreeMode=b(function(a){this.changeSet.degreeMode=a});a.notifyWhenSynced=b(function(a){this.syncId++;this.syncRequests.push({id:this.syncId,callback:a});this.changeSet.syncId=this.syncId})})});
(function(){Function.prototype.bind||(Function.prototype.bind=function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var g=Array.prototype.slice.call(arguments,1),r=this,v=function(){},q=function(){return r.apply(this instanceof v&&b?this:b,g.concat(Array.prototype.slice.call(arguments)))};v.prototype=this.prototype;q.prototype=new v;return q})})();define("lib/function.bind",function(){});
define("lib/underscore_model",["require","underscore","pjs","lib/function.bind"],function(b){var g=b("underscore"),r=b("pjs");b("lib/function.bind");return r(function(b){var q=0,p="guid_"+Math.round(1E6*Math.random())+"_"+(new Date).getTime()+"_";b.init=function(){this.__observers={};this.__oldProperties={};this.__propertyComparators={};this.guid=p+ ++q};b.getProperty=function(b){return this[b]};b.getOldProperty=function(b){return this.__oldProperties[b]};b.setProperty=function(b,a){var m=this[b],
c=this.__propertyComparators[b];if(c){if(c(m,a))return}else if(g.isEqual(m,a))return;this.__oldProperties[b]=m;this[b]=a;this.notifyPropertyChange(b)};b.setProperties=function(b){for(var a in b)b.hasOwnProperty(a)&&this.setProperty(a,b[a])};b.setPropertyComparator=function(b,a){this.__propertyComparators[b]=a};b.notifyPropertyChange=function(b){var a=this.__observers[b];if(a)for(var g=0;g<a.length;g++)a[g].callback(b,this)};b.unobserve=function(b){if(b){b=b.split(" ");for(var a=0;a<b.length;a++){var g=
b[a].split("."),c=g[0],g=g[1];if(c&&g){var f=this.__observers[c],e=[];if(f){for(var h=0;h<f.length;h++){var d=f[h];d.namespace!==g&&e.push(d)}this.__observers[c]=e}}else if(c)this.__observers[c]&&(this.__observers[c]=[]);else if(g)for(c in this.__observers)this.unobserve(c+"."+g)}}else this.__observers={}};b.observe=function(b,a){for(var g=b.split(" "),c=0;c<g.length;c++){var f=g[c].split("."),e=f[0];if(!e)throw"Must supply a property to observe";var f={namespace:f[1],callback:a},h=this.__observers[e];
h?h.push(f):this.__observers[e]=[f]}}})});define("main/url_prefix",["require"],function(b){return window.location.href});
(function(b,g){"object"===typeof exports?module.exports=g():"function"===typeof define&&define.amd&&define("i18next",[],g)})(this,function(){function b(a,b){if(!b||"function"===typeof b)return a;for(var c in b)a[c]=b[c];return a}function g(a,b,c){var d,e=0,f=a.length,h=void 0===f||"function"===typeof a;if(c)if(h)for(d in a){if(!1===b.apply(a[d],c))break}else for(;e<f&&!1!==b.apply(a[e++],c););else if(h)for(d in a){if(!1===b.call(a[d],d,a[d]))break}else for(;e<f&&!1!==b.call(a[e],e,a[e++]););return a}
function r(a){var b=function(a){if(window.XMLHttpRequest)return a(null,new XMLHttpRequest);if(window.ActiveXObject)try{return a(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(b){return a(null,new ActiveXObject("Microsoft.XMLHTTP"))}return a(Error())},c=function(a){if("string"===typeof a)return a;var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},d=function(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b],
d;for(d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},e=function(a,f,h,k){"function"===typeof h&&(k=h,h={});h.cache=h.cache||!1;h.data=h.data||{};h.headers=h.headers||{};h.jsonp=h.jsonp||!1;h.async=void 0===h.async?!0:h.async;var l=d({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},e.headers,h.headers),g;g="application/json"===l["content-type"]?JSON.stringify(h.data):c(h.data);if("GET"===a){var m=[];g&&(m.push(g),g=null);h.cache||m.push("_="+(new Date).getTime());
h.jsonp&&(m.push("callback="+h.jsonp),m.push("jsonp="+h.jsonp));m=m.join("&");1<m.length&&(f=-1<f.indexOf("?")?f+("&"+m):f+("?"+m));if(h.jsonp){var m=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript";s.src=f;m.appendChild(s);return}}b(function(b,c){if(b)return k(b);c.open(a,f,h.async);for(var d in l)l.hasOwnProperty(d)&&c.setRequestHeader(d,l[d]);c.onreadystatechange=function(){if(4===c.readyState){var a=c.responseText||"";k&&k(c.status,{text:function(){return a},
json:function(){return JSON.parse(a)}})}};c.send(g)})};({authBasic:function(a,b){var c=e.headers,d;d=a+":"+b;d=d.replace(/\r\n/g,"\n");for(var f="",h=0;h<d.length;h++){var k=d.charCodeAt(h);128>k?f+=String.fromCharCode(k):(127<k&&2048>k?f+=String.fromCharCode(k>>6|192):(f+=String.fromCharCode(k>>12|224),f+=String.fromCharCode(k>>6&63|128)),f+=String.fromCharCode(k&63|128))}d=f;var f="",l,g,m,s,n=0;do l=d.charCodeAt(n++),h=d.charCodeAt(n++),k=d.charCodeAt(n++),g=l>>2,l=(l&3)<<4|h>>4,m=(h&15)<<2|k>>
6,s=k&63,isNaN(h)?m=s=64:isNaN(k)&&(s=64),f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s);while(n<d.length);c.Authorization="Basic "+f},connect:function(a,b,c){return e("CONNECT",a,b,c)},del:function(a,b,c){return e("DELETE",a,b,c)},get:function(a,
b,c){return e("GET",a,b,c)},head:function(a,b,c){return e("HEAD",a,b,c)},headers:function(a){e.headers=a||{}},isAllowed:function(a,b,c){this.options(a,function(a,d){c(-1!==d.text().indexOf(b))})},options:function(a,b,c){return e("OPTIONS",a,b,c)},patch:function(a,b,c){return e("PATCH",a,b,c)},post:function(a,b,c){return e("POST",a,b,c)},put:function(a,b,c){return e("PUT",a,b,c)},trace:function(a,b,c){return e("TRACE",a,b,c)}})[a.type?a.type.toLowerCase():"get"](a.url,a,function(b,c){200===b?a.success(c.json(),
b,null):a.error(c.text(),b,null)})}function v(a,b){"function"===typeof a&&(b=a,a={});a=a||{};C.extend(n,a);"string"==typeof n.ns&&(n.ns={namespaces:[n.ns],defaultNs:n.ns});"string"==typeof n.fallbackNS&&(n.fallbackNS=[n.fallbackNS]);n.interpolationPrefixEscaped=C.regexEscape(n.interpolationPrefix);n.interpolationSuffixEscaped=C.regexEscape(n.interpolationSuffix);n.lng||(n.lng=C.detectLanguage());n.lng?n.useCookie&&C.cookie.create(n.cookieName,n.lng,n.cookieExpirationTime):(n.lng=n.fallbackLng,n.useCookie&&
C.cookie.remove(n.cookieName));s=C.toLanguages(n.lng);l=s[0];C.log("currentLng set to: "+l);F.setCurrentLng(l);h&&n.setJqueryExt&&p();var c;h&&h.Deferred&&(c=h.Deferred());if(n.resStore)k=n.resStore,b&&b(m),c&&c.resolve();else{var e=C.toLanguages(n.lng);"string"===typeof n.preload&&(n.preload=[n.preload]);for(var f=0,g=n.preload.length;f<g;f++)for(var u=C.toLanguages(n.preload[f]),x=0,q=u.length;x<q;x++)0>e.indexOf(u[x])&&e.push(u[x]);d.sync.load(e,n,function(a,d){k=d;b&&b(m);c&&c.resolve()})}if(c)return c.promise()}
function q(a,b){var c={dynamicLoad:n.dynamicLoad,resGetPath:n.resGetPath,getAsync:n.getAsync,customLoad:n.customLoad,ns:{namespaces:a,defaultNs:""}},e=C.toLanguages(n.lng);"string"===typeof n.preload&&(n.preload=[n.preload]);for(var f=0,h=n.preload.length;f<h;f++)for(var l=C.toLanguages(n.preload[f]),g=0,m=l.length;g<m;g++)0>e.indexOf(l[g])&&e.push(l[g]);for(var s=[],f=0,h=e.length;f<h;f++){l=!1;if(g=k[e[f]])for(var m=0,u=a.length;m<u;m++)g[a[m]]||(l=!0);else l=!0;l&&s.push(e[f])}s.length?d.sync._fetch(s,
c,function(c,e){var f=a.length*s.length;C.each(a,function(a,c){0>n.ns.namespaces.indexOf(c)&&n.ns.namespaces.push(c);C.each(s,function(a,h){k[h]=k[h]||{};k[h][c]=e[h][c];f--;0===f&&b&&(n.useLocalStorage&&d.sync._storeLocal(k),b())})})}):b&&b()}function p(){function a(b,c,d){if(0!==c.length){var e="text";0===c.indexOf("[")&&(e=c.split("]"),c=e[1],e=e[0].substr(1,e[0].length-1));c.indexOf(";")===c.length-1&&(c=c.substr(0,c.length-2));"html"===e?(d=n.defaultValueFromContent?h.extend({defaultValue:b.html()},
d):d,b.html(h.t(c,d))):"text"===e?(d=n.defaultValueFromContent?h.extend({defaultValue:b.text()},d):d,b.text(h.t(c,d))):(d=n.defaultValueFromContent?h.extend({defaultValue:b.attr(e)},d):d,b.attr(e,h.t(c,d)))}}function b(c,d){var e=c.attr(n.selectorAttr);if(e){var f=c,k=c.data("i18n-target");k&&(f=c.find(k)||c);d||!0!==n.useDataAttrOptions||(d=c.data("i18n-options"));d=d||{};0<=e.indexOf(";")?(e=e.split(";"),h.each(e,function(b,c){""!==c&&a(f,c,d)})):a(f,e,d);!0===n.useDataAttrOptions&&c.data("i18n-options",
d)}}h.t=h.t||m;h.fn.i18n=function(a){return this.each(function(){b(h(this),a);h(this).find("["+n.selectorAttr+"]").each(function(){b(h(this),a)})})}}function u(a,b,c,d){if(!a)return a;d=d||b;if(0>a.indexOf(d.interpolationPrefix||n.interpolationPrefix))return a;var e=d.interpolationPrefix?C.regexEscape(d.interpolationPrefix):n.interpolationPrefixEscaped,f=d.interpolationSuffix?C.regexEscape(d.interpolationSuffix):n.interpolationSuffixEscaped,h="HTML"+f;C.each(b,function(b,k){var l=c?c+n.keyseparator+
b:b;"object"===typeof k&&null!==k?a=u(a,k,l,d):d.escapeInterpolation||n.escapeInterpolation?(a=a.replace(RegExp([e,l,h].join(""),"g"),k),a=a.replace(RegExp([e,l,f].join(""),"g"),C.escape(k))):a=a.replace(RegExp([e,l,f].join(""),"g"),k)});return a}function a(a,b){var c=C.extend({},b);for(delete c.postProcess;-1!=a.indexOf(n.reusePrefix);){y++;if(y>n.maxRecursion)break;var d=a.lastIndexOf(n.reusePrefix),e=a.indexOf(n.reuseSuffix,d)+n.reuseSuffix.length,d=a.substring(d,e),e=d.replace(n.reusePrefix,"").replace(n.reuseSuffix,
"");if(-1!=e.indexOf(",")){var h=e.indexOf(",");if(-1!=e.indexOf("{",h)&&-1!=e.indexOf("}",h)){var k=e.indexOf("{",h),l=e.indexOf("}",k)+1;try{c=C.extend(c,JSON.parse(e.substring(k,l))),e=e.substring(0,h)}catch(g){}}}e=f(e,c);a=a.replace(d,e)}return a}function m(a,b){y=0;return f.apply(null,arguments)}function c(){for(var a=[],b=1;b<arguments.length;b++)a.push(arguments[b]);return{postProcess:"sprintf",sprintf:a}}function f(b,d){d="string"==typeof d?c.apply(null,arguments):d||{};var f=d.defaultValue||
b,h=e(b,d),k=d.lng?C.toLanguages(d.lng):s,l=d.ns||n.ns.defaultNs,g;-1<b.indexOf(n.nsseparator)&&(g=b.split(n.nsseparator),l=g[0],b=g[1]);void 0===h&&n.sendMissing&&(d.lng?D.postMissing(k[0],l,b,f,k):D.postMissing(n.lng,l,b,f,k));k=d.postProcess||n.postProcess;void 0!==h&&k&&H[k]&&(h=H[k](h,b,d));g=f;-1<f.indexOf(n.nsseparator)&&(g=f.split(n.nsseparator),g=g[1]);g===b&&n.parseMissingKey&&(f=n.parseMissingKey(f));void 0===h&&(f=u(f,d),f=a(f,d),k&&H[k]&&(h=H[k](d.defaultValue||b,b,d)));return void 0!==
h?h:f}function e(b,c){c=c||{};var h,l=c.defaultValue||b,g=s;if(!k)return l;if(c.lng&&(g=C.toLanguages(c.lng),!k[g[0]])){var p=n.getAsync;n.getAsync=!1;d.sync.load(g,n,function(a,b){C.extend(k,b);n.getAsync=p})}var x=c.ns||n.ns.defaultNs;-1<b.indexOf(n.nsseparator)&&(h=b.split(n.nsseparator),x=h[0],b=h[1]);if(c.context&&"string"==typeof c.context&&(h=C.extend({},c),delete h.context,h.defaultValue=n.contextNotFound,h=m(x+n.nsseparator+b+"_"+c.context,h),h!=n.contextNotFound))return u(h,{context:c.context});
if(void 0!==c.count&&"string"!=typeof c.count&&1!==c.count){h=C.extend({},c);delete h.count;h.defaultValue=n.pluralNotFound;var q=x+n.nsseparator+b+n.pluralSuffix,y=F.get(g[0],c.count);0<=y?q=q+"_"+y:1===y&&(q=x+n.nsseparator+b);h=m(q,h);if(h!=n.pluralNotFound)return u(h,{count:c.count,interpolationPrefix:c.interpolationPrefix,interpolationSuffix:c.interpolationSuffix})}var B;h=b.split(n.keyseparator);q=0;for(y=g.length;q<y&&void 0===B;q++){for(var v=g[q],r=0,z=k[v]&&k[v][x];h[r];)z=z&&z[h[r]],r++;
if(void 0!==z){if("string"===typeof z)z=u(z,c),z=a(z,c);else if("[object Array]"===Object.prototype.toString.apply(z)&&!n.returnObjectTrees&&!c.returnObjectTrees)z=z.join("\n"),z=u(z,c),z=a(z,c);else if(null===z&&!0===n.fallbackOnNull)z=void 0;else if(null!==z)if(n.returnObjectTrees||c.returnObjectTrees){B={};for(var D in z)B[D]=f(x+n.nsseparator+b+n.keyseparator+D,c);z=B}else z="key '"+x+":"+b+" ("+v+")' returned a object instead of string.",C.log(z);B=z}}if(void 0===B&&!c.isFallbackLookup&&(!0===
n.fallbackToDefaultNS||n.fallbackNS&&0<n.fallbackNS.length))if(c.isFallbackLookup=!0,n.fallbackNS.length)for(g=0,x=n.fallbackNS.length;g<x;g++){if(B=e(n.fallbackNS[g]+n.nsseparator+b,c))if(D=-1<B.indexOf(n.nsseparator)?B.split(n.nsseparator)[1]:B,h=-1<l.indexOf(n.nsseparator)?l.split(n.nsseparator)[1]:l,D!==h)break}else B=e(b,c);return B}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;0<arguments.length&&
(d=Number(arguments[1]),d!=d?d=0:0!=d&&Infinity!=d&&-Infinity!=d&&(d=(0<d||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;for(d=0<=d?d:Math.max(c-Math.abs(d),0);d<c;d++)if(d in b&&b[d]===a)return d;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=c;1<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(0<d||-1)*Math.floor(Math.abs(d))));for(c=0<=d?
Math.min(d,c-1):c-Math.abs(d);0<=c;c--)if(c in b&&b[c]===a)return c;return-1});var h=void 0,d={},k={},l,y=0,s=[],n={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,
localStorageExpirationTime:6048E5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",postProcess:void 0,
parseMissingKey:void 0},x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},B={create:function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+6E4*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/"},read:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},remove:function(a){this.create(a,"",
-1)}},z={create:function(a,b,c){},read:function(a){return null},remove:function(a){}},C={extend:h?h.extend:b,each:h?h.each:g,ajax:h?h.ajax:r,cookie:"undefined"!==typeof document?B:z,detectLanguage:function(){var a,b=[];if("undefined"!==typeof window){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("=");if(0<e){var f=c[d].substring(0,e),e=c[d].substring(e+1);b[f]=e}}b[n.detectLngQS]&&(a=b[n.detectLngQS])}!a&&"undefined"!==typeof document&&n.useCookie&&
(b=C.cookie.read(n.cookieName))&&(a=b);a||"undefined"===typeof navigator||(a=navigator.language?navigator.language:navigator.userLanguage);return a},escape:function(a){return"string"===typeof a?a.replace(/[&<>"'\/]/g,function(a){return x[a]}):a},log:function(a){},toLanguages:function(a){var b=[];if("string"===typeof a&&-1<a.indexOf("-")){var c=a.split("-");a=n.lowerCaseLng?c[0].toLowerCase()+"-"+c[1].toLowerCase():c[0].toLowerCase()+"-"+c[1].toUpperCase();"unspecific"!==n.load&&b.push(a);"current"!==
n.load&&b.push(c[0])}else b.push(a);-1===b.indexOf(n.fallbackLng)&&n.fallbackLng&&b.push(n.fallbackLng);return b},regexEscape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};C.applyReplacement=u;var D={load:function(a,b,c){b.useLocalStorage?D._loadLocal(a,b,function(d,e){for(var f=[],h=0,k=a.length;h<k;h++)e[a[h]]||f.push(a[h]);0<f.length?D._fetch(f,b,function(a,b){C.extend(e,b);D._storeLocal(b);c(null,e)}):c(null,e)}):D._fetch(a,b,function(a,b){c(null,b)})},_loadLocal:function(a,
b,c){var d={},e=(new Date).getTime();if(window.localStorage){var f=a.length;C.each(a,function(a,h){var k=window.localStorage.getItem("res_"+h);k&&(k=JSON.parse(k),k.i18nStamp&&k.i18nStamp+b.localStorageExpirationTime>e&&(d[h]=k));f--;0===f&&c(null,d)})}},_storeLocal:function(a){if(window.localStorage)for(var b in a)a[b].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+b,JSON.stringify(a[b]))},_fetch:function(a,b,c){var d=b.ns,e={};if(b.dynamicLoad){var f=function(a,b){c(null,b)};
if("function"==typeof b.customLoad)b.customLoad(a,d.namespaces,b,f);else{var h=u(b.resGetPath,{lng:a.join("+"),ns:d.namespaces.join("+")});C.ajax({url:h,success:function(a,b,d){C.log("loaded: "+h);c(null,a)},error:function(a,b,d){C.log("failed loading: "+h);c(null,void 0)},dataType:"json",async:b.getAsync})}}else{var k=d.namespaces.length*a.length,l;C.each(d.namespaces,function(d,f){C.each(a,function(a,d){var h=function(a,b){a&&(l=l||[],l.push(a));e[d]=e[d]||{};e[d][f]=b;k--;0===k&&c(l,e)};"function"==
typeof b.customLoad?b.customLoad(d,f,b,h):D._fetchOne(d,f,b,h)})})}},_fetchOne:function(a,b,c,d){var e=u(c.resGetPath,{lng:a,ns:b});C.ajax({url:e,success:function(a,b,c){C.log("loaded: "+e);d(null,a)},error:function(a,b,c){C.log("failed loading: "+e);d(c,{})},dataType:"json",async:c.getAsync})},postMissing:function(a,b,c,d,e){var f={};f[c]=d;var h=[];if("fallback"===n.sendMissingTo&&!1!==n.fallbackLng)h.push({lng:n.fallbackLng,url:u(n.resPostPath,{lng:n.fallbackLng,ns:b})});else if("current"===n.sendMissingTo||
"fallback"===n.sendMissingTo&&!1===n.fallbackLng)h.push({lng:a,url:u(n.resPostPath,{lng:a,ns:b})});else if("all"===n.sendMissingTo){a=0;for(var l=e.length;a<l;a++)h.push({lng:e[a],url:u(n.resPostPath,{lng:e[a],ns:b})})}e=0;for(a=h.length;e<a;e++){var g=h[e];C.ajax({url:g.url,type:n.sendType,data:f,success:function(a,e,f){C.log("posted missing key '"+c+"' to: "+g.url);a=c.split(".");e=0;for(f=k[g.lng][b];a[e];)f=e===a.length-1?f[a[e]]=d:f[a[e]]=f[a[e]]||{},e++},error:function(a,b,d){C.log("failed posting missing key '"+
c+"' to: "+g.url)},dataType:"json",async:n.postAsync})}}},F={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(a){return Number(1<a)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ak:{name:"Akan",numbers:[1,2],plurals:function(a){return Number(1<a)}},am:{name:"Amharic",numbers:[1,2],plurals:function(a){return Number(1<a)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(a){return Number(0===
a?0:1==a?1:2==a?2:3<=a%100&&10>=a%100?3:11<=a%100?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(a){return Number(1<a)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ay:{name:"Aymará",numbers:[1],plurals:function(a){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(a){return Number(1!=a)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},bg:{name:"Bulgarian",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},bo:{name:"Tibetan",numbers:[1],plurals:function(a){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(a){return Number(1<a)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(a){return Number(1!=a)}},cgg:{name:"Chiga",numbers:[1],
plurals:function(a){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a&&4>=a?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(a){return Number(1==a?0:2==a?1:8!=a&&11!=a?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},de:{name:"German",numbers:[1,2],plurals:function(a){return Number(1!=a)}},dz:{name:"Dzongkha",
numbers:[1],plurals:function(a){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(a){return Number(1!=a)}},en:{name:"English",numbers:[1,2],plurals:function(a){return Number(1!=a)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es:{name:"Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},et:{name:"Estonian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},eu:{name:"Basque",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fa:{name:"Persian",numbers:[1],plurals:function(a){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(a){return Number(1<a)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fr:{name:"French",numbers:[1,2],plurals:function(a){return Number(1<a)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(a){return Number(1==a?0:2==a?1:7>a?2:11>a?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(a){return Number(1==a||11==a?0:2==a||12==a?1:2<a&&20>a?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gun:{name:"Gun",numbers:[1,2],plurals:function(a){return Number(1<
a)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(a){return Number(1!=a)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(a){return Number(1!=a)}},id:{name:"Indonesian",numbers:[1],plurals:function(a){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(a){return Number(1!=a%10||11==a%100)}},it:{name:"Italian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ja:{name:"Japanese",numbers:[1],plurals:function(a){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(a){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(a){return Number(0!==
a)}},ka:{name:"Georgian",numbers:[1],plurals:function(a){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(a){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(a){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ko:{name:"Korean",numbers:[1],plurals:function(a){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(a){return Number(1==a?0:2==a?1:3==a?2:3)}},ky:{name:"Kyrgyz",
numbers:[1],plurals:function(a){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(a){return Number(1<a)}},lo:{name:"Lao",numbers:[1],plurals:function(a){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(a){return Number(1==a%10&&11!=a%100?0:0!==a?1:2)}},mai:{name:"Maithili",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(a){return Number(1<a)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(a){return Number(1<a)}},mi:{name:"Maori",numbers:[1,2],plurals:function(a){return Number(1<a)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(a){return Number(1==a||1==a%10?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(a){return Number(1==a?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ms:{name:"Malay",numbers:[1],plurals:function(a){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(a){return Number(1==a?0:0===a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(a){return Number(1!=a)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(a){return Number(1!=a)}},oc:{name:"Occitan",numbers:[1,
2],plurals:function(a){return Number(1<a)}},or:{name:"Oriya",numbers:[2,1],plurals:function(a){return Number(1!=a)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ps:{name:"Pashto",numbers:[1,
2],plurals:function(a){return Number(1!=a)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(a){return Number(1==a?0:0===a||0<a%100&&20>a%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=
a%10&&(10>a%100||20<=a%100)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(a){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(a){return Number(1!=a)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(a){return Number(1!=a)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a&&4>=a?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(a){return Number(1==a%100?
1:2==a%100?2:3==a%100||4==a%100?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},son:{name:"Songhay",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(a){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(a){return Number(1!=a)}},te:{name:"Telugu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(a){return Number(1<a)}},th:{name:"Thai",numbers:[1],plurals:function(a){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(a){return Number(1<a)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(a){return Number(1<a)}},tt:{name:"Tatar",numbers:[1],plurals:function(a){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(a){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(a){return Number(1<a)}},vi:{name:"Vietnamese",
numbers:[1],plurals:function(a){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(a){return Number(1<a)}},wo:{name:"Wolof",numbers:[1],plurals:function(a){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(a){return Number(1!=a)}},zh:{name:"Chinese",numbers:[1],plurals:function(a){return 0}}},addRule:function(a,b){F.rules[a]=b},setCurrentLng:function(a){if(!F.currentRule||F.currentRule.lng!==a){var b=a.split("-");F.currentRule={lng:a,rule:F.rules[b[0]]}}},get:function(a,b){var c=
a.split("-");if(c=F.currentRule&&F.currentRule.lng===a?F.currentRule.rule:F.rules[c[0]]){var d=c.plurals(b),d=c.numbers[d];2===c.numbers.length&&1===c.numbers[0]&&(2===d?d=-1:1===d&&(d=1));c=d}else c=1===b?"1":"-1";return c}},H={},B=function(a,b){H[a]=b},G=function(){function a(b){return Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}var b=function(){b.cache.hasOwnProperty(arguments[0])||(b.cache[arguments[0]]=b.parse(arguments[0]));return b.format.call(null,b.cache[arguments[0]],arguments)};
b.format=function(b,c){var d=1,e=b.length,f="",h=[],k,l,g,m;for(k=0;k<e;k++)if(f=a(b[k]),"string"===f)h.push(b[k]);else if("array"===f){g=b[k];if(g[2])for(f=c[d],l=0;l<g[2].length;l++){if(!f.hasOwnProperty(g[2][l]))throw G('[sprintf] property "%s" does not exist',g[2][l]);f=f[g[2][l]]}else f=g[1]?c[g[1]]:c[d++];if(/[^s]/.test(g[8])&&"number"!=a(f))throw G("[sprintf] expecting number but found %s",a(f));switch(g[8]){case "b":f=f.toString(2);break;case "c":f=String.fromCharCode(f);break;case "d":f=
parseInt(f,10);break;case "e":f=g[7]?f.toExponential(g[7]):f.toExponential();break;case "f":f=g[7]?parseFloat(f).toFixed(g[7]):parseFloat(f);break;case "o":f=f.toString(8);break;case "s":f=(f=String(f))&&g[7]?f.substring(0,g[7]):f;break;case "u":f=Math.abs(f);break;case "x":f=f.toString(16);break;case "X":f=f.toString(16).toUpperCase()}f=/[def]/.test(g[8])&&g[3]&&0<=f?"+"+f:f;l=g[4]?"0"==g[4]?"0":g[4].charAt(1):" ";m=g[6]-String(f).length;if(g[6]){for(var s=[];0<m;s[--m]=l);l=s.join("")}else l="";
h.push(g[5]?f+l:l+f)}return h.join("")};b.cache={};b.parse=function(a){for(var b=[],c=[],d=0;a;){if(null!==(b=/^[^\x25]+/.exec(a)))c.push(b[0]);else if(null!==(b=/^\x25{2}/.exec(a)))c.push("%");else if(null!==(b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))){if(b[2]){var d=d|1,e=[],f=b[2],h=[];if(null!==(h=/^([a-z_][a-z_\d]*)/i.exec(f)))for(e.push(h[1]);""!==(f=f.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(f)))e.push(h[1]);else if(null!==
(h=/^\[(\d+)\]/.exec(f)))e.push(h[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";b[2]=e}else d|=2;if(3===d)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";c.push(b)}else throw"[sprintf] huh?";a=a.substring(b[0].length)}return c};return b}();B("sprintf",function(a,b,c){return c.sprintf?"[object Array]"===Object.prototype.toString.apply(c.sprintf)?(b=c.sprintf,b.unshift(a),G.apply(null,b)):"object"===typeof c.sprintf?G(a,c.sprintf):a:a});d.init=v;d.setLng=
function(a,b){return v({lng:a},b)};d.preload=function(a,b){"string"===typeof a&&(a=[a]);for(var c=0,d=a.length;c<d;c++)0>n.preload.indexOf(a[c])&&n.preload.push(a[c]);return v(b)};d.addResourceBundle=function(a,b,c){"string"!==typeof b?(c=b,b=n.ns.defaultNs):0>n.ns.namespaces.indexOf(b)&&n.ns.namespaces.push(b);k[a]=k[a]||{};k[a][b]=k[a][b]||{};C.extend(k[a][b],c)};d.loadNamespace=function(a,b){q([a],b)};d.loadNamespaces=q;d.setDefaultNamespace=function(a){n.ns.defaultNs=a};d.t=m;d.translate=m;d.exists=
function(a,b){b=b||{};var c=b.defaultValue||a,d=e(a,b);return void 0!==d||d===c};d.detectLanguage=C.detectLanguage;d.pluralExtensions=F;d.sync=D;d.functions=C;d.lng=function(){return l};d.addPostProcessor=B;d.options=n;return d});
define("i18n",["require","i18next","config"],function(b){var g=b("i18next"),r={getAsync:!1,fallbackLng:!1,resGetPath:"/assets/generated/locales/__lng__/__ns__.json",detectLngQS:"lang",useCookie:!1,resStore:{en:{translation:{}}}};b("config").get("lang")&&delete r.resStore;g.init(r);return g});
define("main/graph",["require","pjs","lib/underscore_model","main/url_prefix","i18n"],function(b){var g=b("pjs"),r=b("lib/underscore_model"),v=b("main/url_prefix"),q=b("i18n"),p=g(r,function(b,a){var g="title thumbURL hash parentHash graphData access created".split(" ");b.init=function(b){a.init.call(this);var f=this;this.observe("title",function(){f.displayTitle=f.title||f.__oldProperties.title||"["+q.t("Untitled Graph")+"]"});this.observe("created",this.updateDisplayDate.bind(this));this.observe("hash",
function(){f.setProperty("path",v+(f.hash?"/"+f.hash:""))});b&&g.forEach(function(a){b.hasOwnProperty(a)&&f.setProperty(a,b[a])});this.access||this.setProperty("access","all");this.path||this.setProperty("path",v);this.now=new Date};b.copy=function(){return p(this)};b.updateDisplayDate=function(){var a=this.created,b=(Date.now()-a)/1E3,e=b/60,h=e/60,d=h/24,k=d/7,l=[q.t("Jan"),q.t("Feb"),q.t("Mar"),q.t("Apr"),q.t("May"),q.t("Jun"),q.t("Jul"),q.t("Aug"),q.t("Sep"),q.t("Oct"),q.t("Nov"),q.t("Dec")];
this.displayDate=5<=k?q.t("on __month__ __day__, __year__",{month:l[a.getMonth()],day:a.getDate(),year:a.getFullYear()}):2<=k?q.t("__number__ weeks ago",{number:String(Math.floor(k))}):7<=d?q.t("last week"):2<=d?q.t("__number__ days ago",{number:String(Math.floor(d))}):24<=h?q.t("yesterday"):2<=h?q.t("__number__ hours ago",{number:String(Math.floor(h))}):60<=e?q.t("one hour ago"):2<=e?q.t("__number__ minutes ago",{number:String(Math.floor(e))}):60<=b?q.t("one minute ago"):q.t("just now")};b.plainObject=
function(){var a={},b=this;g.forEach(function(e){a[e]=b[e]});return a}});p.fromAjax=function(b){return p({title:b.title,thumbURL:b.thumbUrl,graphData:JSON.stringify(b.state),hash:b.hash,parentHash:b.parent_hash,access:b.access,created:new Date(b.created)})};p.updateFromSync=function(b,a){b.setProperty("title",a.title);b.setProperty("hash",a.hash);b.setProperty("parentHash",a.parent_hash);b.setProperty("graphData",unescape(b.graphData));b.setProperty("thumbURL",a.thumbUrl);b.setProperty("created",
new Date(a.created))};return p});
define("lib/browser",["require","jquery"],function(b){b=b("jquery");var g={IS_IE8:null!==navigator.userAgent.match(/MSIE 8.0/i),IS_IE9:null!==navigator.userAgent.match(/MSIE 9.0/i),IS_IE:null!==navigator.userAgent.match(/MSIE/i),IS_IPAD:null!==navigator.userAgent.match(/iPad/i),IS_MOBILE:null!==navigator.userAgent.match(/Mobile|Android/i),IS_ANDROID:null!==navigator.userAgent.match(/Android/i),IS_KINDLE:null!==navigator.userAgent.match(/Kindle/i)||null!==navigator.userAgent.match(/Silk/i),IS_IN_IFRAME:window.parent!==
window};g.IS_OPERA_LT_12=function(){if(!navigator.userAgent.match(/OPERA/i))return!1;var b=navigator.userAgent.match(/Version\/(\d+)/);return b&&b[1]?12>parseInt(b[1],10):!1}();g.SUPPORTS_TRANSLATE3D=!1;b(document).ready(function(){var b=document.createElement("p"),v,q={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(b,null);for(var p in q)if(void 0!==b.style[p]){b.style[p]="translate3d(1px,1px,1px)";
v=window.getComputedStyle(b);if(!v)return;v=v.getPropertyValue(q[p])}document.body.removeChild(b);g.SUPPORTS_TRANSLATE3D=void 0!==v&&0<v.length&&"none"!==v});g.translateRule=function(b,v){return g.SUPPORTS_TRANSLATE3D?"translate3d("+b+(b?"px":"")+","+v+(v?"px":"")+",0)":"translate("+b+(b?"px":"")+","+v+(v?"px":"")+")"};g.CAPABLE_BROWSER=function(){var b=!1;if(window.matchMedia){var v=window.matchMedia("(max-device-width:480px)");v&&v.matches&&(b=!0)}else g.IS_ANDROID&&(b=!0);var v=document.createElement("canvas"),
v=!(!v.getContext||!v.getContext("2d")),q=g.IS_IPAD&&null!==navigator.userAgent.match(/OS 3/i);return v&&!(b||g.IS_KINDLE||q)}();return g});
define("lib/rounding",["require","math/distance"],function(b){var g=b("math/distance"),r=function(b,g){var p=Math.pow(10,g);return Math.round(b*p)/p};return{bestRound:function(b,g,p){p=p||1;var u=-Math.floor(Math.log(g)/Math.LN10),a=r(b,u),u=r(b,u-2);Math.abs(u-b)<p*g&&(a=u);return a},shortestDecimalBetween:function(b,q){if(b>q){var p=q;q=b;b=p}if(b===q)return b;if(0>=b&&0<=q)return 0;for(var p=g.mean(b,q),u=-8,a=p;309>u;){var m=Math.pow(10,-u),m=Math.round(p*m)/m;if(!(b<=m&&m<=q))break;a=m;u+=1}return a}}});
define("graphing/viewport",["require","lib/rounding"],function(b){function g(b,g,p,u){this.xmin=void 0!==b?b:-10;this.xmax=void 0!==g?g:10;this.ymin=void 0!==p?p:-10;this.ymax=void 0!==u?u:10}var r=b("lib/rounding");g.prototype.toObject=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}};g.fromObject=function(b){return new g(b.xmin,b.xmax,b.ymin,b.ymax)};g.prototype.equals=function(b){return this.xmin!==b.xmin||this.ymin!==b.ymin||this.xmax!==b.xmax||this.ymax!==b.ymax?
!1:!0};g.prototype.isXValid=function(){return 0<this.xmax-this.xmin};g.prototype.isYValid=function(){return 0<this.ymax-this.ymin};g.prototype.isValid=function(){return this.isXValid()&&this.isYValid()};g.prototype.isSquare=function(b){return 1>Math.abs(b.height-b.width*this.aspectRatio())};g.prototype.aspectRatio=function(){return(this.ymax-this.ymin)/(this.xmax-this.xmin)};g.prototype.squareXAxis=function(b){var g=this.xmin+(this.xmax-this.xmin)/2;b=(this.ymax-this.ymin)/b.height*b.width;this.xmin=
g-b/2;this.xmax=g+b/2};g.prototype.squareYAxis=function(b){var g=this.ymin+(this.ymax-this.ymin)/2;b=(this.xmax-this.xmin)/b.width*b.height;this.ymin=g-b/2;this.ymax=g+b/2};g.prototype.squareCrop=function(b){this.aspectRatio()>b.height/b.width?this.squareYAxis(b):this.squareXAxis(b)};g.prototype.round=function(b){var g=this.xmax-this.xmin,p=this.ymax-this.ymin,u=g/b.width;b=p/b.height;this.xmin=r.bestRound(this.xmin,u/10);this.xmax=r.bestRound(this.xmin+g,u/10);this.ymin=r.bestRound(this.ymin,b/10);
this.ymax=r.bestRound(this.ymin+p,b/10)};g.prototype.clone=function(){return new g(this.xmin,this.xmax,this.ymin,this.ymax)};g.prototype.polarDiameter=function(){var b=Math.abs(this.xmax),g=Math.abs(this.xmin),p=Math.abs(this.ymax),u=Math.abs(this.ymin);return 1.5*Math.max(b,g,p,u)};g.prototype.largestR=function(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))};g.prototype.smallestR=function(){return 0>=this.xmin&&0<=this.xmax&&0>=this.ymin&&
0<=this.ymax?0:0>=this.xmin&&0<=this.xmax?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):0>=this.ymin&&0<=this.ymax?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))};return g});
define("graphing/projection",["require","./viewport"],function(b){var g=b("./viewport");b=function(b,g,q){this.screen=b;this.viewport=g;this.settings=q};b.prototype.calculateViewportForScreen=function(b){var v=this.viewport,q=(b.width/this.screen.width-1)*(v.xmax-v.xmin),p=(b.height/this.screen.height-1)*(v.ymax-v.ymin),v=new g(v.xmin-q/2,v.xmax+q/2,v.ymin-p/2,v.ymax+p/2);v.round(b);return v};b.prototype.mapx=function(b){return(b-this.viewport.xmin)*this.screen.width/(this.viewport.xmax-this.viewport.xmin)};
b.prototype.mapy=function(b){return this.screen.height-(b-this.viewport.ymin)*this.screen.height/(this.viewport.ymax-this.viewport.ymin)};b.prototype.map_pt=function(b){return{x:this.mapx(b.x),y:this.mapy(b.y)}};b.prototype.reverse_mapx=function(b){return b*(this.viewport.xmax-this.viewport.xmin)/this.screen.width+this.viewport.xmin};b.prototype.reverse_mapy=function(b){return-(b-this.screen.height)*(this.viewport.ymax-this.viewport.ymin)/this.screen.height+this.viewport.ymin};b.prototype.reverse_map_pt=
function(b){return{x:this.reverse_mapx(b.x),y:this.reverse_mapy(b.y)}};return b});
define("graphing/viewporttransformation",["require","pjs","./viewport","./projection"],function(b){var g=b("pjs"),r=b("./viewport"),v=b("./projection"),q=g(function(b){b.init=function(b,a,g,c){this.xOffset=void 0!==b?b:0;this.yOffset=void 0!==a?a:0;this.xScale=void 0!==g?g:1;this.yScale=void 0!==c?c:this.xScale};b.compose=function(b){return new q(b.xScale*this.xOffset+b.xOffset,b.yScale*this.yOffset+b.yOffset,b.xScale*this.xScale,b.yScale*this.yScale)};b.lerp=function(b,a){return new q((1-a)*this.xOffset+
a*b.xOffset,(1-a)*this.yOffset+a*b.yOffset,(1-a)*this.xScale+a*b.xScale,(1-a)*this.yScale+a*b.yScale)};b.transformProjection=function(b){var a=b.viewport,g=b.screen,c=(a.xmin+a.xmax)/2,f=(a.ymin+a.ymax)/2,e=c+(a.xmin-c)/this.xScale,c=c+(a.xmax-c)/this.xScale,h=f+(a.ymin-f)/this.yScale,a=f+(a.ymax-f)/this.yScale,f=this.xOffset*(c-e)/g.width,g=-this.yOffset*(a-h)/g.height;return new v(b.screen,new r(e-f,c-f,h-g,a-g),b.settings)}});return q});
define("graphing/screen",["require"],function(b){return function(b,r){this.width=b;this.height=r;return this}});
define("text",["module"],function(b){var g,r,v,q,p=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,m="undefined"!==typeof location&&location.href,c=m&&location.protocol&&location.protocol.replace(/\:/,""),f=m&&location.hostname,e=m&&(location.port||void 0),h={},d=b.config&&b.config()||{};g={version:"2.0.7",strip:function(b){if(b){b=b.replace(u,"");var c=b.match(a);c&&(b=c[1])}else b="";
return b},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var a,b,c;if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!==typeof ActiveXObject)for(b=0;3>b;b+=1){c=p[b];try{a=new ActiveXObject(c)}catch(d){}if(a){p=[c];break}}return a},parseName:function(a){var b,
c,d=!1,e=a.indexOf(".");b=0===a.indexOf("./")||0===a.indexOf("../");-1!==e&&(!b||1<e)?(b=a.substring(0,e),c=a.substring(e+1,a.length)):b=a;a=c||b;e=a.indexOf("!");-1!==e&&(d="strip"===a.substring(e+1),a=a.substring(0,e),c?c=a:b=a);return{moduleName:b,ext:c,strip:d}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e,f;e=g.xdRegExp.exec(a);if(!e)return!0;a=e[2];e=e[3];e=e.split(":");f=e[1];e=e[0];return(!a||a===b)&&(!e||e.toLowerCase()===c.toLowerCase())&&(!f&&!e||f===d)},finishLoad:function(a,
b,c,e){c=b?g.strip(c):c;d.isBuild&&(h[a]=c);e(c)},load:function(a,b,h,s){if(s.isBuild&&!s.inlineText)h();else{d.isBuild=s.isBuild;var n=g.parseName(a);s=n.moduleName+(n.ext?"."+n.ext:"");var u=b.toUrl(s),p=d.useXhr||g.useXhr;!m||p(u,c,f,e)?g.get(u,function(b){g.finishLoad(a,n.strip,b,h)},function(a){h.error&&h.error(a)}):b([s],function(a){g.finishLoad(n.moduleName+"."+n.ext,n.strip,a,h)})}},write:function(a,b,c,d){h.hasOwnProperty(b)&&(d=g.jsEscape(h[b]),c.asModule(a+"!"+b,"define(function () { return '"+
d+"';});\n"))},writeFile:function(a,b,c,d,e){b=g.parseName(b);var f=b.ext?"."+b.ext:"",h=b.moduleName+f,m=c.toUrl(b.moduleName+f)+".js";g.load(h,c,function(b){b=function(a){return d(m,a)};b.asModule=function(a,b){return d.asModule(a,m,b)};g.write(a,h,b,e)},e)}};if("node"===d.env||!d.env&&"undefined"!==typeof process&&process.versions&&process.versions.node)r=require.nodeRequire("fs"),g.get=function(a,b,c){try{var d=r.readFileSync(a,"utf8");0===d.indexOf("﻿")&&(d=d.substring(1));b(d)}catch(e){c(e)}};
else if("xhr"===d.env||!d.env&&g.createXhr())g.get=function(a,b,c,e){var f=g.createXhr(),h;f.open("GET",a,!0);if(e)for(h in e)e.hasOwnProperty(h)&&f.setRequestHeader(h.toLowerCase(),e[h]);if(d.onXhr)d.onXhr(f,a);f.onreadystatechange=function(e){if(4===f.readyState&&(e=f.status,399<e&&600>e?(e=Error(a+" HTTP status: "+e),e.xhr=f,c(e)):b(f.responseText),d.onXhrComplete))d.onXhrComplete(f,a)};f.send(null)};else if("rhino"===d.env||!d.env&&"undefined"!==typeof Packages&&"undefined"!==typeof java)g.get=
function(a,b){var c,d,e=new java.io.File(a),f=java.lang.System.getProperty("line.separator"),e=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(e),"utf-8")),h="";try{c=new java.lang.StringBuffer;(d=e.readLine())&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1));for(null!==d&&c.append(d);null!==(d=e.readLine());)c.append(f),c.append(d);h=String(c.toString())}finally{e.close()}b(h)};else if("xpconnect"===d.env||!d.env&&"undefined"!==typeof Components&&Components.classes&&
Components.interfaces)v=Components.classes,q=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),g.get=function(a,b){var c,d,e={},f=new FileUtils.File(a);try{c=v["@mozilla.org/network/file-input-stream;1"].createInstance(q.nsIFileInputStream),c.init(f,1,0,!1),d=v["@mozilla.org/intl/converter-input-stream;1"].createInstance(q.nsIConverterInputStream),d.init(c,"utf-8",c.available(),q.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),d.readString(c.available(),
e),d.close(),c.close(),b(e.value)}catch(h){throw Error((f&&f.path||"")+": "+h);}};return g});
define("loadcss",["text"],function(b){function g(b){var g=document.getElementsByTagName("head")[0],p=document.createElement("link");p.href=b;p.rel="stylesheet";p.type="text/css";g.appendChild(p)}var r={};return{load:function(v,q,p,u){q=q.toUrl(v)+".css";u.isBuild?b.get(q,function(a){r[v]=a;p()}):(g(q),p())},onLayerEnd:function(b,g){var p="",u;for(u in r)p+=r[u];u=require.nodeRequire("fs");var a=g.path.replace(/\.js/g,".required.css");u.writeFileSync(a,p,"utf8")},write:function(b,g,p){g in r&&p("define('"+
b+"!"+g+"', function(){});")}}});define("loadcss!css/poi",function(){});(function(b){b.fn.disableTextSelection=function(g){g&&this.each(function(){b(this).bind("mousedown touchstart",function(){b(document.activeElement).focusout()})});return this.each(function(){b(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}})(jQuery);define("lib/jquery.disabletextselection",function(){});
define("graphing/canvaslayer",["require","jquery","pjs","lib/browser","lib/jquery.disabletextselection"],function(b){var g=b("jquery"),r=b("pjs"),v=b("lib/browser");b("lib/jquery.disabletextselection");return r(function(b){b.init=function(b,u){this.$=g("<div class='graph-outer'></div>").css("position","absolute").css("overflow","hidden").disableTextSelection(v.IS_IE);this.canvas_node=g("<canvas class='graph-inner'></canvas>").css("position","relative").css("display","block").disableTextSelection(v.IS_IE);
this.devicePixelRatio=window.devicePixelRatio||1;this.ctx=this.canvas_node[0].getContext("2d");this.resize(b,u);this.unscaledCanvas=document.createElement("canvas");this.unscaledCanvas.width=b;this.unscaledCanvas.height=u;this.transforming=!1;this.$.append(this.canvas_node)};b.resize=function(b,g){1024===b&&2===this.devicePixelRatio&&(b=1023);if(b!==this.width||g!==this.height)this.width=b,this.height=g,this.$.css("width",b+"px").css("height",g+"px"),this.canvas_node.css("width",b+"px").css("height",
g+"px").attr("width",b*this.devicePixelRatio).attr("height",g*this.devicePixelRatio),this.unscaledCanvas&&(this.unscaledCanvas.width=b,this.unscaledCanvas.height=g),this.ctx.scale(this.devicePixelRatio,this.devicePixelRatio)};b.redraw=function(){};b.saveUnscaledCanvas=function(b){if(!this.transforming){this.transforming=!0;b=this.unscaledCanvas.getContext("2d");var g=this.unscaledCanvas.width,a=this.unscaledCanvas.height;b.clearRect(0,0,g,a);b.drawImage(this.canvas_node[0],0,0,g,a)}};b.releaseUnscaledCanvas=
function(){this.transforming=!1};b.paintScaledCanvas=function(b){if(this.unscaledCanvas){var g=this.ctx.canvas.width,a=this.ctx.canvas.height;this.ctx.save();this.ctx.clearRect(0,0,g,a);this.ctx.setTransform(b.xScale,0,0,b.yScale,b.xOffset*this.devicePixelRatio-0.5*(b.xScale-1)*g,b.yOffset*this.devicePixelRatio-0.5*(b.yScale-1)*a);this.ctx.drawImage(this.unscaledCanvas,0,0,g,a);this.ctx.restore()}}})});
define("graphing/clipping",[],function(){var b={TOP:1,BOTTOM:2,LEFT:4,RIGHT:8,ALL:15,X:12,Y:3,POLAR_RADIAN_EQUALITY:1,POLAR_RADIAN_INEQUALITY:2,POLAR_DEGREE_EQUALITY:3,POLAR_DEGREE_INEQUALITY:4,Y_EQUALS:5,X_EQUALS:6,mapSegmentToCanvas:function(g,r,v,q){var p=[],u=r.xmin,a=r.ymin,m=v.height;v=v.width/(r.xmax-r.xmin);r=-m/(r.ymax-r.ymin);var c=g.length,f,e;if(q===b.Y_EQUALS)for(q=0;q<c;q+=2)f=(g[q]-u)*v-0.5,e=(g[q+1]-a)*r+m-0.5,p.push(f,e);else if(q===b.X_EQUALS)for(q=0;q<c;q+=2)f=(g[q+1]-u)*v-0.5,
e=(g[q]-a)*r+m-0.5,p.push(f,e);else if(q===b.POLAR_RADIAN_EQUALITY)for(q=0;q<g.length;q+=2)c=g[q],e=g[q+1],f=(e*Math.cos(c)-u)*v-0.5,e=(e*Math.sin(c)-a)*r+m-0.5,p.push(f,e);else if(q===b.POLAR_RADIAN_INEQUALITY)for(q=0;q<g.length;q+=2)c=g[q],e=g[q+1],0>e&&(e=0),f=(e*Math.cos(c)-u)*v-0.5,e=(e*Math.sin(c)-a)*r+m-0.5,p.push(f,e);else if(q===b.POLAR_DEGREE_EQUALITY)for(q=0;q<g.length;q+=2)c=g[q]*Math.PI/180,e=g[q+1],f=(e*Math.cos(c)-u)*v-0.5,e=(e*Math.sin(c)-a)*r+m-0.5,p.push(f,e);else if(q===b.POLAR_DEGREE_INEQUALITY)for(q=
0;q<g.length;q+=2)c=g[q]*Math.PI/180,e=g[q+1],0>e&&(e=0),f=(e*Math.cos(c)-u)*v-0.5,e=(e*Math.sin(c)-a)*r+m-0.5,p.push(f,e);return p},clipStrokeEdges:function(g,r){return b.clipFillEdges(g,r,b.ALL,!0)},clipFillEdge:function(b,r,v,q){var p=[],u=[].push,a;q?(q=b[0],e=b[1],a=2,(h=r(q,e))&&p.push(q,e)):(q=b[b.length-2],e=b[b.length-1],a=0,h=r(q,e));for(;a<b.length;a+=2){var m=q,c=e,f=h;q=b[a];var e=b[a+1],h=r(q,e);if(h||f)h&&f&&p.push(q,e),h&&!f&&(u.apply(p,v(q,e,m,c)),p.push(q,e)),!h&&f&&u.apply(p,v(m,
c,q,e))}return p},clipFillEdges:function(g,r,v,q){var p=r.xmin,u=r.xmax,a=r.ymin,m=r.ymax;r=function(a,b){return a>=p};var c=function(a,b){return a<=u},f=function(b,c){return c>=a},e=function(a,b){return b<=m},h=function(a,b,c,d){return[p,b+(d-b)*(p-a)/(c-a)]},d=function(a,b,c,d){return[u,b+(d-b)*(u-a)/(c-a)]},k=function(b,c,d,e){return[b+(d-b)*(a-c)/(e-c),a]},l=function(a,b,c,d){return[a+(c-a)*(m-b)/(d-b),m]},y=g;v&b.LEFT&&(y=b.clipFillEdge(g,r,h,q));v&b.BOTTOM&&(y=b.clipFillEdge(y,f,k,q));v&b.RIGHT&&
(y=b.clipFillEdge(y,c,d,q));v&b.TOP&&(y=b.clipFillEdge(y,e,l,q));return y},clipAllFillEdges:function(g,r){return b.clipFillEdges(g,r,b.ALL,!1)},computePolarFill:function(b,r,v){var q=[],p,u=b[0],a=u+v,m=[];q.push(m);for(var c=0;c<b.length;c+=2)if(p=b[c],u=b[c+1],0>u&&(u=0),p>=a){m=[];q.push(m);for(a=u=b[c-2];p>=a;)a+=v;c-=4}else m.push(p,u);if(0===r)for(c=0;c<q.length;c++)q[c].push(0,0);else for(b=v/16,c=0;c<q.length;c++){v=q[c];u=v[0];for(p=a=v[v.length-2];p>u;p-=b)v.push(p,r);v.push(u,r)}return q},
computeCartesianFill:function(b,r){b=b.slice();b.push(b[b.length-2],r);b.push(b[0],r);return[b]}};return b});define("graphing/constants",[],function(){return{ANIMATE_ZOOM_DURATION:500,DOUBLETAP_ZOOM:2,ZOOM_FACTOR:1.125,MAX_DOTTED_SEGMENTS:1E3,STROKE_ALPHA:0.7,HIGHLIGHTED_STROKE_ALPHA:1,FILL_ALPHA:0.4,POINT_ALPHA:0.9,HIGHLIGHTED_POINT_ALPHA:0.6,POLAR_ALPHA:0.2,POI_ALPHA:0.01}});
define("graphing/dasheddrawer",["require","./constants","math/distance"],function(b){function g(b,g){this.pattern=[11,7];this.replen=this.pattern[0]+this.pattern[1];null!==g&&g/this.replen>r.MAX_DOTTED_SEGMENTS&&(this.pattern[0]=g*this.pattern[0]/this.replen/r.MAX_DOTTED_SEGMENTS,this.pattern[1]=g*this.pattern[1]/this.replen/r.MAX_DOTTED_SEGMENTS);this.dstaccum=this.pstate=0;this.py=this.px=null;this.ctx=b;return this}var r=b("./constants"),v=b("math/distance");g.getTotalSegmentLength=function(b){if(4>
b.length)return 0;for(var g=0,u=b[0],a=b[1],m=2;m<b.length;m+=2)var c=b[m],f=b[m+1],g=g+v.hypot(c-u,f-a),u=c,a=f;return g};g.prototype.start=function(b,g){this.ctx.desmos_batching||this.ctx.beginPath();this.px=b;this.py=g};g.prototype.next=function(b,g){var u=this.pattern[this.pstate],a=Math.sqrt(Math.pow(b-this.px,2)+Math.pow(g-this.py,2));if(1E-5<a){for(;a+this.dstaccum>=u;){var m=b-this.px,c=g-this.py,f=u-this.dstaccum,m=m*(f/a),c=c*(f/a);0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+
m,this.py+c));this.dstaccum=0;this.px+=m;this.py+=c;this.pstate=1-this.pstate;u=this.pattern[this.pstate];a-=f}0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(b,g))}this.px=b;this.py=g;this.dstaccum+=a};g.prototype.skip=function(b,g){this.px=b;this.py=g};g.prototype.close=function(){this.ctx.desmos_batching||this.ctx.stroke();this.dstaccum=this.pstate=0;this.py=this.px=null};return g});
define("graphing/graphslayer","require pjs underscore ./canvaslayer ./clipping ./dasheddrawer ./constants ./viewport graphing/graphmode".split(" "),function(b){var g=b("pjs"),r=b("underscore"),v=b("./canvaslayer"),q=b("./clipping"),p=b("./dasheddrawer"),u=b("./constants"),a=b("./viewport"),m=b("graphing/graphmode"),c=function(b){return new a(-3,b.width+3,-3,b.height+3)},f=g(v,function(a){a.redraw=function(a,b,c){var e=a.screen;this.resize(e.width,e.height);this.ctx.clearRect(0,0,e.width,e.height);
this.redrawToCtx(this.ctx,a,b,c)};a.redrawToCtx=function(a,b,c,e){if(void 0===e||e.length<r.size(c))e=r.keys(c);e.forEach(function(e){var g=c[e];void 0!==g&&g.visible&&f.drawSketchToCtx(c[e],a,b)})}});f.eachSegment=function(a,b){for(var c=0;c<a.branches.length;c++)for(var f=a.branches[c],g=0;g<f.segments.length;g++)b(f,f.segments[g])};f.drawSketchToCtx=function(a,b,c){if(a.branches&&a.branches.length){b.lineWidth=c.settings.graphLineWidth;b.strokeStyle=a.color;b.fillStyle=a.color;b.lineJoin="round";
b.lineCap="round";var k=!!c.settings.takingScreenshot;b.desmos_batching=!0;b.beginPath();b.save();f.eachSegment(a,function(a,e){(a.graphMode===m.XYPOINT||a.graphMode===m.XYPOINT_MOVABLE&&k)&&f.drawPointsToCtx(b,c,e,a.style)});b.globalAlpha=u.POINT_ALPHA;b.stroke();b.restore();b.desmos_batching=!1;f.eachSegment(a,function(a,e){if(a.graphMode!==m.XYPOINT&&a.graphMode!==m.XYPOINT_MOVABLE){var k=m.Y;a.flip&&(k=m.X);a.graphMode&&(k=a.graphMode);if(k===m.POLYGONFILL)f.fillPolygonToCtx(b,c,e);else{var g=
a.operator;"<"!=g&&">"!=g&&"<="!=g&&">="!=g&&"\\leq"!=g&&"\\le"!=g&&"\\geq"!=g&&"\\ge"!=g||f.fillGraphStrokeToCtx(b,c,e,"<="==g||"<"==g||"\\leq"==g||"\\le"==g,k)}}});b.desmos_batching=!0;b.beginPath();f.eachSegment(a,function(k,g){if(k.graphMode!==m.XYPOINT&&k.graphMode!==m.XYPOINT_MOVABLE){var s=m.Y;k.flip&&(s=m.X);k.graphMode&&(s=k.graphMode);var n=k.operator;f.drawGraphStrokeToCtx(b,c,g,"<"==n||">"==n||"!="==n||"dashed"===a.style,s,n)}});b.globalAlpha=u.STROKE_ALPHA;b.stroke();b.globalAlpha=1;
b.desmos_batching=!1}};f.drawGraphStrokeToCtx=function(a,b,d,k,g,m){a.globalAlpha=b.settings.highlight?u.HIGHLIGHTED_STROKE_ALPHA:u.STROKE_ALPHA;g=f.getClippingGraphType(g,"="!==m,b.settings);d=q.mapSegmentToCanvas(d,b.viewport,b.screen,g);b=q.clipStrokeEdges(d,c(b.screen));if(k){d=new p(a,p.getTotalSegmentLength(b));d.start(b[0],b[1]);for(k=2;k<b.length;k+=2)d.next(b[k],b[k+1]);d.close()}else{a.desmos_batching||a.beginPath();a.moveTo(b[0],b[1]);for(k=0;k<b.length;k+=2)a.lineTo(b[k],b[k+1]);a.desmos_batching||
a.stroke()}a.globalAlpha=1};f.mapPointToScreen=function(a,b,c){b=a.mapx(b)-0.5;if(-20>b||b>a.screen.width+20)return null;c=a.mapy(c)-0.5;return-20>c||c>a.screen.height+20?null:{x:b,y:c}};f.drawPointToCtx=function(a,b,c,k,g,m){c=f.mapPointToScreen(b,c,k);if(!c)return!1;a.globalAlpha=b.settings.highlight?u.HIGHLIGHTED_POINT_ALPHA:u.POINT_ALPHA;g&&(a.globalAlpha=g);a.globalAlpha=u.POINT_ALPHA;a.desmos_batching||a.beginPath();"cross"===m?(g=0.4*b.settings.pointLineWidth,a.moveTo(c.x-g,c.y-g),a.lineTo(c.x+
g,c.y+g),a.moveTo(c.x+g,c.y-g),a.lineTo(c.x-g,c.y+g),a.lineWidth=0.3*b.settings.pointLineWidth):"open"===m?(g=0.5*b.settings.pointLineWidth,a.arc(c.x,c.y,g,0,2*Math.PI,!0),a.closePath(),a.fillStyle="white",a.lineWidth=0.25*b.settings.pointLineWidth,a.fill()):(a.moveTo(c.x-0.1,c.y-0.1),a.lineTo(c.x-0.1,c.y+0.1),a.lineTo(c.x+0.1,c.y+0.1),a.lineTo(c.x+0.1,c.y-0.1));a.desmos_batching||a.stroke();a.globalAlpha=1;return!0};f.drawPointsToCtx=function(a,b,c,g){a.lineWidth=b.settings.pointLineWidth;for(var l=
0;l<c.length;l++)f.drawPointToCtx(a,b,c[l][0],c[l][1],!1,g)};f.fillGraphStrokeToCtx=function(a,b,d,g,l){a.globalAlpha=l===m.POLAR?u.POLAR_ALPHA:u.FILL_ALPHA;var p=null,s=null;l===m.POLAR?(s=q.ALL,p=g?0:b.viewport.polarDiameter(),p=q.computePolarFill(d,p,b.settings.degreeMode?180:2*Math.PI)):l===m.Y?(s=q.Y,p=g?b.viewport.ymin:b.viewport.ymax,p=q.computeCartesianFill(d,p)):l===m.X&&(s=q.X,p=g?b.viewport.xmin:b.viewport.xmax,p=q.computeCartesianFill(d,p));d=c(b.screen);for(g=0;g<p.length;g++){var n=
f.getClippingGraphType(l,!0,b.settings),n=q.mapSegmentToCanvas(p[g],b.viewport,b.screen,n),n=q.clipFillEdges(n,d,s);if(6<=n.length){a.beginPath();a.moveTo(n[0],n[1]);for(var x=2;x<n.length;x+=2)a.lineTo(n[x],n[x+1]);a.closePath();a.fill()}}a.globalAlpha=1};f.fillPolygonToCtx=function(a,b,d){a.globalAlpha=u.FILL_ALPHA;var f=c(b.screen);b=q.mapSegmentToCanvas(d,b.viewport,b.screen,q.Y_EQUALS);f=q.clipFillEdges(b,f,q.ALL);if(6<=f.length){a.beginPath();a.moveTo(f[0],f[1]);for(b=2;b<f.length;b+=2)a.lineTo(f[b],
f[b+1]);a.closePath();a.fill()}a.globalAlpha=1};f.getClippingGraphType=function(a,b,c){switch(a){case m.X:return q.X_EQUALS;case m.PARAMETRIC:case m.Y:return q.Y_EQUALS;case m.POLAR:return c.degreeMode?b?q.POLAR_DEGREE_INEQUALITY:q.POLAR_DEGREE_EQUALITY:b?q.POLAR_RADIAN_INEQUALITY:q.POLAR_RADIAN_EQUALITY}};return f});
define("graphing/poidotslayer","require loadcss!css/poi pjs ./graphslayer ./canvaslayer math/poi ./constants".split(" "),function(b){b("loadcss!css/poi");var g=b("pjs"),r=b("./graphslayer"),v=b("./canvaslayer"),q=b("math/poi"),p=b("./constants"),u=g(v,function(a,b){a.init=function(){b.init.apply(this,arguments);this.$.addClass("poi-dots-layer")};a.redraw=function(a,b){this.resize(a.screen.width,a.screen.height);this.ctx.clearRect(0,0,a.screen.width,a.screen.height);var e=[],h;for(h in b){var d=b[h];
if(d.visible){d.showHighlight&&u.drawSketchHighlight(d,this.ctx,a);var g=d.getPOI();(d.showPOI||g.length&&g[0].type===q.DEFINITION)&&e.push.apply(e,u.drawPOIs(g,this.ctx,"#AAAAAA",a))}}this.savedPOI=e};a.getDrawnPOI=function(){return this.savedPOI||[]}});u.drawSketchHighlight=function(a,b,c){c.settings.setProperty("highlight",!0);r.drawSketchToCtx(a,b,c);c.settings.setProperty("highlight",!1)};u.drawPOIs=function(a,b,c,f){b.lineWidth=f.settings.pointLineWidth;b.strokeStyle=c||"#AAAAAA";b.fillStyle=
c||"#AAAAAA";b.lineJoin="round";b.lineCap="round";c=b.globalAlpha;b.globalAlpha=p.POI_ALPHA;var e=[],h,d=a.length,g;if(d&&a[0].type===q.DEFINITION)for(h=0;h<d;h++)g=a[h],r.mapPointToScreen(f,g.x,g.y)&&e.push(g);else for(h=0;h<d;h++)g=a[h],r.drawPointToCtx(b,f,g.x,g.y,p.POI_ALPHA)&&e.push(g);b.globalAlpha=c;return e};return u});
define("graphing/domlayer",["require","pjs","jquery","lib/browser","lib/jquery.disabletextselection"],function(b){var g=b("pjs"),r=b("jquery"),v=b("lib/browser");b("lib/jquery.disabletextselection");return g(function(b){b.init=function(b,g){this.$=r("<div class='graph-outer'></div>").css("position","absolute").css("overflow","hidden").disableTextSelection(v.IS_IE);this.dom_node=r("<div></div>").css("position","relative").css("display","block").disableTextSelection(v.IS_IE);this.resize(b,g);this.$.append(this.dom_node)};
b.resize=function(b,g){if(b!==this.width||g!==this.height)this.width=b,this.height=g,this.$.css("width",b+"px").css("height",g+"px"),this.dom_node.css("width",b+"px").css("height",g+"px")};b.redraw=function(){}})});
define("graphing/label",["math/builtin"],function(b){function g(a,g){if(isNaN(a))return{string:"undefined",value:a};if(0===a)return{string:"0",value:a};g||(g=a);var c=b.toFraction(a/Math.PI,24),f,e;if(v(g)&&b.approx(c.n/c.d*Math.PI,a,3))return f=0===c.n?"0":1===c.n?"π":-1===c.n?"-π":c.n.toString()+"π",e=1===c.d?"":"/"+c.d.toString(),{string:f+e,value:c.n/c.d*Math.PI};v(g)?(c=a.toFixed(q(g)),e=-1===c.indexOf(".")?c:c.replace(p,""),c=f=null):(f=r(a.toExponential(q(g/a))).split("e"),c=f[0]+"×10",f=f[1].replace("+",
""),e=r(a.toExponential(q(g/a))).replace("+",""));return{string:e,mantissa:c,superscript:f,value:a}}function r(a){return a.replace(u,"e")}function v(a){a=Math.abs(a);return 1E-4<a&&1E7>a}function q(a){a=Math.abs(a);a=Math.max(a,1E-16);return Math.max(0,Math.floor(4.5-Math.log(a)/Math.LN10))}var p=/\.?0+$/,u=/\.?0+e/;return{value:g,point:function(a,b,c,f){a=g(a,b);c=g(f(a.value),c);return[a,c]}}});
define("graphing/poilabelslayer","require pjs jquery ./domlayer ./label graphing/graphmode math/poi".split(" "),function(b){var g=b("pjs"),r=b("jquery"),v=b("./domlayer"),q=b("./label"),p=b("graphing/graphmode"),u=b("math/poi"),a=g(v,function(b,c){var f=r("body");b.init=function(){c.init.call(this,arguments);this.$.addClass("poi-labels-layer")};b.redraw=function(b,c){this.resize(b.screen.width,b.screen.height);this.dom_node.find(".poi").remove();var d=this.hoveredPOI,g=d?d.sketch:null,l=!1,m=[],s;
for(s in c){var n=c[s];n===g&&(l=!0);n.visible&&(n=a.drawOpenPOI(n,this.dom_node,b),n.length&&m.push.apply(m,n))}l||(d=this.hoveredPOI=null);d&&d.sketch.visible?d.isOpen()?f.hasClass("mouse-over-opened-poi")||f.addClass("mouse-over-opened-poi"):(a.drawHoveredPOI(this.dom_node,d,b),f.hasClass("mouse-over-closed-poi")||f.addClass("mouse-over-closed-poi")):(f.hasClass("mouse-over-closed-poi")&&f.removeClass("mouse-over-closed-poi"),f.hasClass("mouse-over-opened-poi")&&f.removeClass("mouse-over-opened-poi"));
this.savedPOI=m};b.getDrawnPOI=function(){return this.savedPOI||[]}});a.getPointLabel=function(a,b){var f=b.xmax-b.xmin,e=b.ymax-b.ymin,h=a.getGraphMode();if(h===p.XYPOINT||h===p.XYPOINT_MOVABLE)f=[q.value(a.x,f),q.value(a.y,e)];else{var d=(h=h===p.X)?a.y:a.x,g=a.getCompiledFunction(),f=q.point(d,f,e,g);h&&(e=f[0],f[0]=f[1],f[1]=e)}return{x:f[0].value,x_label:f[0].superscript?f[0].mantissa+"<sup>"+f[0].superscript+"</sup>":f[0].string,y:f[1].value,y_label:f[1].superscript?f[1].mantissa+"<sup>"+f[1].superscript+
"</sup>":f[1].string,is_hole:!isFinite(f[1].value)}};a.createSinglePOI=function(b,c){var f=a.getPointLabel(b,c),e=f.is_hole?" hole":"",h=b.type===u.DEFINITION?" real":"",d=f.x_label.replace("π","<span class='pi'>π</span>"),f=f.y_label.replace("π","<span class='pi'>π</span>");return r('<div class="tracept poi'+e+h+'">  <div class="pt"></div>  <div class="label">'+d+", "+f+'</div>  <div class="arrow""></div></div>')};a.drawHoveredPOI=function(b,c,f){var e=f.mapx(c.x),h=f.mapy(c.y);-20<e&&-20<h&&e<f.screen.width+
20&&h<f.screen.height+20&&(c=a.createSinglePOI(c,f.viewport),c.css({left:e+"px",top:h+"px"}),c.addClass("mouseover"),b.append(c))};a.drawOpenPOI=function(b,c,f){b=b.openPOI;if(!b.length)return[];for(var e=[],h=0;h<b.length;h++){var d=b[h],g=f.mapx(d.x),l=f.mapy(d.y);if(-20<g&&-20<l&&g<f.screen.width+20&&l<f.screen.height+20){var u=a.createSinglePOI(d,f.viewport);u.css({left:g+"px",top:l+"px"});u.addClass("opened");c.append(u);e.push(d)}}return e};return a});
define("graphing/gridlayer",["jquery","pjs","./canvaslayer","./label"],function(b,g,r,v){return g(r,function(b){b.redraw=function(a,b){var c=a.screen;this.resize(c.width,c.height);this.ctx.clearRect(0,0,c.width,c.height);this.redrawToCtx(this.ctx,a,b)};b.redrawToCtx=function(a,b,c){b.settings.showGrid&&(b.settings.polarMode?this.drawPolarGrid(a,b):this.drawCartesianGrid(a,b));b.settings.showAxes&&this.drawAxes(a,b,c);b.settings.showLabels&&(b.settings.polarMode?this.drawPolarLabels(a,b):this.drawCartesianLabels(a,
b))};var g=function(a,b,c,d){a=Math.ceil(a/c);b=Math.floor(b/c);c=1/c;if(!(a>b||1E4<b-a))for(;a<=b;a++)d(a/c)},u=function(a,b,c){return a<b?b:a>c?c:a};b.drawPolarGrid=function(a,b){var c=d(b),e=b.settings.minorAxisOpacity,f=1-(1-b.settings.majorAxisOpacity)/(1-e),h=b.mapx(0),m=b.mapy(0),u=b.screen.height/(b.viewport.ymax-b.viewport.ymin)/(b.screen.width/(b.viewport.xmax-b.viewport.xmin)),q=m/u,r=b.viewport.smallestR(),v=b.viewport.largestR(),H=c.minorStepX*Math.max(1,Math.floor(r/c.minorStepX)),G=
c.majorStepX*Math.max(1,Math.floor(r/c.majorStepX));a.save();a.scale(1,u);a.beginPath();g(H,v,c.minorStepX,function(c){c=b.mapx(c)-h;a.moveTo(h+c,q);a.arc(h,q,c,0,2*Math.PI)});a.restore();a.lineWidth=1;a.strokeStyle="rgba(0, 0 , 0, "+e+")";a.stroke();a.beginPath();g(0,359,0<r?5:15,function(c){a.moveTo(h,m);var d=b.mapx(v*Math.cos(c*Math.PI/180));c=b.mapy(v*Math.sin(c*Math.PI/180));a.lineTo(d,c)});a.stroke();a.save();a.scale(1,u);a.beginPath();g(G,v,c.majorStepX,function(c){c=b.mapx(c)-h;a.moveTo(h+
c,q);a.arc(h,q,c,0,2*Math.PI)});a.restore();a.lineWidth=1;a.strokeStyle="rgba(0, 0 , 0, "+f+")";a.stroke();a.beginPath();g(0,345,90,function(c){a.moveTo(h,m);var d=b.mapx(v*Math.cos(c*Math.PI/180));c=b.mapy(v*Math.sin(c*Math.PI/180));a.lineTo(d,c)});a.stroke()};b.drawCartesianGrid=function(a,b){var c=b.viewport.xmin,e=b.viewport.ymin,f=b.viewport.xmax,h=b.viewport.ymax,m=d(b),u=b.screen.width,q=b.screen.height,r=b.settings.minorAxisOpacity,v=b.settings.majorAxisOpacity;a.lineWidth=1;a.beginPath();
a.strokeStyle="rgba(0, 0 , 0, "+r+")";g(c,f,m.minorStepX,function(c){c=Math.round(b.mapx(c));c!==u&&(a.moveTo(c-0.5,0),a.lineTo(c-0.5,q))});g(e,h,m.minorStepY,function(c){c=Math.round(b.mapy(c));c!==q&&(a.moveTo(0,c-0.5),a.lineTo(u,c-0.5))});a.stroke();a.beginPath();a.strokeStyle="rgba(0, 0 , 0, "+(1-(1-v)/(1-r))+")";g(c,f,m.majorStepX,function(c){c=Math.round(b.mapx(c));c!==u&&(a.moveTo(c-0.5,0),a.lineTo(c-0.5,q))});g(e,h,m.majorStepY,function(c){c=Math.round(b.mapy(c));c!==q&&(a.moveTo(0,c-0.5),
a.lineTo(u,c-0.5))});a.stroke()};b.drawAxes=function(a,b,c){var d=b.settings.axisLineOffset,e=b.settings.axisOpacity.toString(),f="rgba(127,205,230,"+e+")",e="rgba(0,0,0,"+e+")",h=Math.round(b.mapx(0))-d,d=Math.round(b.mapy(0))-d,g=b.screen.height,m=b.screen.width;a.lineWidth=b.settings.axisLineWidth*("y"===c?3:1);a.strokeStyle="y"===c?f:e;a.beginPath();a.moveTo(h,0);a.lineTo(h,g);a.stroke();a.lineWidth=b.settings.axisLineWidth*("x"===c?3:1);a.strokeStyle="x"===c?f:e;a.beginPath();a.moveTo(0,d);a.lineTo(m,
d);a.stroke()};b.drawPolarLabels=function(b,c){function e(a,b,d){a=Math.sqrt(a*a-b*b);D<=a&&a<=F&&d.push([c.mapx(b),c.mapy(a)]);D<=-a&&-a<=F&&d.push([c.mapx(b),c.mapy(-a)])}function f(a,b,d){a=Math.sqrt(a*a-b*b);r<=a&&a<=C&&d.push([c.mapx(a),c.mapy(b)]);r<=-a&&-a<=C&&d.push([c.mapx(-a),c.mapy(b)])}var h=d(c),x=c.viewport.largestR(),q=c.viewport.smallestR(),r=c.viewport.xmin,C=c.viewport.xmax,D=c.viewport.ymin,F=c.viewport.ymax,H=c.screen.width,G=c.screen.height,I=c.settings.labelHangingColor,A=c.settings.labelNormalColor,
K=c.settings.labelSize;b.textAlign="center";b.textBaseline="middle";b.font=K.toString()+"px Arial";var O=c.mapx(0),J=c.mapy(0),N=0>=D&&0<=F,L=0>=r&&0<=C,V="";if(!N&&!L){var W=Math.abs(O),P=Math.abs(O-H),E=Math.abs(J),M=Math.abs(J-G),Q;W<=P?(Q="left",P=W):Q="right";E<=M?W="top":(W="bottom",E=M);V=P<=E?Q:W}g(h.majorStepX,x,h.majorStepX,function(d){var h=[],g=v.value(d,x),n=a(b,K,g);L&&D<=d&&d<=F&&h.push([O-n.main-n.superscript-5,c.mapy(d)]);L&&D<=-d&&-d<=F&&h.push([O-n.main-n.superscript-5,c.mapy(-d)]);
N&&r<=d&&d<=C&&h.push([c.mapx(d),J+0.6*K+3]);N&&r<=-d&&-d<=C&&h.push([c.mapx(-d),J+0.6*K+3]);switch(V){case "top":f(d,F,h);break;case "bottom":f(d,D,h);break;case "left":e(d,r,h);break;case "right":e(d,C,h)}for(d=0;d<h.length;d++){var p=u(h[d][0],3+n.main,H-3-n-n.superscript),q=u(h[d][1],3+K,G-3-K);b.fillStyle=A;m(b,K,g,p,q,n)}});Q=Math.ceil(q/h.majorStepX);var U=Math.ceil((Q+Math.floor(x/h.majorStepX))/2)*h.majorStepX;g(0,359,0<q?15:30,function(a){var d;d=c.settings.degreeMode?a.toString()+"°":v.value(a*
Math.PI/180,2*Math.PI).string;var e=b.measureText(d).width/2,f=U/1.05,h=f*Math.cos(a*Math.PI/180),f=f*Math.sin(a*Math.PI/180);if(!(h<r||h>C||f<D||f>F)){h=c.mapx(h);f=c.mapy(f);if(0===a||180===a)f-=K;else if(90===a||270===a)h+=e+3;a=u(h,3+e,H-3-e);e=u(f,3+K,G-3-K);b.fillStyle=I;b.font=K.toString()+"px Arial";b.fillText(d,a,e)}})};var a=function(a,b,c){var d=0,e;c.superscript&&"0"!==c.string?(a.font=b.toString()+"px Arial",e=a.measureText(c.mantissa).width/2,a.font=Math.round(0.8*b).toString()+"px Arial",
d=a.measureText(c.superscript).width):(a.font=b.toString()+"px Arial",e=a.measureText(c.string).width/2);return{main:e,superscript:d}},m=function(a,b,c,d,e,f){c.superscript?(a.font=b.toString()+"px Arial",a.fillText(c.mantissa,d,e+Math.round(b/5)),a.font=Math.round(0.8*b).toString()+"px Arial",a.fillText(c.superscript,d+f.main+f.superscript/2,e-Math.round(b/4))):(a.font=b.toString()+"px Arial",a.fillText(c.string,d,e))};b.drawCartesianLabels=function(b,c){var e=c.viewport.xmin,f=c.viewport.xmax,h=
c.viewport.ymin,x=c.viewport.ymax,q=d(c),r=c.screen.width,C=c.screen.height,D=c.settings.labelHangingColor,F=c.settings.labelNormalColor,H=c.mapx(0),G=c.mapy(0),I=c.settings.labelSize;b.textAlign="center";b.textBaseline="middle";b.font=I.toString()+"px Arial";var A=(b.measureText("-1").width-b.measureText("1").width)/2;g(e,f,q.majorStepX,function(d){var h=v.value(d,f-e),g=a(b,I,h),n=c.mapx(d),p=G+0.6*I+3;0>d&&(n-=A);d=u(n,3+g.main,r-3-g.main-g.superscript);n=u(p,3+I,C-3-I);b.fillStyle=p===n?F:D;"0"===
h.string?(b.fillStyle=F,b.fillText("0",H-5-g.main,p)):m(b,I,h,d,n,g)});g(h,x,q.majorStepY,function(d){var e=v.value(d,x-h),f=a(b,I,e),g=c.mapy(d);d=H-3-f.main-f.superscript;var s=u(d,3+f.main,r-3-f.main-f.superscript),g=u(g,3+I,C-3-I);b.fillStyle=d===s?F:D;"0"!==e.string&&m(b,I,e,s,g,f)})};var c={base:10,major:[1,2,5],minor:[4,4,5]},f={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},e={base:2,major:[Math.PI/3],minor:[3]},h=function(a,b){for(var c,d=Infinity,e,f,h=0;h<b.major.length;h++)c=
b.major[h],f=Math.ceil(Math.log(a/c)/Math.log(b.base)),c*=Math.pow(b.base,f),c<d&&(d=c,e=d/b.minor[h]);return{major:d,minor:e}},d=function(a){var b=a.screen.width,d=a.screen.height,g=a.viewport.xmax-a.viewport.xmin,m=a.viewport.ymax-a.viewport.ymin,u=g/(b/a.settings.pixelsPerLabel+1-1),p=m/(d/a.settings.pixelsPerLabel+1-1),q,r;q=!a.settings.xAxisPiLabels||a.settings.polarMode?c:1<=u?f:e;u=h(u,q);r=!a.settings.yAxisPiLabels||a.settings.polarMode?c:1<=p?f:e;p=h(p,r);q===r&&(a=a.settings.polarMode?Infinity:
2,b=b/g/(d/m),1<=b&&b<=a?u=p:1>=b&&b>=1/a&&(p=u));return{majorStepX:u.major,minorStepX:u.minor,majorStepY:p.major,minorStepY:p.minor}}})});
define("graphing/poi",[],function(){function b(b,r,v,q,p){this.x=b;this.y=r;this.type=v;this.sketch=q;this.branch=p}b.prototype.getGraphMode=function(){return this.sketch.branches[this.branch].graphMode};b.prototype.getCompiledFunction=function(){return this.sketch.branches[this.branch].compiled.fn};b.prototype.isOpen=function(){return 0<=this.sketch.openPOI.indexOf(this)};b.prototype.close=function(){var b=this.sketch.openPOI.indexOf(this);if(-1===b)return!1;this.sketch.openPOI.splice(b,1);return!0};
b.prototype.open=function(){if(this.isOpen())return!1;this.sketch.openPOI.push(this);return!0};return b});
define("graphing/graphsketch",["require","math/poi","./poi","math/distance","graphing/graphmode"],function(b){function g(b,a){this.color="#000000";this.style="normal";this.visible=!0;this.showHighlight=this.showPOI=!1;this.openPOI=[];this.hiddenOpenPOI=[];this.id=b;this.branches=void 0!==a?a:[]}var r=b("math/poi"),v=b("./poi"),q=b("math/distance"),p=b("graphing/graphmode");g.prototype.getPOI=function(){if(this.__cachedPOI)return this.__cachedPOI;var b,a;this.__cachedPOI=[];for(var g=0;g<this.branches.length;g++)b=
this.branches[g],a=b.graphMode,b=b.poi,a===p.X||a===p.Y?(this._pushPOI(b.zeros,g,r.ZERO),this._pushPOI(b.intercept,g,r.INTERCEPT),this._pushPOI(b.extrema,g,r.EXTREMUM),this._pushPOI(b.intersections,g,r.INTERSECTION)):a!==p.XYPOINT&&a!==p.XYPOINT_MOVABLE||this._pushPOI(b.defined,g,r.DEFINITION);return this.__cachedPOI};g.prototype._pushPOI=function(b,a,g){if(b)for(var c=0,f=b.x.length;c<f;c++){var e=new v;e.type=g;e.x=b.x[c];e.y=b.y[c];e.branch=a;e.sketch=this;b.intersects&&(e.intersects=b.intersects[c]);
this.__cachedPOI.push(e)}};g.prototype.updateIntersections=function(b){for(var a=0,g=this.branches.length;a<g;a++)this.branches[a].poi.intersections=b[a];this.__cachedPOI=void 0;this.getPOI();this.reopenPOIFrom(this)};g.prototype.updateFrom=function(b){b&&(this.visible=!0,(b.openPOI.length||b.hiddenOpenPOI.length)&&this.reopenPOIFrom(b),this.showPOI=b.showPOI,this.showHighlight=b.showHighlight)};g.prototype.reopenPOIFrom=function(b){var a=[],g=[],c,f,e,h,d,k,l,p={},s={};c=this.getPOI();for(k=0;k<
c.length;k++)f=c[k],e=f.type,p[e]?p[e].push(f):p[e]=[f];c=b.openPOI.concat(b.hiddenOpenPOI);for(k=0;k<c.length;k++)f=c[k],e=f.type,s[e]?s[e].push(f):s[e]=[f];for(var n in s)for(d=s[n],b=p[n]||[],k=d.length-1;0<=k;k--){e=d[k];c=Infinity;f=-1;for(l=b.length-1;0<=l;l--)(h=b[l])&&h.intersects===e.intersects&&(h=q.hypot(e.x-h.x,e.y-h.y),h<c&&(f=l,c=h));-1!=f?(a.push(b[f]),b[f]=null):g.push(e)}this.openPOI=a;this.hiddenOpenPOI=g};return g});
define("graphing/tracelayer",["require","pjs","./domlayer","./poi","./poilabelslayer"],function(b){var g=b("pjs"),r=b("./domlayer"),v=b("./poi"),q=b("./poilabelslayer");return g(r,function(b,g){b.init=function(){g.init.apply(this,arguments);this.$.addClass("trace-layer")};b.redraw=function(a){this.resize(a.screen.width,a.screen.height);this.dom_node.find(".tracept").remove();var b=this.traceInfo?this.traceInfo.pt:null;if(b){var c=a.mapx(b.x),f=a.mapy(b.y);-20<c&&-20<f&&c<a.screen.width+20&&f<a.screen.height+
20&&(b=new v(b.x,b.y,v.ZERO,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch),a=q.createSinglePOI(b,a.viewport),a.css({left:c+"px",top:f+"px"}),a.addClass("temp"),a.removeClass("poi"),a.find(".pt").css("background-color",b.sketch.color),a.find(".pt").css("border-color",b.sketch.color),this.dom_node.append(a))}}})});
define("graphing/movablepointslayer",["require","pjs","jquery","./domlayer","graphing/graphmode"],function(b){var g=b("pjs"),r=b("jquery"),v=b("./domlayer"),q=b("graphing/graphmode"),p={};return g(v,function(b,a){var g=r("body");b.redraw=function(a,b){this.resize(a.screen.width,a.screen.height);var e=b[this.hoveredSketchId];e||(this.hoveredSketchId=null);var h=b[this.pressedSketchId];h||(this.pressedSketchId=null);var d=[],k;for(k in p)p[k].shouldGarbageCollect=!0;for(k in b){var l=b[k];if(l.visible){var u;
u=l;var s=this.dom_node,n=a,x=l===e,l=l===h;if(u.branches&&1===u.branches.length&&u.branches[0].graphMode===q.XYPOINT_MOVABLE){var B=u.getPOI()[0],v=n.mapx(B.x),C=n.mapy(B.y);if(!(u.id in p)){var D=r("<div class='movable-point'><div class='background'></div><div class='dot'></div></div>");s.append(D);p[u.id]={$:D,shouldGarbageCollect:!0}}s=p[u.id].$;-20<v&&-20<C&&v<n.screen.width+20&&C<n.screen.height+20&&(s.css({left:v+"px",top:C+"px",backgroundColor:u.color}),s.toggleClass("highlight",!!u.showHighlight),
s.toggleClass("simulate-hovered",!!x),s.toggleClass("simulate-active",!!l),p[u.id].shouldGarbageCollect=!1);u=B}else u=void 0;u&&d.push(u)}}for(k in p)p[k].shouldGarbageCollect&&(p[k].$.remove(),delete p[k]);e&&e.visible?g.hasClass("mouse-over-movable-point")||g.addClass("mouse-over-movable-point"):g.hasClass("mouse-over-movable-point")&&g.removeClass("mouse-over-movable-point");h&&h.visible?g.hasClass("dragging-movable-point")||g.addClass("dragging-movable-point"):g.hasClass("dragging-movable-point")&&
g.removeClass("dragging-movable-point");this.savedPOI=d};b.getDrawnPOI=function(){return this.savedPOI}})});
define("graphing/grapher","require jquery lib/browser ./viewport ./viewporttransformation ./screen ./poidotslayer ./poilabelslayer ./gridlayer ./graphsketch ./canvaslayer ./graphslayer ./projection ./tracelayer ./movablepointslayer math/poi".split(" "),function(b){function g(b,d){this.container=b;this.$=r(b);this.viewport=new q;this.screen=new u(this.$.width(),this.$.height());this.settings=d;this.$.css("overflow","hidden");this.gridLayer=c(this.screen.width,this.screen.height);this.$.append(this.gridLayer.$);
this.poiDotsLayer=a(this.screen.width,this.screen.height);this.$.append(this.poiDotsLayer.$);this.graphsLayer=h(this.screen.width,this.screen.height);this.$.append(this.graphsLayer.$);this.$.append('<div class="screenshot"></div>');this.movablePointsLayer=l(this.screen.width,this.screen.height);this.movablePointsLayer.$.css("z-index","0");this.$.append(this.movablePointsLayer.$);this.poiLabelsLayer=m(this.screen.width,this.screen.height);this.poiLabelsLayer.$.css("z-index","0");this.$.append(this.poiLabelsLayer.$);
this.traceLayer=k(this.screen.width,this.screen.height);this.traceLayer.$.css("z-index","0");this.$.append(this.traceLayer.$);v.IS_IE9&&this.traceLayer.$.addClass("transparent-bg");this.transformation=new p;this.scaleAxis=void 0;this.__transient=!1;this.graphSketches={};this.__sketchOrder=[];this.selectedId=null;return this}var r=b("jquery"),v=b("lib/browser"),q=b("./viewport"),p=b("./viewporttransformation"),u=b("./screen"),a=b("./poidotslayer"),m=b("./poilabelslayer"),c=b("./gridlayer"),f=b("./graphsketch"),
e=b("./canvaslayer"),h=b("./graphslayer"),d=b("./projection"),k=b("./tracelayer"),l=b("./movablepointslayer"),y=b("math/poi");g.prototype.setSketchOrder=function(a){this.__sketchOrder=a;this.redrawGraphsLayer()};g.prototype.clear=function(){this.graphSketches={}};g.prototype.getGraphSketch=function(a){return a in this.graphSketches?this.graphSketches[a]:null};g.prototype.addGraphSketch=function(a){this.graphSketches[a.id]=a};g.prototype.removeGraphSketch=function(a){delete this.graphSketches[a]};
g.prototype.createProjection=function(){var a=new d(this.screen,this.viewport,this.settings);return this.isInTransientState()?this.transformation.transformProjection(a):a};g.prototype.computeDefaultViewport=function(){var a=new q(-10,10,-10,10);a.squareYAxis(this.screen);a.round(this.screen);return a};g.prototype.updateScreenSize=function(a,b){if(!(0>=a||0>=b)){if(this.screen.width===a&&this.screen.height===b)return!1;this.$.width(a);this.$.height(b);this.screen.width=a;this.screen.height=b;return!0}};
g.prototype.beginTransientState=function(){if(!this.isInTransientState()){var a=this.createProjection();this.graphsLayer.saveUnscaledCanvas(a);this.__transient=!0}};g.prototype.endTransientState=function(){if(this.isInTransientState()){var a=this.createProjection();this.viewport=a.viewport;this.viewport.round(a.screen);this.settings.setProperty("squareAxes",this.viewport.isSquare(a.screen));this.transformation=new p;this.graphsLayer.releaseUnscaledCanvas();this.__transient=!1}};g.prototype.isInTransientState=
function(){return this.__transient};g.prototype.hide=function(a){if(a=this.getGraphSketch(a))a.visible=!1};g.prototype.select=function(a){var b=this.getGraphSketch(this.selectedId);b&&(b.showPOI=b.showHighlight=!1);if(b=this.getGraphSketch(a))b.showPOI=b.showHighlight=!0;this.selectedId=a};g.prototype.updateSketch=function(a,b){if(!this.isInTransientState()){var c=this.getGraphSketch(a);if(!b.length)return this.hide(a);var d=new f(a,b);d.color=b[0].color;d.style=b[0].style;d.updateFrom(c);d.showPOI=
d.showHighlight=String(a)===String(this.selectedId);this.addGraphSketch(d)}};g.prototype.updateIntersections=function(a,b){var c=this.getGraphSketch(a);c&&c.updateIntersections(b)};g.prototype.redrawAllLayers=function(){this.cancelRedrawSlowly();this.redrawGridLayer();this.redrawContentLayers()};g.prototype.redrawContentLayers=function(){this.cancelRedrawSlowly();this.redrawGraphsLayer();this.redrawPOILayer();this.redrawTraceLayer();this.redrawMovablePointsLayer()};g.prototype.cancelRedrawSlowly=
function(){clearTimeout(this.redraw_slowly_timeout);this.redraw_slowly_timeout=null};g.prototype.redrawSlowly=function(a,b,c){"undefined"===typeof a&&(a=30);"undefined"===typeof b&&(b=1);"undefined"===typeof c&&(this.cancelRedrawSlowly(),c=0);this.redrawGridLayer();var d={},e=!1,f=0,h;for(h in this.graphSketches){if(f++>c){e=!0;break}d[h]=this.graphSketches[h]}this.graphsLayer.redraw(this.createProjection(),d,this.__sketchOrder);if(e){var g=this;this.redraw_slowly_timeout=setTimeout(function(){g.redrawSlowly(a,
b,c+b)},a)}else this.redrawPOILayer(),this.redrawTraceLayer(),this.redrawMovablePointsLayer(),this.redraw_slowly_timeout=null};g.prototype.redrawGridLayer=function(){this.screen.height&&this.screen.width&&this.gridLayer.redraw(this.createProjection(),this.scaleAxis)};g.prototype.redrawGraphsLayer=function(){this.screen.height&&this.screen.width&&(this.isInTransientState()?this.graphsLayer.paintScaledCanvas(this.transformation):this.graphsLayer.redraw(this.createProjection(),this.graphSketches,this.__sketchOrder))};
g.prototype.redrawMovablePointsLayer=function(){this.screen.height&&this.screen.width&&this.movablePointsLayer.redraw(this.createProjection(),this.graphSketches)};g.prototype.redrawPOILayer=function(){this.screen.height&&this.screen.width&&(this.poiDotsLayer.redraw(this.createProjection(),this.graphSketches),this.poiLabelsLayer.redraw(this.createProjection(),this.graphSketches))};g.prototype.redrawTraceLayer=function(){this.screen.height&&this.screen.width&&this.traceLayer.redraw(this.createProjection())};
g.prototype.screenshot=function(){var a=this.screen,b=e(a.width,a.height),c=b.ctx,d=this.createProjection();c.fillStyle="white";c.fillRect(0,0,a.width,a.height);this.settings.takingScreenshot=!0;this.gridLayer.redrawToCtx(c,d);this.graphsLayer.redrawToCtx(c,d,this.graphSketches);this.settings.takingScreenshot=!1;return b.canvas_node.get(0).toDataURL("image/png")};g.prototype.thumbnail=function(a,b){var c=new u(a,b),f=e(a,b),h=f.ctx,g=this.settings.clone();g.setProperty("showLabels",!1);var k=this.viewport.clone();
k.isSquare(this.screen)&&k.squareCrop(c);g=new d(c,k,g);h.fillStyle="white";h.fillRect(0,0,c.width,c.height);this.settings.takingScreenshot=!0;this.gridLayer.redrawToCtx(h,g);this.graphsLayer.redrawToCtx(h,g,this.graphSketches);this.settings.takingScreenshot=!1;return f.canvas_node.get(0).toDataURL("image/png")};g.prototype.getOpenIntersectionIds=function(){var a,b,c={},d;for(d in this.graphSketches)if(this.graphSketches.hasOwnProperty(d)){a=this.graphSketches[d].openPOI;for(b=a.length-1;0<=b;b--)a[b].type===
y.INTERSECTION&&(c[d]=!0);a=this.graphSketches[d].hiddenOpenPOI;for(b=a.length-1;0<=b;b--)a[b].type===y.INTERSECTION&&(c[d]=!0)}return c};return g});
define("graphing/poicontroller",["require","jquery","math/distance","lib/rounding","graphing/graphmode"],function(b){function g(b){this.manager=b;this.$=this.manager.$;this.triggerMovePoint=function(a){};this.triggerStartTracingBranch=function(){};this.triggerEmptyTouchStart=function(){};this.triggerStartMovingPoint=function(){};this.triggerStopMovingPoint=function(){};this.triggerPointSelected=function(){};this.addTouchEventHandlers();this.addHoverEventHandler()}var r=b("jquery"),v=b("math/distance"),
q=b("lib/rounding"),p=b("graphing/graphmode");g.prototype.getToleranceByDevice=function(b){return"touch"===b?20:10};g.prototype.addHoverEventHandler=function(){r(document).on("tapmove",function(b){if("touch"!==b.device){var a=this.getMouseRelativeToGrapher(b);b=this.getToleranceByDevice(b.device);var g=this.getPointUnderPoint(a,b),c=null,f=null;g?f=g.sketch.branches[g.branch].graphMode===p.XYPOINT_MOVABLE?g.sketch.id:null:c=this.getPOIUnderPoint(a,b);c!=this.manager.poiLabelsLayer.hoveredPOI&&(this.manager.poiLabelsLayer.hoveredPOI=
c,this.manager.redrawPOILayer());f!=this.manager.movablePointsLayer.hoveredSketchId&&(this.manager.movablePointsLayer.hoveredSketchId=f,this.manager.redrawMovablePointsLayer())}}.bind(this))};g.prototype.addTouchEventHandlers=function(){this.$.on("dblclick",function(b){var a=this.getMouseRelativeToGrapher(b),g=this.getToleranceByDevice(b.device);if(this.getPointUnderPoint(a,g)||this.getPOIUnderPoint(a,g)||this.getBranchInfoUnderPoint(a,g))b.preventDefault(),b.handle()}.bind(this));this.$.on("tapstart",
function(b){var a=this.getMouseRelativeToGrapher(b),g=this.getToleranceByDevice(b.device);r(document.activeElement).blur();var c=this.getPointUnderPoint(a,g);c?(this.triggerStartMovingPoint(c.id),this.startMovingPoint(c),b.handle()):this.togglePOIUnderPoint(a,g)?b.handle():(g=this.getBranchInfoUnderPoint(a,g))?(this.triggerStartTracingBranch(g.id),this.startTracingBranch(g,a),b.handle()):this.triggerEmptyTouchStart()}.bind(this))};g.prototype.getMouseRelativeToGrapher=function(b){var a=this.$.offset();
b=b.touches?b.touches[0]:b;return{x:b.pageX-a.left,y:b.pageY-a.top}};g.prototype.getPointUnderPoint=function(b,a){var g=a,c=null,f=this.manager.graphSketches,e=this.manager.createProjection(),h;for(h in f){var d=f[h];if(d&&d.visible){var k=d.branches;if(k&&k.length)for(var l=0;l<k.length;l++){var q=k[l].graphMode===p.XYPOINT_MOVABLE;if(q||k[l].graphMode===p.XYPOINT)for(var s=k[l].segments[0],n=0;n<s.length;n++){var x=s[n],r=e.map_pt({x:x[0],y:x[1]}),r=v.hypot(r.x-b.x,r.y-b.y);if(r<g||q&&r<a)g=r,c=
{id:h,branch:l,sketch:d,x:x[0],y:x[1]}}}}}return c};g.prototype.getPOIUnderPoint=function(b,a){var g=this.manager.createProjection(),c=this.manager.poiLabelsLayer.getDrawnPOI(),c=c.concat(this.manager.poiDotsLayer.getDrawnPOI());if(!c.length)return null;var f=c[0],e=g.map_pt(f),h=a,d=null,e=v.hypot(e.x-b.x,e.y-b.y);e<h&&(d=f,h=e);for(var k=1;k<c.length;k++)f=c[k],e=g.map_pt(f),e=v.hypot(e.x-b.x,e.y-b.y),e<h&&(h=e,d=f);return d};g.prototype.getAllPOIAtSameLocation=function(b){if(!b)return[];var a=
[],g=this.manager.poiLabelsLayer.getDrawnPOI(),c=this.manager.poiDotsLayer.getDrawnPOI(),g=g.concat(c);if(!g.length)return[];for(c=0;c<g.length;c++){var f=g[c];f.x===b.x&&f.y===b.y&&a.push(f)}return a};g.prototype.togglePOIUnderPoint=function(b,a){var g=this.getPOIUnderPoint(b,a),g=this.getAllPOIAtSameLocation(g);if(g.length){for(var c=g[0].isOpen(),f=0;f<g.length;f++)c?(g[f].close(),this.manager.poiLabelsLayer.hoveredPOI=null):g[f].open();this.manager.redrawPOILayer();return!0}return!1};g.prototype.getBranchInfoUnderPoint=
function(b,a){var m=null,c=a,f=this.manager.createProjection(),e=f.reverse_map_pt(b),h;for(h in this.manager.graphSketches){var d=this.manager.graphSketches[h];if(d&&d.visible){var k=d.branches;if(k&&k.length)for(var l=0;l<k.length;l++){var p=g.calculateDistanceFromBranch(k[l],e,f);p<c&&(c=p,m={id:h,branch:l,sketch:d})}}}return m};g.calculateDistanceFromBranch=function(b,a,m){b=g.getBranchesClosestPoint(b,a,m);return!b||isNaN(b.x)||isNaN(b.y)?Infinity:v.hypot((a.x-b.x)*(m.screen.width/(m.viewport.xmax-
m.viewport.xmin)),(a.y-b.y)*(m.screen.height/(m.viewport.ymax-m.viewport.ymin)))};g.getBranchesClosestPoint=function(b,a,m){if(b&&b.compiled&&b.compiled.fn){var c=m.screen.width/(m.viewport.xmax-m.viewport.xmin);m=m.screen.height/(m.viewport.ymax-m.viewport.ymin);var f=a.x,e=a.y;switch(b.graphMode){case p.Y:break;case p.X:a=f;f=e;e=a;a=c;c=m;m=a;break;default:return null}a=b.compiled.fn;var h=f,d=h-3/c,k=h+3/c,l=e,r=a(d),s=a(k);isNaN(r)||isNaN(s)?f=h:(f=v.closestPointOnSegment(f,e,d,r,k,s),f=f[0]);
e=g.fillHole(a,f,c,m,h,l);e=v.hypot((f-h)*c,(e-l)*m);10<e&&(e=Math.min(1,(e-10)/10),f=h*e+f*(1-e));f=q.shortestDecimalBetween(f-1/(2*c),f+1/(2*c));e=g.fillHole(a,f,c,m,h,l);switch(b.graphMode){case p.Y:return{x:f,y:e};case p.X:return{y:f,x:e}}}};g.prototype.startMovingPoint=function(b){var a=!1,g=b.x,c=b.y,f=b.id;this.manager.movablePointsLayer.pressedSketchId=b.sketch.id;this.manager.redrawMovablePointsLayer();r(document).on("tapmove.movepoint",function(b){a=!0;var c=this.manager.createProjection(),
d=this.getMouseRelativeToGrapher(b);b=c.reverse_map_pt({x:d.x-0.5,y:d.y-0.5});c=c.reverse_map_pt({x:d.x+0.5,y:d.y+0.5});this.triggerMovePoint(f,[q.shortestDecimalBetween(b.x,c.x),q.shortestDecimalBetween(b.y,c.y)])}.bind(this));r(document).on("tapend.movepoint tapcancel.movepoint",function(b){r(document).off(".movepoint");this.manager.movablePointsLayer.pressedSketchId=null;this.manager.redrawMovablePointsLayer();this.triggerStopMovingPoint(f);if(!a){var h=this.manager.createProjection();b=this.getToleranceByDevice(b.device);
var h=h.map_pt({x:g,y:c}),d=this.manager.getGraphSketch(f),k=d.openPOI.length;this.togglePOIUnderPoint(h,b);d.openPOI.length>k&&this.triggerPointSelected(f)}}.bind(this))};g.prototype.startTracingBranch=function(b,a){this.last_screen_pt=a;var m=this.manager.createProjection(),c=m.reverse_map_pt(a),m=g.getBranchesClosestPoint(b.sketch.branches[b.branch],c,m);this.manager.traceLayer.traceInfo={pt:m,branchInfo:b};this.manager.redrawTraceLayer();r(document).on("tapmove.tracing",this.handleTraceUpdate.bind(this));
r(document).on("tapend.tracing tapcancel.tracing",this.stopTracingBranch.bind(this))};g.prototype.stopTracingBranch=function(b){(b=this.manager.poiLabelsLayer.hoveredPOI)&&!b.isOpen()&&(b.open(),this.manager.redrawPOILayer());this.manager.traceLayer.traceInfo=null;this.manager.redrawTraceLayer();r(document).off(".tracing")};g.prototype.handleTraceUpdate=function(b){if(this.manager.traceLayer.traceInfo){var a=this.manager.createProjection();b?this.last_screen_pt=b=this.getMouseRelativeToGrapher(b):
b=this.last_screen_pt;b=a.reverse_map_pt(b);var m=Infinity,c=-1,f=this.manager.traceLayer.traceInfo;f.branchInfo.sketch=this.manager.graphSketches[f.branchInfo.sketch.id];for(var f=f.branchInfo.sketch.branches,e=0;e<f.length;e++){var h=g.calculateDistanceFromBranch(f[e],b,a);h<m&&(c=e,m=h)}a=(m=f[c])?g.getBranchesClosestPoint(m,b,a):null;this.manager.traceLayer.traceInfo.pt=a;this.manager.redrawTraceLayer()}};g.fillHole=function(b,a,g,c,f,e){var h=b(a);if(isFinite(h))return h;var h=a-1E-11,d=a+1E-11;
a=b(h);b=b(d);if(isNaN(a)&&isNaN(b))return NaN;if(isNaN(a))return b;if(isNaN(b))return a;var d=(f-d)*g,k=(e-b)*c;return v.hypot((f-h)*g,(e-a)*c)<v.hypot(d,k)?a:b};return g});define("loadcss!vendor_css/tipsy/tipsy",function(){});
define("tipsy",["require","loadcss!vendor_css/tipsy/tipsy","jquery"],function(b){function g(a,b){this.$element=v(a);this.options=b;this.fixTitle()}function r(){return 0!==u}b("loadcss!vendor_css/tipsy/tipsy");var v=b("jquery"),q=null,p=!1;v(document).on("tap",".tipsy-sticky",function(a){if(p)p=!1;else{a=a.currentTarget;var b=v(a);b.attr("tooltip")||(b=b.find("[tooltip]").filter(':not([tooltip=""])'));if(1===b.length&&"none"!==b.css("display")&&!b.parents().filter(function(){return"none"===v(this).css("display")}).length){var c=
v.extend({},v.fn.tipsy.defaults);c.title="tooltip";c.gravity="nw";q=new g(b[0],c);q.show();q.opener=a}}});v(document).on("tapstart keydown",function(a){if(q){q.hide();var b=q.opener;if("tapstart"===a.type&&v(a.target).closest(b).length)v(document).one("tapend",function(a){v(a.target).closest(b).length&&(p=!0)});q=null}});g.prototype={show:function(){var a=this.getTitle();if(a&&!r()){var b=this.tip();b.find(".tipsy-inner")[this.options.html?"html":"text"](a);b[0].className="tipsy";b.remove().css({top:0,
left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var a=v.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),c,f=b[0].offsetWidth,e=b[0].offsetHeight,g="function"==typeof this.options.gravity?this.options.gravity.call(this.$element[0]):this.options.gravity;switch(g.charAt(0)){case "n":c={top:a.top+a.height+this.options.offset,left:a.left+a.width/2-f/2};break;case "s":c={top:a.top-e-this.options.offset,left:a.left+a.width/
2-f/2};break;case "e":c={top:a.top+a.height/2-e/2,left:a.left-f-this.options.offset};break;case "w":c={top:a.top+a.height/2-e/2,left:a.left+a.width+this.options.offset}}2==g.length&&("w"==g.charAt(1)?c.left=a.left+a.width/2-15:c.left=a.left+a.width/2-f+15);b.css(c).addClass("tipsy-"+g);b.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+g.charAt(0);this.options.className&&b.addClass("function"==typeof this.options.className?this.options.className.call(this.$element[0]):this.options.className);
this.options.fadeIn?b.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity},this.options.fadeIn):b.css({visibility:"visible",opacity:this.options.opacity});this.options.sticky&&b.addClass("sticky");var d=this,k=function(){d.validate();d.validateTimeout=setTimeout(k,100)};k()}},hide:function(){clearTimeout(this.validateTimeout);this.options.fadeOut?this.tip().stop().fadeOut(this.options.fadeOut,function(){v(this).remove()}):this.tip().remove()},fixTitle:function(){var a=
this.$element;(a.attr("title")||"string"!=typeof a.attr("original-title"))&&a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;this.fixTitle();c=this.options;"string"==typeof c.title?a=b.attr("title"==c.title?"original-title":c.title):"function"==typeof c.title&&(a=c.title.call(b[0]));a&&(a=(""+a).replace(/(^\s*|\s*$)/,""));return a||c.fallback},tip:function(){this.$tip||(this.$tip=v('<div class="tipsy"><div class="tipsy-arrow"></div><div class="tipsy-inner"></div></div>'));
return this.$tip},validate:function(){var a=!1;if(this.getTitle())try{for(var b=this.$element[0];b;)if(b===document){a=!0;break}else b=b.parentNode}catch(c){}a||this.hide()}};v.fn.tipsy=function(a){function b(c){var d=v.data(c,"tipsy");d||(d=new g(c,v.fn.tipsy.elementOptions(c,a)),v.data(c,"tipsy",d));return d}function c(c){if(("tipsyshow"!==c.type||c.target===this)&&q!==this){var d=b(this);d.hoverState="in";0===a.delayIn?d.show():(d.fixTitle(),setTimeout(function(){"in"==d.hoverState&&d.show()},
a.delayIn))}}function f(c){if("tipsyhide"!==c.type||c.target===this){var d=b(this);"tapstart"===c.type&&d.options.sticky||(d.hoverState="out",0===a.delayOut?d.hide():setTimeout(function(){"out"==d.hoverState&&d.hide()},a.delayOut))}}if(!0===a)return this.data("tipsy");if("string"==typeof a){var e=this.data("tipsy");if(e)e[a]();return this}a=v.extend({},v.fn.tipsy.defaults,a);a.fadeIn=a.fadeIn||a.fade;a.fadeOut=a.fadeOut||a.fade;a.live||this.each(function(){b(this)});if("manual"!=a.trigger){var e=
"hover"==a.trigger?"tipsyshow":"focus",h="hover"==a.trigger?"tipsyhide tapstart tapend tapcancel":"blur";if(a.live&&a.delegate)this.on(e,a.delegate,c).on(h,a.delegate,f);else{var d=a.live?"on":"bind";this[d](e,c)[d](h,f)}}return this};v.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fadeIn:!1,fadeOut:!1,fallback:"",gravity:"n",html:!1,live:!0,offset:0,opacity:1,title:"title",trigger:"hover"};v.fn.tipsy.elementOptions=function(a,b){b=v.extend({},b);var c=v(a).attr("tipsy-gravity");
c&&(b.gravity=c);c=parseInt(v(a).attr("tipsy-offset"),10);isNaN(c)||(b.offset=c);return b};v.fn.tipsy.autoNS=function(){return v(this).offset().top>v(document).scrollTop()+v(window).height()/2?"s":"n"};v.fn.tipsy.autoWE=function(){return v(this).offset().left>v(document).scrollLeft()+v(window).width()/2?"e":"w"};v.fn.tipsy.autoBounds=function(a,b){return function(){var c=b[0],f=1<b.length?b[1]:!1,e=v(document).scrollTop()+a,g=v(document).scrollLeft()+a,d=v(this);d.offset().top<e&&(c="n");d.offset().left<
g&&(f="w");v(window).width()+v(document).scrollLeft()-d.offset().left<a&&(f="e");v(window).height()+v(document).scrollTop()-d.offset().top<a&&(c="s");return c+(f?f:"")}};v(document).tipsy({title:"tooltip",wait:0,live:!0,delegate:".tipsy-sticky",gravity:"nw",sticky:!0,fade:!1});var u=0;return{isDisabled:r,removeDisableLock:function(){u--},addDisableLock:function(){u++}}});
define("lib/ipad.ghostevents",["require"],function(b){function g(b){v&&(b.stopPropagation(),b.stopImmediatePropagation())}function r(b){v&&(b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation())}var v=!1,q=null,p={isGhostEvent:function(b){return!1}};document.addEventListener("mousedown",function(b){q=document.activeElement;v=p.isGhostEvent(b);g(b)},!0);document.addEventListener("mouseup",g,!0);document.addEventListener("click",function(b){r(b);v&&document.activeElement!==q&&(document.activeElement&&
document.activeElement.blur(),q&&q.focus());v=!1},!0);document.addEventListener("focus",r,!0);document.addEventListener("blur",r,!0);return p});
define("lib/touchtracking",["require","jquery","tipsy","lib/ipad.ghostevents"],function(b){var g=b("jquery");b("tipsy");b("lib/ipad.ghostevents").isGhostEvent=function(a){return v!==r&&!d()||a.target===m||a.target&&g.contains(a.target,m)||m&&g.contains(m,a.target)?!1:!0};var r=1,v=0,q={},p=[],u=0,a=null,m=null,c=null,f=function(a){for(var b=[];a;)b.push(a),a=g(a).parent()[0];return b},e=function(a){m=null;"mousedown"===a.type?(v=2,p=f(a.target)):(v=r,p=f(a.originalEvent.touches[0].target));g(p).addClass("depressed");
g(p).each(function(){var a=g(this);a.data({originalScrollTop:a.scrollTop(),originalScrollLeft:a.scrollLeft()})});q={}},h=function(b){m=null;g(".depressed").removeClass("depressed");g(p).each(function(){var a=g(this),b=a.data("originalScrollTop")-a.scrollTop(),a=a.data("originalScrollLeft")-a.scrollLeft();if(b||a)q.scroll=!0});if(1===q.tapstart&&1===q.tapend&&!q.tapcancel&&!q.scroll)for(var c="mouse"===b.device?b.pageX:b.originalEvent.changedTouches[0].pageX,d="mouse"===b.device?b.pageY:b.originalEvent.changedTouches[0].pageY,
e=!1,f=0;f<p.length&&!e;f++){var h=g(p[f]),k=h.offset();"true"===h.attr("tapboundary")&&(e=!0);if(k){if(c<k.left||d<k.top)continue;if(c>k.left+h.outerWidth())continue;if(d>k.top+h.outerHeight())continue}m=h[0];l("tap",b,m);break}v===r&&(a=setTimeout(function(){clearTimeout(a);u=(new Date).getTime()},1E3));p=[];v=0},d=function(){return a||500>(new Date).getTime()-u},k=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push({identifier:d.identifier,x:d.pageX,y:d.pageY,screenX:d.screenX,screenY:d.screenY,
pageX:d.pageX,pageY:d.pageY,clientX:d.clientX,clientY:d.clientY})}return b},l=function(a,b,d){void 0===q[a.toLowerCase()]?q[a.toLowerCase()]=1:q[a.toLowerCase()]++;var e=g.event.fix(b.originalEvent);e.type=a;e.device=v===r?"touch":"mouse";e.touches=k(b.originalEvent.touches);e.changedTouches=k(b.originalEvent.changedTouches);e.target=d?d:b.target;var f=0<q.longhold;e.wasLongheld=function(){return f};clearTimeout(c);"tapstart"===e.type&&1===e.touches.length&&(c=setTimeout(function(){l("longhold",b,
d)},500));g(e.target).trigger(e)},y=function(a){for(var b=p,c=!!p.length,d=g.makeArray(g(".hovered")),e=[],f=[],h=[];a&&a!==document;)c&&-1===b.indexOf(a)||(-1===d.indexOf(a)&&h.push(a),e.push(a)),a=g(a).parent()[0];for(b=0;b<d.length;b++)a=d[b],-1===e.indexOf(a)&&f.push(a);g(f).removeClass("hovered").trigger("tipsyhide");g(h).addClass("hovered").trigger("tipsyshow")};g(document).on("touchstart",function(a){2!==v&&(0===v&&e(a),y(null),l("tapstart",a))});g(document).on("touchmove",function(a){v===
r&&l("tapmove",a)});g(document).on("touchcancel",function(a){v===r&&(l("tapcancel",a),0===a.originalEvent.touches.length&&h(a))});g(document).on("touchend",function(a){v===r&&(l("tapend",a),0===a.originalEvent.touches.length&&h(a))});g(document).on("mousedown",function(a){1!==a.button&&2!==a.button&&(v===r||d()?g(a.target).is("input, textarea, select")||a.preventDefault():(e(a),a.originalEvent.touches=[a],a.originalEvent.changedTouches=[a],l("tapstart",a)))});g(document).ready(function(){g(document).on("mousedown",
function(a){var b=!!g(a.target).closest(".do-not-blur").length,c=!!g(a.target).closest(".do-blur").length;b&&!c&&a.preventDefault();a=window.getSelection();1===a.rangeCount&&(b=a.getRangeAt(0),b.startContainer===b.endContainer&&g(b.startContainer).closest(".text-selectable").length&&a.removeAllRanges())})});g(document).on("mouseleave",function(a){0===v&&(d()||y(null))});g(document).on("mousemove",function(a){1===a.button||2===a.button||v===r||d()||(y(a.target),a.originalEvent.touches=[a],a.originalEvent.changedTouches=
[a],l("tapmove",a))});g(document).on("mouseup",function(a){1!==a.button&&2!==a.button&&2===v&&(a.originalEvent.touches=[],a.originalEvent.changedTouches=[a],l("tapend",a),h(a))});return{isTapActive:function(){return 0!==v}}});
(function(b){b.Event.prototype.wasHandled=function(g){g=g?g:"_*_";var r=this.originalEvent;if((r=r&&r.handledBy)&&r[g])return!0;if("_*_"!==g)return!1;g=b(this.target).closest("[handleEvent]");return g.length&&g[0]!==this.currentTarget?"false"!==g.attr("handleEvent"):!1};b.Event.prototype.handle=function(b){var r=this.originalEvent;if(r){var v=r.handledBy;v||(v=r.handledBy={});v[b?b:"_*_"]=!0}}})(jQuery);define("lib/jquery.handleevent",function(){});
(function(b){var g=navigator.userAgent.toLowerCase();b.browser.chrome=/chrome/.test(g)})(jQuery);
(function(b){function g(g){var q=g||window.event,p=[].slice.call(arguments,1),u=0,a=0,m=0;g=b.event.fix(q);g.type="mousewheel";g.originalEvent?g.originalEvent.wheelDelta?u=g.originalEvent.wheelDelta/120:g.originalEvent.detail&&(u=-g.originalEvent.detail/3):g.wheelDelta?u=g.wheelDelta/120:g.detail&&(u=-g.detail/3);m=u;void 0!==q.axis&&q.axis===q.HORIZONTAL_AXIS&&(m=0,a=-1*u);var c=1;if(b.browser.msie||b.browser.webkit&&!b.browser.chrome)c=40;void 0!==q.wheelDeltaY&&(m=q.wheelDeltaY/120/c);void 0!==
q.wheelDeltaX&&(a=-1*q.wheelDeltaX/120/c);0<u?u=1:0>u&&(u=-1);p.unshift(g,u,a,m);return b.event.handle.apply(this,p)}var r=["DOMMouseScroll","mousewheel"];b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=r.length;b;)this.addEventListener(r[--b],g,!1);else this.onmousewheel=g},teardown:function(){if(this.removeEventListener)for(var b=r.length;b;)this.removeEventListener(r[--b],g,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",
b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(jQuery);define("vendor/jquery.mousewheel",function(){});
define("graphing/graphcontroller","require jquery pjs ./viewport ./viewporttransformation math/distance ./constants config lib/touchtracking lib/jquery.handleevent vendor/jquery.mousewheel".split(" "),function(b){var g=b("jquery"),r=b("pjs"),v=b("./viewport"),q=b("./viewporttransformation"),p=b("math/distance"),u=b("./constants"),a=b("config");b("lib/touchtracking");b("lib/jquery.handleevent");b("vendor/jquery.mousewheel");return r(function(b){b.init=function(a){this.manager=a;this.$=this.manager.$;
this.triggerViewportStable=function(){};this.$animation=g("<div></div>");this.addMouseWheelEventHandler();this.addTouchEventHandler()};b.getViewport=function(){return this.manager.viewport.clone()};b.setViewport=function(a){a.isValid()&&(!this.manager.isInTransientState()&&a.equals(this.manager.viewport)?this.triggerViewportStable():(this.manager.viewport=a.clone(),this.endTransientState()))};b.setTransformation=function(a){this.manager.beginTransientState();this.manager.transformation=a;this.manager.redrawAllLayers();
clearTimeout(this.endTransientTimeout);this.endTransientTimeout=setTimeout(this.endTransientState.bind(this),250)};b.endTransientState=function(){clearTimeout(this.endTransientTimeout);this.manager.endTransientState();this.manager.redrawAllLayers();this.triggerViewportStable()};b.animateTransformation=function(a){var b=this,e=this.manager.transformation,g=e.compose(a);this.cancelAnimation();this.$animation.css("percent",0);this.$animation.animate({percent:100},{duration:u.ANIMATE_ZOOM_DURATION,step:function(a){b.setTransformation(e.lerp(g,
a/100))}})};b.cancelAnimation=function(){this.$animation.stop()};b.addMouseWheelEventHandler=function(){var a=0;this.$.mousewheel(function(b,e){b.preventDefault();0<a||(a+=1,setTimeout(function(){a--},50),this.setTransformation(this.manager.transformation.compose(q(0,0,0<(0<e?1:-1)?u.ZOOM_FACTOR:1/u.ZOOM_FACTOR))))}.bind(this))};b.handleDoubleClick=function(b){if(!a.get("disable_dblclick_zooming")&&!b.wasHandled()){b.preventDefault();var f=this.$.offset(),e=this.manager.screen,g=u.DOUBLETAP_ZOOM;
this.animateTransformation(q((b.pageX-(f.left+0.5*e.width))*(1-g),(b.pageY-(f.top+0.5*e.height))*(1-g),g))}};b.applyPanTouchChanges=function(a,b){var e=this.manager.transformation.compose(q(b[0].x-a[0].x,b[0].y-a[0].y,1));this.setTransformation(e)};b.applyScaleTouchChanges=function(a,b,e){var g=p.mean(b[0].x-a[0].x,b[1].x-a[1].x),d=p.mean(b[0].y-a[0].y,b[1].y-a[1].y),k=this.manager.screen,l=this.manager.$.offset(),m=p.mean(a[0].x,a[1].x)-(l.left+0.5*k.width),k=p.mean(a[0].y,a[1].y)-(l.top+0.5*k.height),
l=Math.abs(b[1].x-b[0].x);b=Math.abs(b[1].y-b[0].y);var s=Math.abs(a[1].x-a[0].x);a=Math.abs(a[1].y-a[0].y);"x"===e?(a=1,e=Math.max(50,l)/Math.max(50,s)):"y"===e?(e=1,a=Math.max(50,b)/Math.max(50,a)):e=a=Math.max(50,p.hypot(l,b))/Math.max(50,p.hypot(s,a));g=this.manager.transformation.compose(q(g+m*(1-e),d+k*(1-a),e,a));this.setTransformation(g)};b.addTouchEventHandler=function(){var a=this,b=[],e=!1,h=function(b){if(!a.manager.scaleAxis){var d=a.manager;if(2>b.length)b=void 0;else{var e=a.manager.createProjection(),
f=a.manager.$.offset(),g=e.mapx(0),h=e.mapy(0),g=Math.min(Math.max(0,g),e.screen.width)+f.left,h=Math.min(Math.max(0,h),e.screen.height)+f.top,f=b[1].x-b[0].x,k=b[1].y-b[0].y;b=10*Math.abs(b[0].x-g)<e.screen.width&&10*Math.abs(b[1].x-g)<e.screen.width&&Math.abs(k)>3*Math.abs(f)?"y":10*Math.abs(b[0].y-h)<e.screen.height&&10*Math.abs(b[1].y-h)<e.screen.height&&Math.abs(f)>3*Math.abs(k)?"x":"both"}d.scaleAxis=b}return a.manager.scaleAxis},d=function(d){e&&(d=d.touches,2===b.length&&2===d.length?a.applyScaleTouchChanges(b,
d,h(d)):a.manager.scaleAxis=void 0,1===b.length&&a.applyPanTouchChanges(b,d),b=d)},k=function(d){e&&(a.cancelAnimation(),b=d.touches,0===d.touches.length&&(e=!1,g(document).off(".graphdrag")),2>d.touches.length&&(a.manager.scaleAxis=void 0))};this.$.on("tapstart",function(a){a.wasHandled()||e||a.touches.length!==a.changedTouches.length||(e=!0,g(document).on("tapmove.graphdrag",d),g(document).on("tapstart.graphdrag tapend.graphdrag tapcancel.graphdrag",k))});this.$.on("dblclick",this.handleDoubleClick.bind(this))};
b.getSetting=function(a,b){var e=this.manager.settings.getProperty(a);return void 0!==e?e:b};b.setSetting=function(a,b,e){this.manager.settings.setProperty(a,void 0!==b?b:e)};b.getState=function(){return{viewport:this.getViewport().toObject(),showLabels:this.getSetting("showLabels"),degreeMode:this.getSetting("degreeMode"),showGrid:this.getSetting("showGrid"),polarMode:this.getSetting("polarMode"),showAxes:this.getSetting("showAxes"),squareAxes:this.getSetting("squareAxes"),labelXMode:this.getSetting("xAxisPiLabels")?
"pi":"",labelYMode:this.getSetting("yAxisPiLabels")?"pi":""}};b.setState=function(a){this.setSetting("showLabels",a.showLabels,!0);this.setSetting("showGrid",a.showGrid,!0);this.setSetting("polarMode",a.polarMode,!1);this.setSetting("showAxes",a.showAxes,!0);this.setSetting("squareAxes",a.squareAxes,!0);this.setSetting("xAxisPiLabels","pi"===a.labelXMode);this.setSetting("yAxisPiLabels","pi"===a.labelYMode);this.setSetting("degreeMode",a.degreeMode,!1);"viewport"in a&&(a=v.fromObject(a.viewport),
this.getSetting("squareAxes")&&!a.isSquare(this.manager.screen)&&(a.squareYAxis(this.manager.screen),a.round(this.manager.screen)),this.setViewport(a))};b.zoom=function(a){"in"===a?this.animateTransformation(q(0,0,2)):"out"===a?this.animateTransformation(q(0,0,0.5)):"default"===a&&(this.manager.settings.setProperty("squareAxes",!0),this.setViewport(this.manager.computeDefaultViewport()))};b.isZoomRestored=function(){return this.manager.viewport.equals(this.manager.computeDefaultViewport())};b.enforceSquareAxes=
function(){var a=this.manager.settings;if(a.squareAxes){var a=a.lastChangedAxis,b=this.manager.viewport.clone();"y"==a?b.squareXAxis(this.manager.screen):b.squareYAxis(this.manager.screen);b.round(this.manager.screen);this.setViewport(b)}}})});
define("main/account_backend",["require","jquery"],function(b){var g=b("jquery");return{logout:function(){return g.post("account/logout.php")},fetchUser:function(b){var v=function(){return g.post("account/login.php",b)};return this.logout().then(v,v).then(this.getUserInfo)},getUserInfo:function(){return g.getJSON("account/user_info.php")},registerUser:function(b){return g.post("account/register.php",b).then(this.getUserInfo)},editAccount:function(b){return g.post("account/edit_account.php",b).then(this.getUserInfo)},
recoverPassword:function(b){return g.post("account/recover.php",b)}}});
define("main/user",["require","pjs","lib/underscore_model"],function(b){var g=b("pjs");b=b("lib/underscore_model");return g(b,function(b,g){var q=["name","email"];b.init=function(b){g.init.call(this);var u=this;b&&q.forEach(function(a){b.hasOwnProperty(a)&&u.setProperty(a,b[a])})};b.firstName=function(){if(!this.name)return null;if(this.name.match(/[\d@_&\.\']/))return this.name;var b=this.name.split(" ");return 3<=b[0].length?b[0]:this.name}})});
define("main/user_controller",["require","pjs","lib/underscore_model","main/account_backend","main/user"],function(b){var g=b("pjs"),r=b("lib/underscore_model"),v=b("main/account_backend"),q=b("main/user");return g(r,function(b,g){b.init=function(a){g.init.call(this);this.graphsController=a};b.desmosLogin=function(a){return v.fetchUser(a).done(this.completeLogin.bind(this))};b.driveCallback=function(){return v.getUserInfo().then(this.completeLogin.bind(this),this.logout.bind(this))};b.createAccount=
function(a){return v.registerUser(a).done(this.completeLogin.bind(this)).done(function(){})};b.editAccount=function(a){var b=this.currentUser,c=this;return v.editAccount(a).done(function(a){b.setProperty("name",a.name);b.setProperty("email",a.email);c.notifyPropertyChange("currentUser")})};b.recoverPassword=function(a){return v.recoverPassword(a)};b.completeLogin=function(a,b){q(a);this.setProperty("currentUser",q(a));this.graphsController.updateGraphs()};b.logout=function(){var a=this;return v.logout().done(function(){a.setProperty("currentUser",
null);a.graphsController.clear()})}})});
define("main/calculator_backend",["require","jquery","main/graph"],function(b){var g=b("jquery"),r=b("main/graph");return{apiPath:function(b){return["account",b].join("/")},_saveGraph:function(b,q){var p=g('input[name="access"]').attr("checked")?"all":"link",p={parent_hash:b.parentHash,thumb_data:b.thumbURL,calc_state:b.graphData,graph_hash:b.hash,version:"h2",access:p,my_graphs:q,title:b.title||void 0};return g.post(this.apiPath("save.php"),p).pipe(function(g){r.updateFromSync(b,g);return b})},saveGraph:function(b){return this._saveGraph(b,
!0)},getGraphs:function(){return g.getJSON(this.apiPath("list.php"))},removeGraph:function(b){return g.post(this.apiPath("remove.php"),{hash:b.hash})}}});
define("undoredo",["require","underscore","pjs"],function(b){var g=b("underscore");return b("pjs")(function(b,v){b.CAUSE_OF_CHANGE=1;b.RESPONSE_TO_CHANGE=2;b.triggerFlash=function(){};b.init=function(){this.undos=[];this.redos=[];this.changesCallbacks=[];this.__isApplyingTransaction=0;this.markAsSaved()};b.handleKeydown=function(b){if(b.ctrlKey||b.metaKey)switch(b.which){case 90:return b.shiftKey?this.redo():this.undo(),!1;case 89:return this.redo(),!1}};b.clear=function(){this.undos=[];this.redos=
[];this.markAsSaved()};b.pushUndo=function(b){this.undos.push(b);!1!==b.recordChange&&(this.__changesSinceSave++,this.triggerChanges())};b.pushRedo=function(b){this.redos.push(b);!1!==b.recordChange&&(this.__changesSinceSave--,this.triggerChanges())};b.canUndo=function(){return 0<this.undos.length};b.canRedo=function(){return 0<this.redos.length};b.undo=function(){if(this.canUndo()){var b=this.undos.pop();this.applyTransaction(b,!0);this.pushRedo(b)}};b.redo=function(){if(this.canRedo()){var b=this.redos.pop();
this.applyTransaction(b);this.pushUndo(b)}};b.markAsSaved=function(){this.__changesSinceSave=0;this.triggerChanges()};b.changedSinceSave=function(){return 0!==this.__changesSinceSave};b.isApplyingTransaction=function(){return!!this.__isApplyingTransaction};b.__applyTransaction=function(b,g){var u,a=b.__batched__?b.__batched__:[];if(g){for(u=a.length-1;0<=u;u--)this.__applyTransaction(a[u],g);b.undo()}else for(b.redo(),u=0;u<a.length;u++)this.__applyTransaction(a[u],g)};b.applyTransaction=function(b,
g){this.__isApplyingTransaction++;try{this.__applyTransaction(b,g)}finally{this.__isApplyingTransaction--}};b.oneTransaction=function(b){this.__oneTransactionDepth||(this.__oneTransactionDepth=0);this.__oneTransactionDepth++;b();this.__oneTransactionDepth--;this.__oneTransactionDepth||(this.__oneTransaction=null)};b.isApplyingOneTransaction=function(){return 0<this.__oneTransactionDepth};b.addTransaction=function(b){var g;if(!this.isApplyingTransaction()&&(b.type===this.CAUSE_OF_CHANGE&&this.applyTransaction(b),
!b.ensureChangeOccured||!b.ensureChangeOccured())){this.redos.splice(0);if(this.isApplyingOneTransaction()){if(this.__oneTransaction){g=this.__oneTransaction.__batched__;g||(g=this.__oneTransaction.__batched__=[]);g.push(b);return}this.__oneTransaction=b}this.pushUndo(b)}};b.triggerChanges=function(){g.each(this.changesCallbacks,function(b){b()})}})()});
define("main/graphs_controller","require underscore pjs main/graph main/calculator_backend lib/underscore_model undoredo i18n".split(" "),function(b){var g=b("underscore"),r=b("pjs"),v=b("main/graph"),q=b("main/calculator_backend"),p=b("lib/underscore_model"),u=b("undoredo");b("i18n");return r(p,function(a,b){a.init=function(a,f){b.init.call(this);this.observe("currentGraph",this.onCurrentGraphChange.bind(this));this.graphController=a;this.stateController=f;this.content=[];this.startSavingCallbacks=
[];this.saveSuccessCallbacks=[];this.saveErrorCallbacks=[];this.startUpdatingGraphsCallbacks=[];this.updateGraphsSuccessCallbacks=[];this.updateGraphsErrorCallbacks=[];this.graphAddedCallbacks=[];this.clearCallbacks=[];this.graphRemovedCallbacks=[]};a.remove=function(a){var b=this.getIndexFromGraph(a);this.content.splice(b,1);this.triggerRemove(b);q.removeGraph(a)};a.offlineRemove=function(a){a=this.getIndexFromGraph(a);this.content.splice(a,1);this.triggerRemove(a)};a.clear=function(){this.content=
[];this.triggerClear()};a.triggerStartSaving=function(){g.each(this.startSavingCallbacks,function(a){a()})};a.triggerSaveSuccess=function(){g.each(this.saveSuccessCallbacks,function(a){a()})};a.triggerSaveError=function(){g.each(this.saveErrorCallbacks,function(a){a()})};a.triggerStartUpdatingGraphs=function(){g.each(this.startUpdatingGraphsCallbacks,function(a){a()})};a.triggerUpdateGraphsSuccess=function(){g.each(this.updateGraphsSuccessCallbacks,function(a){a()})};a.triggerupdateGraphsError=function(){g.each(this.updateGraphsErrorCallbacks,
function(a){a()})};a.triggerAdd=function(a){g.each(this.graphAddedCallbacks,function(b){b(a)})};a.triggerClear=function(){g.each(this.clearCallbacks,function(a){a()})};a.triggerRemove=function(a){g.each(this.graphRemovedCallbacks,function(b){b(a)})};a.updateGraphData=function(a){var b=this.stateController.getState("escaped");a.setProperty("graphData",b);a.setProperty("hash",randomHash());b=this.graphController.manager.thumbnail(40,40);a.setProperty("thumbURL",b)};a.saveAs=function(a){this.save(a,
!0)};a.save=function(a,b){var e=this.currentGraph,g=this;g.triggerStartSaving();a=a.copy();g.updateGraphData(a);q.saveGraph(a).done(function(a){g.content.unshift(a);g.triggerAdd(0);g.triggerSaveSuccess();!b&&e&&g.offlineRemove(e);g.offlineUpdateGraphs();g.loadGraph(a);u.markAsSaved()}).fail(function(){g.triggerSaveError()})};a.rename=function(a,b){var e=this.currentGraph,g=this;g.triggerStartSaving();a=a.copy();g.updateGraphData(a);q.saveGraph(a).done(function(a){g.content.unshift(a);g.triggerAdd(0);
g.triggerSaveSuccess();!b&&e&&g.remove(e);g.offlineUpdateGraphs();g.loadGraph(a);u.markAsSaved()}).fail(function(){g.triggerSaveError()})};a.getIndexFromGraph=function(a){for(var b=0;b<this.content.length;b++)if(a.hash===this.content[b].hash)return b;return-1};a.updateGraphs=function(){var a=this;a.triggerStartUpdatingGraphs();q.getGraphs().done(function(b){var e;b&&(e=b.map(v.fromAjax));a.content=e;a.triggerUpdateGraphsSuccess()}).fail(function(){a.triggerupdateGraphsError()})};a.offlineUpdateGraphs=
function(){this.triggerStartUpdatingGraphs();for(i=0;i<this.content.length;i++)"undefined"!=typeof this.content[i].__oldProperties.title&&(this.content[i].title=this.content[i].__oldProperties.title,this.content[i].hash=this.content[i].__oldProperties.hash,this.content[i].thumbURL=this.content[i].__oldProperties.thumbURL,this.content[i].path=this.content[i].__oldProperties.path);this.triggerUpdateGraphsSuccess()};a.loadGraph=function(a){var b=this;u.oneTransaction(function(){b.stateController.setState(a.graphData);
b.setProperty("currentGraph",a)})};a.clearGraph=function(){this.loadGraph(v())};a.onCurrentGraphChange=function(){var a=this.currentGraph,b=this.getOldProperty("currentGraph");if(b){var e=this,g=b.copy(),d=a.copy();u.addTransaction({type:u.RESPONSE_TO_CHANGE,redo:function(){e.setProperty("currentGraph",d.copy())},undo:function(){e.setProperty("currentGraph",g.copy())}})}document.title=a.title||"Desmos Graphing Calculator";window.history&&history.pushState&&(b=a.path)&&(window.location.search&&(b+=
window.location.search),b!==window.location.href&&history.pushState(a.plainObject(),a.title,b))}})});
define("main/graph_settings",["require","jquery","pjs","lib/underscore_model"],function(b){var g=b("jquery"),r=b("pjs");b=b("lib/underscore_model");var v=r(b,function(b,p){b.init=function(){function b(a,f,e){function h(){g.setProperty(a,g.projectorMode?e:f)}g.observe("projectorMode",h);h()}function a(a,b,e,h,d){function k(){g.setProperty(a,g.projectorMode?g.highlight?d:h:g.highlight?e:b)}g.observe("projectorMode highlight",k);k()}p.init.call(this);this.showGrid=this.showLabels=this.squareAxes=!0;
this.polarMode=!1;this.showAxes=!0;this.degreeMode=this.yAxisPiLabels=this.xAxisPiLabels=!1;this.labelHangingColor="rgba(150,150,150,1)";this.labelNormalColor="rgba(0,0,0,1)";this.lastChangedAxis="x";this.projectorMode=!1;var g=this;b("labelSize",12,18);b("majorAxisOpacity",0.2,0.5);b("minorAxisOpacity",0.08,0.15);b("axisOpacity",0.7,0.9);b("axisLineWidth",1,2);b("axisLineOffset",0.5,0);b("pixelsPerLabel",70,100);a("graphLineWidth",2,3,6,9);a("pointLineWidth",7,11,15,22)};b.clone=function(){var b=
v(this.grapher);b.setProperty("squareAxes",this.squareAxes);b.setProperty("showLabels",this.showLabels);b.setProperty("showGrid",this.showGrid);b.setProperty("polarMode",this.polarMode);b.setProperty("squareAxes",this.showAxes);b.setProperty("xAxisPiLabels",this.xAxisPiLabels);b.setProperty("yAxisPiLabels",this.yAxisPiLabels);b.setProperty("degreeMode",this.degreeMode);b.setProperty("projectorMode",this.projectorMode);return b};b.registerCallbacks=function(b,a){var m=function(){b.manager.redrawGridLayer()};
this.observe("showLabels",m);this.observe("showAxes",m);this.observe("showGrid",m);this.observe("polarMode",m);this.observe("xAxisPiLabels",m);this.observe("yAxisPiLabels",m);this.observe("degreeMode",m);this.observe("squareAxes",function(){b.enforceSquareAxes()});var c=this;this.observe("projectorMode",function(){b.manager.redrawAllLayers();g("body").toggleClass("PROJECTOR-MODE",!!c.projectorMode);a.onProjectorModeChange()})}});return v});
define("main/timermodules",[],function(){var b={},g={},r={},v=function(){for(var b in r)if(r.hasOwnProperty(b))r[b]();setTimeout(v,100)};v();return{add:function(g,p){b[g]=p},load:function(q){b[q]&&(g[q]=b[q].apply(this,Array.prototype.slice.call(arguments,1)),g[q]&&(r[q]=g[q]))}}});
define("expressions/abstractitem",["require","pjs","lib/underscore_model","undoredo"],function(b){var g=b("pjs"),r=b("lib/underscore_model"),v=b("undoredo");return g(r,function(b,g){var u=1;b.init=function(a,b){g.init.call(this);this.index=-1;this.selected=!1;this.list=b;for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);this.hasOwnProperty("id")?this.id>=u&&(u=this.id+1):this.id=u++;this.observe("folder",this.updateFolder.bind(this));this.observe("selected",this.onSelectedChange.bind(this))};b.onAddedToList=
function(){};b.onRemovedFromList=function(){};b.onStateDidChange=function(a){var b=this.id,c=this.getOldProperty(a),f=this.getProperty(a),e=this.list;v.addTransaction({type:v.RESPONSE_TO_CHANGE,undo:function(){e.getItemById(b).setProperty(a,c)},redo:function(){e.getItemById(b).setProperty(a,f)}})};b.updateCollapsed=function(){this.setProperty("inCollapsedFolder",this.folder?this.folder.collapsed:!1)};b.updateFolder=function(){this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+
this.id);this.folder&&this.folder.observe("collapsed."+this.id,this.updateCollapsed.bind(this));this.updateCollapsed()};b.onSelectedChange=function(){this.selected&&this.folder&&this.folder.collapsed&&this.folder.setProperty("collapsed",!1)}})});
define("expressions/domain",["require","lib/underscore_model","pjs"],function(b){var g=b("lib/underscore_model"),r=b("pjs")(g,function(b,g){b.init=function(b,u){g.init.call(this);this.min=b;this.max=u};b.isValid=function(){return isFinite(this.min)&&isFinite(this.max)&&this.max>this.min};b.serialize=function(){return{min:this.min,max:this.max}}});r.deserialize=function(b){return b?r(b.min,b.max):r()};return r});
(function(b){function g(b){var f,e,h;if(!(this instanceof g))return new g(b);if(b instanceof g)this.s=b.s,this.e=b.e,this.c=b.c.slice();else{if(0===b&&0>1/b)b="-0";else if(!a.test(b+=""))throw NaN;this.s="-"==b.charAt(0)?(b=b.slice(1),-1):1;-1<(f=b.indexOf("."))&&(b=b.replace(".",""));0<(e=b.search(/e/i))?(0>f&&(f=e),f+=+b.slice(e+1),b=b.substring(0,e)):0>f&&(f=b.length);for(e=0;"0"==b.charAt(e);e++);if(e==(h=b.length))this.c=[this.e=0];else{for(;"0"==b.charAt(--h););this.e=f-e-1;this.c=[];for(f=
0;e<=h;this.c[f++]=+b.charAt(e++));}}}function r(a,b,e,g){var d=a.c,k=a.e+b+1;if(0!==e&&1!==e&&2!==e)throw"!Big.RM!";e=e&&(5<d[k]||5==d[k]&&(1==e||g||0>k||null!=d[k+1]||d[k-1]&1));if(1>k||!d[0])a.c=e?(a.e=-b,[1]):[a.e=0];else{d.length=k--;if(e)for(;9<++d[k];)d[k]=0,k--||(++a.e,d.unshift(1));for(k=d.length;!d[--k];d.pop());}return a}function v(a,b,e){var h=b-(a=new g(a)).e,d=a.c;d.length>++b&&r(a,h,g.RM);for(h=d[0]?e?b:(d=a.c,a.e+h+1):h+1;d.length<h;d.push(0));h=a.e;return 1==e||2==e&&(b<=h||h<=q)?
(0>a.s&&d[0]?"-":"")+(1<d.length?(d.splice(1,0,"."),d.join("")):d[0])+(0>h?"e":"e+")+h:a.toString()}g.DP=20;g.RM=1;var q=-7,p=21,u=g.prototype,a=/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?$/i,m=new g(1);u.cmp=function(a){var b=this.c,e=(a=new g(a)).c,h=this.s,d=a.s,k=this.e,l=a.e;if(!b[0]||!e[0])return b[0]?h:e[0]?-d:0;if(h!=d)return h;a=0>h;if(k!=l)return k>l^a?1:-1;h=-1;for(d=(k=b.length)<(l=e.length)?k:l;++h<d;)if(b[h]!=e[h])return b[h]>e[h]^a?1:-1;return k==l?0:k>l^a?1:-1};u.div=function(a){var b=this.c,
e=(a=new g(a)).c,h=this.s==a.s?1:-1,d=g.DP;if(d!==~~d||0>d||1E6<d)throw"!Big.DP!";if(!b[0]||!e[0]){if(b[0]==e[0])throw NaN;if(!e[0])throw h/0;return new g(0*h)}var k,l,p,s,n=e.slice(),u=k=e.length,q=b.length,v=b.slice(0,k),C=v.length,D=new g(m),F=D.c=[],H=0,G=d+(D.e=this.e-a.e)+1;D.s=h;h=0>G?0:G;for(n.unshift(0);C++<k;v.push(0));do{for(l=0;10>l;l++){if(k!=(C=v.length))p=k>C?1:-1;else for(s=-1,p=0;++s<k;)if(e[s]!=v[s]){p=e[s]>v[s]?1:-1;break}if(0>p){for(a=C==k?e:n;C;){if(v[--C]<a[C]){for(s=C;s&&!v[--s];v[s]=
9);--v[s];v[C]+=10}v[C]-=a[C]}for(;!v[0];v.shift());}else break}F[H++]=p?l:++l;v[0]&&p?v[C]=b[u]||0:v=[b[u]]}while((u++<q||null!=v[0])&&h--);F[0]||1==H||(F.shift(),D.e--);H>G&&r(D,d,g.RM,null!=v[0]);return D};u.minus=function(a){var b,e,h=this.s,d=(a=new g(a)).s;if(h!=d)return a.s=-d,this.plus(a);var k=this.c;b=this.e;var l=a.c,m=a.e;if(!k[0]||!l[0])return l[0]?(a.s=-d,a):new g(k[0]?this:0);if(k=k.slice(),h=b-m){b=(e=0>h)?(h=-h,k):(m=b,l);b.reverse();for(d=h;d--;b.push(0));b.reverse()}else for(b=
((e=k.length<l.length)?k:l).length,h=d=0;d<b;d++)if(k[d]!=l[d]){e=k[d]<l[d];break}e&&(b=k,k=l,l=b,a.s=-a.s);if(0<(d=-((b=k.length)-l.length)))for(;d--;k[b++]=0);for(d=l.length;d>h;){if(k[--d]<l[d]){for(e=d;e&&!k[--e];k[e]=9);--k[e];k[d]+=10}k[d]-=l[d]}for(;0==k[--b];k.pop());for(;0==k[0];k.shift(),--m);k[0]||(k=[m=0]);return a.c=k,a.e=m,a};u.mod=function(a){a=new g(a);var b,e=this,h=e.s,d=a.s;if(!a.c[0])throw NaN;e.s=a.s=1;b=1==a.cmp(e);e.s=h;a.s=d;return b?new g(e):(h=g.DP,d=g.RM,g.DP=g.RM=0,e=e.div(a),
g.DP=h,g.RM=d,this.minus(e.times(a)))};u.plus=function(a){var b,e=this.s;b=(a=new g(a)).s;if(e!=b)return a.s=-b,this.minus(a);b=this.e;var h=this.c,d=a.e,k=a.c;if(!h[0]||!k[0])return k[0]?a:new g(h[0]?this:0*e);if(h=h.slice(),e=b-d){b=0<e?(d=b,k):(e=-e,h);for(b.reverse();e--;b.push(0));b.reverse()}0>h.length-k.length&&(b=k,k=h,h=b);e=k.length;for(b=0;e;b=(h[--e]=h[e]+k[e]+b)/10^0,h[e]%=10);b&&(h.unshift(b),++d);for(e=h.length;0==h[--e];h.pop());return a.c=h,a.e=d,a};u.pow=function(a){var b=0>a,e=
new g(this),h=m;if(a!==~~a||-1E6>a||1E6<a)throw"!pow!";for(a=b?-a:a;;){a&1&&(h=h.times(e));a>>=1;if(!a)break;e=e.times(e)}return b?m.div(h):h};u.round=function(a,b){var e=new g(this);if(null==a)a=0;else if(a!==~~a||0>a||1E6<a)throw"!round!";r(e,a,null==b?g.RM:b);return e};u.sqrt=function(){var a,b,e;b=this.c;a=this.s;e=this.e;var h=new g("0.5");if(!b[0])return new g(this);if(0>a)throw NaN;a=Math.sqrt(this.toString());0==a||a==1/0?(a=b.join(""),a.length+e&1||(a+="0"),b=new g(Math.sqrt(a).toString()),
b.e=((e+1)/2|0)-(0>e||e&1)):b=new g(a.toString());a=b.e+(g.DP+=4);do e=b,b=h.times(e.plus(this.div(e)));while(e.c.slice(0,a).join("")!==b.c.slice(0,a).join(""));r(b,g.DP-=4,g.RM);return b};u.times=function(a){var b,e=this.c,h=(a=new g(a)).c,d=e.length,k=h.length,l=this.e,m=a.e;a.s=this.s==a.s?1:-1;if(!e[0]||!h[0])return new g(0*a.s);a.e=l+m;d<k&&(b=e,e=h,h=b,m=d,d=k,k=m);m=d+k;for(b=[];m--;b.push(0));for(l=k-1;-1<l;l--){k=0;for(m=d+l;m>l;k=b[m]+h[l]*e[m-l-1]+k,b[m--]=k%10|0,k=k/10|0);k&&(b[m]=(b[m]+
k)%10)}k&&++a.e;!b[0]&&b.shift();for(m=b.length;!b[--m];b.pop());return a.c=b,a};u.toString=u.valueOf=function(){var a=this.e,b=this.c.join(""),e=b.length;if(a<=q||a>=p)b=b.charAt(0)+(1<e?"."+b.slice(1):"")+(0>a?"e":"e+")+a;else if(0>a){for(;++a;b="0"+b);b="0."+b}else if(0<a)if(++a>e)for(a-=e;a--;b+="0");else a<e&&(b=b.slice(0,a)+"."+b.slice(a));else 1<e&&(b=b.charAt(0)+"."+b.slice(1));return 0>this.s&&this.c[0]?"-"+b:b};u.toExponential=function(a){if(null==a)a=this.c.length-1;else if(a!==~~a||0>
a||1E6<a)throw"!toExp!";return v(this,a,1)};u.toFixed=function(a){var b,e=q,g=p;q=-(p=1/0);null==a?b=this.toString():a===~~a&&0<=a&&1E6>=a&&(b=v(this,this.e+a),0>this.s&&this.c[0]&&0>b.indexOf("-")&&(b="-"+b));q=e;p=g;if(!b)throw"!toFix!";return b};u.toPrecision=function(a){if(null==a)return this.toString();if(a!==~~a||1>a||1E6<a)throw"!toPre!";return v(this,a-1,2)};"undefined"!==typeof module&&module.exports?module.exports=g:"function"==typeof define&&define.amd?define("vendor/big",[],function(){return g}):
b.Big=g})(this);define("big",["require","vendor/big"],function(b){b=b("vendor/big");b.prototype.equals=function(b){return 0===this.cmp(b)};return b});
define("expressions/slider",["require","pjs","lib/underscore_model","big","lib/rounding"],function(b){var g=b("pjs"),r=b("lib/underscore_model"),v=b("big"),q=b("lib/rounding"),p=g(r,function(b,a){b.init=function(b,c,f,e){a.init.call(this);this.min=void 0!==c?c:-10;this.max=void 0!==f?f:10;this.step=e;this.value=void 0!==b?b:0;this.playDirection=this.animationSpeed=1;this.isPlaying=!1;this.observe("isPlaying",function(){this.isPlaying&&(this.animationTargetValue=this.value)}.bind(this));this.observe("stepper isPlaying",
this.updateObservedStepper.bind(this))};b.updateObservedStepper=function(){var a=this.isPlaying&&this.stepper,b=a&&this._observedStepper!==this.stepper;a&&this.stepper===this._observedStepper||!this._observedStepper||(this._observedStepper.unobserve("playStep."+this.guid),this._observedStepper=void 0);b&&(this._observedStepper=this.stepper,this._observedStepper.observe("playStep."+this.guid,this.playStep.bind(this)))};b.playStep=function(){this.animationTargetValue>=this.max?this.playDirection=-1:
this.animationTargetValue<=this.min&&(this.playDirection=1);var a=(this.max-this.min)/200,a=a*this.animationSpeed;this.animationTargetValue+=a*this.playDirection;var b=this.computeSnappedValue(this.animationTargetValue);this.step||(b=q.shortestDecimalBetween(b-0.1*a,b+0.1*a));b=Math.max(this.min,Math.min(this.max,b));this.setProperty("value",b)};b.serialize=function(){return{min:this.min,max:this.max,step:this.step,value:this.value,playDirection:this.playDirection}};b.computeSnappedValue=function(a){if(!this.step)return a;
a=Math.round((a-this.min)/this.step);a=(new v(this.step)).times(a).plus(this.min);return parseFloat(a.toString())}});p.deserialize=function(b){var a=p();b&&["value","min","max","step","playDirection"].forEach(function(g){b.hasOwnProperty(g)&&(a[g]=b[g])});return a};return p});
define("expressions/colors",["require"],function(b){var g="#C0504D #4F81BD #9BBB59 #8064A2 #F79646 #000000".split(" "),r=0;return{all:g,next:function(){var b=g[r];r=(r+1)%g.length;return b},reset:function(){r=0},RED:"#C0504D",BLUE:"#4F81BD",GREEN:"#9BBB59",PURPLE:"#8064A2",ORANGE:"#F79646",BLACK:"#000000"}});
define("expressions/expression","require pjs math/evaluationstate undoredo ./abstractitem ./domain ./slider ./colors".split(" "),function(b){var g=b("pjs"),r=b("math/evaluationstate"),v=b("undoredo"),q=b("./abstractitem"),p=b("./domain"),u=b("./slider"),a=b("./colors");return g(q,function(b,c){b._computeNewLatex=function(a,b){var c=/=(.*?)([-\.0-9]+)/,d=a.match(c);return parseFloat(d[2])===b?a:a.replace(c,"=$1"+b)};b.isExpression=!0;b.init=function(b,e){c.init.call(this,b,e);this.loading=!0;this.formula=
r({error:""});delete this.slider;this.color?"object"===typeof this.color&&(this.color=this.color.value):this.color=a.next();void 0===this.style&&(this.style="normal");void 0===this.userRequestedGraphing&&(this.userRequestedGraphing="default");void 0===this.latex&&(this.latex="");this.domain=p.deserialize(this.domain?this.domain:{min:0,max:1});this.domain.observe("min max",function(a){this.onExpressionDidChange();var b=this.id,c=this.domain.getOldProperty(a),f=this.domain.getProperty(a);v.addTransaction({type:v.RESPONSE_TO_CHANGE,
undo:function(){e.getItemById(b).domain.setProperty(a,c)},redo:function(){e.getItemById(b).domain.setProperty(a,f)}})}.bind(this));this.computeShouldGraph();this.observe("formula",this.onFormulaUpdate.bind(this));this.observe("latex color userRequestedGraphing style",this.onStateDidChange.bind(this));this.observe("latex shouldGraph color style",this.onExpressionDidChange.bind(this));this.observe("userRequestedGraphing",this.computeShouldGraph.bind(this))};b.onStateDidChange=function(a){"latex"===
a&&this.slider&&this.slider.transient||c.onStateDidChange.call(this,a)};b.updateFolder=function(){c.updateFolder.call(this);this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id);this.folder&&this.folder.observe("hidden."+this.id,this.computeShouldGraph.bind(this));this.computeShouldGraph()};b.computeShouldGraph=function(){this.setProperty("shouldGraph",this.folder&&this.folder.hidden?!1:"default"===this.userRequestedGraphing||"always"===this.userRequestedGraphing)};b.onExpressionDidChange=
function(){this.domain.isValid()&&this.requestParse()};b.getParsableObject=function(){return void 0===this.latex?void 0:{type:"statement",id:this.id,latex:this.latex,domain:this.domain.serialize(),shouldGraph:this.shouldGraph,color:this.color,style:this.style}};b.requestParse=function(){this.list.triggerAddExp(this.getParsableObject())};b.requestUnparse=function(){this.list.triggerRemoveExp(this.id)};b.onAddedToList=function(){this.requestParse()};b.onRemovedFromList=function(){this.slider&&this.slider.setProperty("isPlaying",
!1);this.requestUnparse()};b.getState=function(){var a={id:this.id,latex:this.latex,domain:this.domain.serialize(),userRequestedGraphing:this.userRequestedGraphing,color:this.color,style:this.style};this.slider&&(a.sliderMin=this.slider.min,a.sliderMax=this.slider.max,a.sliderInterval=this.slider.step);return a};b.onFormulaUpdate=function(){var a=this.formula;this.setProperty("error",a.error?a.error:"");this.setProperty("isGraphable",a.is_graphable);this.setProperty("dependent",a.assignment);this.setProperty("isTableable",
a.is_tableable);this.validateStyle();a.is_slidable&&!this.slider&&this.createSliderModel()};b.validateStyle=function(){var a=this.formula;a.error||(a.is_point_list?"point"!==this.style&&"open"!==this.style&&"cross"!==this.style&&this.setProperty("style","point"):a.is_inequality?this.setProperty("style","normal"):"normal"!==this.style&&"dashed"!==this.style&&this.setProperty("style","normal"))};b.createSliderModel=function(){this.slider=u.deserialize({min:void 0!==this.sliderMin?this.sliderMin:-10,
max:void 0!==this.sliderMax?this.sliderMax:10,step:this.sliderInterval,value:this.formula.simple_constant});var a=this.id,b=this.list;this.slider.observe("step",function(){if(!this.slider.transient){var c=this.slider.getOldProperty("step"),d=this.slider.getProperty("step");v.addTransaction({type:v.RESPONSE_TO_CHANGE,undo:function(){b.getItemById(a).slider.setProperty("step",c)},redo:function(){b.getItemById(a).slider.setProperty("step",d)}})}}.bind(this));this.slider.observe("min",function(){if(!this.slider.transient){var c=
this.slider.getOldProperty("min"),d=this.slider.getProperty("min"),g=this.slider.getProperty("value"),l=d>g?this.latex:null,m=d>g?this._computeNewLatex(l,d):null;v.addTransaction({type:v.CAUSE_OF_CHANGE,undo:function(){var d=b.getItemById(a);d.slider.setProperty("min",c);l&&d.setProperty("latex",l)},redo:function(){var c=b.getItemById(a);c.slider.setProperty("min",d);m&&c.setProperty("latex",m)}})}}.bind(this));this.slider.observe("max",function(){if(!this.slider.transient){var c=this.slider.getOldProperty("max"),
d=this.slider.getProperty("max"),g=this.slider.getProperty("value"),l=d<g?this.latex:null,m=d<g?this._computeNewLatex(l,d):null;v.addTransaction({type:v.CAUSE_OF_CHANGE,undo:function(){var d=b.getItemById(a);d.slider.setProperty("max",c);l&&d.setProperty("latex",l)},redo:function(){var c=b.getItemById(a);c.slider.setProperty("max",d);m&&c.setProperty("latex",m)}})}}.bind(this));this.slider.observe("transient",function(){var c=this.slider.getOldProperty("transient"),d=this.slider.getProperty("transient");
if(!c&&d){var g=this.slider.serialize(),l=this.slider.serialize();this.transientEndingValues=l;v.addTransaction({type:v.RESPONSE_TO_CHANGE,recordChange:!1,undo:function(){var c=b.getItemById(a);c.slider.setProperty("isPlaying",!1);for(var d in g)g.hasOwnProperty(d)&&c.slider.setProperty(d,g[d])},redo:function(){var c=b.getItemById(a);c.slider.setProperty("isPlaying",!1);for(var d in l)l.hasOwnProperty(d)&&c.slider.setProperty(d,l[d])}})}else if(c&&!d){var c=this.slider.serialize(),m;for(m in c)c.hasOwnProperty(m)&&
(this.transientEndingValues[m]=c[m])}}.bind(this));this.slider.observe("value",function(){var a=this.slider.getProperty("value");a<this.slider.min&&this.slider.setProperty("min",a);a>this.slider.max&&this.slider.setProperty("max",a);a=this._computeNewLatex(this.latex,a);this.setProperty("latex",a)}.bind(this));this.slider.setProperty("stepper",this.list);this.notifyPropertyChange("slider")};b.isEmpty=function(){var a=this.latex;return!a||""===a.split(" ").join("")}})});
define("expressions/text",["require","pjs","./abstractitem"],function(b){var g=b("pjs");b=b("./abstractitem");return g(b,function(b,g){b.isText=!0;b.init=function(b,p){g.init.call(this,b,p);this.text||(this.text="");this.observe("text",this.onStateDidChange.bind(this))};b.isEmpty=function(){return""===this.text.split(" ").join("")};b.getState=function(){return{id:this.id,text:this.text}};b.markedUpText=function(){return this.text.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,
"<a href='$1' target ='_blank'>$1</a>")}})});
define("expressions/table","require underscore pjs lib/underscore_model graphing/columnmode big ./abstractitem ./colors undoredo".split(" "),function(b){var g=b("underscore"),r=b("pjs"),v=b("lib/underscore_model"),q=b("graphing/columnmode"),p=b("big"),u=b("./abstractitem"),a=b("./colors"),m=b("undoredo"),c=r(v,function(a,b){a.init=function(a,c){b.init.call(this);this.column=a;c&&(this.value=c.value,this.error=c.error)};a.isEmpty=function(){return""===this.value.split(" ").join("")}}),f=r(u,function(b,
f){function d(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e="";g.isNumber(d)&&(e=String(Number(Number(d).toFixed(4))),e=e.replace("NaN","Undefined"));b.push(e)}return b}b.init=function(b,d,e){if(void 0!==e.showPoints||void 0!==e.showLine)e=JSON.parse(JSON.stringify(e)),e.showPoints&&e.showLine?e.columnMode=q.POINTS_AND_LINES:e.showPoints?e.columnMode=q.POINTS:e.showLine?e.columnMode=q.LINES:(e.hidden=!0,e.columnMode=q.POINTS);this.latex="";this.hidden=!1;this.columnMode=q.POINTS;this.values=[];
this.error="";f.init.call(this,e);this.color||(this.color=a.next());this.style||(this.style="point");if(0!==d&&0===this.values.length&&b.columns[0].cells){this.values=[];e=b.columns[0].cells.length;for(var g=0;g<e;g++)this.values.push("")}var m=this;this.cells=this.values.map(function(a){return c(m,{value:String(a)})});delete this.values;this.table=b;this.index=d;0===d&&(this.hidden=!0);this.isGraphable=!this.error;this.observe("error",function(){this.setProperty("isGraphable",!this.error)}.bind(this));
this.observe("color columnMode hidden latex style",this.onStateChange.bind(this));this.observe("hidden hiddenByTable",this.computeShouldGraph.bind(this));this.computeShouldGraph();this.observe("shouldGraph",this.table.requestParse.bind(this.table))};b.computeShouldGraph=function(){this.setProperty("shouldGraph",!this.hiddenByTable&&!this.hidden)};b.onStateChange=function(a){this.table.requestParse();var b=this.table.id,c=this.index,d=this.table.list,e=this.getOldProperty(a),f=this.getProperty(a);
m.addTransaction({type:m.RESPONSE_TO_CHANGE,undo:function(){d.getItemById(b).columns[c].setProperty(a,e)},redo:function(){d.getItemById(b).columns[c].setProperty(a,f)}})};b.isEmpty=function(){return""===this.latex.split(" ").join(" ")};b.getValues=function(){for(var a=[],b=this.cells.length,c=0;c<b;c++){var d=this.cells[c].value;null===d||void 0===d?a.push(""):a.push(String(d))}return a};b.triggerRowChange=function(){};b.insertCell=function(a,b){var d=c(this,{value:b});this.cells.splice(a,0,d)};b.removeCell=
function(a){this.cells.splice(a,1)};b.setComputedValues=function(a){if(0===a.values.length&&a.error)for(var b=0;b<this.cells.length-1;b++)a.values[b]=null;this.setProperty("error",a.error);this.setProperty("discrete",a.discrete);this.setProperty("disabled",a.dependent);this.setErrors(a.values);a.dependent?(this.independentValues||(this.independentValues=this.getValues()),this.setValues(d(a.values))):this.independentValues&&(this.setValues(this.independentValues),this.independentValues=null,this.table.requestParse())};
b.setValues=function(a){for(var b=0;b<a.length;b++)this.cells[b].setProperty("value",String(a[b]))};b.setErrors=function(a){for(var b=0;b<a.length;b++)"string"===typeof a[b]?this.cells[b].setProperty("error",a[b]):this.cells[b].setProperty("error","")};b.serialize=function(){return{values:this.getValues(),columnMode:this.columnMode,hidden:this.hidden,id:this.id,color:this.color,style:this.style,latex:this.latex}}});return r(u,function(a,b){a.isTable=!0;a.init=function(a,c){var e,m;b.init.call(this,
a,c);this.list=c;this.selectedCell=null;this.headings&&(this.columns=this.headings,delete this.headings);if(this.rows){for(m=0;m<this.columns.length;m++){var s=this.columns[m];s.values=[];for(e=0;e<this.rows.length;e++)s.values.push(this.rows[e][m])}delete this.rows}var n=this;this.columns||(this.columns=[]);this.columns=this.columns.map(function(a,b){return f(n,b,a)});this.columns.push(f(this,this.columns.length,{disabled:!0}));var p=this.columns[0].cells.length;g.each(this.columns,function(a){a.insertCell(p,
"")});this.observe("selected",this.onSelectedChange.bind(this))};a.updateFolder=function(){b.updateFolder.call(this);this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id);this.folder&&this.folder.observe("hidden."+this.id,this.computeColumnsHidden.bind(this));this.computeColumnsHidden()};a.computeColumnsHidden=function(){var a=this.folder&&this.folder.hidden;g.each(this.columns,function(b){b.setProperty("hiddenByTable",a)})};a.onSelectedChange=function(){this.selected||
this.setProperty("selectedCell",null)};a.insertColumn=function(a,b){var c=this.id,e=this.list;m.addTransaction({type:m.CAUSE_OF_CHANGE,undo:function(){e.getItemById(c).__removeColumn(a)},redo:function(){var f=e.getItemById(c);f.__insertColumn(a,b);b=f.columns[a].serialize()}})};a.removeColumn=function(a){var b=this.id,c=this.columns[a].serialize(),e=this.list;m.addTransaction({type:m.CAUSE_OF_CHANGE,undo:function(){e.getItemById(b).__insertColumn(a,c)},redo:function(){e.getItemById(b).__removeColumn(a)}})};
a.moveColumn=function(a,b){var c=this.id,e=this.list;m.addTransaction({type:m.CAUSE_OF_CHANGE,undo:function(){e.getItemById(c).__moveColumn(b,a)},redo:function(){e.getItemById(c).__moveColumn(a,b)}})};a.triggerColumnAdded=function(a){};a.__insertColumn=function(a,b){b||(b={});var c=f(this,a,b);this.columns.splice(a,0,c);for(c=a+1;c<this.columns.length;c++)this.columns[c].setProperty("index",c);this.triggerColumnAdded(a);this.requestParse()};a.triggerColumnRemoved=function(a){};a.__removeColumn=function(a){this.requestUnparseColumn(a);
this.columns.splice(a,1);for(var b=a;b<this.columns.length;b++)this.columns[b].setProperty("index",b);this.triggerColumnRemoved(a);this.requestParse()};a.triggerColumnMoved=function(a,b){};a.__moveColumn=function(a,b){if(a!==b){var c=this.columns.length,e=this.columns[a];if(!(1>a||1>b||a>=c-1||b>=c-1)){this.columns.splice(a,1);this.columns.splice(b,0,e);for(e=0;e<c;e++)this.columns[e].setProperty("index",e);this.triggerColumnMoved(a,b)}}};a.getAutofillValues=function(a){var b,c=this.columns.length,
e=[];for(b=0;b<c;b++)e.push("");var c=this.columns[0].getValues(),f;try{for(1<a&&(f=p(c[1]).minus(c[0])),b=2;b<a&&void 0!==f;b++){var g=p(c[b]).minus(c[b-1]);f.equals(g)||(f=void 0)}}catch(h){f=void 0}void 0!==f&&(e[0]=f.plus(c[a-1]).toString());return e};a.setComputedValues=function(a){for(var b=0;b<a.length;b++)this.columns[b].setComputedValues(a[b])};a.triggerRowAdded=function(a){};a.insertRow=function(a,b){for(var c=0;c<this.columns.length;c++)this.columns[c].insertCell(a,b[c]);this.triggerRowAdded(a);
var e=this.id,f=this.list;m.addTransaction({type:m.RESPONSE_TO_CHANGE,undo:function(){f.getItemById(e).removeRow(a)},redo:function(){f.getItemById(e).insertRow(a,b)}});this.requestParse()};a.triggerRowRemoved=function(a){};a.removeRow=function(a){var b=[];if(this.columns.length&&!(2>=this.columns[0].cells.length)){for(var c=0;c<this.columns.length;c++)b.push(this.columns[c].cells[a].value),this.columns[c].removeCell(a);this.triggerRowRemoved(a);var e=this.id,f=this.list;m.addTransaction({type:m.RESPONSE_TO_CHANGE,
undo:function(){f.getItemById(e).insertRow(a,b)},redo:function(){f.getItemById(e).removeRow(a)}})}};a.getParsableObject=function(){var a=this.columns.map(function(a){var b=a.serialize();b.hidden=!a.shouldGraph;b.values.pop();return b});a.pop();return{type:"table",id:this.id,columns:a}};a.requestParse=function(){this.list.triggerAddExp(this.getParsableObject())};a.requestUnparse=function(){for(var a=[this.id],b=0;b<this.columns.length;b++)a.push(this.columns[b].id);this.list.triggerRemoveExps(a)};
a.onAddedToList=function(){this.requestParse()};a.onRemovedFromList=function(){this.requestUnparse()};a.requestUnparseColumn=function(a){this.list.triggerRemoveExp(this.columns[a].id)};a.getState=function(){var a=this.columns.map(function(a){var b=a.serialize();b.values.pop();a.disabled&&(b.values=b.values.map(function(){return""}));return b});a.pop();return{id:this.id,columns:a}};a.isEmpty=function(){return!1}})});define("loadcss!css/folder",function(){});
define("expressions/folder","require loadcss!css/folder pjs underscore ./abstractitem undoredo".split(" "),function(b){b("loadcss!css/folder");var g=b("pjs"),r=b("underscore"),v=b("./abstractitem"),q=b("undoredo");return g(v,function(b,g){b.isFolder=!0;b.init=function(a,b){g.init.call(this,a,b);this.title||(this.title="");this.memberIds||(this.memberIds={});this.hidden=!!this.hidden;this.collapsed=!!this.collapsed;this.updateCount();this.observe("title hidden",this.onStateDidChange.bind(this))};b.updateCount=
function(){this.setProperty("count",r.size(this.memberIds))};b.getState=function(){return{id:this.id,type:"folder",title:this.title,memberIds:this.memberIds,hidden:this.hidden,collapsed:this.collapsed}};b._addItem=function(a){var b=this.list.getItemById(a);this.memberIds[a]=!0;b&&b.setProperty("folder",this);this.updateCount()};b._removeItem=function(a){var b=this.list.getItemById(a);b&&b.setProperty("folder",void 0);this.memberIds.hasOwnProperty(a)&&delete this.memberIds[a];this.updateCount()};b.addItem=
function(a){var b=this.list,c=this.id,f=a.id;q.addTransaction({type:q.CAUSE_OF_CHANGE,redo:function(){b.getItemById(c)._addItem(f)},undo:function(){b.getItemById(c)._removeItem(f)}})};b.removeItem=function(a){var b=this.list,c=this.id,f=a.id;q.addTransaction({type:q.CAUSE_OF_CHANGE,redo:function(){b.getItemById(c)._removeItem(f)},undo:function(){b.getItemById(c)._addItem(f)}})}})});
define("expressions/list","require pjs underscore lib/underscore_model ./expression ./text ./table ./folder undoredo".split(" "),function(b){var g=b("pjs"),r=b("underscore"),v=b("lib/underscore_model"),q=b("./expression"),p=b("./text"),u=b("./table"),a=b("./folder"),m=b("undoredo");return g(v,function(b,f){b.init=function(){f.init.call(this);this.__items=[];this.__itemIds={};this.drawOrder=[];var a=this,b=function(){a.batchEvaluation(function(){a.notifyPropertyChange("playStep")});setTimeout(function(){b()},
40)};b()};b.getItemByIndex=function(a){return this.__items[a]};b.updateDrawOrder=function(){var a=[],b=r.sortBy(this.__itemIds,function(a){return a.index});r.each(b,function(b){b.hasOwnProperty("columns")?r.each(b.columns,function(b){a.push(b.id)}):a.push(b.id)});this.setProperty("drawOrder",a)};b.getItemById=function(a){return this.__itemIds[a]};b._insertItemAt=function(a,b){var c=String(b.id);if(this.__itemIds.hasOwnProperty(c))throw Error("Item with id '"+c+"' is already in list");this.__itemIds[c]=
b;this.__items.splice(a,0,b);b.onAddedToList()};b.triggerItemInserted=function(a,b){};b.insertItemAt=function(a,b){this._insertItemAt(a,b);this.triggerItemInserted(a,b);var c=this,f=b.constructor,g=b.getState();m.addTransaction({type:m.RESPONSE_TO_CHANGE,undo:function(){c.removeItemAt(a)},redo:function(){c.insertItemAt(a,f(g,c))}});this.updateDrawOrder()};b.addItem=function(a){var b=this.getItemByIndex(this.getItemCount()-1);!b||b.text||b.columns||b.headings||""!==b.latex||this.removeItemAt(this.getItemCount()-
1);this.insertItemAt(this.getItemCount(),a)};b.updateItemById=function(a,b){this.getItemById(a).setProperties(b);this.updateDrawOrder()};b._removeItemAt=function(a){var b=this.__items[a];if(b){if(b.isFolder)for(var c in b.memberIds)this.removeItemAt(this.getItemById(c).index);this.__items.splice(a,1);delete this.__itemIds[String(b.id)];b.onRemovedFromList();return b}};b._removeAllItems=function(){for(var a=0;a<this.__items.length;a++)this.__items[a].onRemovedFromList();this.__items=[];this.__itemIds=
{}};b.triggerItemRemoved=function(a,b){};b.removeItemAt=function(a){var b=this;m.oneTransaction(function(){var c=this._removeItemAt(a);this.triggerItemRemoved(a,c);var f=c.constructor,g=c.getState();c.folder&&c.folder.removeItem(c);m.addTransaction({type:m.RESPONSE_TO_CHANGE,undo:function(){var c=f(g,b);b.insertItemAt(a,c)},redo:function(){b.removeItemAt(a)}})}.bind(this));this.updateDrawOrder()};b.triggerItemMoved=function(a,b){};b.moveItemTo=function(a,b){var c=this,f=function(a,b){if(a!==b){var e=
c.getItemCount(),f=c.__items[a];0>a||0>b||a>=e||b>=e||(c.__items.splice(a,1),c.__items.splice(b,0,f),c.triggerItemMoved(a,b),c.updateDrawOrder())}};m.addTransaction({type:m.CAUSE_OF_CHANGE,undo:function(){f(b,a)},redo:function(){f(a,b)}})};b.moveItemsTo=function(a,b,c){m.oneTransaction(function(){var f;if(!(b>=a&&b<a+c))if(a<b)for(f=0;f<c;f++)this.moveItemTo(a,b);else for(f=0;f<c;f++)this.moveItemTo(a+f,b+f)}.bind(this))};b.getItemCount=function(){return this.__items.length};b.isEmpty=function(){var a=
this.getItemCount();return 0===a?!0:1<a?!1:""===this.getItemByIndex(0).latex};b.getState=function(){for(var a=[],b=this.getItemCount(),c=0;c<b;c++)a.push(this.getItemByIndex(c).getState());return{list:a}};b.batchEvaluation=function(a){a()};b.triggerSetState=function(a){};b.setState=function(a){var b,c=[],f=[],g;for(b=0;b<a.list.length;b++)if(g=a.list[b],g.renderShell=!0,g=this.fromState(g))g.isFolder&&f.push(g),c.push(g);var m=this;this.batchEvaluation(function(){m._removeAllItems();for(b=0;b<c.length;b++)m._insertItemAt(b,
c[b])});f.forEach(function(a){for(var b in a.memberIds)m.getItemById(b).setProperty("folder",a)});this.triggerSetState(c);this.updateDrawOrder()};b.fromState=function(b){if(void 0!==b.text)return p(b,this);if(void 0!==b.columns||void 0!==b.headings)return u(b,this);if("folder"===b.type)return a(b,this);-1===["default","always","never"].indexOf(b.userRequestedGraphing)&&(b.hasOwnProperty("graphed")?b.userRequestedGraphing=b.graphed?"always":"never":b.userRequestedGraphing="default");return q(b,this)};
b.triggerRemoveExps=function(){};b.triggerRemoveExp=function(){};b.triggerAddExp=function(){}})});
define("lib/underscore_view","require jquery underscore ./underscore_model pjs i18n".split(" "),function(b){var g=b("jquery"),r=b("underscore"),v=b("./underscore_model"),q=b("pjs"),p=b("i18n");return q(v,function(b){b.$=function(a){var b=g(this.__domNode);return a?b.filter(a).add(b.find(a)):b};var a=function(a){return function(b){this.__domNode||m.call(this);g(b)[a](this.$());this.didInsertElement();return this.$()}};b.appendTo=a("append");b.replace=a("replaceWith");b.prependTo=a("prepend");b.insertAfter=
a("after");b.insertBefore=a("before");b.remove=function(){this.$().remove();this.destruct()};b.destruct=function(){};b.didCreateElement=function(){};b.didInsertElement=function(){};b.getTemplateParams=function(){return{}};b.beforeRerender=function(){};b.afterRerender=function(){};b.rerender=function(){var a=this.__domNode,b=this.getTemplateParams();r.isEqual(b,this.__lastRenderParams)||(this.beforeRerender(),m.call(this),a&&g.contains(document,a)&&this.replace(a),this.afterRerender())};b.setDomNode=
function(a){this.__domNode=a[0]?a[0]:a;this.didInsertElement()};var m=function(){var a=this.getTemplateParams(),b=r.extend({},a,{t:function(a,b){return p.t(a,b)}}),b=this.template(b);this.__domNode=g(b)[0];this.__lastRenderParams=a;this.didCreateElement()}})});
define("expressions/dragdrop",["require","jquery","pjs","tipsy"],function(b){var g=b("jquery"),r=b("pjs"),v=b("tipsy");return r(function(b){b.toggleStyling=function(b){};b.onDragStart=function(b,g){};b.onDragStop=function(b){};b.commitDragState=function(b){};b.updateScroll=function(){};b.computeDragPosition=function(b,g){return{x:b,y:g}};b.computeDragState=function(b,g){return{}};b.previewDragState=function(b){};b.buildDragList=function(){};b.init=function(b){this.expressions=b;this.active=!1};b.start=
function(b,g){1!==b.touches.length||b.wasHandled("longhold")||(this.active=!0,this.exppanel=this.expressions.$("#exppanel"),this.setupEventListeners(b),this.onDragStart(b,g),this.dragList=this.buildDragList(),this.toggleStyling(!0),this.drag(b.touches[0].x,b.touches[0].y),v.addDisableLock())};b.setupEventListeners=function(b){function u(b){for(var f=0;f<b.touches.length;f++){var e=b.touches[f];if(e.identifier===a)return e}}var a=b.touches[0].identifier,m=this;g(document).on("tapmove.dragdrop",function(a){(a=
u(a))&&m.drag(a.x,a.y)});g(document).on("tapend.dragdrop",function(a){u(a)||(m.stop(),a.handle("dragdrop"))});this.exppanel.on("scroll.dragdrop",this.drag.bind(this))};b.stop=function(b){this.active=!1;g(document).off(".dragdrop");this.toggleStyling(!1);this.commitDragState(this.dragState);this.onDragStop(b);v.removeDisableLock()};b.drag=function(b,g){if(this.active){"number"===typeof b&&(this.mouseX=b);"number"===typeof g&&(this.mouseY=g);this.updateScroll();var a=this.computeDragPosition(this.mouseX,
this.mouseY);this.dragState=this.computeDragState(this.dragList,a);this.previewDragState(this.dragState)}}})});
define("expressions/dragdrop_expressions","require jquery underscore lib/browser pjs undoredo ./dragdrop".split(" "),function(b){var g=b("jquery"),r=b("underscore"),v=b("lib/browser"),q=b("pjs"),p=b("undoredo");b=b("./dragdrop");return q(b,function(b,a){b.toggleStyling=function(a){this.exppanel.toggleClass("isDragging",a);this.draggedView.$().toggleClass("dragging",a);a||(this.draggedView.$().removeClass("overFolder"),g(".expressionitem").css("transform","none"))};b.onDragStart=function(a,b){this.expressions.setSelected(null);
this.exppanel=this.expressions.$("#exppanel");g(document.activeElement).blur();a.preventDefault();this.draggedView=b;this.draggedViewHeight=b.$().outerHeight()-1;this.panelTop=this.exppanel.offset().top;this.panelHeight=this.exppanel.height();this.panelBottom=this.panelTop+this.panelHeight;this.grabOffset=b.$().offset().top-a.touches[0].y;this.grabY=this.computeDragPosition(a.touches[0].x,a.touches[0].y).y;this.grabIndex=b.model.index;this.draggedViewCount=1;b.model.isFolder&&(this.draggedViewCount+=
r.size(b.model.memberIds),this.dropCollapsed=b.model.collapsed,b.model.setProperty("collapsed",!0))};b.onDragStop=function(a){clearTimeout(this.scrollTimeout);this.expressions.setSelected(this.draggedView.model)};b.buildDragList=function(){var a=this,b=this.expressions.getItemsByIndexRange(0,Infinity),f=[{y:-Infinity,index:0,folder:void 0}],e=[{y:Infinity,index:0,folder:void 0}];b.forEach(function(b){if(!(b.id===a.draggedView.model.id||b.folder&&b.folder.collapsed||b.folder&&a.draggedView.model.isFolder)){var c=
a.expressions.getItemView(b.id),g=b.index>a.grabIndex,l=c.$();if(b.isFolder&&(b.collapsed||a.draggedView.model.isFolder))for(var p in b.memberIds)l.push(a.expressions.getItemView(p).$()[0]);p=g?-a.draggedViewHeight:0;var s=c.$().height(),c=c.$().position().top+p,g=b.index+(g?-1:0),n=g+l.length,x,u;a.draggedView.model.isFolder||(x=b.folder,u=b.isFolder?b:b.folder);f.push({y:c,index:g,folder:x});f.push({y:c+s/2,index:n,folder:u,elements:l,offset:p});e={y:c+s,index:n,folder:void 0}}});f.push(e);return f};
b.updateScroll=function(){clearTimeout(this.scrollTimeout);if(this.active){var a;a=Math.min(0,this.mouseY-this.panelTop);a=Math.max(a,this.mouseY-this.panelBottom+30);if(a=a*this.panelHeight/900)this.exppanel.scrollTop(this.exppanel.scrollTop()+a),this.scrollTimeout=setTimeout(this.updateScroll.bind(this),30)}};b.computeDragPosition=function(a,b){b=Math.max(b,Math.min(b,this.panelBottom),this.panelTop);b-=this.panelTop;b+=this.grabOffset;return{x:NaN,y:b+this.exppanel.scrollTop()}};b.computeDragState=
function(a,b){var f=r.sortedIndex(a,{y:b.y},function(a){return a.y})-1;return{list:a,index:a[f].index,folder:a[f].folder,dragY:b.y}};b.commitDragState=function(a){var b=this;p.oneTransaction(function(){var f=b.draggedView.model;b.expressions.model.moveItemsTo(b.grabIndex,a.index,b.draggedViewCount);var e=a.folder,g=f.folder;e!==g&&(g&&g.removeItem(f),e&&e.addItem(f));f.isFolder&&f.setProperty("collapsed",b.dropCollapsed)})};b.previewDragState=function(a){var b=this;this.draggedView.$().css("transform",
v.translateRule(0,a.dragY-this.grabY));this.draggedView.$().toggleClass("overFolder",!!a.folder);r.each(a.list,function(f){f.elements&&f.elements.css("transform",v.translateRule(0,f.offset+(f.index>a.index?b.draggedViewHeight:0)))})}})});
define("expressions/dragdrop_columns","require jquery underscore lib/browser pjs ./dragdrop".split(" "),function(b){var g=b("jquery"),r=b("underscore"),v=b("lib/browser"),q=b("pjs");b=b("./dragdrop");return q(b,function(b,u){b.toggleStyling=function(a){this.draggedCells.toggleClass("dragging",a);a||g(".expressiontable .cell").css("transform","none")};b.onDragStart=function(a,b){this.draggedView=b;this.draggedCells=g();this.tableView=b.tableView;this.tableView.model.setProperty("selectedCell",null);
b.tableView.model.setProperty("selected",!0);this.draggedViewWidth=b.$().outerWidth()-1;var c=this.tableView.$(".column:first-child"),f=this.tableView.$(".column:last-child");this.minDragX=c.offset().left+c.outerWidth();this.maxDragX=f.offset().left-this.draggedViewWidth;this.grabOffset=b.$().offset().left-a.touches[0].x;this.grabX=this.computeDragPosition(a.touches[0].x,a.touches[0].y).x;this.grabIndex=b.model.index};b.onDragStop=function(a){};b.buildDragList=function(){var a=this,b=this.tableView.columnViews.slice(1);
b.pop();var c=[{x:-Infinity,index:1}],f=[{x:Infinity,index:1}];b.forEach(function(b){var h=b[0];b=g(b.map(function(a){return a.$()[0]}));if(h===a.draggedView)a.draggedCells=b;else{var d=h.model,k=d.index>a.grabIndex,l=k?-a.draggedViewWidth:0,m=h.$().outerWidth(),h=h.$().offset().left+0+l,d=d.index+(k?-1:0),k=d+1;c.push({x:h,index:d});c.push({x:h+m/2,index:k,offset:l,views:b});f={x:h+m,index:k}}});c.push(f);return c};b.computeDragPosition=function(a,b){a+=this.grabOffset;a=Math.max(this.minDragX,Math.min(this.maxDragX,
a));return{x:a,y:NaN}};b.computeDragState=function(a,b){var c=r.sortedIndex(a,{x:b.x},function(a){return a.x})-1;return{list:a,index:a[c].index,dragX:b.x}};b.commitDragState=function(a){this.tableView.model.moveColumn(this.grabIndex,a.index)};b.previewDragState=function(a){var b=this;this.draggedCells.css("transform",v.translateRule(a.dragX-this.grabX,0));r.each(a.list,function(c){c.views&&c.views.css("transform",v.translateRule(c.offset+(c.index>a.index?b.draggedViewWidth:0),0))})}})});
define("loadcss!css/add_expression",function(){});
define("main/popover_view",["require","jquery","pjs","lib/underscore_view"],function(b){function g(b){b.isVisible?(q.forEach(function(g){g!==b&&g.closePopover()}),r(document).on("tapstart.popover-"+b.popoverNumber,function(g){b.setProperty("isVisible",!b.eventShouldClosePopover(g))})):r(document).off("tapstart.popover-"+b.popoverNumber)}var r=b("jquery"),v=b("pjs");b=b("lib/underscore_view");var q=[];return v(b,function(b,u){b.init=function(){u.init.call(this);this.isVisible=!1;q.push(this);this.popoverNumber=
q.length;this.observe("isVisible",function(){g(this);this.renderIsVisible()}.bind(this))};b.setupOpenButton=function(a,b){this.openButton=a;this.openButton.on(b,this.onBtnPressed.bind(this))};b.didInsertElement=function(){this.renderIsVisible()};b.renderIsVisible=function(){this.$().toggle(this.isVisible);this.openButton&&this.openButton.toggleClass("active",this.isVisible)};b.eventShouldClosePopover=function(a){return!this.eventIsWithinPopover(a)};b.eventIsWithinPopover=function(a){a=r(a.target);
return a.closest(this.$()).length||a.closest(this.openButton).length};b.onBtnPressed=function(a){a=r(a.target);a.closest("[popover]").length||a.closest(this.openButton).length&&this.togglePopover()};b.togglePopover=function(){this.setProperty("isVisible",!this.isVisible)};b.closePopover=function(){this.setProperty("isVisible",!1)}})});
define("template",["underscore","text"],function(b,g){var r={};return{load:function(v,q,p,u){g.get(q.toUrl("template_src/"+v+".underscore"),function(a){a=b.template(a);u.isBuild&&(r[v]=a.source);p(a)})},write:function(b,g,p){g in r&&p("define('"+b+"!"+g+"', ['underscore'], function(_) {return "+r[g]+";});")}}});
define("template!add_expression",["underscore"],function(b){return function(g){var r="";with(g||{})r+='<div class="add-expression-dropdown popover bottom" popover="true">\n <span class="arrow"></span>\n\n ',b.each(expression_types,function(b){r+="\n   <div class='new-item do-not-blur action-new"+b+"' id='new-"+b+"'>\n      <i class='icon-new-"+b+" expression-icon'></i>\n      "+t(b)+"\n    </div>\n "}),r+="\n\n</div>\n";return r}});
define("expressions/add_expression","require loadcss!css/add_expression pjs config main/popover_view template!add_expression ./expression ./table ./text ./folder lib/browser undoredo".split(" "),function(b){b("loadcss!css/add_expression");var g=b("pjs"),r=b("config"),v=b("main/popover_view"),q=b("template!add_expression"),p=b("./expression"),u=b("./table"),a=b("./text"),m=b("./folder"),c=b("lib/browser"),f=b("undoredo");return g(v,function(b,g){b.template=q;b.init=function(a){g.init.call(this);this.listView=
a;this.list=a.model};b.getTemplateParams=function(){var a=g.getTemplateParams(),b=["expression","text","table"];r.get("folders")&&b.push("folder");a.expression_types=b;return a};b.didInsertElement=function(){g.didInsertElement.call(this);if(c.IS_IPAD&&c.IS_IN_IFRAME)this.$().on("tapstart",function(a){a.preventDefault()});this.$(".action-newexpression").on("tap",this.newMath.bind(this));this.$(".action-newtext").on("tap",this.newText.bind(this));this.$(".action-newfolder").on("tap",this.newFolder.bind(this));
this.$(".action-newtable").on("tap",this.newTable.bind(this))};b.newMath=function(){this.insertItem(p({selected:!0,latex:""},this.list))};b.newText=function(){this.insertItem(a({selected:!0,text:""},this.list))};b.newFolder=function(){this.insertItem(m({selected:!0},this.list))};b.newTable=function(){var a=u({selected:!0,latex:"",columns:[{latex:"x",values:[1]},{latex:"y",values:[""]}]},this.list);this.insertItem(a);this.listView.getSelectedView().addFocus("cell",1,1)};b.insertItem=function(a){var b=
this;this.setProperty("isVisible",!1);var c=this.listView.getSelected();if(!c||!c.isExpression||c.latex||c.folder||a.isExpression)if(c&&c.isExpression&&!c.latex&&c.folder&&!a.isExpression&&!a.isFolder)f.oneTransaction(function(){b.list.insertItemAt(c.index+1,a);c.folder.addItem(a);b.list.removeItemAt(c.index)});else if(!c||c.folder||c.isFolder)if(c&&c.folder&&!a.isFolder)f.oneTransaction(function(){b.list.insertItemAt(c.index+1,a);c.folder.addItem(a)});else if(c&&c.isFolder&&!c.collapsed&&!a.isFolder)f.oneTransaction(function(){b.list.insertItemAt(c.index+
1,a);c.addItem(a)});else{c||(c=this.listView.getFirstVisibleItem());for(c.isFolder&&(c=this.list.getItemByIndex(c.index+1));c&&c.folder;)c=this.list.getItemByIndex(c.index+1);var e=c?c.index:this.list.getItemCount();this.list.insertItemAt(e,a)}else this.list.insertItemAt(c.index+1,a);else f.oneTransaction(function(){b.list.insertItemAt(c.index+1,a);b.list.removeItemAt(c.index)});this.listView.getSelectedView().addFocus()}})});
define("template!toast",["underscore"],function(b){return function(b){with(b||{})b=""+('<div class="toast-container">\n  <span class="toast">\n    <span class="msg variable-msg"></span>\n    <a class="undo action-undo">'+t("undo")+"</a>\n  </span>\n</div>");return b}});
define("main/toast","require jquery pjs lib/underscore_view undoredo template!toast".split(" "),function(b){var g=b("jquery"),r=b("pjs"),v=b("lib/underscore_view"),q=b("undoredo"),p=b("template!toast"),u=new (r(v,function(a,b){a.template=p;a.didCreateElement=function(){var a=this;q.changesCallbacks.push(function(){a.hide()});this.$(".action-undo").on("tap",function(){q.undo();a.hide();a.callback&&a.callback()});this.$().toggle(!1)};a.show=function(a,b){clearTimeout(this.hideTimeout);g(".toast-container").fadeOut("fast");
this.$().fadeIn("fast");this.$(".variable-msg").text(a);this.callback=b;var e=this;this.hideTimeout=setTimeout(function(){e.hide()},6E3)};a.hide=function(){clearTimeout(this.hideTimeout);this.$().fadeOut("fast");this.cb=void 0}}));g(function(){u.appendTo("#sliding-interior")});return u});
define("main/resize",["require","lib/browser","jquery"],function(b){function g(){return 0!==c}function r(){c--;!g()&&m&&(m=!1,v())}function v(){if(g())m=!0;else for(var a=0;a<f.length;a++)f[a]()}function q(){0!==a(document.activeElement).filter("input, textarea").length&&a("<input />").prependTo("body").focus().attr({readonly:"readonly",disabled:"true"}).blur().remove()}function p(){if(u.IS_MOBILE){var b=a(document.activeElement);0===b.filter("input,textarea").length&&a(window).scrollTop(0).scrollLeft(0);
b.filter("input:hidden, textarea:hidden").length&&q()}else a(window).scrollTop(0).scrollLeft(0);var b=window.innerWidth+a(window).scrollLeft(),c=window.innerHeight+a(window).scrollTop();if(b!==e.width||c!==e.height)e.width=b,e.height=c,k&&h.width&&h.height||(h.width=b,h.height=c),l&&(u.IS_MOBILE?v():(clearTimeout(d),d=setTimeout(v,100)))}var u=b("lib/browser"),a=b("jquery"),m=!1,c=0,f=[],e={},h={},d,k=!1,l=!1;return{trigger:v,register:function(a){f.push(a);l&&a()},fullScreen:h,currentScreen:e,init:function(b){k=
b&&b.stickyFullScreen;p();setInterval(p,100);a(window).resize(function(){p()})},monitor:function(){l=!0;v()},defocusMobile:q,animationIsRunning:g,animationStarted:function(){c++},animationEnded:r,waitForCSSAnimation:function(b,d){function e(){clearTimeout(l);g.off(k);r();f.resolve()}var f=a.Deferred();if(u.IS_IE9)return v(),f.resolve();var g=a(b),h=g.css("transition-duration");if("s"!==h[h.length-1])return v(),f.resolve();h=1E3*parseFloat(h.slice(0,-1));if(!g.closest("body").length)return v(),f.resolve();
b=g[0];c++;v();var k="transitionend webkitTransitionEnd MSTransitionEnd";g.on(k,function(a){a&&(a.target!==b||d&&!a.originalEvent.propertyName.match(d))||e()});var l=setTimeout(function(){e()},h+100);return f}}});
define("lib/keys",["require"],function(b){return new function(){var b={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"};this.lookup=function(r){return b[r.which]}}});
(function(b){b.fn.extend({scrollVisible:function(g,r,v){if(g&&g.length){r=r||0;v=v||0;var q=this.offset().top+r;r=this.outerHeight()+v-r;var p=b(g[0]).offset().top,u=b(g).outerHeight()+p;g.each(function(){var a=b(this),g=a.offset().top,a=a.outerHeight()+g;g<p&&(p=g);a>u&&(u=a)});g=-this.scrollTop();p-=q+g;u-=q+g;q=-p;v=r-u;g>v&&g<q||u-p>r||(g>v?this.scrollTop(-v):g<q&&this.scrollTop(-q))}return this}})})(jQuery);define("lib/jquery.scrollvisible",function(){});define("loadcss!css/new_expression",function(){});
define("template!new_expression",["underscore"],function(b){return function(b){with(b||{});return"<div class=\"expressionitem new-expression opened\">\n  <div class='new-math-div do-not-blur action-newmath'>\n    <div class='new-expression-fade'></div>\n  </div>\n\n  <span\n     class=\"tab\"\n  >\n     <span class='num variable-index'>2</span>\n     <div class='tab-interior'></div>\n  </span>\n\n</div>\n"}});
define("expressions/new_expression","require loadcss!css/new_expression pjs lib/underscore_view template!new_expression ./expression".split(" "),function(b){b("loadcss!css/new_expression");var g=b("pjs"),r=b("lib/underscore_view"),v=b("template!new_expression"),q=b("./expression");return g(r,function(b,g){b.template=v;b.init=function(a){g.init.call(this);this.observe("index",this.updateIndex.bind(this));this.listView=a};b.didInsertElement=function(){this.updateIndex();this.$(".action-newmath").on("tap",
this.newMath.bind(this))};b.updateIndex=function(){this.$(".variable-index").text(this.index)};b.newMath=function(){var a=q({selected:!0,latex:""},this.listView.model);this.listView.model.insertItemAt(this.listView.model.getItemCount(),a);this.listView.getSelectedView().addFocus()}})});
define("expressions/renderviewport",["require","jquery","main/timermodules","lib/browser"],function(b){var g=b("jquery"),r=b("main/timermodules"),v=b("lib/browser");r.add("expressions.renderviewport",function(b,p){function u(){m=g("#exppanel");if(!m.length)return m=null,[];c=m.offset().top;var a=[],k=m.scrollTop(),l=m.height();k==h&&l==e?(k=(new Date).getTime(),0===f?f=k:300<k-f&&(k=b.expressionAtPoint(5,c),l=b.expressionAbovePoint(5,c+l),k&&l&&b.getItemsByIndexRange(k.index,l.index).forEach(function(b){b.renderShell&&
a.push(b)}))):(h=k,e=l,f=0);return a}function a(a){var c;if(a.length)c=0,a.forEach(function(a){(function(a){setTimeout(function(){a.setProperty("renderShell",!1)},10*c)})(a,c++)});else if(!v.IS_MOBILE&&!p.redraw_slowly_timeout)for(a=b.model.getItemCount(),c=0;c<a;++c){var e=b.model.getItemByIndex(c);if(e.renderShell){e.setProperty("renderShell",!1);break}}}var m=null,c=null,f=0,e=0,h=0;return function(){a(u())}})});
define("expressions/list_view","require jquery underscore pjs config tipsy lib/underscore_view lib/touchtracking expressions/dragdrop_expressions expressions/dragdrop_columns ./add_expression main/toast undoredo main/resize lib/keys lib/browser lib/jquery.scrollvisible ./new_expression ./renderviewport ./expression".split(" "),function(b){var g=b("jquery"),r=b("underscore"),v=b("pjs"),q=b("config");b("tipsy");var p=b("lib/underscore_view"),u=b("lib/touchtracking"),a=b("expressions/dragdrop_expressions"),
m=b("expressions/dragdrop_columns"),c=b("./add_expression"),f=b("main/toast"),e=b("undoredo"),h=b("main/resize"),d=b("lib/keys"),k=b("lib/browser");b("lib/jquery.scrollvisible");var l=b("./new_expression");b("./renderviewport");var y=b("./expression");return v(p,function(b,n){b.__itemViews={};b.__latexChangeCallbacks=[];b.keypadView=null;b.isTransient=!1;b.transientChildren=[];b.isTablet=q.get("tablet");b.triggerClearGraph=function(){};b.getTemplateParams=function(){return{IS_TABLET:this.isTablet}};
b.getAllSliders=function(){var a=[],b;for(b in this.__itemViews)this.__itemViews[b].hasOwnProperty("sliderView")&&this.__itemViews[b].sliderView&&a.push(this.__itemViews[b].sliderView.slider);return a};b.toggleAllSliders=function(){for(var a=this.getAllSliders(),b=0;b<a.length;b++)if(a[b].isPlaying){this.stopAllSliders();return}this.playAllSliders()};b.playAllSliders=function(){var a=this.getAllSliders();e.oneTransaction(function(){for(var b=0;b<a.length;b++)a[b].setProperty("isPlaying",!0)}.bind(this))};
b.stopAllSliders=function(){var a=this.getAllSliders();e.oneTransaction(function(){for(var b=0;b<a.length;b++)a[b].setProperty("isPlaying",!1)}.bind(this))};b.onStartMovingPoint=function(a){if(a=(a=this.model.getItemById(a))&&a.formula&&a.formula.move_ids)for(var b=0;b<a.length;b++)void 0!==a[b]&&(this.getItemView(a[b]).sliderView.setProperty("isMoving",!0),this.getItemView(a[b]).sliderView.slider.setProperty("isPlaying",!1))};b.onStopMovingPoint=function(a){if(a=(a=this.model.getItemById(a))&&a.formula&&
a.formula.move_ids)for(var b=0;b<a.length;b++)void 0!==a[b]&&this.getItemView(a[b]).sliderView.setProperty("isMoving",!1)};b.onMovePoint=function(a,b){var c=this.model.getItemById(a);if(c=c.formula&&c.formula.move_ids){for(var d,e,f=0;f<b.length;f++)void 0!==c[f]&&(d=this.model.getItemById(c[f]))&&d.slider&&(e=d.slider.computeSnappedValue(b[f]),d.slider.setProperty("value",e));this.setSelected(null)}};b.onLatexChange=function(a){r.each(this.__latexChangeCallbacks,function(b){b(a)})};b.init=function(b){n.init.call(this);
this.model=b;this.model.triggerItemInserted=this.onItemInserted.bind(this);this.model.triggerItemRemoved=this.onItemRemoved.bind(this);this.model.triggerItemMoved=this.onItemMoved.bind(this);this.model.triggerSetState=this.onSetState.bind(this);this.setPropertyComparator("selectedItem",function(a,b){return a===b});this.observe("itemFocused",this.renderItemFocused.bind(this));this.observe("editListMode",this.renderEditListMode.bind(this));this.observe("selectedItem",this.selectedItemChanged.bind(this));
g(document).on("keypress","#exppanel",this.ensureActiveChildIsVisible.bind(this));this.dragdrop_expressions=a(this);this.dragdrop_columns=m(this)};b.computeTransient=function(){this.setProperty("transient",0<this.transientChildren.length)};b.padLastExpression=function(a){this.$(".expressionitem.new-expression").removeClass("animating").css("margin-bottom",+a+"px")};b.unpadLastExpression=function(){this.$(".expressionitem.new-expression").addClass("animating").css("margin-bottom","0")};b.padLastExpressionUntilTapEnd=
function(a){var b=this;this.padLastExpression(a);g(document).on("tap.animating-bottom",function(){0===g(".exp-options-menu").length&&(b.unpadLastExpression(),g(document).off("tap.animating-bottom"))})};b.updateWidth=function(){function a(b){b=b.find(".main");b.length&&(b=b.outerWidth()+b.offset().left+5,b>c&&(c=b))}var b=this.$("#exppanel"),c=0,d=parseInt(b.css("min-width"),10);this.$(".disable-horizontal-scroll-to-cursor").scrollLeft(0);var e=this.getSelectedView();e&&(this.itemFocused||e.model.isTable)&&
a(e.$());this.editListMode&&this.$(".expressiontable").each(function(){a(g(this))});c<d&&(c=d);parseInt(b.css("max-width"),10)>c?(b.addClass("collapse-slowly"),setTimeout(function(){b.removeClass("collapse-slowly")},0.5)):b.removeClass("collapse-slowly");b.css("max-width",c)};b.onItemInserted=function(a,b){this.newExpressionView&&this.newExpressionView.setProperty("index",this.model.getItemCount()+1);if(this.$items){var c=this.createItemView(b);c&&(0===a?c.prependTo(this.$items):a===this.model.getItemCount()-
1?c.appendTo(this.$items):c.insertAfter(this.$items.children(":nth-child("+a+")")),this.editListMode&&(c.$().css({transform:"scale(0,0)",opacity:0}),setTimeout(function(){c.$().css({transition:".2s",opacity:1,transform:"scale(1,1)"})},1),setTimeout(function(){c.$().css({transition:"none"})},300)));b.observe("selected.listview",this.observeItemSelected.bind(this));b.selected&&this.observeItemSelected("selected",b);for(var d=this.model.getItemCount(),e=a;e<d;e++)this.model.getItemByIndex(e).setProperty("index",
e);this.updateWidth()}};b.onItemRemoved=function(a,b){var c=String(b.id);this.selectedItem===b&&this.setProperty("selectedItem",null);b.unobserve(".listview");this.newExpressionView&&this.newExpressionView.setProperty("index",this.model.getItemCount()+1);var d=this.__itemViews[c];if(d)for(d.remove(),delete this.__itemViews[c],c=this.model.getItemCount(),d=a;d<c;d++)this.model.getItemByIndex(d).setProperty("index",d);this.updateWidth()};b.onItemMoved=function(a,b){for(var c=Math.min(a,b),d=Math.max(a,
b);c<=d;c++)this.model.getItemByIndex(c).setProperty("index",c);if(d=this.getItemView(this.model.getItemByIndex(b).id))if(c=this.$items,0===b)c.prepend(d.$());else if(b===this.model.getItemCount()-1)c.append(d.$());else{var e=b+(b>a?1:0);d.$().insertAfter(c.children(":nth-child("+e+")"))}};b.onSetState=function(a){for(var b in this.__itemViews)this.__itemViews.hasOwnProperty(b)&&this.__itemViews[b].remove();this.__itemViews={};this.selectedItem=null;this.newExpressionView&&this.newExpressionView.setProperty("index",
this.model.getItemCount()+1);this.createAllItemViews()};b.renderItemFocused=function(){g("body").toggleClass("ITEM-FOCUSED",!!this.itemFocused)};b.instantiateItemView=function(a){};b.createItemView=function(a){var b=this.instantiateItemView(a);a=String(a.id);if(b){this.__itemViews[a]=b;var c=this;b.triggerDelete=function(){c.onDelete(b)};b.triggerEnterPressed=function(){c.onEnterPressed(b)};b.triggerUpPressed=function(){c.onUpPressed(b)};b.triggerDownPressed=function(){c.onDownPressed(b)};b.triggerBackspacePressed=
function(){c.onBackspacePressed(b)};b.triggerDelPressed=function(){c.onDelPressed(b)};b.observe("transient",function(a,b){b.transient?c.transientChildren.push(b):c.transientChildren=r(c.transientChildren).without(b);c.computeTransient()})}return b};b.createAllItemViews=function(){if(this.$items){for(var a=this.model.getItemCount(),b=0;b<a;b++){var c=this.model.getItemByIndex(b),d=this.createItemView(c);d&&(d.appendTo(this.$items),c.setProperty("index",b),c.observe("selected.listview",this.observeItemSelected.bind(this)),
c.selected&&this.observeItemSelected("selected",c))}(a=this.getSelectedView())&&a.addFocus();this.updateWidth()}};b.getItemView=function(a){return this.__itemViews[String(a)]};b.onDelete=function(a){var b=this;a.$().css({transition:"0.2s",opacity:"0",transform:"scale(.1, .1)"});setTimeout(function(){e.oneTransaction(function(){b.model.removeItemAt(a.model.index);if(0===b.model.getItemCount()){var c=y(void 0,b.model);b.model.insertItemAt(0,c)}})},200)};b.onUpPressed=function(a){0!==a.model.index&&
(this.selectPrevExpression(a.model),this.getSelectedView().addFocus("end"))};b.onDownPressed=function(a){this.selectNextExpression(a.model);this.getSelectedView().addFocus("start")};b.onBackspacePressed=function(a){var b=a.model.isText,c=this.getItemByIndex(a.model.index+1);!a.model.folder||c&&c.folder?(this.upwardDeleteExpression(a.model),b&&k.IS_IPAD&&k.IS_IN_IFRAME?this.setSelected(null):this.getSelectedView().addFocus("end")):a.model.folder.removeItem(a.model)};b.onDelPressed=function(a){this.downwardDeleteExpression(a.model);
this.getSelectedView().addFocus("start")};b.onEnterPressed=function(a){if(a.model.isText&&k.IS_IPAD&&k.IS_IN_IFRAME)g(document.activeElement).blur(),this.setSelected(null);else{var b=y({selected:!0},this.model),c=this;e.oneTransaction(function(){c.model.insertItemAt(a.model.index+1,b);a.model.isFolder&&!a.model.collapsed&&a.model.addItem(b);a.model.folder&&a.model.folder.addItem(b)});this.getSelectedView().addFocus()}};b.expressionsVisible=!0;b.hideExpressions=function(){this.setSelected(null);g("#show-expressions-tab").show();
this.setProperty("expressionsVisible",!1);g("#hide-expressions-tab").hide();g(document.activeElement).blur();g("body").addClass("fullscreen");g("body").addClass("shift-grapher");h.trigger()};b.showExpressions=function(){this.setProperty("expressionsVisible",!0);g(document.activeElement).blur();g("#show-expressions-tab").hide();g("body").removeClass("fullscreen");setTimeout(function(){g("body").removeClass("shift-grapher");h.trigger()},500)};b.renderEditListMode=function(){var a=this.$(".edit-list-btn"),
b=g("body"),c=this;this.editListMode?(a.addClass("btn-primary"),a.text("done"),a.removeClass("tooltip"),b.addClass("EDIT-LIST-MODE"),this.setSelected(null),this.stopAllSliders(),g(document).on("tapstart.edit-list-mode",function(a){0===g(a.target).closest("#exppanel").length&&0===g(a.target).closest(".options-menu").length&&0===g(a.target).closest("#expression-top-bar").length&&c.setProperty("editListMode",!1)})):(a.removeClass("btn-primary"),a.addClass("tooltip"),a.html('<i class="icon-settings" />'),
b.removeClass("EDIT-LIST-MODE"),g(document).off(".edit-list-mode"))};b.onFocusIn=function(a){this.expressionsVisible||this.showExpressions();var b=g(a.target);a=0!==b.closest(".mathquill-rendered-math").length;var c=0!==b.closest(".mathquill-editable").length,b=0!==b.closest(".expressiontext").length;a||c||b?(this.setProperty("editListMode",!1),this.setProperty("itemFocused",!0)):this.setProperty("itemFocused",!1);this.setProperty("needFakeKeypad",a||c);this.setProperty("editDisabled",a&&!c);clearTimeout(this.fakeKeypadTimeout)};
b.onFocusOut=function(){clearTimeout(this.fakeKeypadTimeout);this.fakeKeypadTimeout=setTimeout(function(){var a=this.getSelectedView();a&&a.isFocused()||(this.setProperty("itemFocused",!1),this.setProperty("needFakeKeypad",!1),this.setProperty("editDisabled",!1))}.bind(this),0)};b.offset=function(){return this.$().offset()};b.setBottom=function(a){var b=this.$().height()-this.$().offset().top;this.$().css("bottom",a+"px");a<b&&u.isTapActive()&&this.padLastExpressionUntilTapEnd(b-a)};b.didInsertElement=
function(){var a=this;n.didInsertElement.call(this);this.addExpressionView=c(this);this.addExpressionView.appendTo(this.$());this.addExpressionView.setupOpenButton(this.$(".action-add-expression"),"tap");this.$items=this.$(".template-expressioneach");h.trigger();this.$("#exppanel").scroll(function(a){g("#expression-top-bar").toggleClass("expressions-scrolled",0<g(a.target).scrollTop())});this.$("#exppanel").on("tapstart",function(a){"mouse"!==a.device&&0===g(a.target).closest(".expressionitem").length&&
g(document.activeElement).blur()});g("#expression-top-bar").on("tapstart",function(b){b.wasHandled()||a.setSelected(null)});this.$().on("tap",".action-clearall",function(){a.triggerClearGraph();f.show("Graph cleared.",function(){a.setProperty("editListMode",!0)})});this.$().on("tap",".action-undo",function(){e.undo()});this.$().on("tap",".action-redo",function(){e.redo()});this.$().on("focusout",this.onFocusOut.bind(this));this.$().on("focusin",this.onFocusIn.bind(this));this.$(".action-toggleeditlistmode").on("tap",
function(){a.setProperty("editListMode",!a.editListMode)});this.$(".action-hideexpressions").on("tap",this.hideExpressions.bind(this));this.$(".action-showexpressions").on("tap",this.showExpressions.bind(this));g(document.documentElement).on("keydown",this.handleKeyDown.bind(this));this.$().on("tapstart",".action-hamburger",function(){g("body").toggleClass("resources-open");h.waitForCSSAnimation("#sliding-interior",/transform/)});this.renderItemFocused();this.renderEditListMode();this.newExpressionView=
l(this);this.newExpressionView.replace(this.$(".template-newexpression"));this.newExpressionView.setProperty("index",this.model.getItemCount()+1);this.$().on("render",function(b){a.updateWidth()});this.observe("editListMode itemFocused selectedItem",function(){a.updateWidth()});this.$().on("focusin",function(){setTimeout(function(){a.updateWidth()},0)});this.createAllItemViews()};b.selectedItemChanged=function(){this.ensureActiveChildIsVisible()};b.getFirstVisibleItem=function(){var a=this.$("#exppanel").offset().top,
b=this.expressionAtPoint(0,a);if(!b)return this.getItemByIndex(0);this.getItemView(b.id).$().offset().top<a-2&&(b=this.getItemByIndex(b.index+1));return b};b.appendBlankExpression=function(){this.newExpressionView.newMath()};b.ensureActiveChildIsVisible=function(){if(this.selectedItem){var a=this.getItemView(this.selectedItem.id);a&&this.$("#exppanel").scrollVisible(a.$(),0,-75)}else a=g(document.activeElement).closest(".expressionitem"),a.length&&this.$("#exppanel").scrollVisible(a,0,-20)};b.handleKeyDown=
function(a){if(!g.contains(document.body,document.activeElement)&&!g(a.target).closest("#exppanel").length&&g.contains(document.documentElement,a.target)){var b=this.getSelectedView();if(b&&b.isFocused())b.processMissedKeyEvent(a);else if(b){var c=d.lookup(a);switch(c){case d.UP:a.preventDefault();this.selectPrevExpression(b.model);break;case d.DOWN:a.preventDefault();this.selectNextExpression(b.model,!0);break;case d.ESCAPE:a.preventDefault();this.setSelected(null);break;case d.RIGHT:case d.TAB:a.preventDefault();
b&&(b.model.isTable?b.addFocus("cell",0,0):b.addFocus("start"));break;case d.LEFT:a.preventDefault();b&&(b.model.isTable?b.addFocus("cell",0,b.model.columns.length-1):b.addFocus("end"));break;case d.BACKSPACE:a.preventDefault();b&&this.upwardDeleteExpression(b.model);break;case d.DELETE:a.preventDefault();b&&this.downwardDeleteExpression(b.model);break;case d.ENTER:a.preventDefault();if(b)this.onEnterPressed(b);break;default:if(a.metaKey||a.ctrlKey||c===d.SHIFT||c===d.SPACEBAR)break;b&&!b.model.isTable&&
b.addFocus("end")}}}};b.observeItemSelected=function(a,b){var c=b.selected;c||this.selectedItem!==b?c&&!this.selectedItem?this.setProperty("selectedItem",b):c&&this.selectedItem!==b&&(this.selectedItem.setProperty("selected",!1),this.setProperty("selectedItem",b)):this.setProperty("selectedItem",null)};b.isSelected=function(a){if((a=this.getSelected())&&a.isTable){var b=a.selectedCell;a=b?a.columns[b.column]:null}return a&&a.id.toString()};b.getSelected=function(){return this.selectedItem};b.getSelectedView=
function(){var a=this.getSelected();return a?this.getItemView(a.id):null};b.setSelected=function(a){var b=a;"number"===typeof a&&(b=this.model.getItemByIndex(a));b?b.setProperty("selected",!0):(a=this.getSelected())&&a.setProperty("selected",!1)};b.upwardDeleteExpression=function(a){var b=a.index,c=this.model.getItemByIndex(this.findPrevSelectableIndex(b)),d=this;e.oneTransaction(function(){d.model.removeItemAt(b);0===d.model.getItemCount()&&(c=y(void 0,d.model),d.model.insertItemAt(0,c));c||(c=d.model.getItemByIndex(d.findNextSelectableIndex(b-
1)));c&&c.setProperty("selected",!0)})};b.findPrevSelectableIndex=function(a){var b;do a--,b=this.model.getItemByIndex(a);while(b&&b.inCollapsedFolder);return b?a:void 0};b.findNextSelectableIndex=function(a){var b;do a++,b=this.model.getItemByIndex(a);while(b&&b.inCollapsedFolder);return b?a:void 0};b.downwardDeleteExpression=function(a){a=a.index;var b=this.model.getItemByIndex(this.findNextSelectableIndex(a)),c=this;if(b)this.setSelected(b),this.model.removeItemAt(a);else if(1<this.model.getItemCount())this.setSelected(a-
1),this.model.removeItemAt(a);else e.oneTransaction(function(){c.model.removeItemAt(0);c.model.insertItemAt(0,y(void 0,c.model));c.setSelected(0)})};b.selectPrevExpression=function(a){if(a){var b=a.index,c=this.model.getItemByIndex(this.findPrevSelectableIndex(b));c&&(c.setProperty("selected",!0),b===this.model.getItemCount()-1&&a.isEmpty()&&this.model.removeItemAt(b))}};b.selectNextExpression=function(a,b){if(a){var c=this.model.getItemByIndex(this.findNextSelectableIndex(a.index));c?c.setProperty("selected",
!0):b||(c=y({selected:!0},this.model),this.model.insertItemAt(this.model.getItemCount(),c))}};b.getItemsByIndexRange=function(a,b){a=Math.max(0,a);b=Math.min(this.model.getItemCount()-1,b);for(var c=[],d=a;d<=b;d++)c.push(this.model.getItemByIndex(d));return c};b.getItemByIndex=function(a){a=this.getItemsByIndexRange(a,a);return a.length?a[0]:null};b.getItemById=function(a){return this.model.getItemById(a)};b.getChildItemById=function(a){if(null===a)return null;for(var b=this.model.getItemCount(),
c=0;c<b;c++){var d=this.model.getItemByIndex(c);if(d.isTable)for(var d=d.columns,e=0;e<d.length;e++)if(String(d[e].id)===String(a))return d[e]}return null};b.expressionAtPoint=function(a,b){for(var c=0,d=this.model.getItemCount()-1;c<=d;){var e=c+Math.floor((d-c)/2),f=this.model.getItemByIndex(e),g=this.getItemView(f.id),g=g&&g.getBounds();if(!g||g.top>b)d=e-1;else if(g.bottom<b)c=e+1;else return f}return null};b.expressionAbovePoint=function(a,b,c,d){a=0;for(var e=this.model.getItemCount()-1,f=null;a<=
e;){var h=a+Math.floor((e-a)/2);if(d&&h===d)if(h<e)h++;else if(h>a)h--;else return c?g():null;var k=this.model.getItemByIndex(h),l=this.getItemView(k.id),l=l&&l.getBounds();!l||l.top>b?e=h-1:(a=h+1,f=k)}return f?c?this.getItemView(f.id).$():f:c?g():null};b.getActiveMathquill=function(){return g(document.activeElement).closest(".mathquill-editable")};b.onProjectorModeChange=function(){for(var a in this.__itemViews)if(this.__itemViews.hasOwnProperty(a))this.__itemViews[a].onProjectorModeChange()};b.onChange=
function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=this.getItemById(b);if(c)if(c.constructor===y){var d=a[b];if(d){var e=this.getItemView(c.id);!1===c.loading&&e&&void 0===e.doAnimate&&e.setProperty("doAnimate",!0);c.setProperty("loading",!1);c.setProperty("formula",d)}}else if(c.isTable){var d=a[b],e=this.getItemView(b),f=!1,g;try{g=e.syncRowHeight,e.syncRowHeight=function(){f=!0},c.setComputedValues(d)}finally{e.syncRowHeight=g}f&&e.syncAllRowHeights()}}}})});
define("expressions/abstract_icon",["require","jquery","lib/underscore_view","pjs","lib/keys"],function(b){var g=b("jquery"),r=b("lib/underscore_view"),v=b("pjs"),q=b("lib/keys"),p=0;return v(r,function(b,a){b.init=function(b){this.parentView=b;this.model=b.model;a.init.call(this);this.optionsmenu_guid=++p;this.model.observe("error.iconview",this.renderErrorTooltip.bind(this));this.observe("error",this.renderErrorTooltip.bind(this));this.observe("error errorStable",this.computeErrorShown.bind(this));
this.observe("errorShown",this.renderErrorShown.bind(this))};b.destruct=function(){this.model.unobserve(".iconview")};b.computeErrorShown=function(){this.setProperty("errorShown",this.error&&this.errorStable)};b.renderErrorTooltip=function(){var a=this.error?this.model.error:"";this.$().closest(".variable-errortooltip").attr("tooltip",a)};b.renderErrorShown=function(){this.$().toggleClass("error",!!this.errorShown)};b.didInsertElement=function(){this.renderErrorShown();this.renderErrorTooltip()};
b.createOptionsMenuView=function(){};b.toggleOptions=function(){if(this.error)this.hideOptions();else if(this.optionsShown)this.hideOptions();else{this.optionsShown=!0;this.optionsMenu=this.createOptionsMenuView();window.opened_options_menu=this;var a=this.optionsmenu_guid;setTimeout(function(){if(this.optionsShown)g("#exppanel").on("scroll.options-menu-"+a,function(a){this.hideOptions()}.bind(this))}.bind(this),0);g(document).on("keydown.options-menu-"+a,function(a){q.lookup(a)===q.ESCAPE&&this.hideOptions()}.bind(this));
g(document).on("tapstart.options-menu-"+a,function(a){g(a.target).closest(".options-menu").length||g(a.target).closest(this.$()).length||this.hideOptions()}.bind(this))}};b.hideOptions=function(){var a=this.optionsmenu_guid;g(document).off("tapstart.options-menu-"+a);g(document).off("keydown.options-menu-"+a);g("#exppanel").off("scroll.options-menu-"+a);this.optionsShown=!1;this.optionsMenu&&(this.optionsMenu.remove(),this.optionsMenu=null);window.opened_options_menu===this&&(window.opened_options_menu=
null)};b.onDisplayChange=function(){var a=this.model.error?!0:!1;this.model.isEmpty()&&(a=!1);a!==this.error?(this.setProperty("errorStable",!1),this.__errorTime=(new Date).getTime(),setTimeout(this.onDisplayChange.bind(this),100)):this.__errorTime+500<(new Date).getTime()?this.setProperty("errorStable",!0):this.errorStable||setTimeout(this.onDisplayChange.bind(this),100);this.setProperty("error",a)}})});
define("template!expression_options_menu",["underscore"],function(b){return function(g){var r="";with(g||{})r+="<div class='exp-options-menu options-menu ",0===styles.length&&(r+="colors-only"),r+="'>\n  <div class='triangle'></div>\n  ",0<styles.length&&(r+="\n    <div class='styles-div'>\n      <div class='styles-menu'>\n        <div class='title'>style:</div>\n        <div class='styles-menu'>\n        ",b.each(styles,function(b){r+='\n          <span class="style-option graph-icon graph-'+b+'"\n            draw-style="'+
b+'"\n            style=""\n            handleevent="true">\n          </span>\n        '}),r+="\n        </div>\n      </div>\n    </div>\n  "),r+="\n  <div class='colors-div'>\n    <div class='title'>color:</div>\n    <div class=\"template-colorsview\"></div>\n  </div>\n</div>";return r}});define("loadcss!css/color_menu",function(){});
define("template!color_menu",["underscore"],function(b){return function(g){var r="";with(g||{})r+='<div class="color-menu do-not-blur">\n  ',b.each(colors,function(b){r+='\n    <span class="color-option"\n          color="'+b+'"\n          style="background: '+b+'"\n          handleevent="true">\n          <i class=\'icon-check\'></i>\n    </span>\n  '}),r+="\n</div>";return r}});
define("expressions/color_menu_view","require loadcss!css/color_menu jquery pjs lib/underscore_view ./colors template!color_menu".split(" "),function(b){b("loadcss!css/color_menu");var g=b("jquery"),r=b("pjs"),v=b("lib/underscore_view"),q=b("./colors"),p=b("template!color_menu");return r(v,function(b,a){b.template=p;b.init=function(b){a.init.call(this);this.expression=b;this.expression.observe("color.colorview",this.renderSelectedColor.bind(this));this.expression.observe("userRequestedGraphing.colorview",
this.renderSelectedColor.bind(this))};b.destruct=function(){this.expression.unobserve(".colorview")};b.renderSelectedColor=function(){var a=this.expression.color;this.$(".color-option").removeClass("selected");this.$('.color-option[color="'+a+'"]').addClass("selected")};b.didInsertElement=function(){this.$().on("tap tapstart",".color-option",this.onSelectColor.bind(this));this.renderSelectedColor()};b.getTemplateParams=function(){return{colors:q.all}};b.onSelectColor=function(a){if("tap"!==a.type||
"mouse"!==a.device)if("tapstart"!==a.type||"touch"!==a.device)a=g(a.target).closest(".color-option").attr("color"),this.expression.setProperty("color",a)}})});
define("expressions/expression_options_view","require pjs jquery underscore lib/underscore_view template!expression_options_menu ./colors ./color_menu_view".split(" "),function(b){var g=b("pjs"),r=b("jquery"),v=b("underscore"),q=b("lib/underscore_view"),p=b("template!expression_options_menu"),u=b("./colors"),a=b("./color_menu_view");return g(q,function(b,c){b.template=p;b.init=function(a){this.expression=a;this.expression.observe("color.colorview",this.renderSelectedColor.bind(this));this.expression.observe("userRequestedGraphing",
this.renderSelectedStyle.bind(this))};b.destruct=function(){this.colorsView&&(this.colorsView.remove(),this.colorsView=null)};b.getTemplateParams=function(){var a={colors:u.all,styles:[]};this.expression.formula.is_point_list&&!this.expression.formula.move_ids?a.styles=["point","open"]:this.expression.table||this.expression.formula.move_ids||this.expression.formula.is_inequality||(a.styles=["normal","dashed"]);return a};b.renderSelectedColor=function(){var a=this.expression.color;v.each(this.$(".style-option"),
function(b){r(b).css("background",a)})};b.onSelectStyle=function(a){if("tap"!==a.type||"mouse"!==a.device)if("tapstart"!==a.type||"touch"!==a.device)a=r(a.target).closest(".style-option").attr("draw-style"),a===this.expression.style&&"never"!==this.expression.userRequestedGraphing?(this.$(".style-option").removeClass("selected"),this.expression.setProperty("userRequestedGraphing","never")):(this.expression.setProperty("userRequestedGraphing","default"),this.$(".style-option").removeClass("selected"),
r('.style-option[draw-style="'+a+'"]').addClass("selected"),this.expression.setProperty("style",a))};b.renderSelectedStyle=function(){var a=this.expression.style;this.$(".style-option").removeClass("selected");"never"!==this.expression.userRequestedGraphing&&this.$('.style-option[draw-style="'+a+'"]').addClass("selected")};b.didInsertElement=function(){this.colorsView=a(this.expression);this.colorsView.replace(this.$(".template-colorsview"));this.$().on("tap tapstart",".style-option",this.onSelectStyle.bind(this));
this.renderSelectedColor();this.renderSelectedStyle()}})});define("template!expression_icon",["underscore"],function(b){return function(b){with(b||{});return"<span class=\"icon graph-icon variable-colorcss variable-errortooltip tipsy-sticky\">\n\t<i class='icon-play'></i>\n\t<i class='icon-pause'></i>\n\t<i class='icon-hidden'></i>\n</span>\n"}});
define("expressions/expression_icon_view","require pjs expressions/abstract_icon ./expression_options_view math/comparators template!expression_icon".split(" "),function(b){var g=b("pjs"),r=b("expressions/abstract_icon"),v=b("./expression_options_view"),q=b("math/comparators"),p=b("template!expression_icon");return g(r,function(b,a){b.template=p;b.init=function(b){a.init.call(this,b);this.expression=this.model;this.expression.observe("slider.iconview",function(){this.expression.slider.observe("isPlaying.iconview",
this.onDisplayChange.bind(this))}.bind(this));this.expression.observe("formula.iconview",this.onDisplayChange.bind(this));this.expression.observe("shouldGraph.iconview",this.onDisplayChange.bind(this));this.expression.observe("isGraphable.iconview",this.renderUngraphable.bind(this));this.expression.observe("loading.iconview",this.renderLoading.bind(this));this.expression.observe("color.iconview",this.renderColorCSS.bind(this));this.expression.observe("style.iconview",this.onDisplayChange.bind(this))};
b.destruct=function(){a.destruct.call(this);this.expression.unobserve(".iconview");this.expression.slider&&this.expression.slider.unobserve(".iconview")};b.renderUngraphable=function(){this.$().toggleClass("ungraphable",!this.expression.isGraphable)};b.renderLoading=function(){this.$().toggleClass("loading",!!this.expression.loading)};b.renderColorCSS=function(){this.$(".variable-colorcss").css({"border-color":this.expression.color,background:this.expression.color})};b.didInsertElement=function(){var b=
this;a.didInsertElement.call(this);this.renderLoading();this.renderUngraphable();this.renderColorCSS();this.onDisplayChange();this.$icon=this.$(".icon");var c=function(a,c){if(!a.wasHandled("dragdrop")&&!a.wasLongheld()&&a.device===c){if(b.optionsShown)return b.toggleOptions(),!1;b.parentView.listView.editListMode?b.expression.isGraphable&&b.toggleOptions():b.expression.formula.is_animatable?b.toggleSliderIsPlaying():b.toggleGraphShown()}},f=function(a,c){a.device===c&&b.model.isGraphable&&(a.handle("longhold"),
b.toggleOptions())};this.$().closest(".action-icon-mouse").on("tap",function(a){c(a,"mouse")});this.$().closest(".action-icon-touch").on("tap",function(a){c(a,"touch")});this.$().closest(".action-icon-mouse").on("longhold",function(a){f(a,"mouse")});this.$().closest(".action-icon-touch").on("longhold",function(a){f(a,"touch")})};b.isGraphShown=function(){return"never"!==this.expression.userRequestedGraphing};b.toggleSliderIsPlaying=function(){var a=this.expression.slider;a&&a.setProperty("isPlaying",
!a.isPlaying)};b.toggleGraphShown=function(){this.model.isGraphable&&!this.errorShown&&(this.model.folder&&this.model.folder.hidden?(this.model.folder.setProperty("hidden",!1),this.expression.setProperty("userRequestedGraphing","always")):this.isGraphShown()?this.expression.setProperty("userRequestedGraphing","never"):this.expression.setProperty("userRequestedGraphing","always"))};b.createOptionsMenuView=function(){var a=v(this.expression);a.appendTo(this.$().closest(".expressionitem"));return a};
b.onDisplayChange=function(){a.onDisplayChange.call(this);if(this.$icon){var b=this.expression.formula,c="";if(b.is_animatable)c=this.expression.slider.isPlaying?"animate-pause":"animate-play";else if(this.error||!b.is_graphable)c="";else{var f=this.expression.style,e=b.operator,g=0!==q.table[e].direction,e=!1===q.table[e].inclusive;this.expression.shouldGraph?b.move_ids?c="graph-movable-point":b.is_point_list?c="open"===f?"graph-open":"cross"===f?"graph-cross":"graph-point":b.is_shade_between?c=
"graph-shaded-inequality":e||g?!e&&g?c="graph-shaded-inequality":e&&!g?c="graph-inequality":e&&g&&(c="graph-shaded-inequality"):"normal"===f?c="graph-normal":"dashed"===f&&(c="graph-dashed"):c="graph-hidden"}this.rendered_icon_class!==c&&(this.rendered_icon_class&&this.$icon.removeClass(this.rendered_icon_class),(this.rendered_icon_class=c)&&this.$icon.addClass(c))}}})});define("template!evaluation_view",["underscore"],function(b){return function(b){with(b||{});return'<div class="evaluation do-blur" handleEvent="true">\n  <table>\n    <tr>\n      <th class="action-selectevaluation">\n        <span class="template-dependentlabelhtml"></span>\n        <span class="equals">=</span>\n      </th>\n      <td class="text-selectable template-evaluationshtml"></td>\n    </tr>\n  </table>\n</div>'}});
define("expressions/evaluation",["require","pjs","lib/underscore_view","template!evaluation_view","i18n"],function(b){var g=b("pjs"),r=b("lib/underscore_view"),v=b("template!evaluation_view"),q=b("i18n");return g(r,function(b,g){b.template=v;b.init=function(a){g.init.call(this);this.evaluations=[];this.observe("dependentLabel",this.renderDependent.bind(this));this.observe("evaluations",this.renderEvaluations.bind(this))};b.renderDependent=function(){this.$(".template-dependentlabelhtml").html(this.dependentLabel)};
b.renderEvaluations=function(){for(var a=this.evaluations,b=[],c=0;c<a.length;c++){var f=a[c];!1===f.val?f.val="false":isNaN(f.val)?f.val="undefined":!0===f.val?f.val="true":1E-15>Math.abs(f.val)?f.val=0:f.val=1===a.length?Number(f.val.toPrecision(8)):Number(f.val.toPrecision(6));b.push(f.val)}if(0===b.length)return"";a=b.join('<span class="or">'+q.t("or")+"</span>");this.$(".template-evaluationshtml").html(a)};b.didInsertElement=function(){this.renderDependent();this.renderEvaluations();this.$(".action-selectevaluation").on("tap",
this.onSelectEvaluation.bind(this))};b.onSelectEvaluation=function(){var a=this.$("td")[0],b=document.createRange();b.selectNodeContents(a);window.getSelection().removeAllRanges();window.getSelection().addRange(b)}})});define("template!domain_view",["underscore"],function(b){return function(b){with(b||{});return'<div class="domain do-blur" handleEvent="true">\n  \n  <div class="edit-domain variable-invalid desmos-input-container">\n    <table>\n      <tr>\n        <td>\n          <span class="before-input"></span>\n          <input type="number" limit="min" />\n          <span class="after-input"></span>\n        </td>\n        <td class="text">≤</td>\n        <td class="text">t</td>\n        <td class="text">≤</td>\n        <td>\n          <span class="before-input"></span>\n          <input type="number" limit="max" />\n          <span class="after-input"></span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  \n  <div class="display-domain">\n    <span class="variable-min"></span> ≤ t ≤ <span class="variable-max"></span>    \n  </div>\n\n</div>'}});
define("expressions/domain_view","require jquery lib/underscore_view pjs template!domain_view lib/keys".split(" "),function(b){var g=b("jquery"),r=b("lib/underscore_view"),v=b("pjs"),q=b("template!domain_view"),p=b("lib/keys");return v(r,function(b,a){b.template=q;b.init=function(b){a.init.call(this);this.domain=b;this.domain.observe("min.domainview",this.renderMin.bind(this));this.domain.observe("max.domainview",this.renderMax.bind(this));this.setProperty("editing",!1);this.setProperty("invalid",
!this.domain.isValid());this.observe("invalid",this.renderInvalid.bind(this));this.observe("editing",this.renderEditing.bind(this));this.storeLastValidDomain()};b.checkInvalid=function(){var a=parseFloat(this.$("input[limit=min]").attr("value")),b=parseFloat(this.$("input[limit=max]").attr("value")),a=!isFinite(a)||!isFinite(b)||a>=b;this.setProperty("invalid",a)};b.destruct=function(){this.domain.unobserve(".domainview")};b.storeLastValidDomain=function(){this.domain.isValid()&&(this.lastValidDomain=
this.domain.serialize())};b.renderInvalid=function(){this.$(".edit-domain").toggleClass("invalid",!!this.invalid)};b.renderEditing=function(){var a=this.getProperty("editing");this.$().toggleClass("editing-domain",!!a)};b.renderMin=function(){var a=this.domain.min;this.$("input[limit=min]").val(a);this.$(".variable-min").text(a)};b.renderMax=function(){var a=this.domain.max;this.$("input[limit=max]").val(a);this.$(".variable-max").text(a)};b.didInsertElement=function(){this.$("input").on("focusin",
this.focusIn.bind(this)).on("focusout",this.focusOut.bind(this)).on("keydown keyup keypress",this.handleUserInput.bind(this));this.$(".display-domain").on("tap",this.onEditLimit.bind(this));this.renderEditing();this.renderMin();this.renderMax()};b.onEditLimit=function(a){a.preventDefault();a=g(a.toElement);this.setProperty("editing",!0);a.hasClass("variable-max")?this.$('input[limit="max"]').focus().select():this.$('input[limit="min"]').focus().select()};b.stopEditing=function(){!this.domain.isValid()&&
this.lastValidDomain&&(this.domain.setProperty("min",this.lastValidDomain.min),this.domain.setProperty("max",this.lastValidDomain.max));this.setProperty("editing",!1)};b.handleUserInput=function(a){p.lookup(a)===p.ENTER?g(document.activeElement).blur():(this.checkInvalid(),this.invalid||this.save(a.target))};b.focusIn=function(a){clearTimeout(this.saveAfterBlurTimeout);this.checkInvalid()};b.focusOut=function(a){var b=this;this.save(a.target);this.saveAfterBlurTimeout=setTimeout(function(){clearTimeout(b.saveAfterBlurTimeout);
b.stopEditing()},1);this.checkInvalid()};b.save=function(a){if(a){a=g(a);var b=parseFloat(a.attr("value"));"min"===a.attr("limit")?b<this.domain.max?this.domain.setProperty("min",b):a.attr("value",this.domain.min):"max"===a.attr("limit")&&(b>this.domain.min?this.domain.setProperty("max",b):a.attr("value",this.domain.max));this.storeLastValidDomain()}}})});define("loadcss!css/slider",function(){});define("main/focus",["require"],function(b){return{takeFocus:function(){}}});
define("template!slider_view",["underscore"],function(b){return function(b){with(b||{})b='<span class="slider-container" tapboundary="true">\n\n  <div class="do-blur slider" handleEvent="true">\n    <div class="minLabel template-minlabelhtml">\n    </div>\n    <div class="maxLabel">\n      <span class="template-maxlabelhtml"></span>\n    </div>\n    <div class="track action-moveslider">\n      <div class="ticks template-tickmarkhtml"></div>\n      <div class="graphic"></div>\n    </div>\n    <div class="zeroMarker action-moveslider">\n      <div class="graphic"></div>\n    </div>\n    <div class="thumb action-startdragging" disablescroll="true">\n      <div class="graphic"></div>\n      <div class="center"></div>\n    </div>\n  </div>\n  \n  <div class="slider-speed-container do-not-blur" handleEvent="true">\n    <span class="action-slower" >&laquo;</span>\n    <span class="variable-speed"></span>\n    <span class="action-faster">&raquo;</span>\n  </div>\n\n  <div class="slider_menu do-blur desmos-input-container" handleEvent="true">\n    <table>\n      <tr>\n        <td>\n          <span class="before-input"></span>\n            <input class="slider_min" limit="min" type="number">\n          <span class="after-input"></span>\n    '+
('\n        </td>\n        <td class="text">\n          ≤\n        </td>\n        <td class="template-dependentlabelhtml text"></td>\n        <td class="text">≤</td>\n        <td>\n          <span class="before-input"></span>\n            <input class="slider_max" limit="max" type="number">\n          <span class="after-input"></span>\n        \n        </td>\n        <td class="step text">'+t("step:")+'</td>\n        <td> \n          <span class="before-input"></span>\n            <input class="slider_interval" limit="step" type="number">\n          <span class="after-input"></span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  \n</span>');
return b}});
define("expressions/slider_view","require loadcss!css/slider jquery pjs lib/rounding lib/underscore_view main/focus template!slider_view config underscore lib/keys".split(" "),function(b){b("loadcss!css/slider");var g=b("jquery"),r=b("pjs"),v=b("lib/rounding"),q=b("lib/underscore_view"),p=b("main/focus"),u=b("template!slider_view"),a=b("config"),m=b("underscore"),c=b("lib/keys"),f=function(a){var b=a,c=String(a).split("-").join("");return 4<c.length||-1!=c.indexOf("e")?(c=Math.floor(Math.log(Math.abs(a))/Math.LN10),
a/=Math.pow(10,c),a=Math.round(a),10<=Math.abs(a)&&(c++,a=0>a?-1:1),-3<=c&&3>=c?(c=String(b),0===c.indexOf("0.")?c=c.substr(1):0===c.indexOf("-0.")&&(c="-"+c.substr(2)),c.substr(0,5)):a+"×10<span class='sup'>"+c+"</span> "):String(a)};return r(q,function(b,h){b.template=u;b.animationSpeeds=[0.05,0.1,0.15,0.2,0.35,0.5,0.75,1,1.5,2,3.5,5,7.5,10,15,20];b.init=function(a,b){h.init.call(this);this.slider=a;this.parentView=b;this.value=this.slider.value;this.slider.observe("value",function(){this.setProperty("value",
this.slider.value)}.bind(this));this.editing=!1;this.slider.observe("min.sliderview max.sliderview",this.renderThumbPosition.bind(this));this.observe("value",this.renderThumbPosition.bind(this));this.slider.observe("min.sliderview max.sliderview",this.renderZeroMarker.bind(this));this.slider.observe("min.sliderview max.sliderview step.sliderview",this.renderTickMarks.bind(this));this.slider.observe("min.sliderview",this.renderMin.bind(this));this.slider.observe("max.sliderview",this.renderMax.bind(this));
this.slider.observe("step.sliderview",this.renderStep.bind(this));this.observe("dependentLabel",this.renderDependent.bind(this));this.observe("editing",this.renderEditing.bind(this));this.observe("editing",function(){this.slider.setProperty("isPlaying",!1)}.bind(this));this.observe("invalid",this.renderInvalid.bind(this));this.observe("dragging",this.renderDragging.bind(this));this.slider.observe("isPlaying.sliderview",this.renderIsPlaying.bind(this));this.slider.observe("isPlaying.sliderview",this.setTransient.bind(this));
this.observe("dragging isMoving",this.setTransient.bind(this));this.slider.observe("animationSpeed",this.renderAnimationSpeed.bind(this))};b.renderAnimationSpeed=function(){var a=this.slider.animationSpeed,b=a+"x";this.$(".variable-speed").text(b);this.$(".action-slower").toggleClass("disabled",m.min(this.animationSpeeds)>=a);this.$(".action-faster").toggleClass("disabled",m.max(this.animationSpeeds)<=a)};b.setTransient=function(){this.slider.setProperty("transient",this.dragging||this.slider.isPlaying||
this.isMoving)};b.destruct=function(){this.slider.unobserve(".sliderview")};b.renderDependent=function(){this.$(".template-dependentlabelhtml").html(this.dependentLabel)};b.renderDragging=function(){this.$(".thumb").toggleClass("down",!!this.dragging)};b.renderStep=function(){this.$("input[limit=step]").val(this.slider.step)};b.renderMin=function(){this.$(".template-minlabelhtml").html(f(this.slider.min));this.$("input[limit=min]").val(this.slider.min)};b.renderMax=function(){this.$(".template-maxlabelhtml").html(f(this.slider.max));
this.$("input[limit=max]").val(this.slider.max)};b.renderEditing=function(){this.$().toggleClass("editing-limits",this.editing)};b.renderInvalid=function(){this.$(".slider_menu").toggleClass("invalid",!!this.invalid)};b.renderThumbPosition=function(){var a;a=this.slider.min;var b=this.slider.max,c=this.value;a=c<=a?0:c>=b?100:100*((c-a)/(b-a));this.$(".thumb").css("left",a+"%")};b.renderZeroMarker=function(){var a=(0-this.slider.min)/(this.slider.max-this.slider.min),b={};0<=a&&1>=a?(b.display="block",
b.left=100*a+"%"):b.display="none";this.$(".zeroMarker").css(b)};b.renderTickMarks=function(){var a=100*this.slider.step/(this.slider.max-this.slider.min);3>a&&(a=0);var b="";if(0<a&&100>a)for(var c=a;100>c;c+=a)b+='<div class="tick" style="left:'+c+'%"></div>';this.$(".template-tickmarkhtml").html(b)};b.getDimensions=function(){var a=this.$(".track"),b=a.offset().left,a=b+a.width();return{trackLeft:b,trackRight:a}};b.animateSlower=function(){var a=this.slider.animationSpeed,b=m.filter(this.animationSpeeds,
function(b){return b<a});0!==b.length&&this.slider.setProperty("animationSpeed",m.max(b))};b.animateFaster=function(){var a=this.slider.animationSpeed,b=m.filter(this.animationSpeeds,function(b){return b>a});0!==b.length&&this.slider.setProperty("animationSpeed",m.min(b))};b.didInsertElement=function(){this.$(".action-startdragging").on("tapstart",this.onStartDragging.bind(this));this.$(".action-moveslider").on("tap",function(a){a=a.changedTouches[0];this.slider.setProperty("isPlaying",!1);this.setValueByTouch(a);
this.commitSliderValue()}.bind(this));this.$().on("focusout",this.focusOut.bind(this));this.$().on("focusin",this.focusIn.bind(this));this.$().on("keydown",this.keyDown.bind(this));this.$("input[limit]").on("keypress keydown keyup",this.checkInvalid.bind(this));this.$(".action-play").on("tap",function(){this.slider.setProperty("isPlaying",!0)}.bind(this));this.$(".action-faster").on("tap",this.animateFaster.bind(this));this.$(".action-slower").on("tap",this.animateSlower.bind(this));this.$().on("tap",
".minLabel",this.onEditMin.bind(this));this.$().on("tap",".maxLabel",this.onEditMax.bind(this));this.renderTickMarks();this.renderThumbPosition();this.renderZeroMarker();this.renderDependent();this.renderMin();this.renderMax();this.renderStep();this.renderAnimationSpeed();this.checkInvalid()};b.setValueByTouch=function(a){var b=this.slider.min,c=this.slider.max,e=this.getDimensions(),f=e.trackLeft,g=e.trackRight-f,e=(c-b)/g;a=Math.min(1,Math.max(0,(a.pageX-f)/g));a=b*(1-a)+c*a;a<=b?a=b:a>=c?a=c:(a=
v.bestRound(a,e),a=this.slider.computeSnappedValue(a),a<b?a=b:a>c&&(a=c));this.setProperty("value",a)};b.onStartDragging=function(b){if(1===b.touches.length){p.takeFocus();var c=this;this.slider.setProperty("isPlaying",!1);var e=function(a,b){for(var c=a.touches,d=null,e=0;e<c.length;e++)c[e].identifier===b&&(d=c[e]);return d},f="ios"===a.get("platform")?30:10,h=m.throttle(c.commitSliderValue.bind(c),f);c.setProperty("dragging",!0);var n=b.changedTouches[0].identifier,q=function(a){if(a=e(a,n))c.setValueByTouch(a),
h()},u=function(a){e(a,n)||(g(document).off("tapmove",q),g(document).off("tapend tapcancel",u),c.setProperty("dragging",!1),c.commitSliderValue())};g(document).on("tapmove",q);g(document).on("tapend tapcancel",u)}};b.commitSliderValue=function(){this.slider.setProperty("value",this.value)};b.checkInvalid=function(){var a=parseFloat(this.$("input[limit=min]").attr("value")),b=parseFloat(this.$("input[limit=max]").attr("value")),c=this.$("input[limit=step]").attr("value"),c=""===c?0:parseFloat(c),a=
!isFinite(a)||!isFinite(b)||a>=b||0>c||c>b-a;this.setProperty("invalid",a)};b.keyDown=function(a){c.lookup(a)===c.ENTER?g(document.activeElement).blur():this.checkInvalid()};b.focusIn=function(a){this.slider.setProperty("isPlaying",!1);clearTimeout(this.saveAfterBlurTimeout);this.checkInvalid()};b.focusOut=function(a){var b=this;this.save(a.target);this.saveAfterBlurTimeout=setTimeout(function(){clearTimeout(b.saveAfterBlurTimeout);b.onClose()},1);this.checkInvalid()};b.save=function(a){if(a){a=g(a);
var b=parseFloat(a.attr("value")),c=""===this.$(".slider_interval").attr("value")?0:this.slider.step;a.hasClass("slider_min")?b<this.slider.max&&this.slider.max-b>c?this.slider.setProperty("min",b):a.attr("value",this.slider.min):a.hasClass("slider_max")?b>this.slider.min&&b-this.slider.min>c?this.slider.setProperty("max",b):a.attr("value",this.slider.max):a.hasClass("slider_interval")&&(0<=b&&b<this.slider.max-this.slider.min?this.slider.setProperty("step",b):""===a.attr("value")?this.slider.setProperty("step",
void 0):void 0===c?a.attr("value",""):a.attr("value",this.slider.step))}};b.onClose=function(){this.setProperty("editing",!1)};b.onEditMin=function(a){this.setProperty("editing",!0);a.preventDefault();this.$(".slider_min").focus().select()};b.onEditMax=function(a){this.setProperty("editing",!0);a.preventDefault();this.$(".slider_max").focus().select()};b.renderIsPlaying=function(){0>this.slider.step?this.slider.setProperty("isPlaying",!1):this.parentView.$().toggleClass("isPlaying",!!this.slider.isPlaying)}})});
define("template!prompt_sliders",["underscore"],function(b){return function(g){var r="";with(g||{})r+='<div class="create_sliders action-createslider" handleEvent="true">\n  <span class="msg">'+t("add slider:")+'</span>\n  <span class="btns">\n    ',b.each(variables,function(b){r+='\n      <div class="slider_btn_container" var_name="'+b.name+'" >\n        <div class="btn btn-primary btn-small">'+b.label+"</div>\n      </div>\n    "}),r+="\n              \n    ",1<variables.length&&(r+='\n      <div class="slider_btn_container all">\n        <div class="btn btn-small btn-success all">all!</div>\n      </div>\n    '),
r+="\n  </span>\n</div>";return r}});
define("expressions/promptslider_view","require jquery pjs lib/underscore_view main/focus template!prompt_sliders".split(" "),function(b){var g=b("jquery"),r=b("pjs"),v=b("lib/underscore_view"),q=b("main/focus"),p=b("template!prompt_sliders");return r(v,function(b,a){b.template=p;b.init=function(b){a.init.call(this);this.variables=[];this.expressionView=b;this.observe("variables",this.rerender.bind(this))};b.didInsertElement=function(){this.$(".action-createslider").on("tap",this.onCreateSlider.bind(this))};
b.getTemplateParams=function(){for(var a=this.variables,b=[],f=0;4>f&&f<a.length;f++){var e,g=a[f].split("{").join("").split("}").join("").split("_");1<g.length?(e=g[0]+"_{"+g[1]+"}",g=g[0]+"<sub>"+g[1]+"</sub>"):(e=g[0],g=g[0]);b.push({name:e,label:g})}return{variables:b}};b.onCreateSlider=function(a){q.takeFocus();a=g(a.target).closest(".slider_btn_container");a.length&&(a=a.hasClass("all")?this.variables.slice():[a.attr("var_name")],a.length&&this.expressionView.createSliders(a))}})});
define("loadcss!vendor_css/mathquill/mathquill",function(){});
(function(){function b(){}function g(a){var b=h.call(arguments,1);return function(){return a.apply(this,b)}}function r(a,b){if(!b)throw Error("prayer failed: "+a);}function v(d,e,f,g){function h(){w=m;var a=n.selection?"$"+n.selection.latex()+"$":"";a!==x&&(z.select(a),x=a,e.triggerSpecialEvent("selectionChanged"))}var l=d.contents().detach();f||d.addClass("mathquill-rendered-math");e.jQ=a('<span class="mathquill-root-block"/>').appendTo(d.attr(c,e.id));e.revert=function(){d.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(l)};
var n=e.cursor=ba(e);e.renderLatex(l.text());var s=null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/i),u=null!==navigator.userAgent.match(/(Android|Silk|Kindle)/i),r=e.textarea=s||u?a('<span class="textarea"><span tabindex=0></span></span>'):a('<span class="textarea"><textarea></textarea></span>'),v=r.children(),w,x;e.selectionChanged=function(){w===m&&(w=setTimeout(h));O(d[0])};d.bind("selectstart.mathquill",function(a){a.target!==v[0]&&a.preventDefault();a.stopPropagation()});var y,B=n.blink;
d.bind("mousedown.mathquill",function(c){function f(b){n.seek(a(b.target),b.clientX,b.clientY,l);n.prev===y.prev&&n.parent===y.parent||n.selectFrom(y);b.preventDefault()}function h(a){delete a.target;return f(a)}function k(b){y=m;n.blink=B;n.selection||(g?n.show():r.detach());d.unbind("mousemove",f);a(b.target.ownerDocument).unbind("mousemove",h).unbind("mouseup",k)}c.preventDefault();if(e.ignoreMousedownTimeout!==m)clearTimeout(e.ignoreMousedownTimeout),e.ignoreMousedownTimeout=m;else{var l=p();
setTimeout(function(){e.blurred&&v.focus()});n.blink=b;n.hideHandle().seek(a(c.target),c.clientX,c.clientY,l);y={parent:n.parent,prev:n.prev,next:n.next};g||d.prepend(r);d.mousemove(f);a(c.target.ownerDocument).mousemove(h).mouseup(k)}});n.jQ.delegate(".handle","touchstart",function(b){return function(c){c.preventDefault();c=c.originalEvent;var d=a(c.target);if(!(c.changedTouches.length<c.touches.length)){var e=c.changedTouches[0],f=b(e)||0;f.touchmove&&d.bind("touchmove",function(a){a=a.originalEvent.changedTouches[0];
a.id===e.id&&f.touchmove.call(this,a)});d.bind("touchend",function(a){a=a.originalEvent.changedTouches[0];a.id===e.id&&(f.touchend&&f.touchend.call(this,a),d.unbind("touchmove touchend"))})}}}(function(a){n.blink=b;var c=n.jQ[0].getBoundingClientRect(),d=a.clientX-c.left,f=a.clientY-(c.top+c.bottom)/2,g=p();return{touchmove:function(a){var b=a.clientX-d;a=a.clientY-f;n.seek(q(b,a,e),b,a,g,!0);var c=n.jQ[0].getBoundingClientRect(),b=b-c.left;a-=(c.top+c.bottom)/2;c=Math.sqrt(b*b+a*a);c=(Math.log(c)+
1)/c;b=Math.atan2(c*b,f);a=(c*a+f)/f;n.handle.css({WebkitTransform:"translateX(.5px) skewX("+b+"rad) scaleY("+a+")",opacity:1-0.5*(2*(a-1)+1)})},touchend:function(a){n.handle.css({WebkitTransform:"",opacity:""});n.blink=B;n.show(!0)}}}));if(g)z=k(v,{container:d,key:function(a,b){n.parent.bubble("onKey",a,b)},text:function(a){n.parent.bubble("onText",a)},cut:function(a){n.selection&&setTimeout(function(){n.prepareEdit();n.parent.bubble("redraw");e.triggerSpecialEvent("render")});a.stopPropagation();
e.triggerSpecialEvent("render")},paste:function(a){"$"===a.slice(0,1)&&"$"===a.slice(-1)&&(a=a.slice(1,-1));n.writeLatex(a).show();e.triggerSpecialEvent("render")}}),d.prepend(r),d.addClass("mathquill-editable"),f&&d.addClass("mathquill-textbox"),v.focus(function(a){e.blurred=!1;n.parent||n.appendTo(e);n.parent.jQ.addClass("hasCursor");n.selection?(n.selection.jQ.removeClass("blur"),setTimeout(e.selectionChanged)):n.show()}).blur(function(a){e.blurred=!0;n.hide().parent.blur();n.selection&&n.selection.jQ.addClass("blur")}).blur(),
d.bind("select_all",function(a){for(n.prepareMove().appendTo(e);n.prev;)n.selectLeft()}).bind("custom_paste",function(a,b){"$"===b.slice(0,1)&&"$"===b.slice(-1)&&(b=b.slice(1,-1));n.writeLatex(b).show();e.triggerSpecialEvent("render")});else{var z=k(v,{container:d});d.bind("cut paste",!1).bind("copy",h).prepend('<span class="selectable">$'+e.latex()+"$</span>");v.blur(function(){n.clearSelection();setTimeout(C)});var C=function(){r.detach()}}}function q(b,c,d){b=document.elementFromPoint(b,c);return a.contains(d.jQ[0],
b)?a(b):d.jQ}function p(){function a(b,d){return c[d]||(c[d]=b.getBoundingClientRect())}function b(c){return a(c.jQ[0],c.id)}var c={};b.elById=a;return b}function u(a,b,c){return d(Y,{ctrlSeq:a,htmlTemplate:"<"+b+" "+c+">&0</"+b+">"})}var a=jQuery,m,c="mathquill-block-id",f=Math.min,e=Math.max,h=[].slice,d=function(a,b,c){function d(a){return"function"===typeof a}function e(f,g){function h(a){if(!(this instanceof h))return new h(arguments);a&&d(this.init)&&this.init.apply(this,a)}g===c&&(g=f,f=Object);
var k=h[a]=new f,l=f[a],m;k.constructor=h;h.mixin=function(b){h[a]=e(h,b)[a];return h};return(h.open=function(a){m={};d(a)?m=a.call(h,k,l,h,f):"object"===typeof a&&(m=a);if("object"===typeof m)for(var c in m)b.call(m,c)&&(k[c]=m[c]);d(k.init)||(k.init=function(){f.apply(this,arguments)});return h})(g)}return e}("prototype",{}.hasOwnProperty),k=function(){function c(a){var b=a.which||a.keyCode,e=d[b],f=[];a.ctrlKey&&f.push("Ctrl");a.originalEvent&&a.originalEvent.metaKey&&f.push("Meta");a.altKey&&
f.push("Alt");a.shiftKey&&f.push("Shift");a=e||String.fromCharCode(b);if(!f.length&&!e)return a;f.push(a);return f.join("-")}var d={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(d,e){function f(a){w=setTimeout(a);x=a}function g(){w&&(clearTimeout(w),w=m,x())}function h(){var a=r[0];return"selectionStart"in
a?a.selectionStart!==a.selectionEnd:!1}function k(a){var b=r.val();r.val("");b&&a(b)}if(!d.is("textarea"))return{select:b};var l=null,n=null;e||(e={});var p=e.text||b,s=e.key||b,q=e.paste||b,u=e.cut||b,r=a(d),v=a(e.container||r),w,x;v.bind("keydown keypress input keyup focusout paste",g);v.bind({keydown:function(a){l=a;n=null;s(c(l),l)},keypress:function(a){l&&n&&s(c(l),l);n=a;f(function(){h()?setTimeout(function(){h()||k(p)}):k(p);h()||k(p)})},focusout:function(){l=n=null},cut:u,paste:function(a){r.focus();
f(function(){k(q)})}});return{select:function(a){g();r.val(a);a&&r[0].select()}}}}(),l=d(function(a,b,c){function d(a,b){throw"Parse Error: "+b+" at "+(a?"'"+a+"'":"EOF");}a.init=function(a){this._=a};a.parse=function(a){return this.skip(f)._(a,function(a,b){return b},d)};a.or=function(a){r("or is passed a parser",a instanceof c);var b=this;return c(function(c,d,e){return b._(c,d,function(b){return a._(c,d,e)})})};a.then=function(a){var b=this;return c(function(d,e,f){return b._(d,function(b,d){var g=
a instanceof c?a:a(d);r("a parser is returned",g instanceof c);return g._(b,e,f)},f)})};a.many=function(){var a=this;return c(function(b,c,d){function e(a,c){b=a;g.push(c);return!0}function f(){return!1}for(var g=[];a._(b,e,f););return c(b,g)})};a.times=function(a,b){2>arguments.length&&(b=a);var d=this;return c(function(c,e,f){function g(a,b){l.push(b);c=a;return!0}function h(a,b){n=b;c=a;return!1}function k(a,b){return!1}for(var l=[],m=!0,n,p=0;p<a;p+=1)if(m=d._(c,g,h),!m)return f(c,n);for(;p<b&&
m;p+=1)m=d._(c,g,k);return e(c,l)})};a.result=function(a){return this.then(e(a))};a.atMost=function(a){return this.times(0,a)};a.atLeast=function(a){var b=this;return b.times(a).then(function(a){return b.many().map(function(b){return a.concat(b)})})};a.map=function(a){return this.then(function(b){return e(a(b))})};a.skip=function(a){return this.then(function(b){return a.result(b)})};this.string=function(a){var b=a.length,d="expected '"+a+"'";return c(function(c,e,f){var g=c.slice(0,b);return g===
a?e(c.slice(b),g):f(c,d)})};a=this.regex=function(a){r("regexp parser is anchored","^"===a.toString().charAt(1));var b="expected "+a;return c(function(c,d,e){var f=a.exec(c);return f?(e=f[0],d(c.slice(e.length),e)):e(c,b)})};var e=c.succeed=function(a){return c(function(b,c){return c(b,a)})};c.fail=function(a){return c(function(b,c,d){return d(b,a)})};c.letter=a(/^[a-z]/i);c.letters=a(/^[a-z]*/i);c.digit=a(/^[0-9]/);c.digits=a(/^[0-9]*/);c.whitespace=a(/^\s+/);c.optWhitespace=a(/^\s*/);c.any=c(function(a,
b,c){return a?b(a.slice(1),a.charAt(0)):c(a,"expected any character")});c.all=c(function(a,b,c){return b("",a)});var f=c.eof=c(function(a,b,c){return a?c(a,"expected EOF"):b(a,a)})}),y=d(function(a){a.prev=0;a.next=0;a.parent=0;a.firstChild=0;a.lastChild=0;a.children=function(){return s(this.firstChild,this.lastChild)};a.eachChild=function(a){return this.children().each(a)};a.foldChildren=function(a,b){return this.children().fold(a,b)};a.adopt=function(a,b,c){s(this,this).adopt(a,b,c);return this};
a.disown=function(){s(this,this).disown();return this}}),s=d(function(a){function b(a,c,d){r("a parent is always present",a);var e;e=c?c.next===d&&c.parent===a:a.firstChild===d;r("prev is properly set up",e);a=d?d.prev===c&&d.parent===a:a.lastChild===c;r("next is properly set up",a)}a.first=0;a.last=0;a.init=function(a,b){r("no half-empty fragments",!a===!b);a&&(r("first node is passed to Fragment",a instanceof y),r("last node is passed to Fragment",b instanceof y),r("first and last have the same parent",
a.parent===b.parent),this.first=a,this.last=b)};a.adopt=function(a,c,d){b(a,c,d);this.disowned=!1;var e=this.first;if(!e)return this;var f=this.last;c||(a.firstChild=e);d?d.prev=f:a.lastChild=f;this.last.next=d;this.each(function(b){b.prev=c;b.parent=a;c&&(c.next=b);c=b});return this};a.disown=function(){var a=this.first;if(!a||this.disowned)return this;this.disowned=!0;var c=this.last,d=a.parent;b(d,a.prev,a);b(d,c,c.next);a.prev?a.prev.next=c.next:d.firstChild=c.next;c.next?c.next.prev=a.prev:d.lastChild=
a.prev;return this};a.each=function(a){var b=this.first;if(!b)return this;for(;b!==this.last.next&&!1!==a.call(this,b);b=b.next);return this};a.fold=function(a,b){this.each(function(c){a=b.call(this,a,c)});return a}}),n=function(){var a=0;return function(){return a+=1}}(),x=d(y,function(b){b.init=function(a){this.id=n();x[this.id]=this};b.toString=function(){return"[MathElement "+this.id+"]"};b.bubble=function(a){for(var b=h.call(arguments,1),c=this;c&&!1!==(c[a]&&c[a].apply(c,b));c=c.parent);return this};
b.postOrder=function(a){if("string"===typeof a){var b=a;a=function(a){b in a&&a[b].apply(a,arguments)}}(function oa(b){b.eachChild(oa);a(b)})(this)};b.jQ=a();b.jQadd=function(a){this.jQ=this.jQ.add(a)};this.jQize=function(b){function c(a){if(a.getAttribute){var b=a.getAttribute("mathquill-command-id"),d=a.getAttribute("mathquill-block-id");b&&x[b].jQadd(a);d&&x[d].jQadd(a)}}function d(a){for(a=a.firstChild;a;a=a.nextSibling)c(a),a.firstChild&&d(a)}b=a(b);for(var e=0;e<b.length;e+=1)c(b[e]),d(b[e]);
return b};b.finalizeInsert=function(){this.postOrder("finalizeTree");this.postOrder("blur");this.postOrder("respace");this.next.respace&&this.next.respace();this.prev.respace&&this.prev.respace();this.postOrder("redraw");this.bubble("redraw");this.bubble("redraw")};b.seek=function(a,b,c,d,g){function h(){for(var a,b=Infinity,c=0;c<n.length;c+=1)if(n[c]){var d=n[c].sqDist;d<b&&(a=c,b=d)}b=n[a];n[a]=null;return b}function k(a){if(a=a.seekPoint(b,c,g)){var d=b-a.x,e=c-a.y;n.push({point:a,sqDist:d*d+
e*e})}}function l(a){if(a){var d=g(a),h=e(d.left,f(d.right,b)),d=e(d.top,f(d.bottom,c)),h=b-h,d=c-d;n.push({node:a,sqDist:h*h+d*d})}}function m(a){if(a!==d){var h=g(a),h=e(0,f(b-h.left,c-h.top,h.right-b,h.bottom-c));n.push({container:a,sqDist:h*h})}}var n=[];k(this);this.eachChild(l);m(this);for(var p=h();!p.point;p=h())if(p.container){var s=p.container,p=s.parent;k(p);p.eachChild(function(a){a!==s&&l(a)});m(p)}else k(p.node),p.node.eachChild(l);p.point.next?a.insertBefore(p.point.next):a.appendTo(p.point.parent)}}),
B=d(x,function(a,c){a.init=function(a,b,d){c.init.call(this);this.ctrlSeq||(this.ctrlSeq=a);b&&(this.htmlTemplate=b);d&&(this.textTemplate=d)};a.replaces=function(a){a.disown();this.replacedFragment=a};a.isEmpty=function(){return this.foldChildren(!0,function(a,b){return a&&b.isEmpty()})};a.parser=function(){var a=this;return ca.block.times(a.numBlocks()).map(function(b){a.blocks=b;for(var c=0;c<b.length;c+=1)b[c].adopt(a,a.lastChild,0);return a})};a.createBefore=function(a){var b=this.replacedFragment;
this.createBlocks();x.jQize(this.html());b&&(b.adopt(this.firstChild,0,0),b.jQ.appendTo(this.firstChild.jQ));a.jQ.before(this.jQ);a.prev=this.adopt(a.parent,a.prev,a.next);this.finalizeInsert(a);this.placeCursor(a)};a.createBlocks=function(){for(var a=this.numBlocks(),b=this.blocks=Array(a),c=0;c<a;c+=1)(b[c]=C()).adopt(this,this.lastChild,0)};a.respace=b;a.placeCursor=function(a){a.appendTo(this.foldChildren(this.firstChild,function(a,b){return a.isEmpty()?a:b}))};a.seekPoint=b;a.expectedCursorYNextTo=
function(a){return this.firstChild.expectedCursorYInside(a)};a.remove=function(){this.disown();this.jQ.remove();this.postOrder(function(a){delete x[a.id]});return this};a.numBlocks=function(){var a=this.htmlTemplate.match(/&\d+/g);return a?a.length:0};a.html=function(){var a=this.blocks,b=" mathquill-command-id="+this.id,c=this.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);r("no unmatched angle brackets",c.join("")===this.htmlTemplate);for(var d=0,e=c[0];e;d+=1,e=c[d])if("/>"===e.slice(-2))c[d]=e.slice(0,
-2)+b+"/>";else if("<"===e.charAt(0)){r("not an unmatched top-level close tag","/"!==e.charAt(1));c[d]=e.slice(0,-1)+b+">";var f=1;do d+=1,e=c[d],r("no missing close tags",e),"</"===e.slice(0,2)?f-=1:"<"===e.charAt(0)&&"/>"!==e.slice(-2)&&(f+=1);while(0<f)}return c.join("").replace(/>&(\d+)/g,function(b,c){return" mathquill-block-id="+a[c].id+">"+a[c].join("html")})};a.latex=function(){return this.foldChildren(this.ctrlSeq,function(a,b){return a+"{"+(b.latex()||" ")+"}"})};a.textTemplate=[""];a.text=
function(){var a=0;return this.foldChildren(this.textTemplate[a],function(b,c){a+=1;var d=c.text();return b&&"("===this.textTemplate[a]&&"("===d[0]&&")"===d.slice(-1)?b+d.slice(1,-1)+this.textTemplate[a]:b+c.text()+(this.textTemplate[a]||"")})}}),z=d(B,function(a,c){a.init=function(a,b,d){d||(d=a&&1<a.length?a.slice(1):a);c.init.call(this,a,b,[d])};a.parser=function(){return l.succeed(this)};a.numBlocks=function(){return 0};a.replaces=function(a){a.remove()};a.createBlocks=b;a.seek=function(a,b,c,
d,e){c=e(this);b-c.left<c.right-b?a.insertBefore(this):a.insertAfter(this)};a.expectedCursorYNextTo=function(a){return(a(this).top+a(this).bottom)/2};a.latex=function(){return this.ctrlSeq};a.text=function(){return this.textTemplate};a.placeCursor=b;a.isEmpty=function(){return!0}}),C=d(x,function(a){a.join=function(a){return this.foldChildren("",function(b,c){return b+c[a]()})};a.latex=function(){return this.join("latex")};a.text=function(){return this.firstChild===this.lastChild?this.firstChild.text():
"("+this.join("text")+")"};a.isEmpty=function(){return 0===this.firstChild&&0===this.lastChild};a.seekPoint=function(a,b,c){if(this.firstChild){if(d={next:this.firstChild,x:c(this.firstChild).left},a>d.x){d={next:this.lastChild,x:c(this.lastChild).left};for(b={next:0,x:c(d.next).right};a<d.x;)b=d,d={next:d.next.prev,x:c(d.next.prev).left};b.x-a<a-d.x&&(d=b)}}else var d={next:0,x:(c(this).left+c(this).right)/2};return{parent:this,next:d.next,x:d.x,y:this.expectedCursorYInside(c)}};a.expectedCursorYInside=
function(a){return this.firstChild?this.firstChild.expectedCursorYNextTo(a):(a(this).top+a(this).bottom)/2};a.focus=function(){this.jQ.addClass("hasCursor");this.jQ.removeClass("empty");return this};a.blur=function(){this.jQ.removeClass("hasCursor");this.isEmpty()&&this.jQ.addClass("empty");return this}}),D=d(s,function(b,c){b.init=function(b,d){c.init.call(this,b,d||b);this.jQ=this.fold(a(),function(a,b){return b.jQ.add(a)})};b.latex=function(){return this.fold("",function(a,b){return a+b.latex()})};
b.remove=function(){this.jQ.remove();this.each(function(a){a.postOrder(function(a){delete x[a.id]})});return this.disown()}}),F=d(C,function(a,b){a.latex=function(){return b.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")};a.text=function(){return this.foldChildren("",function(a,b){return a+b.text()})};a.renderLatex=function(a){var b=l.all,b=ca.skip(l.eof).or(b.result(!1)).parse(a);this.firstChild=this.lastChild=0;b&&b.children().adopt(this,0,0);a=this.jQ;b?(b=b.join("html"),a.html(b),x.jQize(a),
this.focus().finalizeInsert()):a.empty();this.cursor.parent=this;this.cursor.prev=this.lastChild;this.cursor.next=0};a.renderSliderLatex=function(a){function b(a){var c=a.charCodeAt(0);return 65<=c&&90>=c||97<=c&&122>=c?Z(a):I[a]||A[a]?(I[a]||A[a])(a):S(a)}a=/^([a-z])(?:_([a-z0-9]|\{[a-z0-9]+\}))?=([-0-9.]+)$/i.exec(a);r("valid restricted slider LaTeX",a);var c=a[1],d=a[2];a=a[3];this.firstChild=this.lastChild=0;c=Z(c);if(d){var e=A._("_"),f=C().adopt(e,0,0);e.blocks=[f];if(1===d.length)b(d).adopt(f,
f.lastChild,0);else for(var g=1;g<d.length-1;g+=1)b(d.charAt(g)).adopt(f,f.lastChild,0)}c.adopt(this,this.lastChild,0);e&&e.adopt(this,this.lastChild,0);A["="]("=").adopt(this,this.lastChild,0);g=0;for(e=a.length;g<e;g+=1)c=a.charAt(g),b(c).adopt(this,this.lastChild,0);a=this.jQ;e=this.join("html");a.html(e);x.jQize(a);this.cursor.parent=this;this.cursor.prev=this.lastChild;this.cursor.next=0};a.up=function(){this.triggerSpecialEvent("upPressed")};a.down=function(){this.triggerSpecialEvent("downPressed")};
a.moveOutOf=function(a){this.triggerSpecialEvent(a+"Pressed")};a.onKey=function(a,b){switch(a){case "Ctrl-Shift-Backspace":case "Ctrl-Backspace":for(;this.cursor.prev||this.cursor.selection;)this.cursor.backspace();break;case "Shift-Backspace":case "Backspace":this.cursor.backspace();this.triggerSpecialEvent("render");break;case "Esc":case "Tab":var c=this.cursor.parent;if(c===this.cursor.root)return;this.cursor.prepareMove();c.next?this.cursor.prependTo(c.next):this.cursor.insertAfter(c.parent);
break;case "Shift-Tab":case "Shift-Esc":c=this.cursor.parent;if(c===this.cursor.root)return;this.cursor.prepareMove();c.prev?this.cursor.appendTo(c.prev):this.cursor.insertBefore(c.parent);break;case "Enter":this.triggerSpecialEvent("enterPressed");break;case "End":this.cursor.prepareMove().appendTo(this.cursor.parent);break;case "Ctrl-End":this.cursor.prepareMove().appendTo(this);break;case "Shift-End":for(;this.cursor.next;)this.cursor.selectRight();break;case "Ctrl-Shift-End":for(;this.cursor.next||
this.cursor.parent!==this;)this.cursor.selectRight();break;case "Home":this.cursor.prepareMove().prependTo(this.cursor.parent);break;case "Ctrl-Home":this.cursor.prepareMove().prependTo(this);break;case "Shift-Home":for(;this.cursor.prev;)this.cursor.selectLeft();break;case "Ctrl-Shift-Home":for(;this.cursor.prev||this.cursor.parent!==this;)this.cursor.selectLeft();break;case "Left":this.cursor.moveLeft();break;case "Shift-Left":this.cursor.selectLeft();break;case "Ctrl-Left":break;case "Meta-Left":break;
case "Right":this.cursor.moveRight();break;case "Shift-Right":this.cursor.selectRight();break;case "Ctrl-Right":break;case "Meta-Right":break;case "Up":this.cursor.moveUp();break;case "Down":this.cursor.moveDown();break;case "Shift-Up":if(this.cursor.prev)for(;this.cursor.prev;)this.cursor.selectLeft();else this.cursor.selectLeft();case "Shift-Down":if(this.cursor.next)for(;this.cursor.next;)this.cursor.selectRight();else this.cursor.selectRight();case "Ctrl-Up":break;case "Meta-Up":break;case "Ctrl-Down":break;
case "Meta-Down":break;case "Ctrl-Shift-Del":case "Ctrl-Del":for(;this.cursor.next||this.cursor.selection;)this.cursor.deleteForward();this.triggerSpecialEvent("render");break;case "Shift-Del":case "Del":this.cursor.deleteForward();this.triggerSpecialEvent("render");break;case "Meta-A":case "Ctrl-A":if(this!==this.cursor.root)return;for(this.cursor.prepareMove().appendTo(this);this.cursor.prev;)this.cursor.selectLeft();break;default:return!1}b.preventDefault();return!1};a.onText=function(a){this.cursor.write(a);
this.triggerSpecialEvent("render");return!1};a.triggerSpecialEvent=function(a){var b=this.jQ;setTimeout(function(){b.trigger(a)},1)}}),H=d(B,function(a,b){a.init=function(a){b.init.call(this,"$");this.cursor=a};a.htmlTemplate='<span class="mathquill-rendered-math">&0</span>';a.createBlocks=function(){this.firstChild=this.lastChild=F();this.blocks=[this.firstChild];this.firstChild.parent=this;var a=this.firstChild.cursor=this.cursor;this.firstChild.onText=function(b){"$"!==b||a.parent!==this?a.write(b):
this.isEmpty()?a.insertAfter(this.parent).backspace().insertNew(S("\\$","$")).show():a.next?a.prev?a.write(b):a.insertBefore(this.parent):a.insertAfter(this.parent);return!1}};a.latex=function(){return"$"+this.firstChild.latex()+"$"}}),G=d(C,function(a){a.renderLatex=function(a){var b=this.cursor;this.jQ.children().slice(1).remove();this.firstChild=this.lastChild=0;b.show().appendTo(this);var c=l.regex,d=l.string,e=l.eof,f=l.all,g=d("$").then(ca).skip(d("$").or(e)).map(function(a){var c=H(b);c.createBlocks();
var d=c.firstChild;a.children().adopt(d,0,0);return c}),c=d("\\$").result("$").or(c(/^[^$]/)).map(S);if(a=g.or(c).many().skip(e).or(f.result(!1)).parse(a)){for(e=0;e<a.length;e+=1)a[e].adopt(this,this.lastChild,0);a=this.join("html");x.jQize(a).appendTo(this.jQ);this.finalizeInsert()}};a.onKey=F.prototype.onKey;a.onText=function(a){this.cursor.prepareEdit();"$"===a?this.cursor.insertNew(H(this.cursor)):this.cursor.insertNew(S(a));return!1}}),I={},A={},K,O=b,J=document.createElement("div").style,N=
{transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},L,V;for(V in N)if(V in J){L=V;break}L?K=function(a,b,c){a.css(L,"scale("+b+","+c+")")}:"filter"in J?(O=function(a){a.className=a.className},K=function(b,c,d){function e(){b.css("marginRight",(f.width()-1)*(c-1)/c+"px")}c/=1+(d-1)/2;b.css("fontSize",d+"em");b.hasClass("matrixed-container")||b.addClass("matrixed-container").wrapInner('<span class="matrixed"></span>');var f=b.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+
c+",SizingMethod='auto expand')");e();var g=setInterval(e);a(window).load(function(){clearTimeout(g);e()})}):K=function(a,b,c){a.css("fontSize",c+"em")};J=d(B,function(a,b){a.init=function(a,c,d){b.init.call(this,a,"<"+c+" "+d+">&0</"+c+">")}});A.mathrm=g(J,"\\mathrm","span",'class="roman font"');A.mathit=g(J,"\\mathit","i",'class="font"');A.mathbf=g(J,"\\mathbf","b",'class="font"');A.mathsf=g(J,"\\mathsf","span",'class="sans-serif font"');A.mathtt=g(J,"\\mathtt","span",'class="monospace font"');
A.underline=g(J,"\\underline","span",'class="non-leaf underline"');A.overline=A.bar=g(J,"\\overline","span",'class="non-leaf overline"');var W=d(B,function(a,b){function c(a){var b=this.parent,d=a;do{if(d.next)return a.insertBefore(b),!1;d=d.parent.parent}while(d!==b);a.insertAfter(b);return!1}a.init=function(a,c,d){b.init.call(this,a,"<"+c+' class="non-leaf"><span class="non-leaf '+c+'">&0</span></'+c+">",[d])};a.finalizeTree=function(){r("SupSub is only _ and ^","^"===this.ctrlSeq||"_"===this.ctrlSeq);
"_"===this.ctrlSeq?(this.down=this.firstChild,this.firstChild.up=c):(this.up=this.firstChild,this.firstChild.down=c)};a.latex=function(){if("_"===this.ctrlSeq&&this.respaced)return"";var a="";if("^"===this.ctrlSeq&&this.next.respaced)var b=this.next.firstChild.latex(),a=1===b.length?a+("_"+b):a+("_{"+b+"}");b=this.firstChild.latex();return a=1===b.length?a+(this.ctrlSeq+b):a+(this.ctrlSeq+"{"+(b||" ")+"}")};a.redraw=function(){this.prev&&this.prev.respace();this.prev instanceof W||(this.respace(),
!this.next||this.next instanceof W||this.next.respace())};a.respace=function(){"\\int "===this.prev.ctrlSeq||this.prev instanceof W&&this.prev.ctrlSeq!=this.ctrlSeq&&this.prev.prev&&"\\int "===this.prev.prev.ctrlSeq?this["int"]||(this["int"]=!0,this.jQ.addClass("int")):this["int"]&&(this["int"]=!1,this.jQ.removeClass("int"));if(this.respaced=this.prev instanceof W&&this.prev.ctrlSeq!=this.ctrlSeq&&!this.prev.respaced){var a=+this.jQ.css("fontSize").slice(0,-2),b=this.prev.jQ.outerWidth(),d=this.jQ.outerWidth();
this.jQ.css({left:(this["int"]&&"_"===this.ctrlSeq?-0.25:0)-b/a+"em",marginRight:0.1-f(d,b)/a+"em"})}else this["int"]&&"_"===this.ctrlSeq?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});this.respaced?"^"===this.ctrlSeq?this.down=this.firstChild.down=this.prev.firstChild:this.up=this.firstChild.up=this.prev.firstChild:this.next.respaced?"_"===this.ctrlSeq?this.up=this.firstChild.up=this.next.firstChild:this.down=this.firstChild.down=this.next.firstChild:"_"===this.ctrlSeq?
(delete this.up,this.firstChild.up=c):(delete this.down,this.firstChild.down=c);this.next instanceof W&&this.next.respace();return this};a.onKey=function(a,b){if(this.getCursor().parent.parent===this)switch(a){case "Tab":if(this.next.respaced)return this.getCursor().prepareMove().prependTo(this.next.firstChild),b.preventDefault(),!1;break;case "Shift-Tab":if(this.respaced)return this.getCursor().prepareMove().appendTo(this.prev.firstChild),b.preventDefault(),!1;break;case "Left":if(!this.getCursor().prev&&
this.respaced)return this.getCursor().prepareMove().insertBefore(this.prev),!1;break;case "Right":if(!this.getCursor().next&&this.next.respaced)return this.getCursor().prepareMove().insertAfter(this.next),!1}};a.getCursor=function(){for(var a,b=this.parent;!a;b=b.parent)a=b.cursor;this.getCursor=function(){return a};return this.getCursor()};a.expectedCursorYNextTo=function(a){return"_"===this.ctrlSeq?a(this).top:a(this).bottom}});A.subscript=A._=g(W,"_","sub","_");A.superscript=A.supscript=A["^"]=
g(W,"^","sup","**");var P=d(B,function(a,b){function c(a){var b=this.parent,d=a;do{if(d.prev)return a.insertAfter(b),!1;d=d.parent.parent}while(d!==b);a.insertBefore(b);return!1}a.init=function(a,b){z.prototype.init.call(this,a,'<span class="large-operator non-leaf"><span class="to"><span>&1</span></span><big>'+b+'</big><span class="from"><span>&0</span></span></span>')};a.placeCursor=function(a){a.appendTo(this.firstChild).writeLatex("n=").show()};a.latex=function(){function a(b){return 1===b.length?
b:"{"+(b||" ")+"}"}return this.ctrlSeq+"_"+a(this.firstChild.latex())+"^"+a(this.lastChild.latex())};a.parser=function(){for(var a=l.string,b=l.optWhitespace,c=l.succeed,d=ca.block,e=this,f=e.blocks=[C(),C()],g=0;g<f.length;g+=1)f[g].adopt(e,e.lastChild,0);return b.then(a("_").or(a("^"))).then(function(a){var b=f["_"===a?0:1];return d.then(function(a){a.children().adopt(b,b.lastChild,0);return c(e)})}).many().result(e)};a.finalizeTree=function(){this.down=this.firstChild;this.firstChild.up=c;this.up=
this.lastChild;this.lastChild.down=c}});A["∑"]=A.sum=A.summation=g(P,"\\sum ","&sum;");A["∏"]=A.prod=A.product=g(P,"\\prod ","&prod;");var E=A.frac=A.dfrac=A.cfrac=A.fraction=d(B,function(a,b){a.ctrlSeq="\\frac";a.htmlTemplate='<span class="fraction non-leaf"><span class="numerator">&0</span><span class="denominator">&1</span><span style="display:inline-block;width:0;overflow:hidden">&nbsp;</span></span>';a.textTemplate=["(","/",")"];a.finalizeTree=function(){this.up=this.lastChild.up=this.firstChild;
this.down=this.firstChild.down=this.lastChild};a.expectedCursorYNextTo=function(a){return a.elById(this.jQ[0].lastChild,this.id+0.5).top}}),M=A.over=I["/"]=d(E,function(a,b){a.createBefore=function(a){if(!this.replacedFragment){var c=a.prev;if(c instanceof Y||c instanceof E)c=c.prev;else{for(;c&&!(c instanceof X||c instanceof Y||c instanceof P||c instanceof E||","===c.ctrlSeq||":"===c.ctrlSeq||"\\space "===c.ctrlSeq);)c=c.prev;c instanceof P&&c.next instanceof W&&(c=c.next,c.next instanceof W&&c.next.ctrlSeq!=
c.ctrlSeq&&(c=c.next))}c!==a.prev&&(this.replaces(D(c.next||a.parent.firstChild,a.prev)),a.prev=c)}b.createBefore.call(this,a)}}),J=A.sqrt=A["√"]=d(B,function(a,b){a.ctrlSeq="\\sqrt";a.htmlTemplate='<span class="non-leaf"><span class="scaled sqrt-prefix">&radic;</span><span class="non-leaf sqrt-stem">&0</span></span>';a.textTemplate=["sqrt(",")"];a.parser=function(){return ca.optBlock.then(function(a){return ca.block.map(function(b){var c=Q();c.blocks=[a,b];a.adopt(c,0,0);b.adopt(c,a,0);return c})}).or(b.parser.call(this))};
a.redraw=function(){var a=this.lastChild.jQ;K(a.prev(),1,a.innerHeight()/+a.css("fontSize").slice(0,-2)-0.1)}}),Q=A.nthroot=d(J,function(a,b){a.htmlTemplate='<sup class="nthroot non-leaf">&0</sup><span class="scaled"><span class="sqrt-prefix scaled">&radic;</span><span class="sqrt-stem non-leaf">&1</span></span>';a.textTemplate=["sqrt[","](",")"];a.latex=function(){return"\\sqrt["+this.firstChild.latex()+"]{"+this.lastChild.latex()+"}"};a.onKey=function(a,b){if(this.getCursor().parent.parent===this)switch(a){case "Right":if(this.getCursor().next)break;
case "Tab":if(this.getCursor().parent===this.firstChild)return this.getCursor().prepareMove().prependTo(this.lastChild),b.preventDefault(),!1;break;case "Left":if(this.getCursor().prev)break;case "Shift-Tab":if(this.getCursor().parent===this.lastChild)return this.getCursor().prepareMove().appendTo(this.firstChild),b.preventDefault(),!1}};a.getCursor=W.prototype.getCursor;a.expectedCursorYNextTo=function(a){return a.elById(this.jQ[0],this.id+0.5).bottom}}),U=d(B,function(a,b){a.init=function(a,c,d,
e){b.init.call(this,"\\left"+d,'<span class="non-leaf"><span class="scaled paren">'+a+'</span><span class="non-leaf">&0</span><span class="scaled paren">'+c+"</span></span>",[a,c]);this.end="\\right"+e};a.jQadd=function(){b.jQadd.apply(this,arguments);var a=this.jQ;this.bracketjQs=a.children(":first").add(a.children(":last"))};a.finalizeTree=function(){if(this.firstChild.isEmpty()&&this.next){var a=D(this.next,this.parent.lastChild).disown();a.adopt(this.firstChild,0,0);a.jQ.appendTo(this.firstChild.jQ)}};
a.placeCursor=function(a){a.prependTo(this.firstChild)};a.latex=function(){return this.ctrlSeq+this.firstChild.latex()+this.end};a.redraw=function(){var a=this.firstChild.jQ,a=a.outerHeight()/+a.css("fontSize").slice(0,-2);K(this.bracketjQs,f(1+0.2*(a-1),1.2),1.05*a)}});A.left=d(B,function(a){a.parser=function(){var a=l.regex,b=l.string,a=l.regex,c=l.succeed,d=l.optWhitespace;return d.then(a(/^(?:[([|]|\\\{)/)).then(function(e){"\\"===e.charAt(0)&&(e=e.slice(1));var f=I[e]();return ca.map(function(a){f.blocks=
[a];a.adopt(f,0,0)}).then(b("\\right")).skip(d).then(a(/^(?:[\])|]|\\\})/)).then(function(a){return a.slice(-1)!==f.end.slice(-1)?l.fail("open doesn't match close"):c(f)})})}});A.right=d(B,function(a){a.parser=function(){return l.fail("unmatched \\right")}});A.lbrace=I["{"]=g(U,"{","}","\\{","\\}");A.langle=A.lang=g(U,"&lang;","&rang;","\\langle ","\\rangle ");N=d(U,function(a,c){a.createBefore=function(a){if(this.replacedFragment)return c.createBefore.call(this,a);var b=a.parent.parent;if(b.ctrlSeq===
this.ctrlSeq){if(a.next){var d=D(a.next,b.firstChild.lastChild).disown();d.adopt(b.parent,b,b.next);d.jQ.insertAfter(b.jQ);a.next.respace&&a.next.respace()}a.insertAfter(b);b.bubble("redraw")}else c.createBefore.call(this,a),a.appendTo(this.firstChild)};a.finalizeTree=b;a.placeCursor=function(a){this.firstChild.blur();a.insertAfter(this)}});A.rbrace=I["}"]=g(N,"{","}","\\{","\\}");A.rangle=A.rang=g(N,"&lang;","&rang;","\\langle ","\\rangle ");V=function(a,b){a.init=function(a,c){b.init.call(this,
a,c,a,c)}};J=d(U,V);A.lparen=I["("]=g(J,"(",")");A.lbrack=A.lbracket=I["["]=g(J,"[","]");N=d(N,V);A.rparen=I[")"]=g(N,"(",")");A.rbrack=A.rbracket=I["]"]=g(N,"[","]");A.lpipe=A.rpipe=I["|"]=d(J,function(a,c){a.init=function(){c.init.call(this,"|","|")};a.createBefore=function(a){a.next||!a.parent.parent||a.parent.parent.end!==this.end||this.replacedFragment?B.prototype.createBefore.call(this,a):a.insertAfter(a.parent.parent)};a.finalizeTree=b});var Y=A.text=A.textnormal=A.textrm=A.textup=A.textmd=
d(B,function(a,b){a.ctrlSeq="\\text";a.htmlTemplate='<span class="text">&0</span>';a.replaces=function(a){a instanceof D?this.replacedText=a.remove().jQ.text():"string"===typeof a&&(this.replacedText=a)};a.textTemplate=['"','"'];a.parser=function(){var a=l.string,b=l.regex;return l.optWhitespace.then(a("{")).then(b(/^[^}]*/)).skip(a("}")).map(function(a){var b=Y();b.createBlocks();for(var c=b.firstChild,d=0;d<a.length;d+=1)S(a.charAt(d)).adopt(c,c.lastChild,0);return b})};a.createBlocks=function(){this.firstChild=
this.lastChild=R();this.blocks=[this.firstChild];this.firstChild.parent=this};a.finalizeInsert=function(){this.firstChild.blur=function(){delete this.blur;return this};b.finalizeInsert.call(this)};a.createBefore=function(a){b.createBefore.call(this,this.cursor=a);if(this.replacedText)for(a=0;a<this.replacedText.length;a+=1)this.write(this.replacedText.charAt(a))};a.write=function(a){this.cursor.insertNew(S(a))};a.onKey=function(a,b){if(!this.cursor.selection&&("Backspace"===a&&!this.cursor.prev||
"Del"===a&&!this.cursor.next))return this.isEmpty()&&this.cursor.insertAfter(this),!1};a.onText=function(a){this.cursor.prepareEdit();"$"!==a?this.write(a):this.isEmpty()?this.cursor.insertAfter(this).backspace().insertNew(S("\\$","$")):this.cursor.next?this.cursor.prev?(a=Y(D(this.cursor.next,this.firstChild.lastChild)),a.placeCursor=function(a){this.prev=0;delete this.placeCursor;this.placeCursor(a)},a.firstChild.focus=function(){return this},this.cursor.insertAfter(this).insertNew(a),a.prev=this,
this.cursor.insertBefore(a),delete a.firstChild.focus):this.cursor.insertBefore(this):this.cursor.insertAfter(this);this.cursor.root.triggerSpecialEvent("render");return!1}}),R=d(C,function(a,b){a.blur=function(){this.jQ.removeClass("hasCursor");if(this.isEmpty()){var a=this.parent,b=a.cursor;b.parent===this?this.jQ.addClass("empty"):(b.hide(),a.remove(),b.next===a?b.next=a.next:b.prev===a&&(b.prev=a.prev),b.show().parent.bubble("redraw"))}return this};a.focus=function(){b.focus.call(this);var a=
this.parent;if(a.next.ctrlSeq===a.ctrlSeq){var c=this,d=a.cursor,a=a.next.firstChild;a.eachChild(function(a){a.parent=c;a.jQ.appendTo(c.jQ)});this.lastChild?this.lastChild.next=a.firstChild:this.firstChild=a.firstChild;a.firstChild.prev=this.lastChild;this.lastChild=a.lastChild;a.parent.remove();d.prev?d.insertAfter(d.prev):d.prependTo(this);d.parent.bubble("redraw")}else a.prev.ctrlSeq===a.ctrlSeq&&(d=a.cursor,d.prev?a.prev.firstChild.focus():d.appendTo(a.prev.firstChild));return this}});A.em=A.italic=
A.italics=A.emph=A.textit=A.textsl=u("\\textit","i",'class="text"');A.strong=A.bold=A.textbf=u("\\textbf","b",'class="text"');A.sf=A.textsf=u("\\textsf","span",'class="sans-serif text"');A.tt=A.texttt=u("\\texttt","span",'class="monospace text"');A.textsc=u("\\textsc","span",'style="font-variant:small-caps" class="text"');A.uppercase=u("\\uppercase","span",'style="text-transform:uppercase" class="text"');A.lowercase=u("\\lowercase","span",'style="text-transform:lowercase" class="text"');d(B,function(b,
c){b.ctrlSeq="\\";b.replaces=function(a){this._replacedFragment=a.disown();this.isEmpty=function(){return!1}};b.htmlTemplate='<span class="latex-command-input non-leaf">\\<span>&0</span></span>';b.textTemplate=["\\"];b.createBlocks=function(){c.createBlocks.call(this);this.firstChild.focus=function(){this.parent.jQ.addClass("hasCursor");this.isEmpty()&&this.parent.jQ.removeClass("empty");return this};this.firstChild.blur=function(){this.parent.jQ.removeClass("hasCursor");this.isEmpty()&&this.parent.jQ.addClass("empty");
return this}};b.createBefore=function(b){c.createBefore.call(this,b);this.cursor=b.appendTo(this.firstChild);if(this._replacedFragment){var d=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",function(b){a(b.target=d).trigger(b);return!1}).insertBefore(this.jQ).add(this.jQ)}};b.latex=function(){return"\\"+this.firstChild.latex()+" "};b.onKey=function(a,b){if("Tab"===a||"Enter"===a)return this.renderCommand(),this.cursor.root.triggerSpecialEvent("render"),b.preventDefault(),
!1};b.onText=function(a){if(a.match(/[a-z]/i))return this.cursor.prepareEdit(),this.cursor.insertNew(S(a)),!1;this.renderCommand();if(" "===a||"\\"===a&&this.firstChild.isEmpty())return this.cursor.root.triggerSpecialEvent("render"),!1};b.renderCommand=function(){this.jQ=this.jQ.last();this.remove();this.next?this.cursor.insertBefore(this.next):this.cursor.appendTo(this.parent);var a=this.firstChild.latex();a||(a="backslash");this.cursor.insertCmd(a,this._replacedFragment)}});var ea=A.binom=A.binomial=
d(B,function(a,b){a.ctrlSeq="\\binom";a.htmlTemplate='<span class="paren scaled">(</span><span class="non-leaf"><span class="array non-leaf"><span>&0</span><span>&1</span></span></span><span class="paren scaled">)</span>';a.textTemplate=["choose(",",",")"];a.redraw=function(){var a=this.jQ.eq(1),a=a.outerHeight()/+a.css("fontSize").slice(0,-2),b=this.jQ.filter(".paren");K(b,f(1+0.2*(a-1),1.2),1.05*a)};a.expectedCursorYNextTo=z.prototype.expectedCursorYNextTo});A.choose=d(ea,function(a){a.createBefore=
M.prototype.createBefore});A.vector=d(B,function(b,d){b.ctrlSeq="\\vector";b.htmlTemplate='<span class="array"><span>&0</span></span>';b.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(a,b){a.push(b.latex());return a}).join("\\\\")+"\\end{matrix}"};b.text=function(){return"["+this.foldChildren([],function(a,b){a.push(b.text());return a}).join()+"]"};b.createBefore=function(a){d.createBefore.call(this,this.cursor=a)};b.onKey=function(b,d){var e=this.cursor.parent;if(e.parent===
this){if("Enter"===b){var f=C();f.parent=this;f.jQ=a("<span></span>").attr(c,f.id).insertAfter(e.jQ);e.next?e.next.prev=f:this.lastChild=f;f.next=e.next;e.next=f;f.prev=e;this.bubble("redraw").cursor.appendTo(f);d.preventDefault();return!1}if("Tab"===b&&!e.next){if(e.isEmpty()){if(e.prev)return this.cursor.insertAfter(this),delete e.prev.next,this.lastChild=e.prev,e.jQ.remove(),this.bubble("redraw"),d.preventDefault(),!1;return}f=C();f.parent=this;f.jQ=a("<span></span>").attr(c,f.id).appendTo(this.jQ);
this.lastChild=f;e.next=f;f.prev=e;this.bubble("redraw").cursor.appendTo(f);d.preventDefault();return!1}if(8===d.which){if(e.isEmpty())return e.prev?(this.cursor.appendTo(e.prev),e.prev.next=e.next):(this.cursor.insertBefore(this),this.firstChild=e.next),e.next?e.next.prev=e.prev:this.lastChild=e.prev,e.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():this.bubble("redraw"),d.preventDefault(),!1;if(!this.cursor.prev)return d.preventDefault(),!1}}};b.expectedCursorYNextTo=ea.prototype.expectedCursorYNextTo});
var Z=d(z,function(a,b){a.init=function(a,c){b.init.call(this,a,"<var>"+(c||a)+"</var>")};a.createBefore=function(a){for(var c=this.ctrlSeq,d=0,e=a.prev;d<aa-1&&e&&e instanceof Z;d+=1,e=e.prev)c=e.ctrlSeq+c;for(;c.length;){if(da.hasOwnProperty(c)){for(d=1;d<c.length;d+=1)a.backspace();a.insertNew(A[c](c));return}c=c.slice(1)}b.createBefore.apply(this,arguments)};a.respace=a.finalizeTree=function(){var a=this.ctrlSeq;if(!(1<a.length)){for(var b=this.prev;b instanceof Z&&1===b.ctrlSeq.length;b=b.prev)a=
b.ctrlSeq+a;for(var c=this.next;c instanceof Z&&1===c.ctrlSeq.length;c=c.next)a+=c.ctrlSeq;D(b.next||this.parent.firstChild,c.prev||this.parent.lastChild).each(function(a){a.jQ.removeClass("un-italicized last");delete a.isFirstLetter;delete a.isLastLetter});var c=0,d=b.next||this.parent.firstChild;a:for(;c<a.length;c+=1,d=d.next)for(b=f(w,a.length-c);0<b;b-=1)if(fa.hasOwnProperty(a.slice(c,c+b))){d.isFirstLetter=!0;for(var e=0;e<b;e+=1,d=d.next){d.jQ.addClass("un-italicized");var g=d}g.isLastLetter=
!0;g.next instanceof W||g.next instanceof U||g.jQ.addClass("last");c+=b-1;d=g;continue a}}};a.latex=function(){return this.isFirstLetter?"\\"+this.ctrlSeq:this.isLastLetter?this.ctrlSeq+" ":this.ctrlSeq};a.text=function(){var a=this.ctrlSeq;!this.prev||this.prev instanceof Z||this.prev instanceof X||(a="*"+a);!this.next||this.next instanceof X||"^"===this.next.ctrlSeq||(a+="*");return a}}),ia=d(z,function(a,b){a.init=function(a){this.ctrlSeq=a};a.createBefore=function(a){a.writeLatex(this.ctrlSeq).show()};
a.parser=function(){for(var a=this.ctrlSeq,b=C(),c=0;c<a.length;c+=1)Z(a.charAt(c)).adopt(b,b.lastChild,0);return l.succeed(b.children())}}),fa={ln:1,log:1,min:1,nCr:1,nPr:1,gcd:1,lcm:1,mcm:1,mcd:1,ceil:1,exp:1,abs:1,max:1,mod:1,gcf:1,exp:1,floor:1,sign:1,signum:1,round:1},w=9,da={sqrt:1,nthroot:1,sum:1,prod:1,pi:1,phi:1,tau:1,gamma:1,theta:1},aa=7;(function(){var a={sin:1,cos:1,tan:1,sec:1,cosec:1,csc:1,cotan:1,cot:1,ctg:1},b;for(b in a)fa[b]=fa["arc"+b]=fa[b+"h"]=fa["arc"+b+"h"]=1;for(var c in fa)A[c]=
ia})();var S=d(z,function(a,b){a.init=function(a,c){b.init.call(this,a,"<span>"+(c||a)+"</span>")}});I[" "]=g(S,"\\space "," ");A.prime=I["'"]=g(S,"'","&prime;");J=d(z,function(a,b){a.init=function(a,c){b.init.call(this,a,'<span class="nonSymbola">'+(c||a)+"</span>")}});A["@"]=J;A["&"]=g(J,"\\&","&amp;");A["%"]=g(J,"\\%","%");A.alpha=A.beta=A.gamma=A.delta=A.zeta=A.eta=A.theta=A.iota=A.kappa=A.mu=A.nu=A.xi=A.rho=A.sigma=A.tau=A.chi=A.psi=A.omega=d(Z,function(a,b){a.init=function(a){b.init.call(this,
"\\"+a+" ","&"+a+";")}});A.phi=g(Z,"\\phi ","&#981;");A.phiv=A.varphi=g(Z,"\\varphi ","&phi;");A.epsilon=g(Z,"\\epsilon ","&#1013;");A.epsiv=A.varepsilon=g(Z,"\\varepsilon ","&epsilon;");A.piv=A.varpi=g(Z,"\\varpi ","&piv;");A.sigmaf=A.sigmav=A.varsigma=g(Z,"\\varsigma ","&sigmaf;");A.thetav=A.vartheta=A.thetasym=g(Z,"\\vartheta ","&thetasym;");A.upsilon=A.upsi=g(Z,"\\upsilon ","&upsilon;");A.gammad=A.Gammad=A.digamma=g(Z,"\\digamma ","&#989;");A.kappav=A.varkappa=g(Z,"\\varkappa ","&#1008;");A.rhov=
A.varrho=g(Z,"\\varrho ","&#1009;");A.pi=A["π"]=g(J,"\\pi ","&pi;");A.theta=A["θ"]=g(J,"\\theta ","&theta;");A.lambda=g(J,"\\lambda ","&lambda;");A.Upsilon=A.Upsi=A.upsih=A.Upsih=g(z,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>');A.Gamma=A.Delta=A.Theta=A.Lambda=A.Xi=A.Pi=A.Sigma=A.Phi=A.Psi=A.Omega=A.forall=d(S,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});J=d(B,function(a){a.init=function(a){this.latex=a};a.createBefore=function(a){a.writeLatex(this.latex)};
a.parser=function(){var a=ca.parse(this.latex).children();return l.succeed(a)}});A["¹"]=g(J,"^1");A["²"]=g(J,"^2");A["³"]=g(J,"^3");A["¼"]=g(J,"\\frac14");A["½"]=g(J,"\\frac12");A["¾"]=g(J,"\\frac34");A["⅒"]=g(J,"\\frac{1}{10}");A["⅓"]=g(J,"\\frac13");A["⅔"]=g(J,"\\frac23");var X=d(z,function(a,b){a.init=function(a,c,d){b.init.call(this,a,'<span class="binary-operator">'+c+"</span>",d)};a.createBefore=function(a){var c=a.prev.ctrlSeq+this.ctrlSeq;"<="===c?a.backspace().insertNew(X("\\le ","&le;")):
">="===c?a.backspace().insertNew(X("\\ge ","&ge;")):b.createBefore.apply(this,arguments)}}),J=d(X,function(a){a.init=S.prototype.init;a.respace=function(){this.jQ[0].className=this.prev?this.prev instanceof X&&this.next&&!(this.next instanceof X)?"unary-operator":"binary-operator":"";return this}});A["+"]=g(J,"+","+");A["–"]=A["−"]=A["-"]=g(J,"-","&minus;");A["±"]=A.pm=A.plusmn=A.plusminus=g(J,"\\pm ","&plusmn;");A.mp=A.mnplus=A.minusplus=g(J,"\\mp ","&#8723;");I["*"]=A.sdot=A.cdot=g(X,"\\cdot ",
"&middot;");A["="]=g(X,"=","=");A["<"]=g(X,"<","&lt;");A[">"]=g(X,">","&gt;");A.notin=A.sim=A.cong=A.equiv=A.oplus=A.otimes=d(X,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});A.times=g(X,"\\times ","&times;","[x]");A["÷"]=A.div=A.divide=A.divides=g(X,"\\div ","&divide;","[/]");A["≠"]=A.ne=A.neq=g(X,"\\ne ","&ne;");A.ast=A.star=A.loast=A.lowast=g(X,"\\ast ","&lowast;");A.therefor=A.therefore=g(X,"\\therefore ","&there4;");A.cuz=A.because=g(X,"\\because ","&#8757;");A.prop=
A.propto=g(X,"\\propto ","&prop;");A["≈"]=A.asymp=A.approx=g(X,"\\approx ","&asymp;");A.lt=g(X,"<","&lt;");A.gt=g(X,">","&gt;");A["≤"]=A.le=A.leq=g(X,"\\le ","&le;");A["≥"]=A.ge=A.geq=g(X,"\\ge ","&ge;");A.isin=A["in"]=g(X,"\\in ","&isin;");A.ni=A.contains=g(X,"\\ni ","&ni;");A.notni=A.niton=A.notcontains=A.doesnotcontain=g(X,"\\not\\ni ","&#8716;");A.sub=A.subset=g(X,"\\subset ","&sub;");A.sup=A.supset=A.superset=g(X,"\\supset ","&sup;");A.nsub=A.notsub=A.nsubset=A.notsubset=g(X,"\\not\\subset ",
"&#8836;");A.nsup=A.notsup=A.nsupset=A.notsupset=A.nsuperset=A.notsuperset=g(X,"\\not\\supset ","&#8837;");A.sube=A.subeq=A.subsete=A.subseteq=g(X,"\\subseteq ","&sube;");A.supe=A.supeq=A.supsete=A.supseteq=A.supersete=A.superseteq=g(X,"\\supseteq ","&supe;");A.nsube=A.nsubeq=A.notsube=A.notsubeq=A.nsubsete=A.nsubseteq=A.notsubsete=A.notsubseteq=g(X,"\\not\\subseteq ","&#8840;");A.nsupe=A.nsupeq=A.notsupe=A.notsupeq=A.nsupsete=A.nsupseteq=A.notsupsete=A.notsupseteq=A.nsupersete=A.nsuperseteq=A.notsupersete=
A.notsuperseteq=g(X,"\\not\\supseteq ","&#8841;");A.space=g(S,"\\space ","&nbsp;");A.and=A.land=A.wedge=g(S,"\\wedge ","&and;");A.or=A.lor=A.vee=g(S,"\\vee ","&or;");var ca=function(){function a(b){for(var c=b[0]||C(),d=1;d<b.length;d+=1)b[d].children().adopt(c,c.lastChild,0);return c}var b=l.string,c=l.regex,d=l.any,e=l.optWhitespace,f=l.succeed,g=l.fail,h=l.letter.map(Z),k=c(/^[^${}\\_^]/).map(S),c=c(/^[^\\]/).or(b("\\").then(c(/^[a-z]+/i).or(c(/^\s+/).result(" ")).or(d))).then(function(a){var b=
A[a];return b?b(a).parser():g("unknown command: \\"+a)}).or(h).or(k),d=b("{").then(function(){return m}).skip(b("}")),c=e.then(d.or(c.map(function(a){var b=C();a.adopt(b,0,0);return b}))),m=c.many().map(a).skip(e),b=b("[").then(c.then(function(a){return"]"!==a.join("latex")?f(a):g()}).many().map(a).skip(e)).skip(b("]")),e=m;e.block=c;e.optBlock=b;return e}(),ba=d(function(b){function d(a,b){if(a.next[b])a.prependTo(a.next[b]);else if(a.prev[b])a.appendTo(a.prev[b]);else{var c=a.parent;do{var e=c[b];
if(e&&("function"===typeof e&&(e=c[b](a)),!1===e||e instanceof C)){a.upDownCache[c.id]={parent:a.parent,prev:a.prev,next:a.next};if(e instanceof C)if(c=a.upDownCache[e.id])c.next?a.insertBefore(c.next):a.appendTo(c.parent);else{var c=a.jQ[0].getBoundingClientRect(),f=p();e.seek(a,c.left,c.bottom,e,f)}break}c=c.parent.parent}while(c)}return a.clearSelection().show()}b.init=function(b){this.parent=this.root=b;var c=this.jQ=this._jQ=a('<span class="cursor"><span class="line">&zwj;</span></span>');this.blink=
function(){c.toggleClass("blink")};this.upDownCache={}};b.prev=0;b.next=0;b.parent=0;b.handle=0;b.showHandle=function(){this.handle||(this.handle=a('<span class="handle"></span>').appendTo(this.jQ));return this};b.hideHandle=function(){this.handle&&(this.handle.remove(),delete this.handle);return this};b.show=function(a){a||this.hideHandle();this.jQ=this._jQ.removeClass("blink");"intervalId"in this?clearInterval(this.intervalId):(this.next?this.selection&&this.selection.first.prev===this.prev?this.jQ.insertBefore(this.selection.jQ):
this.jQ.insertBefore(this.next.jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus());this.intervalId=setInterval(this.blink,500);return this};b.hide=function(){"intervalId"in this&&clearInterval(this.intervalId);delete this.intervalId;this.jQ.detach();this.jQ=a();return this};b.insertAt=function(a,b,c){var d=this.parent;this.parent=a;this.prev=b;this.next=c;d.blur()};b.insertBefore=function(a){this.insertAt(a.parent,a.prev,a);this.parent.jQ.addClass("hasCursor");this.jQ.insertBefore(a.jQ.first());
return this};b.insertAfter=function(a){this.insertAt(a.parent,a,a.next);this.parent.jQ.addClass("hasCursor");this.jQ.insertAfter(a.jQ.last());return this};b.prependTo=function(a){this.insertAt(a,0,a.firstChild);this.jQ.prependTo(a.jQ);a.focus();return this};b.appendTo=function(a){this.insertAt(a,a.lastChild,0);this.jQ.appendTo(a.jQ);a.focus();return this};b.hopLeft=function(){this.jQ.insertBefore(this.prev.jQ.first());this.next=this.prev;this.prev=this.prev.prev;return this};b.hopRight=function(){this.jQ.insertAfter(this.next.jQ.last());
this.prev=this.next;this.next=this.next.next;return this};b.moveLeftWithin=function(a){this.prev?this.prev instanceof Q?this.appendTo(this.prev.lastChild):this.prev.up instanceof C?this.appendTo(this.prev.up):this.prev.firstChild?this.appendTo(this.prev.firstChild):this.hopLeft():this.parent!==a?this.insertBefore(this.parent.parent):a.moveOutOf&&a.moveOutOf("left",this)};b.moveRightWithin=function(a){this.next?this.next.up instanceof C?this.prependTo(this.next.up):this.next.firstChild?this.prependTo(this.next.firstChild):
this.hopRight():this.parent!==a?this.insertAfter(this.parent.parent):a.moveOutOf&&a.moveOutOf("right",this)};b.moveLeft=function(){this.upDownCache={};this.selection?this.insertBefore(this.selection.first).clearSelection():this.moveLeftWithin(this.root);this.root.triggerSpecialEvent("cursorMoved");return this.show()};b.moveRight=function(){this.upDownCache={};this.selection?this.insertAfter(this.selection.last).clearSelection():this.moveRightWithin(this.root);this.root.triggerSpecialEvent("cursorMoved");
return this.show()};b.moveUp=function(){return d(this,"up")};b.moveDown=function(){return d(this,"down")};b.seek=function(a,b,d,e,f){this.upDownCache={};f=this.clearSelection().show(f);var g=a.attr(c)||a.attr("mathquill-command-id");g||(a=a.parent(),g=a.attr(c)||a.attr("mathquill-command-id"));a=g?x[g]:f.root;r("nodeId is the id of some Node that exists",a);a.seek(f,b,d,f.root,e);return f};b.writeLatex=function(a){this.upDownCache={};this.show().deleteSelection();var b=l.all;(a=ca.skip(l.eof).or(b.result(!1)).parse(a))&&
!a.isEmpty()&&(a.children().adopt(this.parent,this.prev,this.next),b=a.join("html"),x.jQize(b).insertBefore(this.jQ),this.prev=a.lastChild,a.finalizeInsert(),this.parent.bubble("redraw"));return this};b.write=b.insertCh=function(a){if("^"!=a&&"_"!=a||this.prev)if("+"!=a&&"="!=a&&"-"!=a&&"<"!=a&&">"!=a||"^"!==this.parent.parent.ctrlSeq&&"_"!==this.parent.parent.ctrlSeq||this.next||!this.prev||this.moveRight(),"^"===a&&this.prev instanceof W&&("^"===this.prev.ctrlSeq||"^"===this.prev.prev.ctrlSeq))this.moveUp();
else if("^"===a&&this.next instanceof W&&("^"===this.next.ctrlSeq||this.next.next&&"^"===this.next.next.ctrlSeq))this.moveUp();else if("_"===a&&this.prev instanceof W&&("_"===this.prev.ctrlSeq||"_"===this.prev.prev.ctrlSeq))this.moveDown();else{this.upDownCache={};this.show();var b;b=a.match(/^[a-z]$/i)?Z(a):(b=I[a]||A[a])?b(a):S(a);this.selection&&(this.prev=this.selection.first.prev,this.next=this.selection.last.next,b.replaces(this.selection),delete this.selection);return this.insertNew(b)}};b.insertNew=
function(a){a.createBefore(this);return this};b.insertCmd=function(a,b){this.upDownCache={};this.show();var c=A[a];c?(c=c(a),b&&c.replaces(b),this.insertNew(c)):(c=Y(),c.replaces(a),c.firstChild.focus=function(){delete this.focus;return this},this.insertNew(c).insertAfter(c),b&&b.remove());return this};b.unwrapGramp=function(){var a=this.parent.parent,b=a.parent,c=a.next,d=a.prev;a.disown().eachChild(function(e){e.isEmpty()||(e.children().adopt(b,d,c).each(function(b){b.jQ.insertBefore(a.jQ.first())}),
d=e.lastChild)});if(!this.next)if(this.prev)this.next=this.prev.next;else for(;!this.next;)if(this.parent=this.parent.next)this.next=this.parent.firstChild;else{this.next=a.next;this.parent=b;break}this.next?this.insertBefore(this.next):this.appendTo(b);a.jQ.remove();a.prev&&a.prev.respace();a.next&&a.next.respace()};b.backspace=function(){this.upDownCache={};this.show();if(!this.deleteSelection())if(this.prev)if(this.prev.isEmpty()){if("\\le "===this.prev.ctrlSeq)var a=A["<"]("<");else"\\ge "===
this.prev.ctrlSeq&&(a=A[">"](">"));this.prev=this.prev.remove().prev;a&&this.insertNew(a)}else{if(this.prev instanceof U)return this.appendTo(this.prev.firstChild).deleteForward();this.selectLeft()}else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertAfter(this.parent.parent).backspace();if(this.next instanceof U)return this.prependTo(this.next.firstChild).backspace();this.unwrapGramp()}else this.root.triggerSpecialEvent("backspacePressed");this.prev&&this.prev.respace();
this.next&&this.next.respace();this.parent.bubble("redraw");return this};b.deleteForward=function(){this.upDownCache={};this.show();if(!this.deleteSelection())if(this.next)this.next.isEmpty()?this.next=this.next.remove().next:this.selectRight();else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertBefore(this.parent.parent).deleteForward();this.unwrapGramp()}else this.root.triggerSpecialEvent("delPressed");this.prev&&this.prev.respace();this.next&&this.next.respace();
this.parent.bubble("redraw");return this};b.selectFrom=function(a){var b=this,c=a;a:do{for(var d=this;d!==b.parent.parent;d=d.parent.parent)if(d.parent===c.parent){e=d;f=c;break a}for(d=a;d!==c.parent.parent;d=d.parent.parent)if(b.parent===d.parent){e=b;f=d;break a}b.parent.parent&&(b=b.parent.parent);c.parent.parent&&(c=c.parent.parent)}while(b.parent.parent||c.parent.parent);r("cursor and anticursor are in the same tree",e&&f);var e,f,g;if(e.next!==f){for(a=e;a;a=a.next)if(a===f.prev){g=!0;break}g||
(g=f,f=e,e=g)}this.hide().selection=$(e.prev.next||e.parent.firstChild,f.next.prev||f.parent.lastChild);this.insertAfter(f.next.prev||f.parent.lastChild);this.root.selectionChanged()};b.selectLeft=function(){this.upDownCache={};if(this.selection)if(this.selection.first===this.next)this.prev?this.hopLeft().selection.extendLeft():this.parent!==this.root&&this.insertBefore(this.parent.parent).selection.levelUp();else{this.hopLeft();if(this.selection.first===this.selection.last){this.clearSelection().show();
return}this.selection.retractLeft()}else{if(this.prev)this.hopLeft();else if(this.parent!==this.root)this.insertBefore(this.parent.parent);else return;this.hide().selection=$(this.next)}this.root.selectionChanged()};b.selectRight=function(){this.upDownCache={};if(this.selection)if(this.selection.last===this.prev)this.next?this.hopRight().selection.extendRight():this.parent!==this.root&&this.insertAfter(this.parent.parent).selection.levelUp();else{this.hopRight();if(this.selection.first===this.selection.last){this.clearSelection().show();
return}this.selection.retractRight()}else{if(this.next)this.hopRight();else if(this.parent!==this.root)this.insertAfter(this.parent.parent);else return;this.hide().selection=$(this.prev)}this.root.selectionChanged()};b.prepareMove=function(){this.upDownCache={};return this.show().clearSelection()};b.prepareEdit=function(){this.upDownCache={};return this.show().deleteSelection()};b.clearSelection=function(){this.selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged());
return this};b.deleteSelection=function(){if(!this.selection)return!1;this.prev=this.selection.first.prev;this.next=this.selection.last.next;this.selection.remove();this.root.selectionChanged();return delete this.selection}}),$=d(D,function(a,b){a.init=function(){b.init.apply(this,arguments);this.jQwrap(this.jQ)};a.jQwrap=function(a){this.jQ=a.wrapAll('<span class="selection"></span>').parent()};a.adopt=function(){this.jQ.replaceWith(this.jQ=this.jQ.children());return b.adopt.apply(this,arguments)};
a.clear=function(){this.jQ.replaceWith(this.jQ.children());return this};a.levelUp=function(){var a=this.first=this.last=this.last.parent.parent;this.clear().jQwrap(a.jQ);return this};a.extendLeft=function(){this.first=this.first.prev;this.first.jQ.prependTo(this.jQ)};a.extendRight=function(){this.last=this.last.next;this.last.jQ.appendTo(this.jQ)};a.retractRight=function(){this.first.jQ.insertBefore(this.jQ);this.first=this.first.next};a.retractLeft=function(){this.last.jQ.insertAfter(this.jQ);this.last=
this.last.prev}});a.fn.mathquill=function(d,e){switch(d){case "focus":case "blur":return this.each(function(){var b=a(this).attr(c);(b=b&&x[b])&&b.textarea&&b.textarea.children().trigger(d)});case "onKey":case "onText":return this.each(function(){var f=a(this).attr(c),g=(f=f&&x[f])&&f.cursor;g&&(g.parent.bubble(d,e,{preventDefault:b}),f.blurred&&g.hide().parent.blur())});case "redraw":return this.each(function(){var b=a(this).attr(c);(b=b&&x[b])&&function Da(a){a.eachChild(Da);a.redraw&&a.redraw()}(b)});
case "revert":return this.each(function(){var b=a(this).attr(c);(b=b&&x[b])&&b.revert&&b.revert()});case "sliderLatex":return this.each(function(){var b=a(this).attr(c);if(b=b&&x[b])(n=b&&b.cursor)&&n.clearSelection(),b.renderSliderLatex(e),b.triggerSpecialEvent("render")});case "latex":if(1<arguments.length)return this.each(function(){var b=a(this).attr(c);if(b=b&&x[b])(n=b&&b.cursor)&&n.clearSelection(),b.renderLatex(e),b.triggerSpecialEvent("render")});var f=a(this).attr(c);return(f=f&&x[f])&&
f.latex();case "text":return(f=(f=a(this).attr(c))&&x[f])&&f.text();case "html":return this.children(":last").html().replace(/ ?hasCursor|hasCursor /,"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?>.?<\/span>/i,"");case "write":if(1<arguments.length)return this.each(function(){var b=a(this).attr(c),d=(b=b&&x[b])&&b.cursor;d&&(d.writeLatex(e),b.blurred&&d.hide().parent.blur())});case "cmd":if(1<arguments.length)return this.each(function(){var b=a(this).attr(c),d=(b=
b&&x[b])&&b.cursor;if(d){if(/^\\[a-z]+$/i.test(e)){var f=d.selection;f&&(d.prev=f.first.prev,d.next=f.last.next,delete d.selection);d.insertCmd(e.slice(1),f)}else d.insertCh(e);b.blurred&&d.hide().parent.blur()}});case "touchtap":var g=arguments[1],h=arguments[2],k=arguments[3];return this.each(function(){var b=a(this).attr(c),d=(b=b&&x[b])&&b.cursor;if(d&&g!==d.handle[0]){var e=b.blurred;b.textarea.children().focus();d.seek(q(h,k,b),h,k,p(),!0);e||d.showHandle()}});case "ignoreNextMousedown":var l=
arguments[1];return this.each(function(){var b=a(this).attr(c),d=b&&x[b];d&&(d.ignoreMousedownTimeout=setTimeout(function(){d.ignoreMousedownTimeout=m},l))});case "moveStart":(f=(f=a(this).attr(c))&&x[f])&&f.cursor&&f.cursor.prependTo(f);break;case "moveEnd":(f=(f=a(this).attr(c))&&x[f])&&f.cursor&&f.cursor.appendTo(f);break;case "isAtStart":var n=(f=(f=a(this).attr(c))&&x[f])&&f.cursor;if(n)return n.parent===n.root&&!n.prev;break;case "isAtEnd":if(n=(f=(f=a(this).attr(c))&&x[f])&&f.cursor)return n.parent===
n.root&&!n.next;break;case "selection":n=(f=(f=a(this).attr(c))&&x[f])&&f.cursor;if(!n)break;return n.selection?"$"+n.selection.latex()+"$":"";case "clearSelection":return this.each(function(){var b=a(this).attr(c),d=(b=b&&x[b])&&b.cursor;d&&(d.clearSelection(),b.blurred&&d.hide().parent.blur())});default:var s="textbox"===d,u=s||"editable"===d,r=s?G:F;return this.each(function(){v(a(this),r(),s,u)})}};a(function(){a(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");a(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox");
a(".mathquill-embedded-latex").mathquill()})})();define("mathquill",function(){});
define("template!expression_item",["underscore"],function(b){return function(b){with(b||{})b="",b=renderShell?b+"\n\n<div class=\"do-not-blur expressionitem shell\">\n  <div class='shell'></div>\n</div>\n\n":b+('\n\n<div class="do-not-blur expressionitem">\n  <div class=\'fade-container\'>\n\n    <div class="fadeout-left"></div>\n  \n    <span class="main">\n      <span class="transient-mathquill"></span>\n      <span class="template-mathquill"></span>\n    </span>\n\n    <span class="fadeout"></span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n\n    <div class="template-bottom"></div>\n  </div>\n\n  <span class="tab action-drag action-icon-touch"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class="num variable-index"></span>\n    <span class="tab-interior action-icon-mouse">\n      <span class="template-expricon"></span>\n    </span>\n  </span>\n\n\n  <span class="exp-actions">\n    <span class="graphic" handleEvent="true"></span>\n    <nobr>\n      <span class="action-delete delete-btn tooltip" handleEvent="true" tooltip="'+t("Delete")+
'"><i class=\'icon-remove\'></i></span>\n      <span class="action-duplicate duplicate-btn tooltip" handleEvent="true" tooltip="'+t("Duplicate")+'"><i class=\'icon-duplicate\'></i></span>\n      <span class="action-createtable tooltip" tooltip="'+t("Convert to Table")+'" handleEvent="true">\n        <i class=\'icon-table\'></i>\n      </span>\n    </nobr>\n  </span>\n</div>\n\n');return b+"\n"}});
define("expressions/abstractitem_view",["require","pjs","jquery","lib/underscore_view","undoredo"],function(b){var g=b("pjs"),r=b("jquery"),v=b("lib/underscore_view"),q=b("undoredo");return g(v,function(b,g){b.init=function(a,b){g.init.call(this);this.model=a;this.listView=b;this.model.selected&&(this.model.renderShell=!1);this.model.observe("index.itemview",this.renderIndex.bind(this));this.model.observe("selected.itemview",this.renderSelected.bind(this));this.model.observe("renderShell.itemview",
this.rerender.bind(this));this.model.observe("folder.itemview",this.renderFolder.bind(this));this.model.observe("inCollapsedFolder.itemview",this.renderCollapsedFolder.bind(this))};b.onProjectorModeChange=function(){};b.destruct=function(){this.model.unobserve(".itemview");this.setProperty("transient",!1)};b.getTemplateParams=function(){return{renderShell:this.model.renderShell,inCollapsedFolder:this.model.inCollapsedFolder}};b.renderIndex=function(){var a=this.model.index;this.$().attr("index",a);
this.$(".variable-index").text(a+1)};b.renderFolder=function(){this.$().toggleClass("inFolder",!!this.model.folder)};b.renderCollapsedFolder=function(){this.$().toggleClass("inCollapsedFolder",!!this.model.inCollapsedFolder);this.model.inCollapsedFolder||this.$(".mathquill-rendered-math").mathquill("redraw")};b.renderSelected=function(){this.model.selected&&this.model.renderShell&&this.model.setProperty("renderShell",!1);this.$().toggleClass("selected",!!this.model.selected)};b.didInsertElement=function(){g.didInsertElement.call(this);
var a=this;this.$().on("tap tapstart",function(b){if("tap"!==b.type||"mouse"!==b.device)if("tapstart"!==b.type||"touch"!==b.device)a.onMouseSelect(b)});this.$(".action-drag").on("tapstart",this.onDragPending.bind(this));this.$(".action-delete").on("tap",this.onDelete.bind(this));this.$().attr("expr-id",this.model.id);this.renderIndex();this.renderSelected();this.renderFolder();this.renderCollapsedFolder()};b.triggerDelete=function(){};b.triggerEnterPressed=function(){};b.triggerUpPressed=function(){};
b.triggerDownPressed=function(){};b.triggerBackspacePressed=function(){};b.triggerDelPressed=function(){};b.onMouseSelect=function(){};b.sendTapToMathQuill=function(a,b){"mouse"===a.device&&a.preventDefault();if("mouse"===a.device){if(!r.contains(b[0],a.target)){var c=r.event.fix(a.originalEvent);b.triggerHandler(c)}}else c=a.originalEvent.changedTouches[0],b.mathquill("touchtap",c.target,c.clientX,c.clientY).mathquill("ignoreNextMousedown",1E3)};b.onDelete=function(){this.triggerDelete()};b.convertTo=
function(a,b){var c=a(b),f=this.model.index,e=this.model.list,g=this.model.folder;c.setProperty("list",e);q.oneTransaction(function(){e.removeItemAt(f);e.insertItemAt(f,c);g&&g.addItem(c)});return c};b.getBounds=function(){var a=this.$(),b=a.offset();if(!b)return null;b=b.top;a=a.height();return{top:b,bottom:b+a}};b.allowDragDrop=function(){return!0};b.onDragPending=function(a){r(document.activeElement).blur();if(this.allowDragDrop()){var b=this;this.mouseMovedTo=null;var c=setTimeout(function(){r(document).off(".dragpending");
b.onDragStart(a)},500);r(document).on("tapmove.dragpending",function(f){b.mouseMovedTo=f.touches[0];f=a.touches[0].x-b.mouseMovedTo.x;var e=a.touches[0].y-b.mouseMovedTo.y;3<Math.sqrt(f*f+e*e)&&(clearTimeout(c),r(document).off(".dragpending"),b.onDragStart(a))});r(document).on("tapend.dragpending",function(a){clearTimeout(c);r(document).off(".dragpending")})}};b.onDragStart=function(a){this.allowDragDrop()&&(this.listView.dragdrop_expressions.start(a,this),this.mouseMovedTo&&this.listView.dragdrop_expressions.drag(this.mouseMovedTo.x,
this.mouseMovedTo.y))};b.hideContextMenu=function(){window.opened_options_menu&&window.opened_options_menu.hideOptions()};b.processMissedKeyEvent=function(a){};b.addFocus=function(a){};b.isFocused=function(){return!1}})});
define("expressions/expression_view","require jquery pjs config ./expression_icon_view expressions/evaluation expressions/domain_view expressions/slider_view expressions/promptslider_view ./expression graphing/columnmode main/toast ./text ./table mathquill lib/keys undoredo template!expression_item expressions/abstractitem_view".split(" "),function(b){var g=b("jquery"),r=b("pjs"),v=b("config"),q=b("./expression_icon_view"),p=b("expressions/evaluation"),u=b("expressions/domain_view"),a=b("expressions/slider_view"),
m=b("expressions/promptslider_view"),c=b("./expression"),f=b("graphing/columnmode"),e=b("main/toast"),h=b("./text"),d=b("./table");b("mathquill");var k=b("lib/keys"),l=b("undoredo"),y=b("template!expression_item");b=b("expressions/abstractitem_view");return r(b,function(b,n){b.template=y;b.init=function(a,b){n.init.call(this,a,b);this.model.observe("formula.exprview",this.onFormulaChange.bind(this));this.model.observe("selected.exprview",this.onSelectedChange.bind(this));this.model.observe("latex.exprview",
this.onLatexChange.bind(this));this.model.observe("dependent.exprview",this.renderDependent.bind(this));this.model.observe("isTableable.exprview",this.renderIsTableable.bind(this));this.observe("shouldExpand",this.observeShouldExpand.bind(this));this.observe("doAnimate",this.renderDoAnimate.bind(this));this.observe("expanded",this.renderExpanded.bind(this))};b.renderIsTableable=function(){this.$(".action-createtable").toggleClass("disabled",!this.model.isTableable)};b.destruct=function(){n.destruct.call(this);
this.model.unobserve(".exprview");this.iconView&&(this.iconView.remove(),this.iconView=null);this.sliderView&&(this.sliderView.remove(),this.sliderView=null);this.promptSliderView&&(this.promptSliderView.remove(),this.promptSliderView=null);this.domainView&&(this.domainView.remove(),this.domainView=null);this.evaluationView&&(this.evaluationView.remove(),this.evaluationView=null)};b.renderExpanded=function(){this.$().toggleClass("expanded",!!this.expanded)};b.renderDoAnimate=function(){this.$().toggleClass("do-animate",
!!this.doAnimate)};b.onLatexChange=function(){if(this.sliderView&&this.sliderView.slider.transient)this.updateTransientValue();else{var a=this.model.latex;'"'===a||"'"===a?(this.convertTo(h,{selected:!0}),this.listView.getSelectedView().addFocus()):(this.listView.onLatexChange(a),this.updateMathquill())}};b.updateMathquill=function(){if(this.mathquill){var a=this.model.latex;void 0!==a&&this.mathquill.mathquill("latex")!==a&&this.mathquill.mathquill("latex",a)}};b.updateTransientValue=function(){this.$transientValue[0].innerHTML=
this.model.slider.computeSnappedValue(this.model.slider.value).toString().replace("-",'<span class="unary-operator">−</span>')};b.createIconView=function(){return q(this)};b.createSliderView=function(){return a(this.model.slider,this)};b.createPromptSliderView=function(){return m(this)};b.createDomainView=function(){return u(this.model.domain)};b.createEvaluationView=function(){return p(this)};b.onFormulaChange=function(){if(!this.model.renderShell){var a=this.model.formula,b=a.is_slidable;this.sliderView&&
!b?(this.sliderView.slider.unobserve(".expressionView"),this.sliderView.remove(),this.sliderView=null,this.$().removeClass("hasSlider")):!this.sliderView&&b&&(this.sliderView=this.createSliderView())&&(this.sliderView.appendTo(this.$(".template-bottom")),this.sliderView.setProperty("dependentLabel",this.getDependentLabel()),this.$().addClass("hasSlider"),this.sliderView.slider.observe("transient.expressionView",this.updateTransient.bind(this)));b=0<a.variables.length;this.promptSliderView&&!b?(this.promptSliderView.remove(),
this.promptSliderView=null):!this.promptSliderView&&b&&(this.promptSliderView=this.createPromptSliderView())&&this.promptSliderView.appendTo(this.$(".template-bottom"));b=a.is_parametric;this.domainView&&!b?(this.domainView.remove(),this.domainView=null,this.$().removeClass("hasDomain")):!this.domainView&&b&&(this.domainView=this.createDomainView())&&(this.domainView.appendTo(this.$(".template-bottom")),this.$().addClass("hasDomain"));b=a.is_evaluable;this.evaluationView&&!b?(this.evaluationView.remove(),
this.evaluationView=null):!this.evaluationView&&b&&(this.evaluationView=this.createEvaluationView())&&(this.evaluationView.appendTo(this.$(".template-bottom")),this.$().addClass("hasEvaluation"),this.evaluationView.setProperty("dependentLabel",this.getDependentLabel()));this.sliderView&&!this.sliderView.slider.transient&&this.model.slider.setProperty("value",a.simple_constant);this.promptSliderView&&this.promptSliderView.setProperty("variables",a.variables);this.evaluationView&&this.evaluationView.setProperty("evaluations",
a.zero_values);this.setProperty("shouldExpand",!!(this.evaluationView||this.promptSliderView||this.sliderView||this.domainView))}};b.renderDependent=function(){this.sliderView&&this.sliderView.setProperty("dependentLabel",this.getDependentLabel());this.evaluationView&&this.evaluationView.setProperty("dependentLabel",this.getDependentLabel())};b.didInsertElement=function(){n.didInsertElement.call(this);this.model.renderShell||(this.mathquill=this.$(".template-mathquill").mathquill("editable"),this.$transientLhs=
this.$(".transient-mathquill").mathquill("editable"),this.$transientLhs.hide(),this.$transientValue=g("<span>"),this.mathquill.on("render upPressed downPressed enterPressed backspacePressed delPressed keydown focusin focus",this.onMathquillEvent.bind(this)),this.$transientLhs.on("tapstart",this.onSelectTransient.bind(this)),this.mathquill.mathquill("latex",this.model.latex||""),(this.iconView=this.createIconView())&&this.iconView.replace(this.$(".template-expricon")),this.$(".action-duplicate").on("tap",
this.onDuplicateWithoutFocus.bind(this)),this.$(".action-createtable").on("tap",this.onCreateTable.bind(this)),this.renderDoAnimate(),this.renderExpanded(),this.renderIsTableable(),this.onFormulaChange())};b.onSelectedChange=function(){!this.model.selected&&this.mathquill&&this.mathquill.mathquill("clearSelection").mathquill("blur")};b.onSelectTransient=function(){this.stopTransient();this.mathquill.mathquill("focus")};b.onMathquillEvent=function(a){switch(a.type){case "render":this.model.setProperty("latex",
this.mathquill.mathquill("latex"));break;case "focus":case "focusin":this.sliderView&&this.sliderView.slider.setProperty("isPlaying",!1);this.model.setProperty("selected",!0);break;case "upPressed":this.triggerUpPressed();break;case "downPressed":this.triggerDownPressed();break;case "enterPressed":this.triggerEnterPressed();break;case "backspacePressed":if(!this.model.isEmpty())break;this.triggerBackspacePressed();break;case "delPressed":if(!this.model.isEmpty())break;this.triggerDelPressed();break;
case "keydown":k.lookup(a)===k.ESCAPE&&g(document.activeElement).blur()}};b.createSliders=function(a){for(var b=[],d=0;d<a.length;d++)b.push({latex:a[d]+"=1",sliderMin:-10,sliderMax:10,userRequestedGraphing:"never"});var e=this.model.folder,f=this.model.index+1,g=this.model.list;l.addTransaction({type:l.CAUSE_OF_CHANGE,undo:function(){for(var b=0;b<a.length;b++)g.removeItemAt(f)},redo:function(){for(var a=b.length-1;0<=a;a--){var d=c(b[a],g);b[a].id=d.id;g.insertItemAt(f,d);e&&e.addItem(d)}}});this.tempDisableAnimate()};
b.onDuplicate=function(){var a=this.onDuplicateWithoutFocus();this.listView.getItemView(a.id).addFocus()};b.onDuplicateWithoutFocus=function(){var a=this.model.index,b=this.model.getState();b.selected=!1;delete b.id;b=c(b,this.model.list);this.model.list.insertItemAt(a+1,b);return b};b.onMouseSelect=function(a){this.listView.editListMode||a.wasHandled()||(a.handle(),this.model.setProperty("selected",!0),this.sendTapToMathQuill(a,this.mathquill))};b.getDependentLabel=function(){var a=this.model.dependent;
if(!a)return"";a.match(/(.*)_(.+)/)&&(a=a.replace(/(.*)_(.+)/,"$1_{$2}"));a=g("<span>"+a+"</span>").mathquill("editable").mathquill("html");return"<span class='mathquill-rendered-math'>"+a+"</span>"};b.tempDisableAnimate=function(){var a=this;a.setProperty("doAnimate",!1);clearTimeout(a.restoreAnimationTimeout);a.restoreAnimationTimeout=setTimeout(function(){a.setProperty("doAnimate",!0)},500)};b.observeShouldExpand=function(){var a=this;clearTimeout(a.animateTimeout);this.doAnimate?a.animateTimeout=
setTimeout(function(){a.setProperty("expanded",a.shouldExpand)},500):a.setProperty("expanded",a.shouldExpand)};b.startTransient=function(){this.setProperty("transient",!0);this.updateTransientValue();this.$transientLhs.show();this.mathquill.hide();this.$transientLhs.mathquill("latex",this.model.latex.replace(/=[^=]+$/,"="));this.$transientLhs.children(".mathquill-root-block").append(this.$transientValue)};b.stopTransient=function(){this.setProperty("transient",!1);this.$transientValue.remove();this.$transientLhs.hide();
this.mathquill.show();this.updateMathquill()};b.updateTransient=function(){this.sliderView.slider.transient?this.startTransient():this.stopTransient()};b.isFocused=function(){return 0!==g(document.activeElement).closest(this.mathquill).length};b.addFocus=function(a){!v.get("no_focus")&&this.mathquill&&(this.mathquill.mathquill("focus"),"start"===a?this.mathquill.mathquill("moveStart"):"end"===a&&this.mathquill.mathquill("moveEnd"))};b.onCreateTable=function(){var a=this.model.formula;if(this.model.isTableable){var b=
a.table_info,c=this.model.index,g={selected:!0},h=f.POINTS_AND_LINES;if(a.is_point_list||"never"===this.model.userRequestedGraphing)h=f.POINTS;var k=[],n=[];if(b.values)for(a=0;a<b.values.length;a++)k.push(b.values[a][0]),n.push(b.values[a][1]);else for(a=-2;2>=a;a++)k.push(a),n.push("");g.columns=[{latex:b.independent_variable,values:k},{latex:b.dependent_column,color:this.model.color,hidden:!1,columnMode:h,values:n}];var m=this.model.list,p=this.listView;p.setProperty("editListMode",!1);l.oneTransaction(function(){b.by_reference||
(m.removeItemAt(c),c--);var a=d(g,m);m.insertItemAt(c+1,a)});e.show("Table created.",function(){p.setProperty("editListMode",!0)})}}})});
define("template!text",["underscore"],function(b){return function(b){with(b||{})b="",b=renderShell?b+"\n\n<div class=\"do-not-blur expressionitem expressiontext shell\">\n  <div class='shell'></div>\n</div>\n\n":b+('\n\n<div class="do-not-blur expressiontext expressionitem">\n  <div class=\'fade-container\'>\n\n    <span class="main">\n      <textarea class="do-blur" placeholder="'+t("enter some text...")+'"></textarea>\n      <div class="displayTextarea"></div>\n    </span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n\n  </div>\n\n  <span class="tab action-drag"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class=\'num variable-index\'></span>\n    <div class=\'tab-interior\'></div>\n    <i class=\'icon-text\'></i>\n  </span>\n\n  <span class=\'exp-actions\'>\n    <span\n      class="action-delete delete-btn tooltip"\n      handleEvent="true"\n      tooltip="'+
t("Delete")+"\"\n    >\n      <i class='icon-remove'></i>\n    </span>\n  </span>\n\n</div>\n\n");return b+""}});
define("expressions/text_view","require jquery pjs ./abstractitem_view lib/keys template!text lib/browser".split(" "),function(b){var g=b("jquery"),r=b("pjs"),v=b("./abstractitem_view"),q=b("lib/keys"),p=b("template!text"),u=b("lib/browser");return r(v,function(a,b){a.template=p;a.init=function(a,f){b.init.call(this,a,f);this.model.observe("selected.textview",this.onSelectedChange.bind(this));this.model.observe("text.textview",this.renderText.bind(this))};a.destruct=function(){this.model.unobserve(".textview")};
a.onProjectorModeChange=function(){this.fitText()};a.renderText=function(){var a=this.$("textarea")[0],b=this.$(".displayTextarea");a&&(a.value=this.model.text,b.html(this.model.markedUpText()),this.fitText(),this.$().toggleClass("empty",this.model.isEmpty()),setTimeout(this.fitText.bind(this),1))};a.didInsertElement=function(){b.didInsertElement.call(this);if(!this.model.renderShell){var a=this.$("textarea"),f=this.$(".displayTextarea");this.renderShell||(f.on("tap tapstart",function(a){"A"===a.target.tagName&&
a.handle()}.bind(this)),a.focus(function(){this.model.setProperty("selected",!0)}.bind(this)),a.bind("keydown keypress keyup change cut paste",this.onTextareaEvent.bind(this)),this.renderText())}};a.onTextareaEvent=function(a){var b=this.$("textarea")[0],e=b&&b===document.activeElement,h=e?b.value.length:0,e=e&&"keydown"===a.type?q.lookup(a):"";e===q.ENTER?(a.preventDefault(),this.triggerEnterPressed()):e===q.ESCAPE?g(document.activeElement).blur():e===q.UP?0===b.selectionStart&&0===b.selectionEnd&&
(a.preventDefault(),this.triggerUpPressed()):e===q.DOWN?b.selectionStart===h&&b.selectionEnd===h&&(a.preventDefault(),this.triggerDownPressed()):e===q.BACKSPACE?0===h&&(a.preventDefault(),this.triggerBackspacePressed()):e===q.DELETE?0===h&&(a.preventDefault(),this.triggerDelPressed()):this.model.setProperty("text",b.value)};a.onSelectedChange=function(){var a=this.$("textarea");this.model.selected||a[0]&&a[0].blur()};a.onMouseSelect=function(a){a.wasHandled()||(a.handle(),this.model.setProperty("selected",
!0))};a.fitText=function(){var a=this.$("textarea"),b=a[0];if(b){var e=0;do e++,a.attr("rows",e);while(b.clientHeight<b.scrollHeight)}};a.isFocused=function(){return 0!==g(document.activeElement).closest(this.$()).length};a.addFocus=function(a){if(!u.IS_IPAD||!u.IS_IN_IFRAME){var b=this.$("textarea")[0];b&&(b.focus(),"end"===a?b.selectionStart=b.selectionEnd=b.value.length:"start"===a&&(b.selectionStart=b.selectionEnd=0))}}})});
define("template!table_icon",["underscore"],function(b){return function(b){with(b||{});return'<span class="icon-box variable-errortooltip tipsy-sticky action-icon do-not-blur" \n      handleevent="true"\n      disablescroll="true"\n>\n  <span class="icon graph-icon variable-colorcss">\n    <i class=\'icon-hidden\'></i>\n\t</span>\n</span>'}});
define("template!table_column_menu",["underscore"],function(b){return function(b){with(b||{})b=""+("<div class='table-column-menu options-menu'>\n  <div class='triangle'></div>\n  <div class='styles-div'>\n    <div class='title'>"+t("style:")+"</div>\n    <div>\n      <span class='columnmode-option graph-icon table-points variable-colorcss' mode=\"POINTS\"></span>\n      <span class='columnmode-option graph-icon table-lines variable-colorcss' mode=\"LINES\"></span>\n      <span class='columnmode-option graph-icon table-points-and-lines variable-colorcss' mode=\"POINTS_AND_LINES\"></span>\n    </div>\n  </div>\n  <div class='colors-div'>\n    <div class='title'>"+
t("color:")+'</div>\n    <div class="template-colorsview"></div>\n  </div>\n</div>');return b}});
define("expressions/table_column_menu_view","require pjs lib/underscore_view template!table_column_menu jquery ./color_menu_view".split(" "),function(b){var g=b("pjs"),r=b("lib/underscore_view"),v=b("template!table_column_menu"),q=b("jquery"),p=b("./color_menu_view");return g(r,function(b,a){b.template=v;b.init=function(b,c){a.init.call(this);this.column=c;this.parentView=b;this.column.observe("color.columnmenuview",this.renderColorCSS.bind(this));this.column.observe("columnMode.columnmenuview",this.renderSelectedColumnMode.bind(this));
this.column.observe("shouldGraph.columnmenuview",this.renderSelectedColumnMode.bind(this))};b.destruct=function(){this.column.unobserve(".columnmenuview")};b.renderColorCSS=function(){var a=this.column.color;this.$(".variable-colorcss").css({"border-color":a,"background-color":a})};b.renderSelectedColumnMode=function(){this.$(".columnmode-option").removeClass("selected");this.column.shouldGraph&&this.$('.columnmode-option[mode="'+this.column.columnMode+'"]').addClass("selected")};b.didInsertElement=
function(){this.$().on("tap tapstart",".columnmode-option",this.onSelectColumnMode.bind(this));this.renderColorCSS();this.renderSelectedColumnMode();p(this.column).replace(this.$(".template-colorsview"))};b.onSelectColumnMode=function(a){if("tap"!==a.type||"mouse"!==a.device)if("tapstart"!==a.type||"touch"!==a.device)a=q(a.target).closest(".columnmode-option").attr("mode"),this.column.hidden||this.column.columnMode!==a?(this.column.setProperty("columnMode",a),this.column.setProperty("hidden",!1),
(a=this.column.table.folder)&&a.setProperty("hidden",!1)):this.column.setProperty("hidden",!0)}})});
define("expressions/table_icon_view","require jquery ./abstract_icon pjs template!table_icon graphing/columnmode ./table_column_menu_view".split(" "),function(b){var g=b("jquery"),r=b("./abstract_icon"),v=b("pjs"),q=b("template!table_icon"),p=b("graphing/columnmode"),u=b("./table_column_menu_view");return v(r,function(a,b){a.template=q;a.init=function(a){b.init.call(this,a);this.column=this.model;this.listView=a.tableView.listView;this.column.observe("color.iconview",this.renderColorCSS.bind(this));
this.column.observe("error.iconview",this.onDisplayChange.bind(this));this.column.observe("columnMode.iconview",this.onDisplayChange.bind(this));this.column.observe("shouldGraph.iconview",this.onDisplayChange.bind(this))};a.destruct=function(){b.destruct.call(this);this.column.unobserve(".iconview")};a.renderErrorShown=function(){this.$(".icon").toggleClass("error",!!this.errorShown);this.$().closest(".cell").toggleClass("error",!!this.errorShown)};a.renderColorCSS=function(){this.$(".variable-colorcss").css("border-color",
this.column.color);this.$(".variable-colorcss").css("background",this.column.color)};a.toggleGraphShown=function(){this.column.isGraphable&&(this.errorShown||(this.model.table.folder&&this.model.table.folder.hidden?this.model.table.folder.setProperty("hidden",!1):this.column.setProperty("hidden",!this.column.hidden)))};a.didInsertElement=function(){b.didInsertElement.call(this);var a=this;this.$(".action-icon").on("tap",function(b){b.wasHandled("dragdrop")||b.wasLongheld()||(a.optionsShown?a.hideOptions():
a.listView.editListMode?a.toggleOptions():a.toggleGraphShown())});this.$(".action-icon").on("longhold",function(b){a.optionsShown||a.toggleOptions()});this.$(".action-icon").on("tapstart",function(b){a.optionsShown||1!==b.touches.length||(g(document).on("tapend.dragdrop tapcancel.dragdrop",function(){g(document).off(".dragdrop")}),g(document).on("tapmove.dragdrop",function(e){g(document).off(".dragdrop");1!==e.touches.length||e.wasLongheld()||a.listView.dragdrop_columns.start(b,a.parentView)}))});
this.renderColorCSS();this.onDisplayChange();this.$icon=this.$(".icon")};a.createOptionsMenuView=function(){var a=u(this,this.column);a.appendTo("#main");var b=this.$(".icon-box").offset();a.$().css({position:"absolute",top:b.top+"px",left:b.left+"px",display:"block"});return a};a.onDisplayChange=function(){b.onDisplayChange.call(this);if(this.$icon){var a=this.column.shouldGraph,f=this.column.columnMode,e=this.column.isGraphable,g="";this.error||!e?g="":a?f===p.POINTS?g="table-points":f===p.LINES?
g="table-lines":f===p.POINTS_AND_LINES&&(g="table-points-and-lines"):g="graph-hidden";this.rendered_icon_class!==g&&(this.rendered_icon_class&&this.$icon.removeClass(this.rendered_icon_class),(this.rendered_icon_class=g)&&this.$icon.addClass(g))}}})});
define("template!table",["underscore"],function(b){return function(g){var r="",v=function(){r+=Array.prototype.join.call(arguments,"")};with(g||{})r+="",renderShell?r+="\n\n<div class=\"expressionitem expressiontable shell\">\n  <div class='shell'></div>\n</div>\n\n":(r+='\n\n<div class="expressionitem expressiontable">\n    \n  <div class=\'fade-container disable-horizontal-scroll-to-cursor\'>\n    \n    <span class="main">\n      <div class="tabledata">\n           \n        ',b.each(columns,function(g,
p){r+='\n          <div class="column">\n             \n            ';v(templates.table_cell_header());b.each(columns[0].cells,function(b,a){v(templates.table_cell_body())});r+="\n        \n          </div>\n        "}),r+="\n\n      </div>\n    </span>\n    \n    ",r+='\n    <span class="fadeout"></span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n  </div>\n  \n  <span class="tab action-drag"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class=\'num variable-index\'></span>\n    <div class=\'tab-interior\'></div>\n  </span>\n\n  <span class=\'exp-actions\'>\n\n    <span\n      class="action-delete delete-btn tooltip"\n      handleEvent="true"\n      tooltip="'+
t("Delete")+"\"\n    >\n      <i class='icon-remove'></i></span>\n    </span>  \n</div>\n\n"),r+="\n";return r}});define("template!table_cell_body",["underscore"],function(b){return function(b){with(b||{});return'<div class="non-editable empty cell">\n  <div class="inner-border"></div>\n  <span class="error-indicator do-not-blur tipsy-sticky" handleevent="true">\n  </span>\n\n  <span class=\'mathquill-rendered-math\'></span>\n  <div class="empty-line"></div>\n</div>\n'}});
define("template!table_cell_header",["underscore"],function(b){return function(b){with(b||{});return'<div class="editable cell header">\n  <div class="inner-border"></div>\n  <span class="template-icon"></span>\n  <span class="mathquill-rendered-math"></span>\n  <span class="fadeout"></span>\n  <span class="action-removecolumn icon-remove do-not-blur" handleevent="true"></span>\n  <div class="empty-line"></div>\n</div>\n'}});
define("expressions/table_view","require jquery underscore pjs lib/underscore_view undoredo mathquill lib/keys ./abstractitem_view ./table_icon_view template!table template!table_cell_body template!table_cell_header".split(" "),function(b){var g=b("jquery"),r=b("underscore"),v=b("pjs"),q=b("lib/underscore_view"),p=b("undoredo");b("mathquill");var u=b("lib/keys"),a=b("./abstractitem_view"),m=b("./table_icon_view"),c={};c.table=b("template!table");c.table_cell_body=b("template!table_cell_body");c.table_cell_header=
b("template!table_cell_header");b=v(a,function(a,b){a.template=c.table;a.init=function(a,c){b.init.call(this,a,c);this.model.triggerRowRemoved=this.onRowRemoved.bind(this);this.model.triggerRowAdded=this.onRowAdded.bind(this);this.model.triggerColumnAdded=this.onColumnAdded.bind(this);this.model.triggerColumnRemoved=this.onColumnRemoved.bind(this);this.model.triggerColumnMoved=this.onColumnMoved.bind(this);this.model.observe("selectedCell.tableview",this.onSelectedCellChange.bind(this))};a.destruct=
function(){this.model.unobserve(".tableview")};a.getTemplateParams=function(){return{columns:this.model.columns,renderShell:this.model.renderShell,templates:c}};a.onRowRemoved=function(a){if(this.columnViews){a+=1;for(var b=0;b<this.columnViews.length;b++)this.columnViews[b].splice(a,1)[0].remove();this.model.notifyPropertyChange("selectedCell")}};a.onRowAdded=function(a){if(this.columnViews){for(var b=a+1,c,e=this.model.columns,f=this.columnViews.length,g=this.$(".column"),h=0;h<f;h++)c=e[h].cells[a],
c=d(c,this),c.insertAfter(g.eq(h).find(".cell:nth-of-type("+b+")")),this.columnViews[h].splice(b,0,c);this.syncRowHeight(b);this.listView.model.updateDrawOrder();this.model.notifyPropertyChange("selectedCell")}};a.onColumnRemoved=function(a){if(this.columnViews){for(var b=this.columnViews.splice(a,1)[0],c=0;c<b.length;c++)b[c].remove();this.$(".column:nth-child("+(a+1)+")").remove();(b=this.selectedCell)&&b.column>a?this.setProperty("selectedCell",{row:b.row,column:b.column-1}):b&&b.column===a&&(this.columns.length<=
a?this.selectCell(b.row,b.column-1):this.selectCell(b.row,b.column));this.syncAllRowHeights();this.listView.model.updateDrawOrder();this.model.notifyPropertyChange("selectedCell")}};a.onColumnAdded=function(a){if(this.columnViews){var b=this.model.columns[a],c=b.cells,f=[];f.push(e(b,this));for(b=0;b<c.length-1;b++)f.push(d(c[b],this));f.push(h(c[b],this));this.columnViews.splice(a,0,f);var k=g('<div class="column"></div>').insertAfter(this.$(".column:nth-child("+a+")"));f.forEach(function(a,b){a.appendTo(k)});
this.syncAllRowHeights();this.listView.model.updateDrawOrder();this.model.notifyPropertyChange("selectedCell")}};a.onColumnMoved=function(a,b){if(this.columnViews){var c=this.columnViews.splice(a,1)[0];this.columnViews.splice(b,0,c);this.$(".column:nth-child("+(a+1)+")").detach().insertAfter(this.$(".column:nth-child("+b+")"))}};a.onProjectorModeChange=function(){for(var a=0;a<this.columnViews.length;a++)for(var b=this.columnViews[a],c=0;c<b.length;c++)b[c].collapseHeight();this.syncAllRowHeights()};
a.didInsertElement=function(){b.didInsertElement.call(this);if(!this.model.renderShell){var a=this;this.$().on("focusin",function(){setTimeout(a.onFocusChange.bind(a),0)});this.$().on("keydown",this.onMathQuillKeydownEvent.bind(this));this.$().on("upPressed downPressed leftPressed rightPressed enterPressed backspacePressed delPressed",this.onMathQuillSpecialEvent.bind(this));this.columnViews=[];var c=this.model.columns,g=c.length,k=c[0].cells.length,m,p,q;for(p=0;p<g;p++)q=c[p],q=p+1<g?e(q,this):
f(q,this),q.setDomNode(this.findCell(0,p)),this.columnViews[p]=[q];for(m=1;m<=k;m++)for(p=0;p<g;p++)q=c[p].cells[m-1],q=m===k?h(q,this):d(q,this),q.setDomNode(this.findCell(m,p)),this.columnViews[p].push(q);this.syncAllRowHeights();this.onSelectedCellChange()}};a.measureRowHeight=function(a){for(var b=0,c=0;c<this.columnViews.length;c++){var d=this.columnViews[c][a];void 0===d.collapsedHeight&&d.measureHeight();d.collapsedHeight>b&&(b=d.collapsedHeight)}return b};a.setRowHeight=function(a,b){for(var c=
0;c<this.columnViews.length;c++){var d=this.columnViews[c][a];d.setHeight(b);d.setMathquillTop()}};a.syncAllRowHeights=function(){var a,b=this.columnViews[0].length,c=[];for(a=0;a<b;a++)c.push(this.measureRowHeight(a));for(a=0;a<b;a++)this.setRowHeight(a,c[a])};a.syncRowHeight=function(a){this.setRowHeight(a,this.measureRowHeight(a))};a.onSelectedCellChange=function(){if(this.columnViews){this.$(".tabledata .selected").removeClass("selected");var a=this.model.selectedCell;if(a&&(a.column>=this.columnViews.length||
a.row>=this.columnViews[0].length))this.model.selectedCell=null;else{a&&(this.columnViews[a.column][a.row].$().addClass("selected"),this.model.setProperty("selected",!0));var b=this.getCaretPosition();b&&!r.isEqual(b,a)&&document.activeElement&&document.activeElement.blur();if(a)b=this.findCellInput(a.row,a.column)[0],this.listView.onFocusIn({target:b});else this.listView.onFocusOut();b=a&&a.column+1===this.model.columns.length;a=a&&a.row===this.model.columns[0].cells.length;this.$().toggleClass("no-faded-h",
!!b);this.$().toggleClass("no-faded-v",!!a);this.hideContextMenu()}}};a.onMouseSelect=function(a){if(!a.wasHandled()){a.handle();var b=g(a.originalEvent.target).closest(".cell").find(".mathquill-editable");if(b.length)this.sendTapToMathQuill(a,b);else{var b=g(a.target),c=b.closest(".tabledata")[0];c&&a.target===c&&(c=null);c?(a=this.getNodesCellPosition(b),this.selectCell(a.row,a.column)):(document.activeElement&&document.activeElement.blur(),this.model.setProperty("selectedCell",null),this.model.setProperty("selected",
!0))}}};a.getNodesCellPosition=function(a){var b=a.closest(".column").prevAll(".column").length;return{row:a.closest(".cell").prevAll(".cell").length,column:b}};a.getCaretPosition=function(){return this.$().find(document.activeElement).length?this.getNodesCellPosition(g(document.activeElement)):null};a.findCell=function(a,b){return this.$(".column:nth-child("+(b+1)+") .cell:nth-child("+(a+1)+")")};a.findCellInput=function(a,b){return this.findCell(a,b).find(".mathquill-rendered-math")};a.selectCell=
function(a,b,c){if(!(0>a||0>b)){var d=this.findCellInput(a,b);d.length&&(this.model.setProperty("selectedCell",{row:a,column:b}),d.hasClass("mathquill-editable")?(d.mathquill("focus"),c?d.mathquill("moveEnd"):d.triggerHandler("select_all")):g(document.activeElement).blur())}};a.unfocus=function(){var a=document.activeElement;this.$().find(a).length&&a.blur()};a.processMissedKeyEvent=function(a){this.doKeyAction(u.lookup(a),a)};a.onMathQuillKeydownEvent=function(a){var b=u.lookup(a);b!==u.Tab&&b!==
u.ESCAPE||this.doKeyAction(b,a)};a.onMathQuillSpecialEvent=function(a){var b=a.type.slice(0,-7),b=b.charAt(0).toUpperCase()+b.slice(1);this.doKeyAction(b,a)};a.doKeyAction=function(a,b){b||(b=g.Event());var c=this.model.selectedCell,d=c?c.row:-1,e=c?c.column:-1,c=this.model.columns,f=c[0].cells.length,h=c.length,c=function(a,c){-1===a?this.triggerUpPressed():a>f?this.triggerDownPressed():(-1===c?(c=h-1,a--):c===h&&(a++,c=0),this.selectCell(a,c),b.preventDefault())}.bind(this),k=function(a){1>=f||
(this.model.removeRow(d-1),this.selectCell(a,e),b.preventDefault())}.bind(this),l=function(a){0===e||2>=h||(this.model.removeColumn(e),this.selectCell(d,a),b.preventDefault())}.bind(this);switch(a){case u.LEFT:c(d,e-1);break;case u.RIGHT:c(d,e+1);break;case u.UP:c(d-1,e);break;case u.DOWN:c(d+1,e);break;case u.ENTER:d<f?(this.model.insertRow(d,this.model.getAutofillValues(d)),this.selectCell(d+1,e)):(this.model.insertRow(d-1,this.model.getAutofillValues(d-1)),this.selectCell(d,e));break;case u.ESCAPE:g(document.activeElement).blur();
this.model.setProperty("selectedCell",null);break;case u.TAB:if(0===g(document.activeElement).closest(this.$()).length){b.preventDefault();break}break;case u.BACKSPACE:0===d?0===e?(this.triggerBackspacePressed(),p.triggerFlash()):e===h-1||1===e&&3===h?c(0,e-1):l(e-1):0!==e?c(d,e-1):d===f?c(d-1,e):k(d-1);break;case u.DELETE:0===d?0===e?(this.triggerDelPressed(),p.triggerFlash()):e<h-1&&l(e):d>=f||k(d)}};a.onFocusChange=function(){this.model&&this.model.setProperty("selectedCell",this.getCaretPosition())};
a.isFocused=function(){return!!this.model.selectedCell};a.addFocus=function(a,b,c){"cell"===a?this.selectCell(b,c):"end"!==a?this.selectCell(0,0):this.selectCell(this.model.columns[0].cells.length,0)}});var q=v(q,function(a,b){a.init=function(){b.init.call(this);this.renderedHeight=this.collapsedHeight=void 0;this.mathquillTop=0};a.lookupCellPosition=function(){};a.handleHeightUpdate=function(){this.collapseHeight();this.tableView.syncRowHeight(this.lookupCellPosition().row)};a.collapseHeight=function(){this.$().css("height",
"");this.renderedHeight=this.collapsedHeight=void 0};a.measureHeight=function(){this.renderedHeight=this.collapsedHeight=this.$().outerHeight()};a.setHeight=function(a){this.renderedHeight!==a&&(this.renderedHeight=a,this.$().css("height",a))};a.setMathquillTop=function(){var a=this.renderedHeight-this.collapsedHeight;a!==this.mathquillTop&&(this.mathquillTop=a,this.$(".mathquill-rendered-math").css("top",a))}}),f=v(q,function(a,b){a.template=c.table_cell_header;a.init=function(a,c){b.init.call(this);
this.model=a;this.tableView=c};a.lookupCellPosition=function(){return{row:0,column:this.model.index}};a.didInsertElement=function(){b.didInsertElement.call(this);this.$().addClass("right");this.$().append('<span class="fade-right"></span>');this.$mathquill=this.$(".mathquill-rendered-math").mathquill("editable");var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")});this.$().on("render",".mathquill-rendered-math",function(){var b=g(this).mathquill("latex");
if(b){g(this).mathquill("latex","");var c=a.model.index;a.model.table.insertColumn(c,{latex:b});a.tableView.selectCell(0,c,!0)}})}}),e=v(q,function(a,b){a.template=c.table_cell_header;a.init=function(a,c){b.init.call(this);this.__renderedLatex="";this.__renderedBefore=!1;this.model=a;this.tableView=c;this.model.observe("index.headerview",this.updateIndex.bind(this));this.model.observe("latex.headerview",this.onLatexChange.bind(this));this.model.observe("selected.headerview",this.onSelectedChange.bind(this))};
a.onSelectedChange=function(){if(this.model.selected){var a=this.tableView;a&&a.selectCell(0,this.model.index)}};a.lookupCellPosition=function(){return{row:0,column:this.model.index}};a.destruct=function(){this.model.unobserve(".headerview")};a.updateIndex=function(){this.$().attr("index",this.model.index)};a.onLatexChange=function(){this.$mathquill&&(this.__renderedLatex!==this.model.latex&&(this.__renderedLatex=this.model.latex,this.$mathquill.mathquill("latex",this.model.latex)),this.__renderedBefore&&
this.handleHeightUpdate(),this.__renderedBefore=!0)};a.didInsertElement=function(){b.didInsertElement.call(this);0===this.model.index&&this.$().addClass("left");this.$mathquill=this.$(".mathquill-rendered-math").mathquill("editable");var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")});this.$().on("tap",".action-removecolumn",function(){a.model.table.removeColumn(a.model.index)});this.$().on("render",".mathquill-rendered-math",function(){var b=
a.model.latex,c=g(this).mathquill("latex");b!==c&&(a.__renderedLatex=c,a.model.setProperty("latex",c))});this.iconView=m(this);this.iconView.replace(this.$(".template-icon"));this.onLatexChange();this.updateIndex()}}),q=v(q,function(a,b){a.template=c.table_cell_body;a.init=function(a,c){b.init.call(this);this.model=a;this.tableView=c;this.__renderedDisabled=!0;this.__renderedError=this.__renderedValue="";this.__renderedBefore=!1};a.didInsertElement=function(){b.didInsertElement.call(this);this.model.column===
r.first(this.model.column.table.columns)&&this.$().addClass("left");this.model.column===r.last(this.model.column.table.columns)&&(this.$().addClass("right"),this.$().append('<span class="fade-right"></span>'));this.model===r.last(this.model.column.cells)&&(this.$().addClass("bottom"),this.$().append('<span class="fade-bottom"></span>'))};a.lookupCellPosition=function(){return{row:r.indexOf(this.model.column.cells,this.model)+1,column:this.model.column.index}};a.onValueChange=function(){var a=this.model.getOldProperty("value"),
b=this.model.value;this.$().toggleClass("empty",!b);this.$mathquill&&(this.__renderedValue!==b&&(this.__renderedValue=b,this.__renderedDisabled?this.$mathquill.text(b):this.$mathquill.mathquill("latex",b)),a=(!a||isFinite(a))&&(!b||isFinite(b)),this.__renderedBefore&&!a&&this.handleHeightUpdate(),this.__renderedBefore=!0)};a.onDisabledChange=function(){var a=!!this.model.column.disabled;this.$mathquill&&this.__renderedDisabled!==a&&(this.__renderedDisabled=a,this.$().toggleClass("non-editable",!!a),
a?(a=g('<span class="mathquill-rendered-math">'+this.model.value+"</span>"),this.$mathquill.replaceWith(a),this.$mathquill=a,this.mathquillTop=0):this.$mathquill.mathquill("editable"))};a.onErrorChange=function(){var a=this.model.error?this.model.error:"";this.$error&&this.__renderedError!==a&&(this.__renderedError=a,this.$error.attr("tooltip",a),this.$().toggleClass("error",!!a))}}),h=v(q,function(a,b){a.init=function(a,c){b.init.call(this,a,c);this.model.column.observe("disabled.cellview",this.onDisabledChange.bind(this))};
a.destruct=function(){this.model.column.unobserve(".cellview")};a.didInsertElement=function(){b.didInsertElement.call(this);this.$mathquill=this.$(".mathquill-rendered-math");this.onDisabledChange();var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")});this.$().on("render",".mathquill-rendered-math",function(){var b=g(this).mathquill("latex");if(""!==b){g(this).mathquill("latex","");for(var c=a.lookupCellPosition(),d=a.model.column.table,
e=[],f=0;f<d.columns.length;f++)e[f]="";e[c.column]=b;d.insertRow(c.row-1,e);a.tableView.selectCell(c.row,c.column,!0)}})}}),d=v(q,function(a,b){a.template=c.table_cell_body;a.init=function(a,c){b.init.call(this,a,c);this.model.observe("value.cellview",this.onValueChange.bind(this));this.model.observe("error.cellview",this.onErrorChange.bind(this));this.model.column.observe("disabled."+this.guid,this.onDisabledChange.bind(this))};a.destruct=function(){this.model.unobserve(".cellview");this.model.column.unobserve("disabled."+
this.guid)};a.didInsertElement=function(){b.didInsertElement.call(this);this.$error=this.$(".error-indicator");this.$mathquill=this.$(".mathquill-rendered-math");this.onDisabledChange();this.onValueChange();this.onErrorChange();var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")});this.$().on("render",".mathquill-rendered-math",function(){function b(){return h.getItemById(e).columns[f.column].cells[f.row-1]}var c=a.model.value,d=g(this).mathquill("latex");
if(c!==d){a.__renderedValue=d;var e=a.model.column.table.id,f=a.lookupCellPosition(),h=a.tableView.listView.model;p.addTransaction({type:p.CAUSE_OF_CHANGE,undo:function(){var a=b();a.setProperty("value",c);a.column.table.requestParse()},redo:function(){var a=b();a.setProperty("value",d);a.column.table.requestParse()}})}})}});return b});
define("template!folder",["underscore"],function(b){return function(b){with(b||{})b="",b=renderShell?b+'\n\n<div class="do-not-blur expressionitem expressionfolder shell">\n  <div class="shell"></div>\n</div>\n\n':b+('\n\n<div class="do-not-blur expressionfolder expressionitem">\n  <div class="fade-container">\n\n    <span class="main">\n      <div class=\'caret-container action-toggle-folder-collapsed do-not-blur\' handleEvent="true">\n        <i class="icon-caret-down" ></i>\n      </div>\n      <textarea class="do-blur title" placeholder="'+
t("untitled folder...")+'"></textarea>\n    </span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n\n  </div>\n\n  <span class="tab action-drag"\n        handleEvent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class="num variable-index"></span>\n    <div class="tab-interior">\n    <span class="action-toggle-folder-hidden graph-icon folder icon">\n      <i class="icon-hidden"></i>\n      <i class="icon-folder"></i>\n    </span>\n    </div>\n  </span>\n\n  <span class="exp-actions">\n    <span\n      class="action-delete delete-btn tooltip"\n      handleEvent="true"\n      tooltip="'+
t("Delete")+"\"\n    >\n      <i class='icon-remove'></i></span>\n    </span>\n  </span>\n\n</div>\n\n");return b+"\n"}});
define("expressions/folder_view","require pjs jquery lib/keys expressions/abstractitem_view template!folder lib/browser".split(" "),function(b){var g=b("pjs"),r=b("jquery"),v=b("lib/keys"),q=b("expressions/abstractitem_view"),p=b("template!folder"),u=b("lib/browser");return g(q,function(a,b){a.template=p;a.init=function(a,f){b.init.call(this,a,f);this.model=a;a.observe("hidden.folderView",this.onHiddenChanged.bind(this));a.observe("collapsed.folderView",this.onCollapsedChanged.bind(this));a.observe("title.folderView",
this.renderTitle.bind(this));a.observe("selected.folderView",this.onSelectedChange.bind(this));a.observe("count.folderView",this.onMemberIdsChange.bind(this))};a.destruct=function(){this.model.unobserve(".folderView")};a.didInsertElement=function(){b.didInsertElement.call(this);this.model.renderShell||(this.$title=this.$(".title"),this.$(".action-toggle-folder-collapsed").on("tap",this.toggleCollapsed.bind(this)),this.$(".action-toggle-folder-hidden").on("tap",this.toggleHidden.bind(this)),this.$title.bind("keydown keypress keyup change cut paste",
this.onTitleEvent.bind(this)),this.renderTitle(),this.onCollapsedChanged(),this.onHiddenChanged(),this.onMemberIdsChange())};a.onSelectedChange=function(){!this.selected&&this.$title&&this.$title.blur()};a.onMemberIdsChange=function(){this.$().toggleClass("has-items",0<this.model.count)};a.onTitleEvent=function(a){var b=this.$title[0],e=b&&b===document.activeElement,g=e?b.value.length:0,e=e&&"keydown"===a.type?v.lookup(a):"";e===v.ENTER?(a.preventDefault(),this.triggerEnterPressed()):e===v.ESCAPE?
r(document.activeElement).blur():e===v.UP?0===b.selectionStart&&0===b.selectionEnd&&(a.preventDefault(),this.triggerUpPressed()):e===v.DOWN?b.selectionStart===g&&b.selectionEnd===g&&(a.preventDefault(),this.triggerDownPressed()):e===v.BACKSPACE?0===g&&(a.preventDefault(),this.triggerBackspacePressed()):e===v.DELETE?0===g&&(a.preventDefault(),this.triggerDelPressed()):this.model.setProperty("title",b.value)};a.renderTitle=function(){this.$title.attr("value",this.model.title);this.fitText()};a.onProjectorModeChange=
function(){this.fitText()};a.fitText=function(){if(this.$title){var a=this.$title[0],b=0;do b++,this.$title.attr("rows",b);while(a.clientHeight<a.scrollHeight)}};a.onMouseSelect=function(a){a.wasHandled()||(a.handle(),this.model.setProperty("selected",!0))};a.toggleHidden=function(){this.model.setProperty("hidden",!this.model.hidden)};a.toggleCollapsed=function(){this.model.setProperty("collapsed",!this.model.collapsed)};a.onHiddenChanged=function(){this.$().toggleClass("hidden",!!this.model.hidden)};
a.onCollapsedChanged=function(){this.$().toggleClass("collapsed",!!this.model.collapsed)};a.addFocus=function(a){if((!u.IS_IPAD||!u.IS_IN_IFRAME)&&this.$title){var b=this.$title[0];b.focus();"end"===a?b.selectionStart=b.selectionEnd=b.value.length:"start"===a&&(b.selectionStart=b.selectionEnd=0)}}})});
define("template!list",["underscore"],function(b){return function(b){with(b||{})b='<div id="exppanel-outer">\n  <div id="expression-top-bar">\n  \n    ',IS_TABLET&&(b+="\n      <a class='hamburger-btn action-hamburger'><i class='icon-hamburger'></i></a>\n    "),b+='\n    <a class=\'add-expression-btn action-add-expression tooltip do-not-blur\' handleEvent="true" tooltip="'+t("Add Item")+"\"><i class='icon-plus'></i><i class='icon-caret-down'></i></a>\n    \n    <a class='btn-danger action-clearall'>delete all</a>\n    <span class='center-aligned'>\n      <a class='action-undo tooltip' tooltip=\""+
t("Undo (ctrl+z)")+"\"><i class='icon-undo'></i></a>\n      <a class='action-redo tooltip' tooltip=\""+t("Redo (ctrl+y)")+"\"><i class='icon-redo'></i></a>\n    </span>    \n\n    <a class='resize-list-btn action-hideexpressions do-not-blur tooltip' tooltip=\""+t("Hide List")+"\" handleEvent=\"true\"><i class='icon-hide'></i></a>\n    \n    <a \n      class='edit-list-btn action-toggleeditlistmode do-not-blur tooltip' tooltip=\""+t("Edit List")+'"\n      handleEvent="true">\n      <i class=\'icon-settings\' /></a>\n  \n  </div>\n  \n  <div class="exppanel-container">\n    <div id="exppanel" class="disable-horizontal-scroll-to-cursor">\n      <div class="expressionlist">\n        <span class="template-expressioneach"></span>\n        <div class="template-newexpression"></div>\n      </div>\n    </div>    \n  </div>\n  \n  <div id=\'show-expressions-tab\'>\n    <a class=\'resize-list-btn action-showexpressions\'>\n      <i class=\'icon-show\'></i>\n    </a>\n  </div>\n</div>\n';
return b}});
define("expressions/list_view_desktop","require pjs ./list_view tipsy ./expression_view ./text_view ./table_view ./folder_view lib/keys template!list".split(" "),function(b){var g=b("pjs"),r=b("./list_view");b("tipsy");var v=b("./expression_view"),q=b("./text_view"),p=b("./table_view"),u=b("./folder_view"),a=b("lib/keys"),m=b("template!list");return g(r,function(b,f){b.template=m;b.instantiateItemView=function(a){if(a.isExpression)return v(a,this);if(a.isText)return q(a,this);if(a.isTable)return p(a,this);
if(a.isFolder)return u(a,this)};b.didInsertElement=function(){f.didInsertElement.call(this);this.$().tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".tooltip"})};b.handleKeydown=function(b){"body"===b.target.localName&&a.lookup(b)===a.SPACEBAR&&this.toggleAllSliders()}})});define("main/parse_json_errors",["require","jquery"],function(b){var g=b("jquery");return function(b){try{return g.parseJSON(b.responseText).errors}catch(v){return[{message:"Internal Server Error."}]}}});
(function(b){b.extend(b,{placeholder:{browser_supported:function(){return void 0!==this._supported?this._supported:this._supported=!!("placeholder"in b('<input type="text">')[0])},shim:function(g){var r={color:"#888",cls:"placeholder",selector:"input[placeholder], textarea[placeholder]"};b.extend(r,g);this.browser_supported()||b(r.selector)._placeholder_shim(r)}}});b.extend(b.fn,{_placeholder_shim:function(g){function r(g){var q=b(g).offsetParent().offset(),p=b(g).offset();return{top:p.top-q.top,
left:p.left-q.left,width:b(g).width()}}return this.each(function(){var v=b(this);if(v.data("placeholder"))return v.data("placeholder").css(r(v)),!0;var q={};v.is("textarea")||"auto"==v.css("height")||(q={lineHeight:v.css("height"),whiteSpace:"nowrap"});var p=b("<label />").text(v.attr("placeholder")).addClass(g.cls).css(b.extend({position:"absolute",display:"inline",float:"none",overflow:"hidden",textAlign:"left",color:g.color,cursor:"text",paddingTop:v.css("padding-top"),paddingLeft:v.css("padding-left"),
paddingRight:v.css("padding-right"),paddingBottom:v.css("padding-bottom"),fontSize:v.css("font-size"),fontFamily:v.css("font-family"),fontStyle:v.css("font-style"),fontWeight:v.css("font-weight"),textTransform:v.css("text-transform"),backgroundColor:"transparent",zIndex:99},q)).css(r(this)).attr("for",this.id).data("target",v).click(function(){b(this).data("target").focus()}).insertBefore(this);v.data("placeholder",p).focus(function(){p.hide()}).blur(function(){p[v.val().length?"hide":"show"]()}).triggerHandler("blur");
b(window).resize(function(){var b=p.data("target");p.css(r(b))})})}})})(jQuery);jQuery(document).add(window).bind("ready load",function(){jQuery.placeholder&&jQuery.placeholder.shim()});define("vendor/jquery.html5-placeholder-shim",function(){});
define("template!unsupported_browser",["underscore"],function(b){return function(b){with(b||{})b=""+('<div id="unsupported-browser" class="modal_section">\n  <div style=\'color:black; font-size:150%;\'>'+t("Small Screen Warning!")+"</div>\n  <div style='padding:20px 0px; color:#666'>\n      "+t("Desmos works best on a tablet or a computer, but feel free to try it on your phone anyhow.")+"\n      "+t("Let us know how it works at calculator@desmos.com.")+"<br><br>\n      "+t("Stay tuned for an app for your phone...")+
"\n\n          \n          <div style=\"text-align: center; margin-top: 25px; margin-bottom:-16px\">\n              <a class='btn action-hide do-not-blur'>"+t("Try the calculator!")+"</a>\n          </div>\n  </div>\n</div>\n");return b}});
define("template!login_dialog",["underscore"],function(b){return function(g){var r="";with(g||{})r+='<div id="login-dialog" class="modal_section">\n  <h1>\n    '+t("Sign In")+"\n  </h1>\n  \n  ",b.each(errors,function(b){r+='\n  <div class="errors">\n      <span>'+b.message+"</span>\n  </div>\n  "}),r+='\n  \n  <form class="desmos-login action-submit">\n    <div class="form_content_interior">\n      <label for="email">\n        <span>'+t("Email:")+'</span>\n        <input type="email"\n          name="email"\n          class="input"\n          autofocus="autofocus"\n          required="required"\n          id="top_email"\n        />\n      </label>\n  \n      <label>\n        <span>'+
t("Password:")+'</span>\n        <input type="password"\n          name="password"\n          class="input"\n          required="required"\n          id="top_password"\n        />\n      </label>\n  \n      <span style="float: left; margin-top: 10px; margin-bottom: 10px">\n        <a class="action-recoverpassword">'+t("Forgot your password?")+"</a>\n        <div style='height:10px'></div>\n        <a class=\"action-createaccount\">"+t("Don't have an account?")+'</a>\n      </span>\n  \n      <div style="float:right; margin-right: 30px">\n        ',
r=spinning?r+'\n          <div class="progress_indicator progress"></div>\n        ':r+('\n          <button type="submit" class="btn-green">'+t("Sign In!")+"</button> \n        "),r+="\n      </div>\n  \n    </div>\n  </form>\n</div>\n";return r}});
define("template!create_account_dialog",["underscore"],function(b){return function(g){var r="";with(g||{})r+='<div id="create-account-dialog" class="modal_section ',saveNext&&(r+=" save-first"),r+='">\n  <h1>\n    ',r=saveNext?r+("\n      "+t("Create an account to save your work!")+"\n    "):r+("\n      "+t("Create an account")+"\n    "),r+="\n  </h1>\n  ",saveNext&&(r+='\n    <h4 style="margin-bottom: 30px">'+t("Already have an account?")+' <span class="action-login-then-save">'+t("Sign in")+"</span></h4>\n  "),
r+="<div class='bg-line'><span>\n      "+t("Use your email address")+"\n    </span></div>\n  \n  ",b.each(errors,function(b){r+='\n  <div class="errors">\n      <span>'+b.message+"</span>\n  </div>\n  "}),r+='\n  \n  <form class="action-submit">\n    <label>\n      <span>Name:</span>\n      <input type="text"\n        name="name"\n        class="input"\n        required="required"\n        autofocus="autofocus"\n      />\n    </label>\n  \n    <div class="description">\n      '+t("This is the name we'll use if we feature one of your graphs")+
"\n    </div>\n  \n    <label>\n      <span>"+t("Email:")+'</span>\n      <input type="email"\n        name="email"\n        class="input"\n        required="required"\n      />\n    </label>\n  \n    <div class="description">\n      '+t("We'll never share or sell your email address!")+"\n    </div>\n  \n    <label>\n      <span>"+t("Password:")+'</span>\n      <input type="password"\n        class="input"\n        name="password"\n        required="required"\n      />\n    </label>\n  \n    <span style="float: left; margin-top: 10px; margin-bottom: 10px">\n      <a class="action-login">'+
t("Already have an account?")+"</a>\n    </span>\n  \n    ",r=spinning?r+'\n      <div class="progress_indicator progress"></div>\n    ':r+('\n      <button type="submit" class="btn-green" style="float:right; margin-right: 30px">'+t("Create Account!")+"</button>\n    "),r+="\n      \n  </form>\n  <div class='notice' style=\"margin-top: 30px\">\n    "+t('By clicking "Create Account," you acknowledge that you\'ve read and accept our __terms_of_use_link__',{terms_of_use_link:"<a href='/terms' target='_blank'>"+
t("Terms of Use")+"</a>"})+"\n  </div>\n";return r}});
define("template!edit_account_dialog",["underscore"],function(b){return function(g){var r="";with(g||{})r+='<div id="edit-account-dialog" class="modal_section">\n  \n  ',b.each(errors,function(b){r+='\n  <div class="errors">\n      <span>'+b.message+"</span>\n  </div>\n  "}),r+='\n  \n  <form class="action-submit">\n    ',user&&(r+="\n      <h1>"+t("Edit Your Account")+"</h1>\n      <label>\n        <span>"+t("Your Name:")+'</span>\n        <input type="text"\n          name="name"\n          class="input"\n          id="edit_name"\n          autofocus="autofocus"\n          required="required"\n          value="'+user.name+
'"\n        />\n      </label>\n      <div class="description">'+t("Note: this name may be displayed next to any publicly shared graphs")+"</div>\n  \n      ",r+="\n        <h1>"+t("Update password")+'</h1>\n        <div id="update-password-fields">\n          <label>\n            <span>'+t("Current Password:")+'</span>\n            <input type="password"\n              name="old_pass"\n              class="input"\n            />\n          </label>\n  \n          <label>\n            <span>'+t("New Password:")+
'</span>\n            <input type="password"\n              name="new_pass"\n              class="input"\n            />\n          </label>\n  \n          <label>\n            <span>'+t("Repeat Password:")+'</span>\n            <input type="password"\n              name="repeat_new_pass"\n              class="input"\n            />\n          </label>\n        </div>\n      ',r+="\n      <br />\n      \n      ",r=spinning?r+'\n        <div class="progress_indicator progress"></div>\n      ':r+("\n        <button type=\"submit\" class='btn-green' id='save_graph_btn' style=\"float:right; margin-right: 45px\">"+
t("Update Account")+"</button>\n      "),r+="\n    "),r+="\n  </form>\n</div>";return r}});
define("template!save_dialog",["underscore"],function(b){return function(b){with(b||{})b=""+('<div id="save-dialog" class="modal_section">\n    <h1>\n      '+t("Save This Graph!")+"\n    </h1>\n\n    <label class='input-label'>\n      <div class='graph-title-title'>"+t("Title:")+' &nbsp; </div>\n      <input class="title-input"\n             name="title"\n             placeholder="['+t("Untitled Graph")+']"\n             value="'+title+'"\n      >\n    </label>\n    \n\n\n\n    '),user.isDriveUser&&
(b+='\n    <div>\n      <label class="send-to-drive">\n        <input type="checkbox" name="push_to_drive" />\n        '+t("Send a copy to Google Drive")+"\n      </label>\n    </div>\n    "),b+="\n    <br><br>\n\n    <div>\n    ",b=title?b+('\n\n      <button type="submit" class="btn-green pull-right action-save-as">'+t("Save a New Copy")+'</button>\n      <button type="submit" class="btn-gray pull-right action-save">'+t("Rename Graph")+"</button>\n\n\n    "):b+('\n\n    <button type="submit" class="btn-green pull-right action-save-as">'+
t("Save Graph!")+"</button>\n\n    ");return b+"\n    </div>\n</div>"}});
define("template!recover_password_dialog",["underscore"],function(b){return function(g){var r="";with(g||{})r+='<div id="recover-password-dialog" class="modal_section">\n  <h1>'+t("Recover your password")+"</h1>\n  \n  ",b.each(errors,function(b){r+='\n  <div class="errors">\n      <span>'+b.message+"</span>\n  </div>\n  "}),r+="\n  \n  ",sentMessage?r+="\n    <p>"+(t("Message sent. Please check your email for a password recovery link.")+" (<a href='#' class='action-tryagain'>"+t("didn't work? try again")+
"</a>)")+"</p>\n  ":(r+='\n  \n    <form class="action-submit">\n      <p>'+t("Please enter your email address. We will send a password recovery link to you.")+"</p>\n  \n      <label>\n        <span>"+t("Email:")+'</span>\n        <input type="email"\n        name="email"\n        class="input"\n        id="recover_email"\n        required="required"\n        autofocus="autofocus"\n        />\n      </label>\n      \n      <br />\n      \n      ',r=spinning?r+'\n        <div class="progress_indicator progress"></div>\n      ':
r+('\n        <button type="submit" class="btn-green" style="float: right; margin-right: 30px">'+t("Recover")+"</button>\n      "),r+="\n      \n    </form>\n    <br />\n  "),r+="\n  <p>"+t("Remembered your password?")+' <a class="action-login">'+t("Sign In!")+"</a></p>\n</div>";return r}});
define("main/modals_controller","require jquery pjs lib/underscore_view main/parse_json_errors lib/keys i18n vendor/jquery.html5-placeholder-shim template!unsupported_browser template!login_dialog template!create_account_dialog template!edit_account_dialog template!save_dialog template!recover_password_dialog".split(" "),function(b){var g=b("jquery"),r=b("pjs"),v=b("lib/underscore_view"),q=b("main/parse_json_errors"),p=b("lib/keys");b("i18n");b("vendor/jquery.html5-placeholder-shim");var u,a,m,c,
f,e;u=b("template!unsupported_browser");a=b("template!login_dialog");m=b("template!create_account_dialog");c=b("template!edit_account_dialog");f=b("template!save_dialog");e=b("template!recover_password_dialog");b=r(function(a){a.init=function(a,b){this.modals={unsupportedBrowserDialog:h(a,b,this),loginDialog:d(a,b,this),createAccountDialog:k(a,b,this),editAccountDialog:l(a,b,this),saveDialog:y(a,b,this),recoverPasswordDialog:s(a,b,this)}};a.ready=function(){this.modalElement=g("#state-modals");this.modalBackground=
g("#modal_background");this.modalElement.find(".close-modal").add(this.modalBackground).on("tap",this.hide.bind(this))};a.hide=function(a){try{0<g(document.activeElement).closest(this.modalElement).length&&g(document.activeElement).blur()}catch(b){}g("input[type='password']").attr("value","");this.modalBackground&&(this.modalBackground.hide(),this.modalElement.hide());g(a).off("keydown")};a.show=function(a){g(a).siblings(".modal_section").hide();g(a).show();this.modalBackground.show();this.modalElement.show();
g(a).on("keydown",this.handleKeydown.bind(this))};a.handleKeydown=function(a){p.lookup(a)===p.ESCAPE&&this.hide(g(a.currentTarget))};a.$=function(){return this.modalElement}});var v=r(v,function(a,b){a.init=function(a,c,d){b.init.call(this);this.errors=[];this.spinning=!1;this.saved_inputs={};this.initialized=!1;this.userController=a;this.graphsController=c;this.modalsController=d};a.getTemplateParams=function(){return{errors:this.errors,spinning:this.spinning}};a.show=function(){this.initialized||
(this.appendTo(this.modalsController.$()),this.initialized=!0);this.errors=[];this.rerender();this.modalsController.show(this.$());this.$("input:visible, textarea:visible").first().focus();g.placeholder&&g.placeholder.shim()};a.beforeRerender=function(){this.__$display=this.$().css("display");var a=this;this.$("input,textarea").each(function(){var b=g(this).attr("name"),c=g(this).val();a.saved_inputs[b]=c})};a.afterRerender=function(){this.$().css("display",this.__$display);for(var a in this.saved_inputs)this.$('[name="'+
a+'"]').val(this.saved_inputs[a])};a.hide=function(){this.modalsController.hide()};a.processJSONErrors=function(a){this.errors=q(a)};a.startProcessingForm=function(){this.spinning=!0;this.errors=[];this.rerender()};a.stopProcessingForm=function(){this.spinning=!1;this.rerender()};a.successAnimation=function(){g(".success-thumb").remove();var a=g('<span class="success-thumb"><i class="icon-check" /><br>changes saved</span>');g("#main").append(a);setTimeout(function(){g(".success-thumb").fadeOut("slow")},
800)}}),h=r(v,function(a){a.template=u;a.didCreateElement=function(){this.$(".action-hide").on("tap",this.hide.bind(this))}}),d=r(v,function(b){b.template=a;b.didCreateElement=function(){this.$(".action-submit").on("submit",this.desmosLogin.bind(this));this.$(".action-recoverpassword").on("tap",this.recoverPassword.bind(this));this.$(".action-createaccount").on("tap",this.createAccount.bind(this))};b.desmosLogin=function(a){a.preventDefault();a=g(a.target).serialize();var b=this.modalsController;
this.startProcessingForm();this.userController.desmosLogin(a).then(b.hide.bind(b),this.processJSONErrors.bind(this)).always(this.stopProcessingForm.bind(this))};b.recoverPassword=function(a){a.preventDefault();this.modalsController.modals.recoverPasswordDialog.show()};b.createAccount=function(a){a.preventDefault();this.modalsController.modals.createAccountDialog.show()}}),k=r(v,function(a,b){a.template=m;a.didCreateElement=function(){this.$(".action-submit").on("submit",this.submitCreateAccount.bind(this));
this.$(".action-login").on("tap",this.login.bind(this));this.$(".action-login-then-save").on("tap",this.login.bind(this))};a.login=function(){this.modalsController.modals.loginDialog.show()};a.show=function(){this.saveNext=!1;b.show.call(this)};a.showThenSave=function(){this.saveNext=!0;b.show.call(this)};a.getTemplateParams=function(){var a=b.getTemplateParams.call(this);a.saveNext=this.saveNext;return a};a.submitCreateAccount=function(a){a.preventDefault();a=g(a.target).serialize();this.startProcessingForm();
var b=this.modalsController;this.userController.createAccount(a).then(b.hide.bind(b),this.processJSONErrors.bind(this)).always(this.stopProcessingForm.bind(this))}}),l=r(v,function(a,b){a.template=c;a.didCreateElement=function(){this.$(".action-submit").on("submit",this.submitEdit.bind(this))};a.show=function(){b.show.call(this);var a=this.getTemplateParams();a.user&&this.$("input[name=name]").val(a.user.name)};a.getTemplateParams=function(){var a=b.getTemplateParams.call(this);a.user=this.userController.currentUser;
return a};a.submitEdit=function(a){a.preventDefault();var b=this;a=g(a.target).serialize();this.startProcessingForm();this.userController.editAccount(a).then(function(){b.hide();b.successAnimation()},this.processJSONErrors.bind(this)).always(this.stopProcessingForm.bind(this))}}),y=r(v,function(a,b){a.template=f;a.didCreateElement=function(){this.$(".action-save-as").on("tap",this.saveAs.bind(this));this.$(".action-save").on("tap",this.save.bind(this));var a=this;this.$(".title-input").on("keypress",
function(b){13===b.which&&(b.preventDefault(),a.saveAs())})};a.show=function(){b.show.call(this);var a=this.getTemplateParams();this.$("input[name=title]").val(a.title).focus();this.baseName=a.title};a.getTemplateParams=function(){var a=b.getTemplateParams.call(this);a.user=null;a.title="";var c=this.userController.currentUser;c&&(a.user={name:c.name,isDriveUser:c.isDriveUser});(c=this.graphsController.currentGraph)&&c.title&&(a.title=c.title);return a};a.save=function(){var a=this.graphsController.currentGraph.copy();
a.title=this.$("input[name=title]").val();this.hide();this.graphsController.save(a)};a.saveAs=function(){var a=this.graphsController.currentGraph.copy();a.title=this.$("input[name=title]").val();this.hide();this.graphsController.saveAs(a)}}),s=r(v,function(a,b){a.template=e;a.getTemplateParams=function(){var a=b.getTemplateParams.call(this);a.sentMessage=this.sentMessage;return a};a.didCreateElement=function(){this.$(".action-submit").on("submit",this.submitRecover.bind(this));this.$(".action-tryagain").on("tap",
this.resetAgain.bind(this));this.$(".action-login").on("tap",this.login.bind(this))};a.submitRecover=function(a){a.preventDefault();var b=this;a=g(a.target).serialize();this.startProcessingForm();this.userController.recoverPassword(a).then(function(){b.sentMessage=!0},this.processJSONErrors.bind(this)).always(this.stopProcessingForm.bind(this))};a.resetAgain=function(){this.sentMessage=!1;this.rerender()};a.login=function(){this.modalsController.modals.loginDialog.show()}});return b});
define("main/load_data",["require","jquery"],function(b){b("jquery");b={};"undefined"!=typeof localStorage.user?(b.graph=null,b.user=JSON.parse(localStorage.user)):(b.graph=null,b.user=null);return b});define("main/initialize_controllers",["require","main/load_data","i18n","main/graph"],function(b){var g=b("main/load_data");b("i18n");var r=b("main/graph");return function(b,q){g.user&&b.completeLogin(g.user,"load");g.graph?q.loadGraph(r.fromAjax(g.graph)):q.clearGraph()}});
define("template!help",["underscore"],function(b){return function(b){with(b||{})b="<div id=\"help-container\">\n  <div id='help-scrollable' class='popover bottom' popover=\"true\">\n    <div class='popover-interior'>\n      <span class='guider_close'></span>\n  \n    <div class='popover-title'>Variables</div><div class='popover-content resources-content'><div class='hovered'>If you want to add variable type something like a=5. There will be slider with limits. <br/>Click to minimum or to maximum to change the limits and step. <br/><br/></div></div><div class='popover-title'>Expressions</div><div class='popover-content resources-content'><div class='hovered'>Use this: <br/>^ - power, <br/>_ - lower index, <br/>/ - division, <br/>sqrt - square root, <br/>pi - Pi number, <br/>theta - argument for polar coordinates, <br/>d/dx - derivative. <br/><br/></div></div><div class='popover-title'>Tables</div><div class='popover-content resources-content'><div class='hovered'>If you want to create table click \"+\" and \"table\". In the first line you can define variable of expression based on variables that you already have. <br/><br/></div></div><div class='popover-title'>Visibility</div><div class='popover-content resources-content'><div class='hovered'>If you want to show graohics from big distance you may enable projector mode. <br/>To change the color click \"edit\".<br/><br/></div></div><div class='popover-title'>Add Functions</div><div class='popover-content resources-content'><div class='hovered'>To add new function type something like f(x)=2x or h(a,b)=2a+3b<br/><br/></div></div><div class='arrow'></div>\n  </div>\n</div>\n";
return b}});define("text!data/help_examples.json",[],function(){return'[{\n  "img": "parabola",\n  "state": "%7B%22graph%22%3A%7B%22viewport%22%3A%7B%22xmin%22%3A-10%2C%22ymin%22%3A-7.627118644067797%2C%22xmax%22%3A10%2C%22ymax%22%3A7.627118644067797%7D%2C%22showLabels%22%3Atrue%2C%22degreeMode%22%3Afalse%2C%22showGrid%22%3Atrue%2C%22showAxes%22%3Atrue%2C%22squareAxes%22%3Atrue%2C%22labelXMode%22%3A%22%22%2C%22labelYMode%22%3A%22%22%7D%2C%22expressions%22%3A%7B%22list%22%3A%5B%7B%22text%22%3A%22Explore%20%5C%22a%5C%22%2C%20%5C%22b%5C%22%2C%20and%20%5C%22c%5C%22%20for%20a%20parabola%20in%20standard%20form.%20What%27s%20the%20connection%20between%20the%20parabola%20%28blue%29%20and%20the%20line%20%28red%29%3F%22%2C%22id%22%3A155%7D%2C%7B%22latex%22%3A%22a%5C%5Cspace%3D%5C%5Cspace1%22%2C%22id%22%3A150%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%238064A2%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A-10%2C%22sliderMax%22%3A10%7D%2C%7B%22latex%22%3A%22b%5C%5Cspace%3D%5C%5Cspace-1%22%2C%22id%22%3A151%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A-10%2C%22sliderMax%22%3A10%7D%2C%7B%22latex%22%3A%22c%5C%5Cspace%3D%5C%5Cspace1%22%2C%22id%22%3A152%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A-10%2C%22sliderMax%22%3A10%7D%2C%7B%22latex%22%3A%22y%5C%5Cspace%3E%5C%5Cspace%20ax%5E2+bx+c%22%2C%22id%22%3A153%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22y%5C%5Cspace%3D%5C%5Cspace%20bx+c%22%2C%22id%22%3A154%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%5D%7D%7D",\n  "title": "Surfing Parabola"\n},\n{\n  "img": "interference",\n  "state": "%7B%22graph%22%3A%7B%22viewport%22%3A%7B%22xmin%22%3A-10%2C%22ymin%22%3A-7.627118644067797%2C%22xmax%22%3A10%2C%22ymax%22%3A7.627118644067797%7D%2C%22showLabels%22%3Atrue%2C%22degreeMode%22%3Afalse%2C%22showGrid%22%3Atrue%2C%22showAxes%22%3Atrue%2C%22squareAxes%22%3Atrue%2C%22labelXMode%22%3A%22%22%2C%22labelYMode%22%3A%22%22%7D%2C%22expressions%22%3A%7B%22list%22%3A%5B%7B%22text%22%3A%22%5C%22a%5C%22%20is%20the%20phase%20difference%20between%20the%20two%20curves.%20The%20purple%20curve%20is%20what%20you%20get%20by%20adding%20the%20two%20orange%20waves%20together.%20Drag%20the%20%5C%22a%5C%22%20slider%3A%22%2C%22id%22%3A141%7D%2C%7B%22latex%22%3A%22a%3D-1.17%22%2C%22id%22%3A140%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A-10%2C%22sliderMax%22%3A10%7D%2C%7B%22latex%22%3A%22f%5C%5Cleft%28x%5C%5Cright%29%3D%5C%5Csin%5C%5Cleft%28x%5C%5Cright%29%22%2C%22id%22%3A1%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22g%5C%5Cleft%28x%5C%5Cright%29%3D%5C%5Csin%5C%5Cleft%28x+a%5C%5Cright%29%22%2C%22id%22%3A2%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22f%5C%5Cleft%28x%5C%5Cright%29+g%5C%5Cleft%28x%5C%5Cright%29%22%2C%22id%22%3A5%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%238064A2%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%5D%7D%7D",\n  "title": "Wave Interference"\n},\n{\n  "img": "cycloid",\n  "state": "%7B%22graph%22%3A%7B%22viewport%22%3A%7B%22xmin%22%3A-1.5663853961321719%2C%22ymin%22%3A-5.025405207724555%2C%22xmax%22%3A14.236083739670296%2C%22ymax%22%3A6.235162202953235%7D%2C%22showLabels%22%3Atrue%2C%22degreeMode%22%3Afalse%2C%22showGrid%22%3Atrue%2C%22showAxes%22%3Atrue%2C%22squareAxes%22%3Atrue%2C%22labelXMode%22%3A%22%22%2C%22labelYMode%22%3A%22%22%7D%2C%22expressions%22%3A%7B%22list%22%3A%5B%7B%22text%22%3A%22Drag%20the%20%5C%22a%5C%22%20slider%20to%20watch%20the%20ball%20roll%20and%20trace%20out%20a%20cycloid%21%22%2C%22id%22%3A138%7D%2C%7B%22latex%22%3A%22a%3D4.54%22%2C%22id%22%3A137%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22never%22%2C%22sliderMin%22%3A0%2C%22sliderMax%22%3A12.566%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28%5C%5Csin%5C%5Cleft%28at+%5C%5Cpi%5C%5Cright%29+at%2C%5C%5Ccos%5C%5Cleft%28at+%5C%5Cpi%5C%5Cright%29+1%5C%5Cright%29%22%2C%22id%22%3A3%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A1%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A-10%2C%22sliderMax%22%3A10%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28x-a%5C%5Cright%29%5E2+%5C%5Cleft%28y-1%5C%5Cright%29%5E2%3D1%22%2C%22id%22%3A126%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28%5C%5Csin%5C%5Cleft%28a+%5C%5Cpi%5C%5Cright%29+a%2C%5C%5Ccos%5C%5Cleft%28a+%5C%5Cpi%5C%5Cright%29+1%5C%5Cright%29%22%2C%22id%22%3A129%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%5D%7D%7D",\n  "title": "Cycloid"\n},\n{\n  "img": "flower",\n  "state": "%7B%22graph%22%3A%7B%22viewport%22%3A%7B%22xmin%22%3A-2.8156320323097948%2C%22xmax%22%3A2.8583438718250394%2C%22ymin%22%3A-2.400091024538206%2C%22ymax%22%3A2.2292436664772266%7D%2C%22showLabels%22%3Atrue%2C%22degreeMode%22%3Afalse%2C%22connectedMode%22%3Afalse%2C%22showGrid%22%3Atrue%2C%22showAxes%22%3Atrue%2C%22squareAxes%22%3Atrue%2C%22labelXMode%22%3A%22%22%2C%22labelYMode%22%3A%22%22%7D%2C%22expressions%22%3A%7B%22list%22%3A%5B%7B%22latex%22%3A%22a%3D5%22%2C%22id%22%3A125%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%239BBB59%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A1%2C%22sliderMax%22%3A10%2C%22sliderInterval%22%3A1%7D%2C%7B%22latex%22%3A%22b%3D6%22%2C%22id%22%3A124%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A1%2C%22sliderMax%22%3A6%2C%22sliderInterval%22%3A1%7D%2C%7B%22latex%22%3A%22r%5C%5Cle%5C%5Csin%5C%5Cleft%28%5C%5Cfrac%7Ba%7D%7Bb%7D%5C%5Ctheta%5C%5Cright%29%22%2C%22id%22%3A1%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%238064A2%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%5D%7D%7D",\n  "title": "Polar Flowers"\n},\n{\n  "img": "puppy",\n  "state": "%7B%22graph%22%3A%7B%22viewport%22%3A%7B%22xmin%22%3A-20.528582949884772%2C%22ymin%22%3A-15.657393775335843%2C%22xmax%22%3A20.528582949884772%2C%22ymax%22%3A15.657393775335843%7D%2C%22showLabels%22%3Atrue%2C%22degreeMode%22%3Afalse%2C%22showGrid%22%3Atrue%2C%22showAxes%22%3Atrue%2C%22squareAxes%22%3Atrue%2C%22labelXMode%22%3A%22%22%2C%22labelYMode%22%3A%22%22%7D%2C%22expressions%22%3A%7B%22list%22%3A%5B%7B%22text%22%3A%22This%20puppy%20was%20created%20by%20Amy%2C%20an%2011th%20grade%20student%2C%20for%20a%20school%20assignment.%20It%20uses%20a%20combination%20of%20conic%20sections%20%28circles%2C%20parabolas%29%20and%20trig%20functions%20%28sec%2C%20csc%2C%20tan%29%22%2C%22id%22%3A149%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+6%5C%5Cright%29%5E2+%5C%5Cleft%28x+2%5C%5Cright%29%5E2%3D2%5E2%22%2C%22id%22%3A148%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+6%5C%5Cright%29%5E2+%5C%5Cleft%28x+6%5C%5Cright%29%5E2%3D2%5E2%22%2C%22id%22%3A16%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+6%5C%5Cright%29%5E2+%5C%5Cleft%28x-2%5C%5Cright%29%5E2%3D2%5E2%22%2C%22id%22%3A88%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+6%5C%5Cright%29%5E2+%5C%5Cleft%28x-6%5C%5Cright%29%5E2%3D2%5E2%22%2C%22id%22%3A89%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B%5C%5Cleft%7Cx%5C%5Cright%7C%3C1.134%3A%5C%5Cspace%5C%5Ccsc%5C%5Cleft%28x+%5C%5Cleft%28%5C%5Cfrac%7B%5C%5Cpi%7D%7B2%7D%5C%5Cright%29%5C%5Cright%29-10.2%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A17%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B%5C%5Cleft%7Cx%5C%5Cright%7C%3C4.375%3A%5C%5Cspace%5C%5Csec%5C%5Cleft%28%5C%5Cleft%28%5C%5Cfrac%7B1%7D%7B3%7D%5C%5Cright%29x-%5C%5Cpi%5C%5Cright%29+4%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A18%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B3.48%3C%5C%5Cspace%20x%3C6.2439%3A%5C%5Cleft%28%5C%5Cfrac%7B1%7D%7B5%7D%5C%5Cright%29%5C%5Ccot%5C%5Cleft%28x%5C%5Cright%29+1%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A19%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B-6.2439%3Cx%3C-3.5%3A%5C%5Cleft%28%5C%5Cfrac%7B1%7D%7B5%7D%5C%5Cright%29%5C%5Ctan%5C%5Cleft%28x+%5C%5Cleft%28%5C%5Cfrac%7B%5C%5Cpi%7D%7B2%7D%5C%5Cright%29%5C%5Cright%29+1%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A20%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B%5C%5Cleft%7Cx%5C%5Cright%7C%3C4.24%3A%5C%5Cspace%5C%5Cfrac%7B1%7D%7B2.6%7D%5C%5Cleft%28-x%5E2%5C%5Cright%29+8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A22%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B%5C%5Cleft%7Cx%5C%5Cright%7C%3C.27%3A-%5C%5Cabs%5C%5Cleft%286x%5C%5Cright%29+9.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A23%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B.8%3C%5C%5Cspace%20x%3C3.7%3A-3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A44%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B.78%3Cx%3C3.7%3A%5C%5Cspace2%5C%5Ccos%5C%5Cleft%281.6x-3.6%5C%5Cright%29-1.599%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A47%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B-3.75%3C%5C%5Cspace%20x%3C-.79%3A-3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A48%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B-3.7%3Cx%3C-.8%3A%5C%5Cspace2%5C%5Csin%5C%5Cleft%281.6x-1.1%5C%5Cright%29-1.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A49%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B-3.1%3C%5C%5Cspace%20x%3C-1.4%3A%5C%5Cspace2%5C%5Csin%5C%5Cleft%281.6x-1.1%5C%5Cright%29-3.4%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A50%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B1.4%3C%5C%5Cspace%20x%3C3.1%3A%5C%5Cspace2%5C%5Ccos%5C%5Cleft%281.6x-3.6%5C%5Cright%29-3.4%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A51%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B-5.39%3Cx%3C-4.8%5C%5Cspace%3A%5C%5Cfrac%7B1%7D%7B2%7D%5C%5Ctan%5C%5Cleft%283x-%5C%5Cleft%28%5C%5Cfrac%7B%5C%5Cpi%7D%7B4.2%7D%5C%5Cright%29%5C%5Cright%29-6.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A68%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B-6.44%3Cx%3C-5.8%3A%5C%5Cfrac%7B1%7D%7B2%7D%5C%5Ctan%5C%5Cleft%283x-%5C%5Cleft%28%5C%5Cfrac%7B%5C%5Cpi%7D%7B4.2%7D%5C%5Cright%29%5C%5Cright%29-6.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A69%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B-7.42%3Cx%3C-6.8%3A%5C%5Cfrac%7B1%7D%7B2%7D%5C%5Ctan%5C%5Cleft%283x-%5C%5Cleft%28%5C%5Cfrac%7B%5C%5Cpi%7D%7B4.2%7D%5C%5Cright%29%5C%5Cright%29-6.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A70%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B4.98%3Cx%3C5.64%3A%5C%5Cfrac%7B1%7D%7B2%7D%5C%5Ccot%5C%5Cleft%283x+%5C%5Cleft%28%5C%5Cfrac%7B%5C%5Cpi%7D%7B2%7D%5C%5Cright%29%5C%5Cright%29-6.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A71%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B6%3Cx%3C6.68%3A%5C%5Cfrac%7B1%7D%7B2%7D%5C%5Ccot%5C%5Cleft%283x+%5C%5Cleft%28%5C%5Cfrac%7B%5C%5Cpi%7D%7B2%7D%5C%5Cright%29%5C%5Cright%29-6.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A72%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B7%3Cx%3C7.6%3A%5C%5Cfrac%7B1%7D%7B2%7D%5C%5Ccot%5C%5Cleft%283x+%5C%5Cleft%28%5C%5Cfrac%7B%5C%5Cpi%7D%7B2%7D%5C%5Cright%29%5C%5Cright%29-6.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A73%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+4.5%5C%5Cright%29%5E2+%5C%5Cleft%28x-0%5C%5Cright%29%5E2%3D.5%5E2%22%2C%22id%22%3A66%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+5.5%5C%5Cright%29%5E2+%5C%5Cleft%28x-2.78%5C%5Cright%29%5E2%3D.3%5E2%22%2C%22id%22%3A76%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+5.5%5C%5Cright%29%5E2+%5C%5Cleft%28x-1.5%5C%5Cright%29%5E2%3D.3%5E2%22%2C%22id%22%3A78%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+6.7%5C%5Cright%29%5E2+%5C%5Cleft%28x-2%5C%5Cright%29%5E2%3D.3%5E2%22%2C%22id%22%3A80%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+6.7%5C%5Cright%29%5E2+%5C%5Cleft%28x+2%5C%5Cright%29%5E2%3D.3%5E2%22%2C%22id%22%3A82%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+5.5%5C%5Cright%29%5E2+%5C%5Cleft%28x+1.5%5C%5Cright%29%5E2%3D.3%5E2%22%2C%22id%22%3A84%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28y+5.5%5C%5Cright%29%5E2+%5C%5Cleft%28x+2.78%5C%5Cright%29%5E2%3D.3%5E2%22%2C%22id%22%3A86%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%5D%7D%7D",\n  "title": "Amy\\"s Puppy"\n},\n{\n  "img": "heart",\n  "state": "%7B%22graph%22%3A%7B%22viewport%22%3A%7B%22xmin%22%3A-2.474757315303456%2C%22ymin%22%3A-2.081791726471779%2C%22xmax%22%3A2.3915521785424914%2C%22ymax%22%3A1.6298002603598758%7D%2C%22showLabels%22%3Atrue%2C%22degreeMode%22%3Afalse%2C%22showGrid%22%3Atrue%2C%22showAxes%22%3Atrue%2C%22squareAxes%22%3Atrue%2C%22labelXMode%22%3A%22%22%2C%22labelYMode%22%3A%22%22%7D%2C%22expressions%22%3A%7B%22list%22%3A%5B%7B%22text%22%3A%22Do%20you%20%3C3%20math%3F%22%2C%22id%22%3A158%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B%5C%5Cleft%7Cx%5C%5Cright%7C%3C2%3A%5C%5Csqrt%7B%5C%5Ccos%20x%7D%5C%5Ccos%5C%5Cleft%28250x%5C%5Cright%29-.7+1%5C%5Csqrt%7B%5C%5Cleft%7Cx%5C%5Cright%7C%7D%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A157%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%5D%7D%7D",\n  "title": "I <3 Math"\n},\n{\n  "img": "shuttle",\n  "state": "%7B%22graph%22%3A%7B%22viewport%22%3A%7B%22xmin%22%3A-19.642%2C%22ymin%22%3A-3.412%2C%22xmax%22%3A61.451%2C%22ymax%22%3A39.6%7D%2C%22showLabels%22%3Atrue%2C%22degreeMode%22%3Afalse%2C%22showGrid%22%3Atrue%2C%22showAxes%22%3Atrue%2C%22squareAxes%22%3Atrue%2C%22labelXMode%22%3A%22%22%2C%22labelYMode%22%3A%22%22%7D%2C%22expressions%22%3A%7B%22list%22%3A%5B%7B%22text%22%3A%22This%20graph%20was%20created%20by%20Abhishek%2C%20a%2010th%20grade%20student%2C%20for%20a%20class%20project.%20His%20goal%20was%20to%20use%20all%20of%20the%20conic%20sections%20%28circle%2C%20parabola%2C%20hyperbola%2C%20ellipse%29.%20Mission%3A%20success%21%22%2C%22id%22%3A160%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B24%5C%5Cle%20x%5C%5Cle28%3A%5C%5Cspace%5C%5Cfrac%7B1%7D%7B4%7Dx-3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A159%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B24%5C%5Cle%20x%5C%5Cle28%3A%5C%5Cspace%5C%5Cfrac%7B1%7D%7B4%7Dx-2%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A7%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B24%5C%5Cle%20x%5C%5Cle28%3A%5C%5Cspace%5C%5Cfrac%7B1%7D%7B4%7Dx-1%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A8%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B12%5C%5Cle%20x%5C%5Cle16%3A%5C%5Cspace%5C%5Cfrac%7B-1%7D%7B4%7Dx+7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A9%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B12%5C%5Cle%20x%5C%5Cle16%3A%5C%5Cspace%5C%5Cfrac%7B-1%7D%7B4%7Dx+8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A10%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B12%5C%5Cle%20x%5C%5Cle16%3A%5C%5Cspace%5C%5Cfrac%7B-1%7D%7B4%7Dx+9%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A11%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B16%5C%5Cle%20x%5C%5Cle24%3A%5C%5Cspace4%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A12%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B16%5C%5Cle%20x%5C%5Cle24%3A%5C%5Cspace5%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A13%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B12%5C%5Cle%20x%5C%5Cle28%3A%5C%5Cspace6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A15%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B12%5C%5Cle%20x%5C%5Cle16%3A%5C%5Cspace%5C%5Cfrac%7B1%7D%7B4%7Dx+3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A16%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B24%5C%5Cle%20x%5C%5Cle28%3A%5C%5Cspace%5C%5Cfrac%7B-1%7D%7B4%7Dx+13%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A17%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B16%5C%5Cle%20x%5C%5Cle17%3A%5C%5Cspace7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A18%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%5C%5Cle%20x%5C%5Cle24%3A%5C%5Cspace7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A19%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B4%3Cy%3C6%3A28%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A28%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B4%3Cy%3C6%3A12%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A29%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B3%3Cy%3C5%3A16%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A30%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B3%3Cy%3C5%3A24%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A31%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B17.05%3Cx%3C20%3A%5C%5Cln%5C%5Cleft%28x-17%5C%5Cright%29+9%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A33%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B20%3Cx%3C22.95%3A%5C%5Cln%5C%5Cleft%2823-x%5C%5Cright%29+9%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A34%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B9%3Cy%3C23%3A18%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A35%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B9%3Cy%3C23%3A22%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A36%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B14%5C%5Cle%20x%5C%5Cle17.3%3A%5C%5Cspace8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A37%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.7%5C%5Cle%20x%5C%5Cle26%3A%5C%5Cspace8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A38%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B8%3Cy%3C9%3A14%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A39%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B8%3Cy%3C9%3A26%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A40%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22%3Cx%3C26%3A%5C%5Cfrac%7B2%7D%7B3%7D%5C%5Cleft%28x-26%5C%5Cright%29%5E2+9%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A42%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B14%3Cx%3C18%3A%5C%5Cfrac%7B2%7D%7B3%7D%5C%5Cleft%28x-14%5C%5Cright%29%5E2+9%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A44%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B9.7%3Cy%3C26%3A15%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A45%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B9.7%3Cy%3C26%3A25%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A46%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B15%3Cy%3C26%3A17%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A47%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B15%3Cy%3C26%3A23%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A48%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B15%3Cy%3C28%3A17%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A49%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B15%3Cy%3C28%3A23%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A50%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B17%3Cx%3C23%3A%5C%5Cspace-%5C%5Cfrac%7B2%7D%7B3%7D%5C%5Cleft%28x-20%5C%5Cright%29%5E2+34%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A52%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B18%3Cx%3C22%3A%5C%5Cspace-%5C%5Cfrac%7B2%7D%7B3%7D%5C%5Cleft%28x-20%5C%5Cright%29%5E2+25.7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A53%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B15%3Cx%3C17%3A%5C%5Cspace-%5C%5Cfrac%7B9%7D%7B3%7D%5C%5Cleft%28x-16%5C%5Cright%29%5E2+29%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A54%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C25%3A%5C%5Cspace-%5C%5Cfrac%7B9%7D%7B3%7D%5C%5Cleft%28x-24%5C%5Cright%29%5E2+29%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A55%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28x-17%5C%5Cright%29%5E2+%5C%5Cleft%28y-10%5C%5Cright%29%5E2%3D.7%22%2C%22id%22%3A56%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B18.5%3Cx%3C21.5%3A%5C%5Cspace%5C%5Cfrac%7B1%7D%7B9%7D%5C%5Cleft%28x-20%5C%5Cright%29%5E2+24%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A57%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B20%3Cx%3C22.1%3A%5C%5Cspace-%5C%5Cfrac%7B15%7D%7B6%7D%5C%5Cleft%28x-20%5C%5Cright%29%5E2+34%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A58%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cfrac%7B30%5C%5Cleft%28x-20%5C%5Cright%29%5E2%7D%7B1%7D+%5C%5Cfrac%7B%5C%5Cleft%28y-8%5C%5Cright%29%5E2%7D%7B4%7D%3D1%22%2C%22id%22%3A59%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B18%3Cx%3C19.7%3A%5C%5Cspace8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A60%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B20.3%3Cx%3C22%3A%5C%5Cspace8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A61%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B6%3Cy%3C8%3A22%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A62%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B6%3Cy%3C8%3A18%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A63%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B18%3Cx%3C19.8%3A%5C%5Csqrt%7B0.066+%5C%5Cfrac%7B%5C%5Cleft%28x-19%5C%5Cright%29%5E2%7D%7B5%7D%7D+7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A68%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B18%3Cx%3C19.8%3A-%5C%5Csqrt%7B0.066+%5C%5Cfrac%7B%5C%5Cleft%28x-19%5C%5Cright%29%5E2%7D%7B5%7D%7D+7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A69%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B20.2%3Cx%3C22%3A%5C%5Csqrt%7B0.066+%5C%5Cfrac%7B%5C%5Cleft%28x-21%5C%5Cright%29%5E2%7D%7B5%7D%7D+7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A70%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B20.2%3Cx%3C22%3A-%5C%5Csqrt%7B0.066+%5C%5Cfrac%7B%5C%5Cleft%28x-21%5C%5Cright%29%5E2%7D%7B5%7D%7D+7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A71%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B9.5%3Cy%3C10.1%3A22.3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A72%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B9.5%3Cy%3C10.8%3A24.1%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A73%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C24.1%3A%5C%5Cspace9.5%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A74%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C23%3A%5C%5Cspace10.8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A75%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C23%3A%5C%5Cspace10.1%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A76%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B10.1%3Cy%3C10.8%3A22.3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A77%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B10.1%3Cy%3C10.8%3A23%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A78%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C24.1%3A%5C%5Cspace10.8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A79%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C24.1%3A%5C%5Cspace10.7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A80%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C24.1%3A%5C%5Cspace10.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A81%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C24.1%3A%5C%5Cspace10.5%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A82%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C24.1%3A%5C%5Cspace10.4%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A83%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C24.1%3A%5C%5Cspace10.3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A84%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C24.1%3A%5C%5Cspace10.2%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A85%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C24.1%3A%5C%5Cspace10.1%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A86%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C24.1%3A%5C%5Cspace10%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A87%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C24.1%3A%5C%5Cspace9.9%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A88%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C24.1%3A%5C%5Cspace9.8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A89%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C24.1%3A%5C%5Cspace9.7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A90%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C24.1%3A%5C%5Cspace9.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A91%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B10.1%3Cy%3C10.8%3A22.9%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A92%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B10.1%3Cy%3C10.8%3A22.8%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A93%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B10.1%3Cy%3C10.8%3A22.7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A94%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B10.1%3Cy%3C10.8%3A22.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A95%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B10.1%3Cy%3C10.8%3A22.5%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A96%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22x%3D%5C%5Cleft%5C%5C%7B10.1%3Cy%3C10.8%3A22.4%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A97%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C23%3A%5C%5Cspace10.2%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A98%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C23%3A%5C%5Cspace10.3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A99%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C23%3A%5C%5Cspace10.4%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A100%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C23%3A%5C%5Cspace10.5%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A101%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C23%3A%5C%5Cspace10.6%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A102%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B22.3%3Cx%3C23%3A%5C%5Cspace10.7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A103%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C25%3A%5C%5Cspace-%5C%5Cfrac%7B1%7D%7B10%7D%5C%5Cleft%28x-24%5C%5Cright%29%5E2+26%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A104%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B15%3Cx%3C17%3A%5C%5Cspace-%5C%5Cfrac%7B1%7D%7B10%7D%5C%5Cleft%28x-16%5C%5Cright%29%5E2+26%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A105%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B23%3Cx%3C25%3A%5C%5Cspace-%5C%5Cfrac%7B1%7D%7B10%7D%5C%5Cleft%28x-24%5C%5Cright%29%5E2+20%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A106%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B15%3Cx%3C17%3A%5C%5Cspace-%5C%5Cfrac%7B1%7D%7B10%7D%5C%5Cleft%28x-16%5C%5Cright%29%5E2+20%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A107%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B19%5C%5Cle%20x%3C21%3A%5C%5Cspace-%5C%5Cleft%28x-20%5C%5Cright%29%5E2+23%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A108%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B19%5C%5Cle%20x%3C21%3A%5C%5Cspace-%5C%5Cleft%28x-20%5C%5Cright%29%5E2+22.3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A109%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28x-19.5%5C%5Cright%29%5E2+%5C%5Cleft%28y-21.25%5C%5Cright%29%5E2%3D.035%22%2C%22id%22%3A110%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28x-20.5%5C%5Cright%29%5E2+%5C%5Cleft%28y-21.25%5C%5Cright%29%5E2%3D.035%22%2C%22id%22%3A111%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28x-19.7%5C%5Cright%29%5E2+%5C%5Cleft%28y-24.5%5C%5Cright%29%5E2%3D.035%22%2C%22id%22%3A113%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%28x-20.3%5C%5Cright%29%5E2+%5C%5Cleft%28y-24.5%5C%5Cright%29%5E2%3D.035%22%2C%22id%22%3A114%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B19%3Cx%3C19.81%3A%5C%5Csqrt%7B.1-.1%5C%5Cleft%28x-20%5C%5Cright%29%5E2%7D+7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A116%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B20.19%3Cx%3C21%3A%5C%5Csqrt%7B.1-.1%5C%5Cleft%28x-20%5C%5Cright%29%5E2%7D+7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A117%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B19%3Cx%3C19.84%3A-%5C%5Csqrt%7B.1-.1%5C%5Cleft%28x-20%5C%5Cright%29%5E2%7D+7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A118%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B20.16%3Cx%3C21%3A-%5C%5Csqrt%7B.1-.1%5C%5Cleft%28x-20%5C%5Cright%29%5E2%7D+7%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A119%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5C%5C%7B16%3Cx%3C24%3A3%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A120%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%5D%7D%7D",\n  "title": "Space Shuttle by Abhishek"\n},\n{\n  "img": "parametric-3d",\n  "state": "%7B%22graph%22%3A%7B%22viewport%22%3A%7B%22xmin%22%3A-8.761278563738967%2C%22ymin%22%3A-7.414729613101661%2C%22xmax%22%3A10.45534369765407%2C%22ymax%22%3A7.242016179486255%7D%2C%22showLabels%22%3Afalse%2C%22degreeMode%22%3Afalse%2C%22showGrid%22%3Afalse%2C%22showAxes%22%3Afalse%2C%22squareAxes%22%3Atrue%2C%22labelXMode%22%3A%22%22%2C%22labelYMode%22%3A%22%22%7D%2C%22expressions%22%3A%7B%22list%22%3A%5B%7B%22text%22%3A%22This%20is%20an%20example%20of%20pushing%20the%20limits%20of%20the%20calculator.%20f%28x%2Cy%29%20is%20any%203-d%20function.%20Try%20changing%20it%21%22%2C%22id%22%3A162%7D%2C%7B%22latex%22%3A%22f%5C%5Cleft%28x%2Cy%5C%5Cright%29%3D%5C%5Ccos%5C%5Cleft%28%5C%5Cleft%28x+y%5C%5Cright%29%5C%5Cright%29+%5C%5Cfrac%7Bx%5E2%7D%7B6%7D-%5C%5Cfrac%7By%5E2%7D%7B6%7D%22%2C%22id%22%3A161%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22text%22%3A%22Slide%20a%2C%20b%2C%20and%20c%20to%20see%20what%20they%20do%3A%22%2C%22id%22%3A164%7D%2C%7B%22latex%22%3A%22a%3D-2%22%2C%22id%22%3A33%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A-3.1416%2C%22sliderMax%22%3A3.1416%2C%22sliderInterval%22%3A%22%22%7D%2C%7B%22latex%22%3A%22b%3D0.66%22%2C%22id%22%3A44%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A-3.1416%2C%22sliderMax%22%3A3.1416%7D%2C%7B%22latex%22%3A%22c%3D0%22%2C%22id%22%3A49%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A-3.1416%2C%22sliderMax%22%3A3.1416%7D%2C%7B%22text%22%3A%22here%20we%20do%20some%20transformations%20to%20find%20out%20where%20to%20plot%20a%203-dimensional%20point%20on%20this%202-dimensional%20screen.%20Note%20that%20these%20depend%20a%20lot%20on%20a%2C%20b%2C%20and%20c%22%2C%22id%22%3A167%7D%2C%7B%22latex%22%3A%22x_x%3D%5C%5Ccos%5C%5Cleft%28c%5C%5Cright%29%5C%5Ccos%5C%5Cleft%28a%5C%5Cright%29-%5C%5Csin%5C%5Cleft%28c%5C%5Cright%29%5C%5Csin%5C%5Cleft%28a%5C%5Cright%29%5C%5Csin%5C%5Cleft%28b%5C%5Cright%29%22%2C%22id%22%3A34%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22never%22%7D%2C%7B%22latex%22%3A%22x_y%3D%5C%5Ccos%5C%5Cleft%28c%5C%5Cright%29%5C%5Csin%5C%5Cleft%28a%5C%5Cright%29%5C%5Csin%5C%5Cleft%28b%5C%5Cright%29+%5C%5Csin%5C%5Cleft%28c%5C%5Cright%29%5C%5Ccos%5C%5Cleft%28a%5C%5Cright%29%22%2C%22id%22%3A35%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%239BBB59%22%2C%22userRequestedGraphing%22%3A%22never%22%7D%2C%7B%22latex%22%3A%22y_x%3D-%5C%5Ccos%5C%5Cleft%28c%5C%5Cright%29%5C%5Csin%5C%5Cleft%28a%5C%5Cright%29-%5C%5Csin%5C%5Cleft%28c%5C%5Cright%29%5C%5Ccos%5C%5Cleft%28a%5C%5Cright%29%5C%5Csin%5C%5Cleft%28b%5C%5Cright%29%22%2C%22id%22%3A38%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22y_y%3D%5C%5Ccos%5C%5Cleft%28c%5C%5Cright%29%5C%5Ccos%5C%5Cleft%28a%5C%5Cright%29%5C%5Csin%5C%5Cleft%28b%5C%5Cright%29-%5C%5Csin%5C%5Cleft%28c%5C%5Cright%29%5C%5Csin%5C%5Cleft%28a%5C%5Cright%29%22%2C%22id%22%3A39%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22z_x%3D-%5C%5Csin%5C%5Cleft%28c%5C%5Cright%29%5C%5Ccos%5C%5Cleft%28b%5C%5Cright%29%22%2C%22id%22%3A36%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22z_y%3D%5C%5Ccos%5C%5Cleft%28c%5C%5Cright%29%5C%5Ccos%5C%5Cleft%28b%5C%5Cright%29%22%2C%22id%22%3A37%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%238064A2%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22text%22%3A%22What%20do%20you%20think%20%5C%22n%5C%22%20and%20%5C%22s%5C%22%20do%3F%22%2C%22id%22%3A168%7D%2C%7B%22latex%22%3A%22n%3D40%22%2C%22id%22%3A1%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A2%2C%22sliderMax%22%3A40%2C%22sliderInterval%22%3A2%7D%2C%7B%22latex%22%3A%22s%3D3.52%22%2C%22id%22%3A28%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%238064A2%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A-10%2C%22sliderMax%22%3A10%7D%2C%7B%22text%22%3A%22These%20two%20variables%20help%20draw%20the%20arrow-heads.%20Can%20you%20tell%20what%20they%20do%3F%22%2C%22id%22%3A172%7D%2C%7B%22latex%22%3A%22l%3D0.904%22%2C%22id%22%3A66%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%239BBB59%22%2C%22userRequestedGraphing%22%3A%22never%22%2C%22sliderMin%22%3A0.5%2C%22sliderMax%22%3A1%7D%2C%7B%22latex%22%3A%22a_l%3D7.89%22%2C%22id%22%3A69%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22default%22%2C%22sliderMin%22%3A5%2C%22sliderMax%22%3A20%7D%2C%7B%22text%22%3A%22Now%20we%20draw%20the%20axes.%20x_arr%20and%20y_arr%20are%20helper%20functions%20that%27ll%20we%27ll%20use%20in%20equations%2023%2C%2024%2C%20and%2025%22%2C%22id%22%3A175%7D%2C%7B%22latex%22%3A%22x_%7Barr%7D%5C%5Cleft%28t%2Cx_s%2Cy_s%5C%5Cright%29%3D%5C%5Cleft%5C%5C%7B0%3Ct%3Cl%3Ax_st%2C%5C%5Cspace%20l%3Ct%3C%5C%5Cfrac%7Bl+1%7D%7B2%7D%3Alx_s+%5C%5Ccos%5C%5Cleft%28%5C%5Cfrac%7B5%5C%5Cpi%7D%7B6%7D%5C%5Cright%29x_s%5C%5Cleft%28t-l%5C%5Cright%29-%5C%5Csin%5C%5Cleft%28%5C%5Cfrac%7B5%5C%5Cpi%7D%7B6%7D%5C%5Cright%29y_s%5C%5Cleft%28t-l%5C%5Cright%29%2C%5C%5Cspace%5C%5Cfrac%7Bl+1%7D%7B2%7D%3Ct%3C1%3Alx_s+%5C%5Csin%5C%5Cleft%28%5C%5Cfrac%7B5%5C%5Cpi%7D%7B6%7D%5C%5Cright%29y_s%5C%5Cleft%28t-%5C%5Cfrac%7Bl+1%7D%7B2%7D%5C%5Cright%29+%5C%5Ccos%5C%5Cleft%28%5C%5Cfrac%7B5%5C%5Cpi%7D%7B6%7D%5C%5Cright%29x_s%5C%5Cleft%28t-%5C%5Cfrac%7Bl+1%7D%7B2%7D%5C%5Cright%29%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A61%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23C0504D%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22y_%7Barr%7D%5C%5Cleft%28t%2Cx_s%2Cy_s%5C%5Cright%29%3D%5C%5Cleft%5C%5C%7B0%3Ct%3Cl%3Ay_st%2C%5C%5Cspace%20l%3Ct%3C%5C%5Cfrac%7Bl+1%7D%7B2%7D%3Aly_s+%5C%5Ccos%5C%5Cleft%28%5C%5Cfrac%7B5%5C%5Cpi%7D%7B6%7D%5C%5Cright%29y_s%5C%5Cleft%28t-l%5C%5Cright%29+%5C%5Csin%5C%5Cleft%28%5C%5Cfrac%7B5%5C%5Cpi%7D%7B6%7D%5C%5Cright%29x_s%5C%5Cleft%28t-l%5C%5Cright%29%2C%5C%5Cspace%5C%5Cfrac%7Bl+1%7D%7B2%7D%3Ct%3C1%3Aly_s-%5C%5Csin%5C%5Cleft%28%5C%5Cfrac%7B5%5C%5Cpi%7D%7B6%7D%5C%5Cright%29x_s%5C%5Cleft%28t-%5C%5Cfrac%7Bl+1%7D%7B2%7D%5C%5Cright%29+%5C%5Ccos%5C%5Cleft%28%5C%5Cfrac%7B5%5C%5Cpi%7D%7B6%7D%5C%5Cright%29y_s%5C%5Cleft%28t-%5C%5Cfrac%7Bl+1%7D%7B2%7D%5C%5Cright%29%5C%5Cright%5C%5C%7D%22%2C%22id%22%3A64%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A10%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5Bx_%7Barr%7D%5C%5Cleft%28t%2Ca_lx_x%2Ca_lx_y%5C%5Cright%29%2Cy_%7Barr%7D%5C%5Cleft%28t%2Ca_lx_x%2Ca_lx_y%5C%5Cright%29%5C%5Cright%5D%22%2C%22id%22%3A65%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A1%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5Bx_%7Barr%7D%5C%5Cleft%28t%2Ca_ly_x%2Ca_ly_y%5C%5Cright%29%2Cy_%7Barr%7D%5C%5Cleft%28t%2Ca_ly_x%2Ca_ly_y%5C%5Cright%29%5C%5Cright%5D%22%2C%22id%22%3A67%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A1%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5Bx_%7Barr%7D%5C%5Cleft%28t%2Ca_lz_x%2Ca_lz_y%5C%5Cright%29%2Cy_%7Barr%7D%5C%5Cleft%28t%2Ca_lz_x%2Ca_lz_y%5C%5Cright%29%5C%5Cright%5D%22%2C%22id%22%3A68%2C%22domain%22%3A%7B%22min%22%3A0%2C%22max%22%3A1%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%2C%7B%22text%22%3A%22And%2C%20finally%2C%20we%20draw%20the%20graph%20in%20blue%20and%20green.%20Can%20you%20figure%20out%20what%20g%28t%29%20and%20h%28t%29%20do%3F%22%2C%22id%22%3A176%7D%2C%7B%22latex%22%3A%22g%5C%5Cleft%28x%5C%5Cright%29%3D2s%5C%5Cleft%28%5C%5Cfrac%7B%5C%5Cfloor%5C%5Cleft%28x%5C%5Ccdot%5C%5Cleft%28n+1%5C%5Cright%29%5C%5Cright%29%7D%7Bn%7D-.5%5C%5Cright%29%22%2C%22id%22%3A29%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23F79646%22%2C%22userRequestedGraphing%22%3A%22never%22%7D%2C%7B%22latex%22%3A%22h%5C%5Cleft%28x%5C%5Cright%29%3D2s%5C%5Cleft%28%5C%5Cmod%5C%5Cleft%28x%5C%5Ccdot%5C%5Cleft%28n+1%5C%5Cright%29%2C1%5C%5Cright%29-.5%5C%5Cright%29%22%2C%22id%22%3A30%2C%22domain%22%3A%7B%22max%22%3A10%2C%22min%22%3A0%7D%2C%22color%22%3A%22%23000000%22%2C%22userRequestedGraphing%22%3A%22never%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5Bx_xg%5C%5Cleft%28t%5C%5Cright%29+y_xh%5C%5Cleft%28t%5C%5Cright%29+z_xf%5C%5Cleft%28g%5C%5Cleft%28t%5C%5Cright%29%2Ch%5C%5Cleft%28t%5C%5Cright%29%5C%5Cright%29%2Cx_yg%5C%5Cleft%28t%5C%5Cright%29+y_yh%5C%5Cleft%28t%5C%5Cright%29+z_yf%5C%5Cleft%28g%5C%5Cleft%28t%5C%5Cright%29%2Ch%5C%5Cleft%28t%5C%5Cright%29%5C%5Cright%29%5C%5Cright%5D%22%2C%22id%22%3A76%2C%22domain%22%3A%7B%22max%22%3A1%2C%22min%22%3A0%7D%2C%22color%22%3A%22%234F81BD%22%2C%22userRequestedGraphing%22%3A%22always%22%7D%2C%7B%22latex%22%3A%22%5C%5Cleft%5Bx_xh%5C%5Cleft%28t%5C%5Cright%29+y_xg%5C%5Cleft%28t%5C%5Cright%29+z_xf%5C%5Cleft%28h%5C%5Cleft%28t%5C%5Cright%29%2Cg%5C%5Cleft%28t%5C%5Cright%29%5C%5Cright%29%2Cx_yh%5C%5Cleft%28t%5C%5Cright%29+y_yg%5C%5Cleft%28t%5C%5Cright%29+z_yf%5C%5Cleft%28h%5C%5Cleft%28t%5C%5Cright%29%2Cg%5C%5Cleft%28t%5C%5Cright%29%5C%5Cright%29%5C%5Cright%5D%22%2C%22id%22%3A77%2C%22domain%22%3A%7B%22max%22%3A1%2C%22min%22%3A0%7D%2C%22color%22%3A%22%239BBB59%22%2C%22userRequestedGraphing%22%3A%22default%22%7D%5D%7D%7D",\n  "title": "3D Graph using Parametric Lines"\n}]'});
define("main/help","require jquery underscore pjs main/popover_view main/parse_json_errors main/calculator_backend template!help i18n config text!data/help_examples.json vendor/jquery.html5-placeholder-shim".split(" "),function(b){var g=b("jquery"),r=b("underscore"),v=b("pjs"),q=b("main/popover_view");b("main/parse_json_errors");b("main/calculator_backend");var p=b("template!help");b("i18n");b("config");var u=JSON.parse(b("text!data/help_examples.json"));b("vendor/jquery.html5-placeholder-shim");
return v(q,function(a,b){a.template=p;a.init=function(a,f,e,g){b.init.call(this);this.userController=a;this.graphsController=f;this.stateController=e;this.modals=g};a.renderIsVisible=function(){b.renderIsVisible.call(this);this.isVisible?(g.placeholder&&g.placeholder.shim(),this.$(".popover-interior").css("maxHeight",this.subheaderView.popoverHeight()+"px")):this.setErrors([])};a.getTemplateParams=function(){return{examples:u}};a.eventShouldClosePopover=function(a){var b=g(a.target);return this.eventIsWithinPopover(a)?
!1:!b.closest("#state-modals").length&&"modal_background"!=b.attr("id")};a.setErrors=function(a){if(!r.isEqual(a,this.errors)){this.errors=a;var b=this.$(".template-errors");b.children().remove();for(var e=0;e<a.length;e++)b.append('<div class="errors">'+a[e].message+"</div>")}};a.setProcessing=function(a){a!==this.processing&&(this.processing=a,this.$(".template-processing").toggle(a))};a.setLoggedIn=function(a){a!==this.loggedIn&&(this.loggedIn=a,this.$(".template-unlessuser").toggle(!a))};a.didCreateElement=
function(){b.didCreateElement.call(this);this.setErrors([]);this.setProcessing(!1);this.setLoggedIn(!!this.userController.currentUser);var a=this;this.userController.observe("currentUser",function(){a.setLoggedIn(!!a.userController.currentUser)})}})});
define("template!settings_desktop",["underscore"],function(b){return function(b){with(b||{})b=""+('<div id="settings-container" style="">\n  <div id="settings-scrollable" class="bottom popover" popover="true">\n    <div class="popover-interior">\n      <div class="popover-title">'+t("Graph Paper")+'</div>\n      <div class="popover-content graph-paper">\n\n        <div class="btn-group fixed-width-btns action-polargrid">\n          <span class="btn" id="cartesian-grid">\n            '+t("Cartesian")+
'\n          </span>\n          <span class="btn" id="polar-grid">\n            '+t("Polar")+'\n          </span>\n        </div>\n\n        <span id="projector-mode" class="btn-green action-projectormode">\n          <i class="icon-hdd"></i>\n          '+t("Projector Mode")+'\n        </span>\n        <label>\n          <input id="show-labels" type="checkbox" />\n          '+t("Show Labels")+'\n        </label>\n        <br />\n        <label>\n          <input id="show-grid" type="checkbox" />\n          '+
t("Show Grid Lines")+'\n        </label>\n        <br />\n        <label>\n          <input id="show-axes" type="checkbox" />\n          '+t("Show Axes")+'\n        </label>\n      </div>\n      \n      <div class="popover-title interior-title">\n        '+t("Window")+'\n      </div>\n      <div class="popover-content window-content">\n        <div class="window" id="x-window">\n          <table class="window-range">\n            <tbody>\n              <tr>\n                <td><input id="xmin" type="number" /></td>\n                <td><span>&lt;&nbsp;<b><i>x</i></b>&nbsp;&lt;</span></td>\n                <td><input id="xmax" type="number" /></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div class="window" id="y-window">\n          <table class="window-range">\n            <tbody>\n              <tr>\n                <td><input id="ymin" type="number" /></td>\n                <td><span>&lt;&nbsp;<b><i>y</i></b>&nbsp;&lt;</span></td>\n                <td><input id="ymax" type="number" /></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div class="square-axes-checkbox action-squareaxes">\n          <input type="checkbox" name="square-axes">\n          '+
t("equalize axis scales")+'\n        </div>\n      </div>\n      \n      <div class="popover-title interior-title">'+t("Trig Settings")+'</div>\n      <div class="popover-content trig-settings">\n        <div class="btn-group fixed-width-btns">\n          <span class="btn active action-radianmode" id="radians">\n            '+t("radians")+'\n          </span>\n          <span class="btn action-radianmode" id="degrees">\n            '+t("degrees")+'\n          </span>\n        </div>\n\n        <table class="pi-labels">\n          <tbody>\n            <tr>\n              <td>\n                '+
t("__x__-axis labels:",{x:"<b><i>x</i></b>"})+'\n              </td>\n              <td>\n                <div class="btn-group">\n                  <span id="x-numlabels" class="btn active action-xpilabels">\n                    1, 2, 3\n                  </span>\n                  <span id="x-pilabels" class="btn action-xpilabels">\n                    <font class="pi">π, 2π, 3π</font>\n                  </span>\n                </div>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                '+
t("__y__-axis labels:",{y:"<b><i>y</i></b>"})+'\n              </td>\n              <td>\n                <div class="btn-group">\n                  <span id="y-numlabels" class="btn active action-ypilabels">\n                    1, 2, 3\n                  </span>\n                  <span id="y-pilabels" class="btn action-ypilabels">\n                    <font class="pi">π, 2π, 3π</font>\n                  </span>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="arrow"></div>\n    </div>\n  </div>\n</div>');
return b}});
define("main/settings_view","require jquery underscore pjs main/popover_view graphing/viewport".split(" "),function(b){var g=b("jquery"),r=b("underscore"),v=b("pjs"),q=b("main/popover_view"),p=b("graphing/viewport");return v(q,function(b,a){b.viewport=new p;b.init=function(b){a.init.call(this);this.graphController=b;this.grapher=b.manager;this.settings=this.grapher.settings};b.closeCondition=function(a){return!g(a.target).closest(this.openCloseBtn).length&&!g(a.target).closest("#settings-container").length};b.didCreateElement=
function(){a.didCreateElement.call(this);var b=this;this.$(".action-squareaxes").on("tap",function(){b.settings.setProperty("squareAxes",!0)});this.$("#show-labels").on("change",function(){b.settings.setProperty("showLabels",!!g(this).attr("checked"))});this.$("#show-grid").on("change",function(){b.settings.setProperty("showGrid",!!g(this).attr("checked"))});this.$(".action-polargrid").on("tap",function(){b.settings.setProperty("polarMode",!b.settings.getProperty("polarMode"))});this.$("#show-axes").on("change",
function(){b.settings.setProperty("showAxes",!!g(this).attr("checked"))});this.$("#xmin, #xmax, #ymin, #ymax").on("keydown keyup keypress",this.onInputKeyPress.bind(this)).on("focusout",this.onFocusOut.bind(this)).on("focusin",this.onFocusIn.bind(this));this.updateTextInputs()};b.addSettingsObserver=function(a,b){var f=b.bind(this);this.settings.observe(a,f);f()};b.onInputKeyPress=function(a){a=parseFloat(this.$("#xmin").val());var b=parseFloat(this.$("#xmax").val()),f=parseFloat(this.$("#ymin").val()),
e=parseFloat(this.$("#ymax").val());a=new p(a,b,f,e);this.$("#x-window").toggleClass("invalid",!a.isXValid());this.$("#y-window").toggleClass("invalid",!a.isYValid());this.settings.setProperty("squareAxes",a.isSquare(this.grapher.screen));this.setViewport(a)};b.renderProjectorMode=function(){var a=this.settings.projectorMode;this.$("#projector-mode").toggleClass("active",!!a)};b.renderXPiLabels=function(){var a=this.settings.xAxisPiLabels;this.$("#x-numlabels").toggleClass("active",!a);this.$("#x-pilabels").toggleClass("active",
!!a)};b.renderYPiLabels=function(){var a=this.settings.yAxisPiLabels;this.$("#y-numlabels").toggleClass("active",!a);this.$("#y-pilabels").toggleClass("active",!!a)};b.renderDegreeMode=function(){var a=this.settings.degreeMode;this.$("#radians").toggleClass("active",!a);this.$("#degrees").toggleClass("active",!!a)};b.renderSquareAxes=function(){var a=this.settings.squareAxes;this.$("#square-axes").toggleClass("disabled",!!a).toggleClass("btn-success",!a)};b.renderShowLabels=function(){var a=this.settings.showLabels,
b=this.$("#show-labels");a?b.attr("checked","checked"):b.removeAttr("checked")};b.renderShowGrid=function(){var a=this.settings.showGrid,b=this.$("#show-grid");a?b.attr("checked","checked"):b.removeAttr("checked")};b.renderPolarMode=function(){this.$("#cartesian-grid").toggleClass("active",!this.settings.polarMode);this.$("#polar-grid").toggleClass("active",!!this.settings.polarMode);this.$("#x-pilabels, #x-numlabels, #y-pilabels, #y-numlabels").toggleClass("disabled",!!this.settings.polarMode)};
b.renderShowAxes=function(){var a=this.settings.showAxes,b=this.$("#show-axes");a?b.attr("checked","checked"):b.removeAttr("checked")};b.updateTextInputs=function(){var a=this;r.each(["xmin","xmax","ymin","ymax"],function(b){parseFloat(a.$("#"+b).val())!==a.viewport[b]&&a.$("#"+b).val(a.viewport[b])})};b.triggerViewportChanged=function(){};b.setViewport=function(a){if(!a.equals(this.viewport)&&a.isValid()){this.viewport=a.clone();var b=this.graphController.getViewport();if(b.ymax!==a.ymax||b.ymin!==
a.ymin)this.settings.lastChangedAxis="y";if(b.xmax!==a.xmax||b.xmin!==a.xmin)this.settings.lastChangedAxis="x";this.updateTextInputs();this.graphController.setViewport(a);this.triggerViewportChanged()}};b.onFocusIn=function(a){clearTimeout(this.stopEditingTimeout)};b.onFocusOut=function(a){var b=this;this.stopEditingTimeout=setTimeout(function(){clearTimeout(b.stopEditingTimeout);b.updateTextInputs();this.$("#x-window").toggleClass("invalid",!b.viewport.isXValid());this.$("#y-window").toggleClass("invalid",
!b.viewport.isYValid())},1)}})});
define("main/settings_view_desktop",["require","pjs","template!settings_desktop","./settings_view"],function(b){var g=b("pjs"),r=b("template!settings_desktop");b=b("./settings_view");return g(b,function(b,g){b.template=r;b.didCreateElement=function(){g.didCreateElement.call(this);var b=this;this.$(".action-xpilabels").on("tap",function(){b.settings.polarMode||b.settings.setProperty("xAxisPiLabels",!b.settings.xAxisPiLabels)});this.$(".action-ypilabels").on("tap",function(){b.settings.polarMode||b.settings.setProperty("yAxisPiLabels",
!b.settings.yAxisPiLabels)});this.$(".action-radianmode").on("tap",function(){b.settings.setProperty("degreeMode",!b.settings.degreeMode)});this.$(".action-projectormode").on("tap",function(){b.settings.setProperty("projectorMode",!b.settings.projectorMode)});this.addSettingsObserver("projectorMode",this.renderProjectorMode);this.addSettingsObserver("xAxisPiLabels",this.renderXPiLabels);this.addSettingsObserver("yAxisPiLabels",this.renderYPiLabels);this.addSettingsObserver("degreeMode",this.renderDegreeMode);
this.addSettingsObserver("squareAxes",this.renderSquareAxes);this.addSettingsObserver("showLabels",this.renderShowLabels);this.addSettingsObserver("showGrid",this.renderShowGrid);this.addSettingsObserver("polarMode",this.renderPolarMode);this.addSettingsObserver("showAxes",this.renderShowAxes)};b.renderSquareAxes=function(){var b=this.settings.squareAxes;this.$(".square-axes-checkbox").toggleClass("disabled",!!b);this.$('.square-axes-checkbox input[name="square-axes"]').attr("disabled",!!b).attr("checked",
!!b)};b.renderIsVisible=function(){g.renderIsVisible.call(this);this.isVisible&&this.$(".popover-interior").css("maxHeight",this.subheaderView.popoverHeight()+"px")}})});
define("template!account_dropdown",["underscore"],function(b){return function(b){with(b||{})b=""+("<div id=\"logout_options\">\n\t<div class='popover bottom' popover=\"true\">\n\t\t<div class='user-info'>\n\t\t\t<span class='account-name'>"+name+"</span>\n\t\t\t<span class='account-email'>"+email+'</span>\n\t  \t<a class="action-editaccount">'+t("Edit Account")+'</a>\n\t  </div>\n\t  <a class="action-logout">'+t("Sign Out")+"</a>\t\n\t  <div class='arrow'></div>\n\t</div>\n</div>");return b}});
define("main/account_dropdown",["require","jquery","pjs","main/popover_view","template!account_dropdown"],function(b){var g=b("jquery"),r=b("pjs"),v=b("main/popover_view"),q=b("template!account_dropdown");return r(v,function(b,u){b.template=q;b.init=function(a,b,c){u.init.call(this);this.helpView=b;this.userController=a;this.modals=c};b.getTemplateParams=function(){return this.userController.currentUser?{name:this.userController.currentUser.name,email:this.userController.currentUser.email}:{name:null,
email:null}};b.editAccount=function(){this.modals.editAccountDialog.show();this.closePopover()};b.logout=function(){this.userController.logout();this.closePopover()};b.eventShouldClosePopover=function(a){var b=g(a.target);return this.eventIsWithinPopover(a)?!1:!b.closest("#state-modals").length&&"modal_background"!=b.attr("id")};b.didCreateElement=function(){u.didCreateElement.call(this);this.$(".action-logout").on("tap",this.logout.bind(this));this.$(".action-editaccount").on("tap",this.editAccount.bind(this));
this.userController.observe("currentUser",this.rerender.bind(this))}})});define("loadcss!css/mygraphs",function(){});define("text!data/resources_examples.json",[],function(){return'[{\n  "section": "Lines",\n  "examples": [\n    {\n      "title": "Slope Intercept Form",\n      "graphHash": "59qdbtnlzy",\n      "state": {"graph": {"squareAxes": true, "showLabels": true, "showGrid": true, "showAxes": true, "labelXMode": "", "degreeMode": false, "labelYMode": "", "viewport": {"xmin": -10, "ymin": -5.537, "ymax": 5.537, "xmax": 10}}, "expressions": {"list": [{"color": "#C0504D", "latex": "y=mx+b", "domain": {"max": 10, "min": 0}, "id": 1, "userRequestedGraphing": "default"}, {"latex": "m=1", "domain": {"max": 10, "min": 0}, "color": "#F79646", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 3}, {"latex": "b=1", "domain": {"max": 10, "min": 0}, "color": "#8064A2", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 2}]}}\n    },\n    {\n      "title": "Point Slope Form",\n      "graphHash": "vphpgabluz",\n      "state": {"graph": {"squareAxes": true, "showLabels": true, "showGrid": true, "showAxes": true, "labelXMode": "", "degreeMode": false, "labelYMode": "", "viewport": {"xmin": -10, "ymin": -5.537, "ymax": 5.537, "xmax": 10}}, "expressions": {"list": [{"color": "#C0504D", "latex": "y-y_1=m\\\\left(x-x_1\\\\right)", "domain": {"max": 10, "min": 0}, "id": 1, "userRequestedGraphing": "default"}, {"color": "#8064A2", "latex": "\\\\left(x_1,y_1\\\\right)", "domain": {"max": 10, "min": 0}, "id": 8, "userRequestedGraphing": "default"}, {"latex": "x_1=1", "domain": {"max": 10, "min": 0}, "color": "#4F81BD", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 5}, {"latex": "y_1=1", "domain": {"max": 10, "min": 0}, "color": "#C0504D", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 7}, {"latex": "m=1", "domain": {"max": 10, "min": 0}, "color": "#9BBB59", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 6}]}}\n    },\n    {\n      "title": "Two Point Form",\n      "graphHash": "slkjzmm3ly",\n      "state": {"graph":{"viewport":{"xmin":-7.023,"ymin":-4.187,"xmax":7.024,"ymax":4.186},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"y-y_1=m\\\\left(x-x_1\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":12,"latex":"m=\\\\frac{y_2-y_1}{x_2-x_1}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#9BBB59"},{"id":5,"latex":"x_1=-1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD","sliderMin":-10,"sliderMax":10},{"id":7,"latex":"y_1=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D","sliderMin":-10,"sliderMax":10},{"id":8,"latex":"\\\\left(x_1,y_1\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD"},{"id":9,"latex":"x_2=3","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646","sliderMin":-10,"sliderMax":10},{"id":10,"latex":"y_2=2","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000","sliderMin":-10,"sliderMax":10},{"id":11,"latex":"\\\\left(x_2,y_2\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD"}]}}\n    },\n    {\n      "title": "Intercept Form",\n      "graphHash": "cmz3dawdji",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.961,"xmax":10,"ymax":5.961},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"\\\\frac{y}{a}+\\\\frac{x}{b}=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":14,"latex":"a=2","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":-10,"sliderMax":10},{"id":13,"latex":"b=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D","sliderMin":-10,"sliderMax":10},{"id":15,"latex":"\\\\left(0,a\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2"},{"id":16,"latex":"\\\\left(b,0\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2"}]}}\n    },\n    {\n      "title": "General Form",\n      "graphHash": "4acfppghta",\n      "state": {"graph": {"squareAxes": true, "showLabels": true, "showGrid": true, "showAxes": true, "labelXMode": "", "degreeMode": false, "labelYMode": "", "viewport": {"xmin": -10, "ymin": -5.537, "ymax": 5.537, "xmax": 10}}, "expressions": {"list": [{"color": "#C0504D", "latex": "ax+by=c", "domain": {"max": 10, "min": 0}, "id": 1, "userRequestedGraphing": "default"}, {"latex": "a=1", "domain": {"max": 10, "min": 0}, "color": "#F79646", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 2}, {"latex": "b=1", "domain": {"max": 10, "min": 0}, "color": "#8064A2", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 3}, {"latex": "c=1", "domain": {"max": 10, "min": 0}, "color": "#000000", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 4}]}}\n    },\n    {\n      "title": "Visualizing Slope",\n      "graphHash": "h4kwopbouh",\n      "state": {"graph":{"viewport":{"xmin":-3,"ymin":-10,"xmax":3,"ymax":10},"showLabels":true,"degreeMode":false,"showGrid":true,"polarMode":false,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"\\\\left(1,m\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000"},{"id":509,"latex":"m=1.82","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#C0504D","sliderMin":-10,"sliderMax":10},{"id":487,"latex":"\\\\floor\\\\left(x\\\\right)\\\\cdot m\\\\le y\\\\le mx","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD"},{"id":508,"latex":"mx\\\\le y\\\\le\\\\floor\\\\left(x\\\\right)\\\\cdot m","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"}]}}\n    }\n  ]\n},\n{\n  "section": "Parabolas",\n  "examples": [\n    {\n      "title": "Standard Form",\n      "graphHash": "3ltwect0mc",\n      "state": {"graph": {"squareAxes": true, "showLabels": true, "showGrid": true, "showAxes": true, "labelXMode": "", "degreeMode": false, "labelYMode": "", "viewport": {"xmin": -10, "ymin": -5.537, "ymax": 5.537, "xmax": 10}}, "expressions": {"list": [{"color": "#C0504D", "latex": "y=ax^2+bx+c", "domain": {"max": 10, "min": 0}, "id": 1, "userRequestedGraphing": "default"}, {"latex": "a=1", "domain": {"max": 10, "min": 0}, "color": "#C0504D", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 19}, {"latex": "b=0", "domain": {"max": 10, "min": 0}, "color": "#9BBB59", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 18}, {"latex": "c=1", "domain": {"max": 10, "min": 0}, "color": "#4F81BD", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 17}]}}\n    },\n    {\n      "title": "Vertex Form",\n      "graphHash": "mey71rif1d",\n      "state": {"graph": {"squareAxes": true, "showLabels": true, "showGrid": true, "showAxes": true, "labelXMode": "", "degreeMode": false, "labelYMode": "", "viewport": {"xmin": -10, "ymin": -5.537, "ymax": 5.537, "xmax": 10}}, "expressions": {"list": [{"color": "#C0504D", "latex": "y=a\\\\left(x-h\\\\right)^2+k", "domain": {"max": 10, "min": 0}, "id": 1, "userRequestedGraphing": "always"}, {"latex": "a=1", "domain": {"max": 10, "min": 0}, "color": "#C0504D", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 25}, {"latex": "h=1", "domain": {"max": 10, "min": 0}, "color": "#9BBB59", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 24}, {"latex": "k=0", "domain": {"max": 10, "min": 0}, "color": "#4F81BD", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 23}, {"color": "#8064A2", "latex": "\\\\left(h,\\\\space k\\\\right)", "domain": {"max": 10, "min": 0}, "id": 26, "userRequestedGraphing": "default"}]}}\n    },\n    {\n      "title": "Factored Form",\n      "graphHash": "qgxlpjyebd",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.942,"xmax":10,"ymax":5.98},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"y=a\\\\left(x-x_1\\\\right)\\\\left(x-x_2\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":22,"latex":"a=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000","sliderMin":-10,"sliderMax":10},{"id":21,"latex":"x_1=-2","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646","sliderMin":-10,"sliderMax":10},{"id":20,"latex":"x_2=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":-10,"sliderMax":10},{"id":23,"latex":"\\\\left(x_1,0\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646"},{"id":24,"latex":"\\\\left(x_2,0\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646"}]}}\n    },\n    {\n      "title": "Standard Form with Tangent",\n      "graphHash": "bqr4ko6wi9",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.961,"xmax":10,"ymax":5.961},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"y\\\\ge ax^2+bx+c","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":19,"latex":"a=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D","sliderMin":-10,"sliderMax":10},{"id":18,"latex":"b=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#9BBB59","sliderMin":-10,"sliderMax":10},{"id":17,"latex":"c=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD","sliderMin":-10,"sliderMax":10},{"id":21,"latex":"y\\\\space=\\\\space bx+c","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD"}]}}\n    }\n  ]\n},\n{\n  "section": "Trigonometry",\n  "examples": [\n    {\n      "title": "Period and Amplitude",\n      "graphHash": "pjtapprsyt",\n      "state": {"graph": {"squareAxes": true, "showLabels": true, "showGrid": true, "showAxes": true, "labelXMode": "", "degreeMode": false, "labelYMode": "", "viewport": {"xmin": -10.056, "ymin": -7.352, "ymax": 7.352, "xmax": 9.944}}, "expressions": {"list": [{"text": "Sinusoid with amplitude \\"a\\" and period \\"b\\"", "id": 10}, {"color": "#C0504D", "latex": "a\\\\space\\\\cos\\\\left(\\\\frac{2\\\\pi x}{b}\\\\right)", "domain": {"max": 10, "min": 0}, "id": 1, "userRequestedGraphing": "default"}, {"latex": "a=2.58", "domain": {"max": 10, "min": 0}, "color": "#F79646", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 3}, {"latex": "b=4.65", "domain": {"max": 10, "min": 0}, "color": "#8064A2", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 2}, {"color": "#8064A2", "latex": "\\\\left(b,\\\\space at\\\\right)", "domain": {"max": 1, "min": 0}, "id": 4, "userRequestedGraphing": "always"}, {"color": "#4F81BD", "latex": "\\\\left(bt,\\\\space a\\\\right)", "domain": {"max": 1, "min": 0}, "id": 5, "userRequestedGraphing": "default"}]}}\n    },\n    {\n      "title": "Phase",\n      "graphHash": "rfo6v7r5vg",\n      "state": {"graph":{"viewport":{"xmin":-10.949,"ymin":-3,"xmax":11,"ymax":2},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":false,"labelXMode":"pi","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"\\\\cos\\\\left(x\\\\space-\\\\space p\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"},{"id":13,"latex":"p=1.64","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD","sliderMin":-10,"sliderMax":10},{"id":14,"latex":"\\\\cos\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#4F81BD"},{"id":17,"latex":"\\\\left(pt,\\\\space1\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#C0504D"}]}}\n    },\n    {\n      "title": "All the Trig Functions",\n      "graphHash": "v3hgzjtpo5",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-6.095,"xmax":10,"ymax":6.095},"showLabels":true,"degreeMode":false,"showGrid":true,"polarMode":false,"showAxes":true,"squareAxes":true,"labelXMode":"pi","labelYMode":""},"expressions":{"list":[{"id":28,"text":"Click on the icon next to each trig function to turn it on or off:"},{"id":27,"latex":"\\\\sin\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":22,"latex":"\\\\cos\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#8064A2"},{"id":23,"latex":"\\\\tan\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#F79646"},{"id":24,"latex":"\\\\csc\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":25,"latex":"\\\\sec\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":26,"latex":"\\\\cot\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59"}]}}\n    },\n    {\n      "title": "Wave Interference",\n      "graphHash": "ae1kce4fwm",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.961,"xmax":10,"ymax":5.961},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":140,"latex":"a=-1.17","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646","sliderMin":-10,"sliderMax":10},{"id":1,"latex":"f\\\\left(x\\\\right)=\\\\sin\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646"},{"id":2,"latex":"g\\\\left(x\\\\right)=\\\\sin\\\\left(x+a\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646"},{"id":5,"latex":"f\\\\left(x\\\\right)+g\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2"}]}}\n    },\n    {\n      "title": "Unit Circle",\n      "graphHash": "aer4wpiiad",\n      "state": {"graph":{"viewport":{"xmin":-2.5,"ymin":-1.49,"xmax":2.5,"ymax":1.4905},"showLabels":true,"degreeMode":true,"showGrid":false,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"x^2+y^2=1","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#4F81BD"},{"id":19,"latex":"\\\\left(\\\\cos a,\\\\space\\\\sin a\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"},{"id":20,"latex":"a=30","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646","sliderMin":0,"sliderMax":360},{"id":22,"latex":"y=\\\\left(\\\\tan a\\\\right)\\\\cdot x\\\\left\\\\{0<x<\\\\cos a\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#C0504D"},{"id":26,"latex":"y=\\\\left(\\\\tan a\\\\right)\\\\cdot x\\\\left\\\\{\\\\cos a<x<0\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#C0504D"},{"id":23,"latex":"x=\\\\cos(a)\\\\left\\\\{0<y<\\\\sin(a)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#C0504D"},{"id":27,"latex":"x=\\\\cos(a)\\\\left\\\\{\\\\sin(a)<y<0\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#C0504D"}]}}\n    }\n  ]\n},\n{\n  "section": "Conic Sections",\n  "examples": [\n    {\n      "title": "Circle",\n      "graphHash": "bkmtndf38y",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.961,"xmax":10,"ymax":5.961},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"\\\\left(x-a\\\\right)^2+\\\\left(y-b\\\\right)^2<r^2","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":6,"latex":"r\\\\space=\\\\space2.5","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59","sliderMin":-10,"sliderMax":10},{"id":5,"latex":"a=0","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD","sliderMin":-10,"sliderMax":10},{"id":4,"latex":"b=0","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000","sliderMin":-10,"sliderMax":10}]}}\n      } ,\n      {\n        "title": "Parabola and Focus",\n        "graphHash": "naug1puabq",\n        "state": {"graph":{"viewport":{"xmin":-6.122,"ymin":-3.492,"xmax":6.364,"ymax":5.114},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":false,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"y=\\\\frac{x^2}{4p}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD"},{"id":64,"latex":"p=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000","sliderMin":0.5,"sliderMax":5},{"id":65,"latex":"\\\\left(0,\\\\space p\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"},{"id":81,"latex":"y\\\\space=\\\\space-p","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"}]}}\n      },\n      {\n        "title": "Ellipse with Foci",\n        "graphHash": "fwn45vpf2z",\n        "state": {"graph":{"viewport":{"xmin":-8.918,"ymin":-5.215,"xmax":8.86,"ymax":5.324},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"\\\\frac{x^2}{a^2}+\\\\frac{y^2}{b^2}\\\\ge1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":4,"latex":"a=5","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":3,"sliderMax":6},{"id":2,"latex":"b=3","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":1,"sliderMax":3},{"id":5,"latex":"c=\\\\sqrt{\\\\left(a^2-b^2\\\\right)}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"},{"id":6,"latex":"\\\\left(c,0\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#000000"},{"id":7,"latex":"\\\\left(-c,0\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"}]}}\n      },\n      {\n        "title": "Hyperbola",\n        "graphHash": "321ynqvpjh",\n        "state": {"graph":{"viewport":{"xmin":-9.594,"ymin":-4.136,"xmax":10.406,"ymax":7.786},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":23,"latex":"\\\\frac{y^2}{b^{2\\\\space}}-\\\\frac{x^2}{a^2}=1","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#9BBB59"},{"id":17,"latex":"\\\\frac{x^2}{a^2}-\\\\frac{y^2}{b^2}=1","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":24,"latex":"a=1","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59","sliderMin":0.01,"sliderMax":5},{"id":25,"latex":"b=1","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#C0504D","sliderMin":0.01,"sliderMax":5,"sliderInterval":""}]}}\n      }\n    ]\n  },\n{\n  "section": "Polar Graphing",\n  "examples": [\n    {\n      "title": "Polar Rose",\n      "graphHash": "zg6mokdc9e",\n      "state": {"graph":{"viewport":{"xmin":-2.1,"ymin":-2,"xmax":2.1,"ymax":2},"showLabels":true,"degreeMode":false,"showGrid":true,"polarMode":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"r\\\\space\\\\le\\\\space\\\\sin\\\\left(\\\\frac{a}{b}\\\\theta\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":82,"latex":"a=5","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#F79646","sliderMin":1,"sliderMax":10,"sliderInterval":1},{"id":81,"latex":"b=6","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#8064A2","sliderMin":1,"sliderMax":10,"sliderInterval":1}]}}\n    },\n    {\n      "title": "Logarithmic Spiral",\n      "graphHash": "ucm7smj9fz",\n      "state": {"graph":{"viewport":{"xmin":-1200,"ymin":-1000,"xmax":1200,"ymax":1000},"showLabels":true,"degreeMode":false,"showGrid":true,"polarMode":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":83,"latex":"r\\\\space=\\\\space a^{\\\\theta}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"},{"id":84,"latex":"a=1.25","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD","sliderMin":1.1,"sliderMax":5}]}}\n    },\n    {\n      "title": "Limacon",\n      "graphHash": "ie57pljxzm",\n      "state": {"graph":{"viewport":{"xmin":-8,"ymin":-10,"xmax":8,"ymax":10},"showLabels":true,"degreeMode":false,"showGrid":true,"polarMode":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":83,"latex":"r\\\\space=\\\\space a+b\\\\cdot\\\\cos\\\\left(\\\\theta\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"},{"id":84,"latex":"a=2","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD","sliderMin":0,"sliderMax":5},{"id":85,"latex":"b=3","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59","sliderMin":0,"sliderMax":5}]}}\n    },\n    {\n      "title": "Polar Conic Sections",\n      "graphHash": "kk3axf8oon",\n      "state": {"graph":{"viewport":{"xmin":-11,"ymin":-5,"xmax":11,"ymax":5},"showLabels":true,"degreeMode":false,"showGrid":true,"polarMode":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"r\\\\space=\\\\space\\\\frac{1}{1-a\\\\cdot\\\\cos\\\\left(\\\\theta-b\\\\right)}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":3,"latex":"a=1","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#F79646","sliderMin":-10,"sliderMax":10},{"id":2,"latex":"b=0","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#8064A2","sliderMin":-10,"sliderMax":10}]}}\n    }\n  ]\n},\n{\n  "section": "Transformations",\n  "examples": [\n    {\n      "title": "Translating Any Function",\n      "graphHash": "0ksctv1hm4",\n      "state": {"graph": {"squareAxes": true, "showLabels": true, "showGrid": true, "showAxes": true, "labelXMode": "", "degreeMode": false, "labelYMode": "", "viewport": {"xmin": -7.901, "ymin": -4.379, "ymax": 4.368, "xmax": 7.902}}, "expressions": {"list": [{"color": "#C0504D", "latex": "f\\\\left(x\\\\right)=x^2+\\\\sin\\\\left(3x\\\\right)", "domain": {"max": 10, "min": 0}, "id": 1, "userRequestedGraphing": "default"}, {"text": "Function g(x) is a transformed version of function f(x).", "id": 49}, {"color": "#F79646", "latex": "g\\\\left(x\\\\right)=f\\\\left(x-h\\\\right)+k", "domain": {"max": 10, "min": 0}, "id": 45, "userRequestedGraphing": "default"}, {"text": "What effect does k have on the function g(x)?", "id": 51}, {"latex": "h=2", "domain": {"max": 10, "min": 0}, "color": "#000000", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 46}, {"text": "What effect does h have on the function g(x)", "id": 53}, {"latex": "k=-1", "domain": {"max": 10, "min": 0}, "color": "#4F81BD", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 47}]}}\n    },\n    {\n      "title": "Scaling Any Function",\n      "graphHash": "doxva7ciht",\n      "state": {"graph": {"squareAxes": true, "showLabels": true, "showGrid": true, "showAxes": true, "labelXMode": "", "degreeMode": false, "labelYMode": "", "viewport": {"xmin": -7.901, "ymin": -4.379, "ymax": 4.368, "xmax": 7.902}}, "expressions": {"list": [{"color": "#C0504D", "latex": "f\\\\left(x\\\\right)=x^2+\\\\sin\\\\left(3x\\\\right)", "domain": {"max": 10, "min": 0}, "id": 1, "userRequestedGraphing": "default"}, {"text": "Function g(x) is a transformed version of function f(x).", "id": 49}, {"color": "#F79646", "latex": "g\\\\left(x\\\\right)=af\\\\left(\\\\frac{x}{b}\\\\right)", "domain": {"max": 10, "min": 0}, "id": 45, "userRequestedGraphing": "default"}, {"text": "What effect does a have on the function g(x)?", "id": 51}, {"latex": "a=0.5", "domain": {"max": 10, "min": 0}, "color": "#000000", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 46}, {"text": "What effect does b have on the function g(x)", "id": 53}, {"latex": "b=1", "domain": {"max": 10, "min": 0}, "color": "#4F81BD", "sliderMin": -10, "userRequestedGraphing": "default", "sliderMax": 10, "id": 47}]}}\n    },\n    {\n      "title": "Reflections of a Function",\n      "graphHash": "ynmlumjvz8",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.961,"xmax":10,"ymax":5.961},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"f\\\\left(x\\\\right)=\\\\left(x-3\\\\right)^3-x+5","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":92,"latex":"-f\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":96,"latex":"f\\\\left(-x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59"},{"id":97,"latex":"-f\\\\left(-x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"}]}}\n    },\n    {\n      "title": "Inverse of a Function",\n      "graphHash": "tif5liedlj",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.928,"xmax":10,"ymax":5.929},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"f\\\\left(x\\\\right)=.2x^3+.1x^5","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"},{"id":155,"latex":"x=f\\\\left(y\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":156,"latex":"y=x","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2"},{"id":158,"latex":"a=1.74","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000","sliderMin":-10,"sliderMax":10},{"id":157,"latex":"\\\\left(a,f\\\\left(a\\\\right)\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"},{"id":159,"latex":"\\\\left(f\\\\left(a\\\\right),a\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"}]}}\n    }\n  ]\n},\n{\n  "section": "Calculus",\n  "examples": [\n    {\n      "title": "Derivatives",\n      "graphHash": "aqgbwm3qfd",\n\n      "state": {"graph":{"viewport":{"xmin":-8.874,"ymin":-6.286,"xmax":11.127,"ymax":5.637},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"f\\\\left(x\\\\right)\\\\space=\\\\space ax^3+cx","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":150,"latex":"a=0.42","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59","sliderMin":-10,"sliderMax":10},{"id":148,"latex":"c=-1.64","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000","sliderMin":-10,"sliderMax":10},{"id":146,"latex":"g\\\\left(x\\\\right)\\\\space=\\\\space\\\\frac{d}{dx}f\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2"}]}}\n    },\n    {\n      "title": "Secant Line",\n      "graphHash": "irip8pnpdf",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.961,"xmax":10,"ymax":5.961},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":3,"latex":"f\\\\left(x\\\\right)=\\\\sin\\\\left(x\\\\right)+.3x","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD"},{"id":7,"latex":"a=0.23","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD","sliderMin":-10,"sliderMax":10},{"id":13,"latex":"h=2","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646","sliderMin":0.1,"sliderMax":2},{"id":16,"latex":"m=\\\\frac{\\\\left(f\\\\left(a+h\\\\right)-f\\\\left(a\\\\right)\\\\right)}{h}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD"},{"id":20,"latex":"y=m\\\\left(x-a\\\\right)+f\\\\left(a\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":23,"latex":"\\\\left(a,f\\\\left(a\\\\right)\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2"},{"id":24,"latex":"\\\\left(a+h,f\\\\left(a+h\\\\right)\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2"}]}}\n    },\n    {\n      "title": "Tangent Line",\n      "graphHash": "dlzhsldcgo",\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.961,"xmax":10,"ymax":5.961},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":3,"latex":"f\\\\left(x\\\\right)=\\\\sin\\\\left(x\\\\right)+.3x","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD"},{"id":6,"latex":"g\\\\left(x\\\\right)=\\\\frac{d}{dx}f\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":7,"latex":"a=1.27","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD","sliderMin":-10,"sliderMax":10},{"id":12,"latex":"y=g\\\\left(a\\\\right)\\\\left(x-a\\\\right)+f\\\\left(a\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":13,"latex":"\\\\left(a,\\\\space f\\\\left(a\\\\right)\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2"}]}}\n    },\n    {\n      "title": "Taylor Expansion of sin(x)",\n      "graphHash": "gkjridbqfj",\n\n      "state": {"graph":{"viewport":{"xmin":-10,"ymin":-5.961,"xmax":10,"ymax":5.961},"showLabels":true,"degreeMode":false,"showGrid":true,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":1,"latex":"y\\\\space=\\\\space\\\\sin\\\\left(x\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":161,"latex":"y\\\\space=\\\\space\\\\sum_{n=0}^a\\\\frac{\\\\left(-1\\\\right)^nx^{\\\\left(2n+1\\\\right)}}{\\\\left(2n+1\\\\right)!}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2"},{"id":162,"latex":"a=1","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#F79646","sliderMin":0,"sliderMax":10,"sliderInterval":1}]}}\n    }\n  ]\n}]'});
define("template!mygraphs",["underscore"],function(b){return function(b){with(b||{})b=""+('<div>\n  <div id="resources-container" class="hidden">\n    <div class="search-container">\n      <input id="search-mygraphs" type="text" placeholder="'+t("Search for a graph by title")+'" />\n      <span class="icon-search search-icon"></span>\n    </div>\n    <div class="scrollable">\n\n      '),b+="\n        <div class=\"login-reminder\">\n          <a class='btn action-createaccount'>\n            "+t("Create an Account")+
"\n          </a>\n          or\n          <a class='action-login'>\n            "+t("Sign In")+"\n          </a>\n          <div>\n            "+t("to save and share your graphs!")+'\n          </div>\n        </div>\n        \n        <div class="new-blank-graph action-newblankgraph">\n          <div class="new-blank-graph-inner">\n            <span>+</span> '+t("New Blank Graph")+'\n          </div>\n        </div>\n        \n        <div class="template-spinning">\n          <img src="spinner.gif" width="16px" height="16px" /> '+
t("loading graphs...")+"\n        </div>\n\n      ",b+="\n\n      <ul class=\"template-list\">\n\n      </ul>\n      <div class='no-matches'>\n        "+t("Sorry, we didn't find any graphs with that title.")+'\n      </div>\n      </div>\n\n\n    <div class="graph-preview">\n      <span class="button action-open-graph white-bg-btn btn-success">\n        '+t("Open graph!")+'\n      </span>\n      \n      <span class="button action-cancel white-bg-btn">\n        '+t("Cancel")+'\n      </span>\n      <h4 class="title"></h4>\n      <div class="screenshot-container action-open-graph" style="position: relative">\n        <iframe class="screenshot" src="embed.html" frameborder=0></iframe>\n        <div class="screenshot-clickjack"></div>\n      </div>\n      <div class="active-arrow"><div class="graphic"></div></div>\n    </div>\n  </div>\n\n  <div id="resources-cover" class="action-close-resources"></div>\n</div>\n';
return b}});
define("template!mygraphs_savedgraph",["underscore"],function(b){return function(b){with(b||{})b=""+('<li class="saved-graph graph-link-container">\n  <div class="graph-link action-preview-graph">\n    <span class="thumb" style="background-image: url('+(b.__oldProperties.thumbURL||b.thumbURL)+')"></span>\n    <span class="title">'+(b.__oldProperties.title||b.title||displayTitle)+'</span>\n    <span class="date variable-date">'+b.displayDate+'</span>\n    <span class="actions">\n      <span class="icon-remove action-removegraph"></span>\n    </span>\n  </div>\n  <div class=\'deleted\'>\n\t  '+t("This graph has been deleted.")+
" <a class='action-cancelremovegraph'>"+t("Undo")+"</a>\n  </div>\n</li>");return b}});define("template!mygraphs_examplegraph",["underscore"],function(b){return function(b){with(b||{})b=""+('<li class="action-preview-graph graph-link-container example-graph">\n  <img src="exampleribbon.png" /><span class="title">'+displayTitle+'</span>\n  <span class="date">example</span>\n</li>');return b}});
define("main/mygraphs_view","require loadcss!css/mygraphs jquery pjs underscore i18n undoredo main/graph main/focus main/toast lib/keys config lib/underscore_view text!data/resources_examples.json template!mygraphs template!mygraphs_savedgraph template!mygraphs_examplegraph main/resize vendor/jquery.html5-placeholder-shim lib/jquery.scrollvisible".split(" "),function(b){b("loadcss!css/mygraphs");var g=b("jquery"),r=b("pjs"),v=b("underscore"),q=b("i18n"),p=b("undoredo"),u=b("main/graph"),a=b("main/focus"),
m=b("main/toast"),c=b("lib/keys");b("config");var f=b("lib/underscore_view"),e=b("text!data/resources_examples.json"),h=b("template!mygraphs"),d=b("template!mygraphs_savedgraph"),k=b("template!mygraphs_examplegraph"),l=b("main/resize");b("vendor/jquery.html5-placeholder-shim");b("lib/jquery.scrollvisible");b=r(f,function(b,d){b.template=h;b.removeTimeouts={};b.init=function(a,b,c,f){d.init.call(this);this.stateController=a;this.graphsController=b;this.userController=c;this.modals=f;this.graphViews=
[];this.hidePreviewOnScroll=!0;a=JSON.parse(e);var g=[];v.each(a,function(a,b){v.each(a.examples,function(b,c){var d=u({hash:b.graphHash,title:a.section+": "+b.title,graphData:JSON.stringify(b.state)});g.push(d)})});this.exampleGraphs=g;this.userController.observe("currentUser",this.renderLayout.bind(this));this.observe("isSpinning",this.renderLayout.bind(this))};b.getTemplateParams=function(){return{}};b.focusSearchBar=function(){this.$("#search-mygraphs").focus()};b.toggleVisible=function(){g("body").hasClass("resources-open")?
this.close():this.open()};b.filterGraphs=function(){var a=this.$("#search-mygraphs").val().toLowerCase();this.$(".new-blank-graph").toggle(0===a.length);var b=0;this.graphViews.forEach(function(c){c.applyFilter(a);c.$().is(":visible")&&b++});this.$(".no-matches").toggle(0===b&&0!==a.length);this.clearCurrentPreview()};b.onSearchChange=function(a){c.lookup(a)===c.ESCAPE&&(this.$("#search-mygraphs").attr("value",""),this.filterGraphs());-1===[c.UP,c.DOWN,c.ESCAPE,c.ENTER].indexOf(c.lookup(a))&&this.filterGraphs()};
b.newBlankGraph=function(){this.clearCurrentPreview();this.graphsController.clearGraph();p.markAsSaved();var a=this;m.show(q.t("New graph created."),function(){a.open()});this.close()};b.startRemoveGraph=function(a){var b=g(a.target).closest(".graph-link-container"),c=this.graphViews[this.getIndexFromTarget(b)];if(c&&c.model){a=v.indexOf(this.graphsController.content,c.model);b.addClass("deleting");var d=this;this.clearRemoveTimeout(a);this.removeTimeouts[a]=setTimeout(function(){b.find("a").addClass("inactive");
b.slideUp("fast");setTimeout(function(){d.graphsController.remove(c.model);d.repositionPreview()},300)},3E3)}};b.clearRemoveTimeout=function(a){this.removeTimeouts[a]&&clearTimeout(this.removeTimeouts[a])};b.repositionPreview=function(){this.currentPreview&&this.positionPreview(this.$(".selected"))};b.cancelRemoveGraph=function(a){a=g(a.target).closest(".graph-link-container");var b=this.graphViews[this.getIndexFromTarget(a)],b=v.indexOf(this.graphsController.content,b.model);-1!==b&&(a.removeClass("deleting"),
this.clearRemoveTimeout(b))};b.didCreateElement=function(){var a=this;this.$preview=this.$(".graph-preview");this.$previewArrow=this.$preview.children(".active-arrow");this.$previewTitle=this.$preview.children(".title");this.$previewScreenshot=this.$preview.children(".screenshot");this.$(".scrollable").on("scroll",function(b){a.hidePreviewOnScroll&&a.clearCurrentPreview()});this.$("#search-mygraphs").on("change keypress keyup keydown copy paste cut",function(b){a.onSearchChange(b)});this.$(".action-login").on("tap",
this.login.bind(this));this.$(".action-createaccount").on("tap",this.createAccount.bind(this));this.$().on("click","a",function(a){a.preventDefault()});this.$().on("tap",".action-newblankgraph",this.newBlankGraph.bind(this));this.$().on("tap",".action-cancel",this.clearCurrentPreview.bind(this));this.$().on("tap",".action-preview-graph",function(b){b=g(b.target).closest(".graph-link-container");b.hasClass("selected")?a.selectPreview(null):a.selectPreview(b)});this.$().on("tap",".action-removegraph",
this.startRemoveGraph.bind(this));this.$().on("tap",".action-cancelremovegraph",this.cancelRemoveGraph.bind(this));this.$(".action-close-resources").on("tapstart",function(b){a.currentPreview?a.clearCurrentPreview():a.close()});this.$(".action-open-graph").on("tap",this.openPreview.bind(this));this.previewIframe=this.$("iframe.screenshot")[0];this.setProperty("isSpinning",!1);this.graphsController.startUpdatingGraphsCallbacks.push(function(){a.removeAllSavedGraphsFromDom();a.setProperty("isSpinning",
!0)});this.graphsController.updateGraphsSuccessCallbacks.push(function(){a.addAllGraphsToDom();a.setProperty("isSpinning",!1)});this.graphsController.updateGraphsErrorCallbacks.push(function(){a.setProperty("isSpinning",!1)});this.graphsController.graphAddedCallbacks.push(function(b){var c=s(a.graphsController.content[b]);a.addGraphToDom(b,c)});this.graphsController.clearCallbacks.push(function(){a.removeAllSavedGraphsFromDom();a.setProperty("isSpinning",!0)});this.graphsController.graphRemovedCallbacks.push(function(b){a.graphViews.splice(b,
1)[0].$().remove()});var b=this.$(".template-list");this.exampleViews=this.exampleGraphs.map(y);this.exampleViews.forEach(function(a){a.appendTo(b)});this.graphViews=this.exampleViews.slice(0);this.renderLayout();this.filterGraphs()};b.getIndexFromTarget=function(a){return 0===a.length?void 0:a.prevAll().length};b.selectPreview=function(a){if(a&&a.length&&!a.hasClass("deleting")){var b=this.getIndexFromTarget(a);this.$(".selected").removeClass("selected");a.addClass("selected");this.setCurrentPreview(this.graphViews[b].model);
this.positionPreview(a)}else this.clearCurrentPreview()};b.createAccount=function(){this.modals.createAccountDialog.show()};b.login=function(){this.modals.loginDialog.show()};b.removeAllSavedGraphsFromDom=function(){this.graphViews.forEach(function(a){a.isSavedGraph&&a.$().remove()});this.graphViews=this.exampleViews.slice(0)};b.addGraphToDom=function(a,b){this.graphViews.splice(a,0,b);0===a?b.prependTo(this.$(".template-list")):b.insertAfter(this.$(".template-list > :nth-child("+a+")"));this.filterGraphs()};
b.addAllGraphsToDom=function(){this.graphViews=this.graphsController.content.map(s).concat(this.graphViews);var a=g(".template-list");this.graphViews.forEach(function(b){b.appendTo(a)});this.filterGraphs()};b.renderLayout=function(){if(this.$()[0]){var a=!!this.userController.currentUser,b=!!this.isSpinning;this.$(".login-reminder").toggle(!a);this.$(".template-spinning").toggle(a&&b)}};b.updateDisplayDates=function(){this.graphsController.content.forEach(function(a){a.updateDisplayDate()})};b.openPreview=
function(){var a=this,b=a.currentPreview;b&&(setTimeout(function(){a.graphsController.loadGraph(b.copy());p.markAsSaved();var c=q.t("Opened 'Untitled Graph'");b.title&&(c=15<b.title.length?q.t("Opened '__graphTitle__...",{graphTitle:b.title.substr(0,15)}):q.t("Opened '__graphTitle__",{graphTitle:b.title}));m.show(c,function(){a.open()})}),a.close())};b.clearCurrentPreview=function(){this.$preview.hide();g("body").removeClass("preview-open");this.currentPreview=null;this.$("li.selected").removeClass("selected")};
b.setCurrentPreview=function(a){this.currentPreview=a;this.$previewTitle.text(a.displayTitle);g("body").addClass("preview-open");this.$preview.show();this.previewIframe.contentWindow.postMessage(JSON.stringify({type:"setState",payload:this.currentPreview.graphData}),"*")};b.getSelected=function(){var a=this.$(".selected:visible");return a.length?a:null};b.selectUp=function(a){var b=this.getSelected();b&&(b=g(b.prevAll(":visible:not(.removed-graph)")[0]),b.length&&(this.selectPreview(b),a.preventDefault()))};
b.selectDown=function(a){var b=this.getSelected();b?(b=g(b.nextAll(":visible:not(.removed-graph)")[0]),b.length&&(this.selectPreview(b),a.preventDefault())):(a.preventDefault(),(a=this.$(".template-list > :not(.removed-graph)").filter(":visible")[0])&&this.selectPreview(g(a)))};b.positionPreview=function(a){var b=a.outerHeight();this.hidePreviewOnScroll=!1;this.$(".scrollable").scrollVisible(a,b,-b);setTimeout(function(){this.hidePreviewOnScroll=!0}.bind(this),0);this.$previewArrow.css("top","");
var c=this.$previewArrow.offset().top-this.$preview.offset().top;a=a.offset().top+b/2;b=this.$preview.outerHeight();b=l.currentScreen.height-5-b;c=a-c;c>b&&(c=b,this.$previewArrow.css("top",a-c));this.$preview.css("top",c)};b.close=function(){this.clearCurrentPreview();g("body").removeClass("resources-open");l.waitForCSSAnimation("#sliding-interior",/transform/);g(document.activeElement).blur();this.$("#search-mygraphs").attr("value","");this.filterGraphs();g(document).off("keydown.mygraphs-view");
this.graphsController.setProperty("lastRemoved",void 0)};b.open=function(){g("body").addClass("resources-open");l.waitForCSSAnimation("#sliding-interior",/transform/);a.takeFocus();this.updateDisplayDates();g.placeholder&&g.placeholder.shim();var b=this;g(document).on("keydown.mygraphs-view",function(a){var d=c.lookup(a);d===c.UP?(b.selectUp(a),a.preventDefault()):d===c.DOWN?(b.selectDown(a),a.preventDefault()):d===c.ENTER?b.openPreview():d===c.ESCAPE&&b.clearCurrentPreview()})}});var y=r(f,function(a,
b){a.template=k;a.isExample=!0;a.init=function(a){b.init.call(this);this.model=a};a.applyFilter=function(a){this.$().toggle(0<=this.model.displayTitle.toLowerCase().indexOf(a))};a.getTemplateParams=function(){return JSON.parse(JSON.stringify(this.model))}}),s=r(f,function(a,b){a.template=d;a.isSavedGraph=!0;a.init=function(a){b.init.call(this);this.model=a;this.model.observe("displayDate",this.updateDisplayDate.bind(this))};a.didCreateElement=function(){this.updateDisplayDate()};a.getTemplateParams=
function(){return JSON.parse(JSON.stringify(this.model))};a.applyFilter=function(a){this.$().toggle(0<=this.model.displayTitle.toLowerCase().indexOf(a))};a.updateDisplayDate=function(){var a=this.model.displayDate;a!==this.lastDisplayDate&&(this.lastDisplayDate=a,this.$(".variable-date").text(a))}});return b});
define("template!subheader",["underscore"],function(b){return function(b){with(b||{})b=""+('<div>\n  <div class=\'left-floaters\'>\n\n      <span class="subheader-btn action-opendrawer tooltip-nw" tooltip="'+t("Open Graph (ctrl+o)")+'">\n        <i class="icon-hamburger"></i>\n      </span>\n\n      <span class=\'divider\'></span>\n\n      '),b+='\n          <span class="title-div">\n            <span class="variable-title tooltip action-savedialog"\n              tooltip="'+t("Save As or Rename (ctrl+shift+s)")+
'"\n            ></span>\n            ',user&&(b+='\n            <span class="action-save">\n              <span class="save-btn tooltip-offset" tooltip="'+t("Save (ctrl+s)")+'">\n                <i class="icon-save"></i> \n              </span>\n              <span class="saving-notice">\n                <img src="spinner.gif" />\n              </span>\n              <span class="save-success"><i class="icon-check"></i>'+t("saved")+'</span>\n              <span class="save-failure"><i class="icon-remove"></i>'+
t("error saving")+"</span>\n            </span>\n            "),b=b+"\n          </span> \n\n      "+('\n  </div>\n\n  <div class=\'right-floaters\'>\n\n    \x3c!-- reverse order, because these all float right --\x3e\n\n    <span \n      class="subheader-btn action-help tooltip"\n      tooltip="'+t("Help")+'"\n    >\n        <i class="icon-question-sign"></i>\n    </span>\n\n    <span class=\'divider\'></span>\n\n    <span \n      class="tooltip subheader-btn action-settings"\n      tooltip="'+t("Window Settings")+
'"\n    >\n        <i class="icon-wrench"></i>\n    </span>\n\n    <span class=\'divider\'></span>\n\n    '),user?(b+="\n\n      ",b+='\n \n        <span class=\'btn-group\'>\n        <span \n          id="print_btn"\n    style="padding:0px 0px 0px 0px!important;margin:-3px 0px 0px 0px"      class=\'tooltip-offset subheader-btn\'\n      onclick="mkscr()"    tooltip="Screenshot"\n        >\n            <i class="icon-save"></i>\n        </span>\n      <span \n          id="print_btn"\n    style="padding:0px 0px 0px 0px!important;margin:-3px 0px 0px 0px"      class=\'tooltip-offset subheader-btn action-print\'\n          tooltip="Print"\n        >\n            <i class="icon-print"></i>\n        </span>\n      </span>\n\n      ',
b+='\n\n      <span class=\'divider\'></span>\n\n      <span id="top_logout" class="gray_btn">\n        <span class="email">\n          '+name+"\n          <i class='icon-caret-down'></i>\n        </span>\n      </span>\n    "):b+='\n      <span id ="login">\n      <a id="create-account" class="btn-green action-createaccount">Create Account</a> or\n      <a id="sign-in" class="action-login">Sign In</a>\n      </span>\n  <span class=\'btn-group\'>\n        <span \n          id="print_btn"\n    style="padding:0px 0px 0px 0px!important;margin:-3px 0px 0px 0px"      class=\'tooltip-offset subheader-btn\'\n      onclick="mkscr()"    tooltip="Screenshot"\n        >\n            <i class="icon-save"></i>\n        </span>\n      <span \n          id="print_btn"\n    style="padding:0px 0px 0px 0px!important;margin:-3px 0px 0px 0px"      class=\'tooltip-offset subheader-btn action-print\'\n          tooltip="Print"\n        >\n            <i class="icon-print"></i>\n        </span>\n      </span>\n\n      ',
b+='\n  </div>\n\n  <div class=\'center\'>\n    <a href="/" target=\'_blank\' class="home-link" title="title">\n      <i class="icon-desmos"></i>\n    </a>\n  </div>\n\n</div>\n';return b}});
define("main/subheader","require jquery lib/underscore_view pjs lib/browser undoredo main/resize main/focus config tipsy main/help main/settings_view_desktop main/account_dropdown main/mygraphs_view template!subheader".split(" "),function(b){var g=b("jquery"),r=b("lib/underscore_view"),v=b("pjs"),q=b("lib/browser"),p=b("undoredo"),u=b("main/resize"),a=b("main/focus");b("config");b("tipsy");var m=b("main/help"),c=b("main/settings_view_desktop"),f=b("main/account_dropdown"),e=b("main/mygraphs_view"),
h=b("template!subheader");return v(r,function(b,k){b.template=h;b.$saveBtn=null;b.init=function(a,b,d,g,h){k.init.call(this);this.userController=a;this.graphsController=b;this.graphController=d;this.modals=h;this.helpView=m(a,b,g,h);this.settingsView=c(d);this.myGraphsView=e(g,b,a,h);this.accountView=f(a,this.helpView,h);this.childViews=[this.helpView,this.settingsView,this.accountView];var p=this;this.childViews.forEach(function(a){a.subheaderView=p})};b.didCreateElement=function(){this.$saveBtn=
this.$(".action-save");this.$().tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".tooltip"});this.$().tipsy({fade:"fast",title:"tooltip",wait:500,offset:7,delegate:".tooltip-offset"});this.childViews.forEach(function(a){a.appendTo("#subheader")});this.myGraphsView.appendTo("#main");var a=this;["w","e","nw"].forEach(function(b){a.$().tipsy({fade:"fast",title:"tooltip",wait:500,gravity:b,delegate:".tooltip-"+b})});this.graphsController.startSavingCallbacks.push(this.saveStart.bind(this));this.graphsController.saveSuccessCallbacks.push(this.saveSuccess.bind(this));
this.graphsController.saveSuccessCallbacks.push(this.graphChanged.bind(this));this.graphsController.saveErrorCallbacks.push(this.saveFailure.bind(this));p.changesCallbacks.push(this.graphChanged.bind(this));this.$(".action-mygraphs, .action-help, .action-settings",this.menuPressed.bind(this));this.settingsView.setupOpenButton(this.$(".action-settings"),"tap");this.helpView.setupOpenButton(this.$(".action-help"),"tap");this.accountView.setupOpenButton(this.$("#top_logout"),"tap");this.$(".action-opendrawer").on("tap",
this.openDrawer.bind(this));this.$(".action-savedialog").on("tap",this.saveDialog.bind(this));this.$saveBtn.on("tap",this.simpleSave.bind(this));this.$(".action-print").on("tap",this.print.bind(this));this.$(".action-login").on("tap",this.login.bind(this));this.$(".action-createaccount").on("tap",this.createAccount.bind(this));this.updateTitle();this.graphsController.observe("currentGraph",function(){a.updateTitle()});this.userController.observe("currentUser",this.rerender.bind(this))};b.graphChanged=
function(){var a=!!p.changedSinceSave();this.$(".save-btn").attr("tooltip",a?"Save Changes (ctrl+s)":"No Unsaved Changes");this.$(".title-div").toggleClass("has-changes",a)};b.openDrawer=function(){this.myGraphsView.toggleVisible()};b.getTemplateParams=function(){var a=this.userController.currentUser?this.userController.currentUser.firstName():null;return{IS_ANDROID:q.IS_ANDROID,user:this.userController.currentUser,name:a}};b.updateTitle=function(){var a=this.graphsController.currentGraph,a=a&&(a.title||
a.__oldProperties.title)?a.title||a.__oldProperties.title:"Untitled Graph";this.$(".variable-title").text(a)};b.simpleSave=function(){this.userController.currentUser&&this.graphsController.currentGraph.hasOwnProperty("title")?this.graphsController.save(this.graphsController.currentGraph):this.saveDialog()};b.handleKeydown=function(a){if(a.ctrlKey||a.metaKey)if(83==a.keyCode)a.preventDefault(),a.shiftKey?this.saveDialog():this.simpleSave();else if(79==a.keyCode){a.preventDefault();this.openDrawer();
var b=this;g("body").hasClass("resources-open")&&setTimeout(function(){b.myGraphsView.focusSearchBar()},1)}};b.saveDialog=function(){this.userController.currentUser?this.modals.saveDialog.show():this.modals.createAccountDialog.showThenSave()};b.saveStart=function(){this.$saveBtn.addClass("saving")};b.saveSuccess=function(){this.$saveBtn.removeClass("saving").addClass("success");p.markAsSaved();var a=this;setTimeout(function(){a.$saveBtn.removeClass("success")},2E3)};b.saveFailure=function(){this.$saveBtn.removeClass("saving").addClass("failure");
var a=this;setTimeout(function(){a.$saveBtn.removeClass("failure")},2E3)};b.print=function(a){window.print()};b.login=function(){this.modals.loginDialog.show()};b.createAccount=function(){this.modals.createAccountDialog.show()};b.menuPressed=function(b){a.takeFocus()};b.popoverHeight=function(){var a=u.fullScreen.height,b=g("#subheader").position().top;return a-b-52}})});
define("template!zoom",["underscore"],function(b){return function(b){with(b||{})b=""+('<div id="zoom-pillbox">\n  <span\n    class="tooltip-e action-zoomin"\n    tooltip="'+t("Zoom In")+'"\n    tipsy-offset="15"\n  >\n    <i class="icon-plus"></i>\n  </span>\n  <span\n    class="tooltip-e action-zoomrestore"\n    tooltip="'+t("Restore Default Zoom")+'"\n    tipsy-offset="15"\n  >\n    <i class="icon-home"></i>\n  </span>\n  <span\n    class="tooltip-e action-zoomout"\n    tooltip="'+t("Zoom Out")+
'"\n    tipsy-offset="15"\n  >\n    <i class="icon-minus"></i>\n  </span>\n</div>');return b}});define("loadcss!css/zoom_pillbox",function(){});
define("main/zoom_view",["require","pjs","lib/underscore_view","template!zoom","loadcss!css/zoom_pillbox"],function(b){var g=b("pjs"),r=b("lib/underscore_view"),v=b("template!zoom");b("loadcss!css/zoom_pillbox");return g(r,function(b,g){b.init=function(b){g.init.call(this);this.template=v;this.graphController=b};b.didCreateElement=function(){this.$(".action-zoomin").on("tap",this.zoomIn.bind(this));this.$(".action-zoomrestore").on("tap",this.zoomRestore.bind(this));this.$(".action-zoomout").on("tap",
this.zoomOut.bind(this))};b.zoomIn=function(){this.graphController.zoom("in")};b.zoomRestore=function(){this.graphController.zoom("default")};b.zoomOut=function(){this.graphController.zoom("out")}})});define("loadcss!css/keypad",function(){});
define("main/cookie",[],function(){return{getCookie:function(b){document.cookie=b+"= ;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT";b=encodeURIComponent(b);var g,r,v,q=document.cookie.split(";");for(g=0;g<q.length;g++)if(r=q[g].substr(0,q[g].indexOf("=")),v=q[g].substr(q[g].indexOf("=")+1),r=r.replace(/^\s+|\s+$/g,""),r==b)return decodeURIComponent(v)},setCookie:function(b,g,r){var v=new Date;v.setDate(v.getDate()+(r||30));document.cookie=encodeURIComponent(b)+"="+encodeURIComponent(g)+"; expires="+
v.toUTCString()+"; path=/"}}});
define("template!keypad",["underscore"],function(b){return function(g){var r="";with(g||{})r+="<div class='desmos-keypad'>\n  <div class='keys-container retracted'>\n    <div class='keys-background do-not-blur'>\n      <div class='keys'>\n\n        <div class='functions-popover popover top' popover=\"true\">\n          <div class='popover-interior'>\n            <div class='header'>\n              <table><tr>\n              ",b.each(popups.functionsPopup,function(b,g){r+='\n                <td>\n                  <span key="'+
b.tab.id+'" class="heading tappable btn btn-inverse'+("trig"==g?" selected":"")+'">\n                    '+b.tab.html+"\n                  </span>\n                </td>\n              "}),r+="\n              </tr></table>\n            </div>\n\n            ",b.each(popups.functionsPopup,function(g,q){r+="\n              <table class='interior-buttons' section='"+q+"'>\n                ";"trig"==q&&(r+="\n                  <tr class='section-headings'>\n                    <td>trig</td>\n                    <td>inverse</td>\n                    <td>hyperb</td>\n                  </tr>\n                ");
r+="\n                <tr>\n\n                ";var p=0;b.each(g.funcs,function(b){r+="\n                  "+(0==p%3?"</tr><tr>":"")+"\n                  ";p++;r+='\n                  <td>\n                    <span\n                      class="option btn tappable'+(b.aClass?" "+b.aClass:"")+" "+b.id+'-key"\n                      key="'+b.id+'"\n                    >\n                      '+b.html+"\n                    </span>\n                  </td>\n              "});r+="\n              </tr></table>\n            "}),
r+="\n          </div>\n          <div class='arrow'></div>\n        </div>\n\n        <canvas class=\"handwriting-area\"></canvas>\n\n        ",b.each(buttons,function(g,q){r+='\n         <div class="'+q+'">\n           ';b.each(g,function(g){r+='\n             <div class="row">\n               ';b.each(g.keys,function(b){r+='<div\n                   class="cell '+(b.cellClass?b.cellClass:"")+'"\n                 >\n                   ';b.html&&(r+='\n                     <a\n                       class="'+
(b.aClass?b.aClass:"")+" "+b.id+'-key"\n                       key="'+b.id+'"\n                     >\n                       '+b.html+"\n                     </a>\n                   ");r+="\n                 </div>"});r+="\n               <div style='clear:both'></div>\n             </div>\n           "});r+="\n         </div>\n        "}),r+="\n        <div style='clear:both'></div>\n      </div>\n\n      ",userMinimizable&&(r+="\n      <div class='minimize-keypad'>\n        <i class='icon-keyboard minimize-keyboard-icon'></i>\n        <i class='icon-caret-down'></i>\n      </div>\n      "),
r+="\n    </div>\n  </div>\n  \n  ",userMinimizable&&(r+='\n    <div class="show-keypad" class="do-not-blur">\n      <i class=\'icon-keyboard maximize-keyboard-icon\'></i>\n      <i class="icon-caret-up do-not-blur"></i>\n    </div>\n  '),r+="\n  \n</div>\n";return r}});define("text!data/keypad_keys.json",[],function(){return'{\n"trigFuncs":        ["sin","cos","tan","csc","sec","cot"],\n\n"oneArgFuncs":      ["ceil","floor","round","abs","ln","log","exp"],\n\n"twoArgFuncs":      ["min","max","lcm","gcd","mod", "nCr", "nPr"],\n\n"tabs":             ["trig","calc","misc"],\n\n"staticKeys": {\n  "unknown":          {"display":{"html":"?"},\n                      "action":{"cmd":"?"}},\n  "pi":               {"display":{"html":"&pi;"},\n                      "action":{"cmd":"\\\\pi"}},\n  "leftparen":        {"display":{"html":"("},\n                      "action":{"cmd":"("}},\n  "rightparen":       {"display":{"html":")"},\n                      "action":{"cmd":")"}},\n  "sqrt":             {"display":{"html":"&radic;"},\n                      "action":{"cmd":"\\\\sqrt"}},\n  "cuberoot":         {"display":{"html":"<sup>3</sup>&radic;", "noMQ": true},\n                      "action":{"custom":"cuberoot"}},\n  "lt":               {"display":{"html":"&lt;"},\n                      "action":{"cmd":"<"}},\n  "gt":               {"display":{"html":"&gt;"},\n                      "action":{"cmd":">"}},\n  "le":               {"display":{"html":"&le;"},\n                      "action":{"cmd":"\\\\le"}},\n  "ge":               {"display":{"html":"&ge;"},\n                      "action":{"cmd":"\\\\ge"}},\n\n  "squared":          {"display":{"aClass":"exponent", "html":"a^2"},\n                      "action":{"custom":"squared"}},\n\n  "exponent":         {"display":{"aClass":"exponent", "html":"a^b"},\n                      "action":{"cmd":"^"}},\n  "subscript":        {"display":{"html":"a_b"},\n                      "action":{"cmd":"_"}},\n  "fact":             {"display":{"html":"x!"},\n                      "action":{"cmd":"!"}},\n  "theta":            {"display":{"html":"&theta;"},\n                      "action":{"cmd":"\\\\theta"}},\n  "leftbrace":        {"display":{"html":"{", "noMQ":true},\n                      "action":{"cmd":"{"}},\n  "rightbrace":       {"display":{"html":"}", "noMQ":true},\n                      "action":{"cmd":"}"}},\n  "colon":            {"display":{"html":":"},\n                      "action":{"cmd":":"}},\n  "pipes":            {"display":{"html":"|a|"},\n                      "action":{"cmd":"|"}},\n  "comma":            {"display":{"html":","},\n                      "action":{"cmd":","}},\n\n  "times":            {"display":{"html":"&times;"},\n                      "action":{"cmd":"*"}},\n  "plus":             {"display":{"html":"+"},\n                      "action":{"cmd":"+"}},\n  "divide":           {"display":{"html":"&divide;"},\n                      "action":{"cmd":"/"}},\n  "minus":            {"display":{"html":"&ndash;"},\n                      "action":{"cmd":"-"}},\n  "equals":           {"display":{"html":"="},\n                      "action":{"cmd":"="}},\n  "decimal":          {"display":{"html":"."},\n                      "action":{"cmd":"."}},\n\n  "backspace":        {"display":{"aClass":"always-enabled", \n                                "html":"<span class=\\"backspace-img\\"></span><i class=\\"icon-delete\\"></i>"\n                               },\n                      "action":{"key":"Backspace"}},\n  "enter":            {"display":{"aClass":"always-enabled", "html":"ent<span>er</span>"},\n                      "action":{"key":"Enter"}},\n\n  "narrowToggleLetters":    {"display":{"aClass":"always-enabled toggle-btn", "html":"A B C"},\n                      "action":{"changeLayout": "letters"}},\n  "toggleLetters":    {"display":{"aClass":"always-enabled toggle-btn", "html":"A B C", "colspan":2},\n                      "action":{"changeLayout": "letters"}},\n  "toggleHandwriting":{"display":{"aClass":"always-enabled toggle-btn", "html":"<img src=\\"assets/img/handwriting.png\\"/>"},\n                      "action":{"changeLayout": "handwriting"}},\n  "toggleNumbers":    {"display":{"aClass":"always-enabled toggle-btn", \n                                "html":"1<span> </span>2<span> </span>3", \n                                "colspan":1\n                               },\n                      "action":{"changeLayout":"mainNumbers"}},\n\n  "popupFunctions":  {"display":{"aClass":"always-enabled toggle-btn", "html":"functions", "colspan":2},\n                      "action":{"popup": "functions"}},\n\n  "blank":            {"display":{},\n                      "action":{}},\n\n  "halfBlank":        {"display":{"colspan":0.5},\n                      "action":{}},\n\n  "left":             {"display":{"aClass":"always-enabled", "html":"&larr;"},\n                      "action":{"key":"Left"}},\n  "up":               {"display":{"aClass":"always-enabled", "html":"&uarr;"},\n                      "action":{"key":"Up"}},\n  "right":            {"display":{"aClass":"always-enabled", "html":"&rarr;"},\n                      "action":{"key":"Right"}},\n  "down":             {"display":{"aClass":"always-enabled", "html":"&darr;"},\n                      "action":{"key":"Down"}},\n\n  "toggleAltLeft":    {"display":{"aClass":"always-enabled toggle-btn", "html":"more", "colspan":2},\n                      "action":{"changeLayout": "altNumbers"}},\n  "toggleMainLeft":   {"display":{"aClass":"always-enabled toggle-btn active", "html":"more", "colspan":2},\n                      "action":{"changeLayout": "mainNumbers"}},\n  "loga":             {"display":{"html":"log_a"},\n                      "action":{"custom":"loga"}},\n  "ddx":              {"display":{"html":"d/dx"},\n                      "action":{"custom":"d/dx"}},\n  "sum":              {"display":{"html":"\\\\sum"},\n                      "action":{"cmd":"\\\\sum"}},\n  "prod":             {"display":{"html":"\\\\prod"},\n                      "action":{"cmd":"\\\\prod"}}\n  }\n}\n'});
define("main/keypad_keys",["require","jquery","underscore","mathquill","text!data/keypad_keys.json"],function(b){var g=b("jquery"),r=b("underscore");b("mathquill");b=JSON.parse(b("text!data/keypad_keys.json"));var v=b.staticKeys;r.each(b.tabs,function(b){v[b+"Tab"]={display:{html:b},action:{tab:b}}});r.each(b.oneArgFuncs,function(b){v[b]={display:{html:b},action:{func:b}}});r.each(b.twoArgFuncs,function(b){v[b]={display:{html:b},action:{func:b,args:2}}});r.each(b.trigFuncs,function(b){r.each([b,"arc"+
b,b+"h"],function(b){v[b]={display:{html:b},action:{func:b}}})});for(b=0;26>b;b++){var q=String.fromCharCode(97+b);v[q]={display:{html:q},action:{cmd:q}}}for(b=0;10>b;b++)q=String.fromCharCode(48+b),v[q]={display:{html:q},action:{cmd:q}};r.each(v,function(b,q){var a=b.display,m=b.action;a.id=q;"cellClass"in a||(a.cellClass="");"aClass"in a||(a.aClass="");if(a.colspan)switch(a.cellClass&&(a.cellClass+=" "),a.colspan){case 0.5:a.cellClass+="halfwide";break;case 1.5:a.cellClass+="oneandhalfwide";break;
case 2:a.cellClass+="twowide"}a.html&&(a.aClass=a.aClass?a.aClass+" key":"key",a.aClass="tapstart"==a.actionOn?a.aClass+" tapstartable":a.aClass+" tappable");m.tab||m.key||m.popup||m.changeLayout||a.noMQ||!a.html||(a.mathquill=!0,a.html=g("<span>"+a.html+"</span>").mathquill().mathquill("html"),a.aClass+=" mathquill-rendered-math")});return v});
define("main/keypad_view","require loadcss!css/keypad jquery underscore lib/browser main/resize main/cookie template!keypad lib/underscore_view config pjs main/cookie main/keypad_keys".split(" "),function(b){b("loadcss!css/keypad");var g=b("jquery"),r=b("underscore"),v=b("lib/browser"),q=b("main/resize"),p=b("main/cookie"),u=b("template!keypad"),a=b("lib/underscore_view"),m=b("config"),c=b("pjs");b("main/cookie");var f=b("main/keypad_keys");return c(a,function(a,b){a.template=u;a.isOpen=!1;a.userMinimized=
!1;a.init=function(a){this.keys=f;this.expressionsView=a;this.setupKeypad();this.setLayout("mainNumbers")};a.didCreateElement=function(){var a=this;a.setLayout(a.layout);a.$hideBtn=a.$(".minimize-keypad");a.$showBtn=a.$(".show-keypad");a.$funcPopover=a.$(".functions-popover");a.$container=a.$(".keys-container");a.$keys=a.$(".keys");a.$funcBtn=a.$(".popupFunctions-key");a.setTab("trig");a.$().on("tap",".tappable",function(b){b=g(b.target).closest(".tappable");a.buttonClicked(b)});a.$().on("tapstart",
".tapstartable",function(b){b=g(b.target).closest(".tapstartable");a.buttonClicked(b)});a.expressionsView.observe("needFakeKeypad",function(){a.requestSetIsOpen(a.expressionsView.needFakeKeypad)});a.expressionsView.observe("editDisabled",function(){a.setKeysDisabled(a.expressionsView.editDisabled)});a.$showBtn.show();a.$hideBtn.on("tap",function(){a.userMinimized=!0;p.setCookie("keypadMinimized","true");a._hideKeypad()});a.$showBtn.on("tap",function(){a.userMinimized=!1;p.setCookie("keypadMinimized",
"false");a._showKeypad();var b=a.expressionsView.getSelected();if(b&&b.isExpression)a.expressionsView.getItemView(b.id).addFocus();else if(!(b&&b.isTable&&a.expressionsView.itemFocused)){for(b=a.expressionsView.getFirstVisibleItem();b&&!b.isExpression;)b=a.expressionsView.getItemByIndex(b.index+1);b?a.expressionsView.getItemView(b.id).addFocus():a.expressionsView.appendBlankExpression()}});a.userMinimized="true"===p.getCookie("keypadMinimized")};a._hideKeypad=function(){clearTimeout(this.__showHideTimeout);
this.isOpen=!1;this.$container.addClass("retracted");v.IS_IE8||v.IS_IE9?this.$showBtn.show():this.$showBtn.fadeIn();this.hidePopups();q.trigger()};a._showKeypad=function(){clearTimeout(this.__showHideTimeout);"letters"!==this.layout&&"altNumbers"!==this.layout||this.setLayout("mainNumbers");this.$showBtn.hide();this.isOpen=!0;var a=this;this.__showHideTimeout=setTimeout(function(){a.$container.removeClass("retracted");q.waitForCSSAnimation(a.$container,/transform/)})};a.requestSetIsOpen=function(a){(!this.userMinimized||
this.isOpen)&&a!==this.isOpen&&(a?this._showKeypad():this._hideKeypad())};a.setKeysDisabled=function(a){this.$keys.toggleClass("keys-disabled",!!a)};a.getButton=function(a){this.keys[a]||(a="unknown");return this.keys[a].display};a.buttonArray=function(a){return r.map(a.split(" "),this.getButton,this)};a.setupKeypad=function(){this.buttons={mainNumbersLeft:[{keys:this.buttonArray("x y squared")},{keys:this.buttonArray("lt gt exponent")},{keys:this.buttonArray("leftparen rightparen comma")},{keys:this.buttonArray("toggleAltLeft sqrt")}],
altNumbersLeft:[{keys:this.buttonArray("r theta pi")},{keys:this.buttonArray("le ge pipes")},{keys:this.buttonArray("leftbrace rightbrace colon")},{keys:this.buttonArray("toggleMainLeft cuberoot")}],numbersMiddle:[{keys:this.buttonArray("7 8 9 divide")},{keys:this.buttonArray("4 5 6 times")},{keys:this.buttonArray("1 2 3 minus")},{keys:this.buttonArray("0 decimal equals plus")}],numbersRight:[{keys:this.buttonArray("popupFunctions backspace")},{keys:this.buttonArray("toggleLetters enter")},{keys:this.buttonArray("blank up blank")},
{keys:this.buttonArray("left down right")}],letters:[{keys:this.buttonArray("q w e r t y u i o p backspace")},{keys:this.buttonArray("halfBlank a s d f g h j k l halfBlank toggleNumbers")},{keys:this.buttonArray("blank z x c v b n m comma blank enter")},{keys:this.buttonArray("halfBlank pi subscript leftparen rightparen plus minus times divide equals blank halfBlank")}]};this.popups={functionsPopup:{trig:{tab:this.getButton("trigTab"),funcs:this.buttonArray("sin arcsin sinh cos arccos cosh tan arctan tanh csc arccsc csch sec arcsec sech cot arccot coth")},
calc:{tab:this.getButton("calcTab"),funcs:this.buttonArray("exp ln log loga ddx sum prod fact e")},misc:{tab:this.getButton("miscTab"),funcs:this.buttonArray("ceil floor round abs min max lcm gcd mod nCr nPr fact")}}}};a.getTemplateParams=function(){return{buttons:this.buttons,popups:this.popups,userMinimizable:!m.get("tablet")}};a.height=function(){return this.isOpen?this.$container.height():0};a.setLayout=function(a){this.layout=a;this.$().removeClass("layout-letters layout-altNumbers layout-mainNumbers layout-handwriting").addClass("layout-"+
a)};a.setTab=function(a){var b=this;r.each(["trig","calc","misc"],function(a){b.$("[key="+a+"Tab]").removeClass("selected");b.$("[section="+a+"]").hide()});this.$("[key="+a+"Tab]").addClass("selected");this.$("[section="+a+"]").show()};a.hidePopups=function(){this.$funcBtn.removeClass("active");this.$funcPopover.hide()};a.setPopup=function(a){"functions"===a&&(525>g(window).height()?this.$funcPopover.removeClass("top").addClass("left"):this.$funcPopover.removeClass("left").addClass("top"),this.$funcBtn.toggleClass("active"),
this.$funcPopover.toggle())};a.resize=function(){};a.buttonClicked=function(a){a=this.$(a).attr("key");a=this.keys[a].action;if(a.changeLayout)this.hidePopups(),this.setLayout(a.changeLayout),"handwriting"===a.changeLayout&&this.resize();else if(a.tab)this.setTab(a.tab);else if(a.popup)this.setPopup(a.popup);else{"altNumbers"===this.layout&&this.setLayout("mainNumbers");this.hidePopups();var b=this.expressionsView.getActiveMathquill();if(b.length)try{if(a.key)b.mathquill("onKey",a.key);else if(a.cmd)b.mathquill("cmd",
a.cmd);else if(a.func){var c="\\left( \\right)";2===a.args&&(c="\\left({},{}\\right)");b.mathquill("write",a.func+c);b.mathquill("onKey","Left");2===a.args&&b.mathquill("onKey","Left")}else if(a.custom)switch(a.custom){case "loga":b.mathquill("write","log_{}\\left( \\right)");b.mathquill("onKey","Left");b.mathquill("onKey","Left");b.mathquill("onKey","Left");break;case "cuberoot":b.mathquill("write","\\sqrt[3]{}");b.mathquill("onKey","Left");break;case "squared":b.mathquill("cmd","^");b.mathquill("cmd",
"2");b.mathquill("onKey","Right");break;case "cubed":b.mathquill("write","^{3}");break;case "d/dx":b.mathquill("write","\\frac{d}{dx}")}b.trigger("render")}catch(e){}else(b=this.expressionsView.getSelected())&&b.isTable&&b.selectedCell&&this.expressionsView.getItemView(b.id).doKeyAction(a.key)}}})});define("main/keypad_view_desktop",["require","pjs","./keypad_view"],function(b){var g=b("pjs");b=b("./keypad_view");return g(b,function(b,g){})});
define("main/state_controller",["require","pjs","undoredo","expressions/colors"],function(b){var g=b("pjs"),r=b("undoredo"),v=b("expressions/colors");return g(function(b){var g={graph:{viewport:{xmin:-10,xmax:10,ymin:-10,ymax:10},showLabels:!0,showGrid:!0,showAxes:!0,squareAxes:!0,labelXMode:"",labelYMode:""},expressions:{list:[{id:1,latex:"",selected:!0}]}};b.init=function(b,a,g,c){this.graphController=b;this.expressionsModel=a;this.graphSettings=g;this.isFirstSetState=!0;this.expressionsView=c};
b.getState=function(b){var a={graph:this.graphController.getState(),expressions:this.expressionsModel.getState()};return"escaped"==b?escape(JSON.stringify(a)):a};b.setState=function(b,a){this.graphSettings.setProperty("POIs",!1);this.expressionsView.setSelected(null);if(this.isFirstSetState||null!==b||!this.expressionsModel.isEmpty()){var m=this,c=function(a,b){v.reset();a||(a=g);if("escaped"===b||"string"===typeof a)try{a=JSON.parse(unescape(a))}catch(c){alert("invalid state!");return}"expressions"in
a&&m.expressionsModel.setState({list:[]});m.graphController.manager.clear();m.graphController.manager.redrawGraphsLayer();"graph"in a&&("degreeMode"in a.graph||(a.graph.degreeMode=!1),m.graphController.setState(a.graph));"expressions"in a&&m.expressionsModel.setState(a.expressions)};if(this.isFirstSetState)c(b,a),this.isFirstSetState=!1;else{var f=this.getState();r.addTransaction({type:r.CAUSE_OF_CHANGE,undo:function(){c(f)},redo:function(){c(b,a)},ensureChangeOccured:function(){var a=JSON.stringify(m.getState());
return JSON.stringify(f)===a}})}}};b.setBlank=function(){this.setState(g);r.markAsSaved()}})});define("lib/set_list_height",["require","main/resize"],function(b){var g=b("main/resize");return{init:function(b,v){g.register(function(){var g=v.height();b.setBottom(g);b.ensureActiveChildIsVisible()})}}});
define("main/propagate_selection",["require"],function(b){return function(b,r,v){var q,p,u=function(){var a=b.getSelected();a!==p&&(p&&p.unobserve("selectedCell.calcjs"),a&&a.observe("selectedCell.calcjs",u),p=a);var m=a?a.id:void 0;a&&a.isTable&&(m=(m=a.selectedCell)?(a=a.columns[m.column])?a.id:void 0:void 0);m!==q&&(r.select(m),a=r.getOpenIntersectionIds(),"undefined"!==typeof m&&(a[m]=!0),v.setIntersectIds(a),v.updateIntersections(m));q=m};b.observe("selectedItem",u)}});
define("text!data/betchacant_graphs.json",[],function(){return'[{\n  "title": "Peg Game",\n  "graphHash": "iqinawqpdc",\n  "state": {"graph":{"viewport":{"xmin":-12.288,"ymin":-13.657,"xmax":13.025,"ymax":6.374},"showLabels":false,"degreeMode":false,"showGrid":false,"polarMode":false,"showAxes":false,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":99,"text":"Slide or animate T:"},{"id":19,"latex":"T=0","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#000000","sliderMin":0,"sliderMax":12},{"id":45,"text":"Number of peg rows"},{"id":1,"latex":"N=4","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#C0504D","sliderMin":1,"sliderMax":10,"sliderInterval":1},{"id":47,"text":"Depth of capture coumns"},{"id":36,"latex":"M=5.81","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":-10,"sliderMax":10},{"id":51,"text":"Pins"},{"id":79,"latex":"\\\\left(2P_i-P_j+.1\\\\sin\\\\left(\\\\tau tN^2\\\\right)\\\\left\\\\{P_i\\\\le P_j\\\\right\\\\},-1-w-P_j+.1\\\\cos\\\\left(\\\\tau tN^2\\\\right)\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"always","color":"#9BBB59"},{"id":84,"latex":"P_i=\\\\mod\\\\left(\\\\floor\\\\left(N^2t\\\\right),N\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#C0504D"},{"id":85,"latex":"P_j=\\\\floor\\\\left(Nt\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":77,"text":"Falling balls"},{"id":78,"latex":"\\\\left(\\\\left\\\\{r\\\\floor\\\\left(t\\\\right)>T-1:X\\\\left(\\\\floor\\\\left(t\\\\right),T\\\\right)+w\\\\sin\\\\left(\\\\tau t\\\\right)\\\\right\\\\},\\\\left\\\\{r\\\\floor\\\\left(t\\\\right)>T-1:Y_f\\\\left(\\\\floor\\\\left(t\\\\right),T\\\\right)+w\\\\cos\\\\left(\\\\tau t\\\\right)\\\\right\\\\}\\\\right)","domain":{"min":0,"max":15},"userRequestedGraphing":"always","color":"#4F81BD"},{"id":53,"text":"Dropped balls"},{"id":90,"latex":"\\\\left(\\\\left\\\\{r\\\\floor\\\\left(t\\\\right)<T-1:X\\\\left(\\\\floor\\\\left(t\\\\right),T\\\\right)+w\\\\sin\\\\left(\\\\tau t\\\\right)\\\\right\\\\},\\\\left\\\\{r\\\\floor\\\\left(t\\\\right)<T-1:Y\\\\left(\\\\floor\\\\left(t\\\\right),T\\\\right)+w\\\\cos\\\\left(\\\\tau t\\\\right)\\\\right\\\\}\\\\right)","domain":{"min":0,"max":15},"userRequestedGraphing":"always","color":"#4F81BD"},{"id":96,"text":"Collection columns"},{"id":97,"latex":"\\\\left(\\\\floor\\\\left(\\\\left(N+1\\\\right)t\\\\right)+.5,-N-\\\\frac{M}{2}-\\\\frac{M}{2}\\\\mod\\\\left(\\\\left(N+1\\\\right)t,1\\\\right)-w\\\\right)","domain":{"min":-1,"max":1},"userRequestedGraphing":"never","color":"#C0504D"},{"id":58,"text":"Direction ball i goes at peg layer j"},{"id":2,"latex":"f\\\\left(i,j\\\\right)=2\\\\floor\\\\left(\\\\mod\\\\left(\\\\frac{1000\\\\sin\\\\left(ai\\\\right)}{2^j},1\\\\right)-.499\\\\right)+1","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#4F81BD"},{"id":89,"latex":"a=2.49","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#000000","sliderMin":-10,"sliderMax":10},{"id":60,"text":"End position of ball i"},{"id":3,"latex":"p\\\\left(i\\\\right)=\\\\sum_{n=1}^Nf\\\\left(i,n\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#9BBB59"},{"id":62,"text":"Horizontal position of ball i at height d"},{"id":4,"latex":"h\\\\left(i,d\\\\right)=\\\\sum_{n=1}^Nf\\\\left(i,n\\\\right)g\\\\left(-d-n\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#8064A2"},{"id":12,"latex":"g\\\\left(x\\\\right)=\\\\frac{\\\\left(\\\\tanh\\\\left(5x\\\\right)+1\\\\right)}{2}","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#F79646"},{"id":65,"text":"Height of ball i at time x"},{"id":66,"latex":"Y\\\\left(i,x\\\\right)=\\\\left\\\\{x<ri:-\\\\frac{2w}{r}\\\\left(x-ri\\\\right),\\\\max\\\\left(N\\\\left(ri-x\\\\right),-\\\\left(N+M\\\\right)+2wc\\\\left(i\\\\right)\\\\right)\\\\right\\\\}","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#F79646"},{"id":92,"latex":"Y_f\\\\left(i,x\\\\right)=\\\\left\\\\{x<ri:-\\\\frac{2w}{r}\\\\left(x-ri\\\\right),N\\\\left(ri-x\\\\right)\\\\right\\\\}","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#9BBB59"},{"id":88,"latex":"r=\\\\frac{1}{\\\\pi}","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#F79646"},{"id":86,"latex":"Y\\\\left(1,x\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#9BBB59"},{"id":87,"latex":"Y\\\\left(2,x\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#8064A2"},{"id":68,"text":"Horizontal position of ball i at time x"},{"id":69,"latex":"X\\\\left(i,x\\\\right)=h\\\\left(i,Y\\\\left(i,x\\\\right)\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#C0504D"},{"id":80,"latex":"\\\\left(X\\\\left(1,t\\\\right),Y\\\\left(1,t\\\\right)\\\\right)","domain":{"min":0,"max":20},"userRequestedGraphing":"never","color":"#8064A2"},{"id":72,"text":"Height of ball in resting column"},{"id":22,"latex":"c\\\\left(x\\\\right)=\\\\sum_{n=0}^{x-1}\\\\left\\\\{p\\\\left(n\\\\right)=p\\\\left(x\\\\right):1,0\\\\right\\\\}","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#9BBB59"},{"id":74,"latex":"w=0.3","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#F79646","sliderMin":0.1,"sliderMax":0.4}]}}\n},\n{\n  "title": "Electric Field Lines",\n  "graphHash": "op7ngl243e",\n  "state": {"graph":{"viewport":{"xmin":-11.25,"ymin":-8.9,"xmax":11.25,"ymax":8.903},"showLabels":true,"degreeMode":false,"showGrid":true,"polarMode":false,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":32,"text":"Electric field lines generated by two point charges:"},{"id":30,"latex":"\\\\left(x_1,y_1\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#8064A2"},{"id":31,"latex":"\\\\left(x_2,y_2\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646"},{"id":101,"text":"This is the position and charge of the purple point charge"},{"id":24,"latex":"q_1=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":-10,"sliderMax":10},{"id":26,"latex":"x_1=2","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000","sliderMin":-10,"sliderMax":10},{"id":27,"latex":"y_1=0","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD","sliderMin":-10,"sliderMax":10},{"id":103,"text":"This is the position and charge of the orange point charge "},{"id":25,"latex":"q_2=-1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646","sliderMin":-10,"sliderMax":10},{"id":28,"latex":"x_2=-2","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#9BBB59","sliderMin":-10,"sliderMax":10},{"id":29,"latex":"y_2=0","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D","sliderMin":-10,"sliderMax":10},{"id":105,"text":"The rest of this calculates and draws the field lines"},{"id":6,"latex":"f_x\\\\left(x,y\\\\right)=\\\\frac{q_1\\\\left(x-x_1\\\\right)}{\\\\left(\\\\left(x-x_1\\\\right)^2+\\\\left(y-y_1\\\\right)^2\\\\right)^{\\\\frac{3}{2}}}+\\\\frac{q_2\\\\left(x-x_2\\\\right)}{\\\\left(\\\\left(x-x_2\\\\right)^2+\\\\left(y-y_2\\\\right)^2\\\\right)^{\\\\frac{3}{2}}}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#9BBB59"},{"id":7,"latex":"f_y\\\\left(x,y\\\\right)=\\\\frac{q_1\\\\left(y-y_1\\\\right)}{\\\\left(\\\\left(x-x_1\\\\right)^2+\\\\left(y-y_1\\\\right)^2\\\\right)^{\\\\frac{3}{2}}}+\\\\frac{q_2\\\\left(y-y_2\\\\right)}{\\\\left(\\\\left(x-x_2\\\\right)^2+\\\\left(y-y_2\\\\right)^2\\\\right)^{\\\\frac{3}{2}}}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D"},{"id":16,"latex":"m=0.686","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646","sliderMin":0,"sliderMax":1,"sliderInterval":""},{"id":2,"latex":"n\\\\space=\\\\space10","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":4,"sliderMax":20,"sliderInterval":1},{"id":9,"latex":"a\\\\space=\\\\space0","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646","sliderMin":-10,"sliderMax":10},{"id":10,"latex":"b\\\\space=\\\\space0","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000","sliderMin":-10,"sliderMax":10},{"id":3,"latex":"x_o=\\\\mod\\\\left(\\\\floor\\\\left(n^2t\\\\right),n\\\\right)-\\\\frac{n-1}{2}+a","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#F79646"},{"id":4,"latex":"y_o=\\\\frac{\\\\left(n^2t-\\\\mod\\\\left(n^2t,n\\\\right)\\\\right)}{n}-\\\\frac{n-1}{2}+b","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":17,"latex":"x_s=\\\\frac{f_x\\\\left(x_o,y_o\\\\right)}{\\\\sqrt{\\\\left(f_x\\\\left(x_o,y_o\\\\right)\\\\right)^2+\\\\left(f_y\\\\left(x_o,y_o\\\\right)\\\\right)^2}}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":18,"latex":"y_s=\\\\frac{f_y\\\\left(x_o,y_o\\\\right)}{\\\\sqrt{\\\\left(f_x\\\\left(x_o,y_o\\\\right)\\\\right)^2+\\\\left(f_y\\\\left(x_o,y_o\\\\right)\\\\right)^2}}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":19,"latex":"t_m=\\\\mod\\\\left(n^2t,1\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59"},{"id":23,"latex":"o=2.5","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000","sliderMin":0,"sliderMax":3.14},{"id":21,"latex":"x_p=\\\\left\\\\{0<t_m<.6:x_st_m,\\\\space.6<t_m<.8:.6x_s+\\\\cos\\\\left(o\\\\right)x_s\\\\left(t_m-.6\\\\right)-\\\\sin\\\\left(o\\\\right)y_s\\\\left(t_m-.6\\\\right),\\\\space.8<t_m<1:.6x_s+\\\\sin\\\\left(o\\\\right)y_s\\\\left(t_m-.8\\\\right)+\\\\cos\\\\left(o\\\\right)x_s\\\\left(t_m-.8\\\\right)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#8064A2"},{"id":22,"latex":"y_p=\\\\left\\\\{0<t_m<.6:y_st_m,\\\\space.6<t_m<.8:.6y_s+\\\\sin\\\\left(o\\\\right)x_s\\\\left(t_m-.6\\\\right)+\\\\cos\\\\left(o\\\\right)y_s\\\\left(t_m-.6\\\\right),\\\\space.8<t_m<1:.6y_s-\\\\sin\\\\left(o\\\\right)x_s\\\\left(t_m-.8\\\\right)+\\\\cos\\\\left(o\\\\right)y_s\\\\left(t_m-.8\\\\right)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#F79646"},{"id":107,"text":"Finally: we draw the field lines"},{"id":20,"latex":"\\\\left[x_o+mx_p-.3mx_s,y_o-.3my_s+my_p\\\\right]","domain":{"min":0,"max":1},"userRequestedGraphing":"always","color":"#4F81BD"}]}}\n},\n{\n  "title": "Pac-man",\n  "graphHash": "kmnnpjxs9s",\n  "state": {"graph":{"viewport":{"xmin":-4.292,"ymin":-5.249,"xmax":9.755,"ymax":5.865},"showLabels":false,"degreeMode":false,"showGrid":false,"polarMode":false,"showAxes":false,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":2,"latex":"a=8.2","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":0,"sliderMax":19.978000000000065},{"id":1,"latex":"r\\\\le\\\\left\\\\{\\\\cos\\\\left(\\\\theta-h\\\\left(a\\\\right)\\\\right)<.8+.2\\\\sin2\\\\pi a\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646"},{"id":3,"latex":"\\\\left[f\\\\left(n\\\\right)-f\\\\left(a\\\\right)+x_c,g\\\\left(n\\\\right)-g\\\\left(a\\\\right)+y_c\\\\right]","domain":{"min":0,"max":20},"userRequestedGraphing":"default","color":"#C0504D"},{"id":4,"latex":"f_1\\\\left(x\\\\right)=\\\\left\\\\{x<3:x,x<7:3,x-3\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":5,"latex":"g_1\\\\left(x\\\\right)=\\\\left\\\\{x<3:0,x<7:x-3,3\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":13,"latex":"f\\\\left(x\\\\right)=x","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#C0504D"},{"id":14,"latex":"g\\\\left(x\\\\right)=\\\\sin x","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#8064A2"},{"id":11,"latex":"h\\\\left(x\\\\right)=\\\\arctan\\\\left(\\\\frac{\\\\frac{d}{dx}g\\\\left(x\\\\right)}{\\\\frac{d}{dx}f\\\\left(x\\\\right)}\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":8,"latex":"x_c=.1\\\\sin\\\\left(2\\\\pi\\\\mod\\\\left(t,1\\\\right)\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#8064A2"},{"id":10,"latex":"y_c=.1\\\\cos\\\\left(2\\\\pi\\\\mod\\\\left(t,1\\\\right)\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":7,"latex":"n=\\\\floor\\\\left(t\\\\right)\\\\left\\\\{\\\\floor\\\\left(t\\\\right)>a\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#C0504D"},{"id":6,"latex":"\\\\left[f\\\\left(t\\\\right),g\\\\left(t\\\\right)\\\\right]","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59"}]}}\n},\n{\n  "title": "Regular Sine Wave?",\n  "graphHash": "c1u72uowae",\n  "state": {"graph":{"viewport":{"xmin":-1.463,"ymin":-4.468,"xmax":16.313,"ymax":9.597},"showLabels":true,"degreeMode":false,"showGrid":true,"polarMode":false,"showAxes":true,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":47,"text":"Slide (or animate) a:"},{"id":45,"latex":"a=0","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000","sliderMin":0,"sliderMax":1},{"id":25,"latex":"x_m\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t<\\\\frac{1}{6}:0,\\\\frac{1}{6}\\\\le t<\\\\frac{1}{3}:.85+.85\\\\cos\\\\left(\\\\pi-6\\\\pi\\\\left(t-\\\\frac{1}{6}\\\\right)\\\\right),\\\\frac{1}{3}\\\\le t<\\\\frac{2}{3}:1.7,\\\\frac{2}{3}\\\\le t<\\\\frac{5}{6}:2.55+.85\\\\cos\\\\left(\\\\pi-6\\\\pi\\\\left(t-\\\\frac{2}{3}\\\\right)\\\\right),\\\\frac{5}{6}\\\\le t\\\\le1:3.4\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#8064A2"},{"id":27,"latex":"y_m\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t<\\\\frac{1}{6}:11.4t,\\\\frac{1}{6}\\\\le t<\\\\frac{1}{3}:1.9+.6\\\\sin\\\\left(\\\\pi-6\\\\pi\\\\left(t-\\\\frac{1}{6}\\\\right)\\\\right),\\\\frac{1}{3}\\\\le t<\\\\frac{1}{2}:1.9-11.4\\\\left(t-\\\\frac{1}{3}\\\\right),\\\\frac{1}{2}\\\\le t<\\\\frac{2}{3}:11.4\\\\left(t-.5\\\\right),\\\\frac{2}{3}\\\\le t<\\\\frac{5}{6}:1.9+.6\\\\sin\\\\left(\\\\pi-6\\\\pi\\\\left(t-\\\\frac{2}{3}\\\\right)\\\\right),\\\\frac{5}{6}\\\\le t\\\\le1:1.9-11.4\\\\left(t-\\\\frac{5}{6}\\\\right)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":38,"latex":"L_x\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t<1:x_d\\\\left(t\\\\right),\\\\space1\\\\le t<2:x_e\\\\left(t-1\\\\right)+s_2,2\\\\le t<3:x_s\\\\left(t-2\\\\right)+s_3,3\\\\le t<4:x_m\\\\left(t-3\\\\right)+s_4,4\\\\le t<5:x_0\\\\left(t-4\\\\right)+s_5,5\\\\le t\\\\le6:x_s\\\\left(t-5\\\\right)+s_6\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#F79646"},{"id":39,"latex":"L_y\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t<1:y_d\\\\left(t\\\\right),\\\\space1\\\\le t<2:y_e\\\\left(t-1\\\\right),2\\\\le t<3:y_s\\\\left(t-2\\\\right),3\\\\le t<4:y_m\\\\left(t-3\\\\right),4\\\\le t<5:y_0\\\\left(t-4\\\\right),5\\\\le t\\\\le6:y_s\\\\left(t-5\\\\right)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":40,"latex":"\\\\left[G_x\\\\left(t\\\\right)\\\\left(1-a\\\\right)+aL_x\\\\left(t\\\\right),G_y\\\\left(t\\\\right)\\\\left(1-a\\\\right)+aL_y\\\\left(t\\\\right)\\\\right]","domain":{"min":0,"max":6},"userRequestedGraphing":"default","color":"#9BBB59"},{"id":43,"latex":"\\\\left[G_x\\\\left(t\\\\right),G_y\\\\left(t\\\\right)\\\\right]","domain":{"min":0,"max":6},"userRequestedGraphing":"never","color":"#8064A2"},{"id":41,"latex":"G_x\\\\left(t\\\\right)=2.3t","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59"},{"id":42,"latex":"G_y\\\\left(t\\\\right)=\\\\sin\\\\left(2\\\\pi t\\\\right)+1","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#C0504D"},{"id":1,"latex":"x_d\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t\\\\le\\\\frac{2}{3}:1.1+1.1\\\\cos\\\\left(3\\\\pi t\\\\right),\\\\frac{2}{3}\\\\le t\\\\le1:2.2\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#C0504D"},{"id":2,"latex":"y_d\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t\\\\le\\\\frac{2}{3}:1.25+1.25\\\\sin\\\\left(3\\\\pi t\\\\right),\\\\frac{2}{3}\\\\le t\\\\le1:1.25+9.6\\\\left(t-\\\\frac{2}{3}\\\\right)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#8064A2"},{"id":4,"latex":"x_e\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t<\\\\frac{1}{3}:6.9t,\\\\frac{1}{3}\\\\le t\\\\le\\\\frac{19}{21}:1.15+1.15\\\\cos\\\\left(1.5\\\\cdot1.75\\\\pi\\\\left(t-\\\\frac{1}{3}\\\\right)\\\\right),\\\\frac{19}{21}\\\\le t\\\\le1:1.15+1.45\\\\cos\\\\left(1.5\\\\cdot1.75\\\\pi\\\\left(t-\\\\frac{1}{3}\\\\right)\\\\right)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":5,"latex":"y_e\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t<\\\\frac{1}{3}:1.25,\\\\frac{1}{3}\\\\le t\\\\le1:1.25+1.25\\\\sin\\\\left(1.5\\\\cdot1.75\\\\pi\\\\left(t-\\\\frac{1}{3}\\\\right)\\\\right)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":7,"latex":"s_{tx}\\\\left(t\\\\right)=L+.6\\\\cos\\\\left(2\\\\pi t\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#C0504D"},{"id":15,"latex":"s_{ty}\\\\left(t\\\\right)=2+.5\\\\sin\\\\left(2\\\\pi t\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":16,"latex":"s_{bx}\\\\left(t\\\\right)=.9+.9\\\\cos\\\\left(2\\\\pi t\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":17,"latex":"s_{by}\\\\left(t\\\\right)=.6+.6\\\\sin\\\\left(2\\\\pi t\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59"},{"id":19,"latex":"s_{mx}\\\\left(t\\\\right)=11.4-4L+162\\\\left(2.4-L\\\\right)\\\\left(-\\\\frac{t^3}{3}+\\\\frac{t^2}{2}-\\\\frac{2t}{9}\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#8064A2"},{"id":20,"latex":"s_{my}\\\\left(t\\\\right)=2-4.2\\\\left(t-\\\\frac{1}{3}\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#F79646"},{"id":21,"latex":"x_s\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t<\\\\frac{1}{3}:\\\\space s_{tx}\\\\left(.1+1.2t\\\\right),\\\\frac{1}{3}\\\\le t<\\\\frac{2}{3}:s_{mx}\\\\left(t\\\\right),\\\\frac{2}{3}\\\\le t\\\\le1:s_{bx}\\\\left(-1.5\\\\left(t-\\\\frac{2}{3}\\\\right)\\\\right)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":22,"latex":"y_s\\\\left(t\\\\right)=\\\\left\\\\{0\\\\le t<\\\\frac{1}{3}:\\\\space s_{ty}\\\\left(.1+1.2t\\\\right),\\\\frac{1}{3}\\\\le t<\\\\frac{2}{3}:s_{my}\\\\left(t\\\\right),\\\\frac{2}{3}\\\\le t\\\\le1:s_{by}\\\\left(-1.5\\\\left(t-\\\\frac{2}{3}\\\\right)\\\\right)\\\\right\\\\}","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":14,"latex":"L=1","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#F79646","sliderMin":0,"sliderMax":1},{"id":28,"latex":"x_0\\\\left(t\\\\right)=1.1+1.1\\\\cos\\\\left(2\\\\pi\\\\left(t+.25\\\\right)\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#4F81BD"},{"id":29,"latex":"y_0\\\\left(t\\\\right)=1.25+1.25\\\\sin\\\\left(2\\\\pi\\\\left(t+.25\\\\right)\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#9BBB59"},{"id":35,"latex":"s_2=2.4","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#9BBB59","sliderMin":0,"sliderMax":10},{"id":36,"latex":"s_3=4.76","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D","sliderMin":0,"sliderMax":10},{"id":34,"latex":"s_4=6.77","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD","sliderMin":0,"sliderMax":20},{"id":31,"latex":"s_5=10.37","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":0,"sliderMax":20},{"id":33,"latex":"s_6=12.65","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000","sliderMin":0,"sliderMax":20}]}}\n},\n{\n  "title": "3D World",\n  "graphHash": "neyobpzndu",\n  "state": {"graph":{"viewport":{"xmin":-28.11,"ymin":-25.9,"xmax":67.4,"ymax":21.54},"showLabels":false,"degreeMode":false,"showGrid":false,"polarMode":false,"showAxes":false,"squareAxes":true,"labelXMode":"","labelYMode":""},"expressions":{"list":[{"id":31,"text":"You\'re at the black dot (u_p, v_p) looking at the world..."},{"id":4,"latex":"\\\\left(u_p,v_p\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#000000"},{"id":1,"latex":"u_p=1.1","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#C0504D","sliderMin":-29.34,"sliderMax":11.3},{"id":2,"latex":"v_p=0.4","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":-20,"sliderMax":20},{"id":33,"text":"These are the endpoints of the purple wall (you can drag those points too)"},{"id":43,"latex":"\\\\left(u_a,v_a\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#8064A2"},{"id":44,"latex":"\\\\left(u_b,v_b\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#8064A2"},{"id":5,"latex":"u_a=-2.001","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD","sliderMin":-10.001,"sliderMax":10,"sliderInterval":0.01},{"id":6,"latex":"v_a=4.299","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#9BBB59","sliderMin":-10.001,"sliderMax":10.5,"sliderInterval":0.01},{"id":7,"latex":"u_b=6","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D","sliderMin":-10,"sliderMax":10.5},{"id":8,"latex":"v_b=2.8","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#8064A2","sliderMin":-10,"sliderMax":10.9},{"id":35,"text":"These all draws the world:"},{"id":24,"latex":"y\\\\le-y_0","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#9BBB59"},{"id":9,"latex":"\\\\left(u_a+t\\\\left(u_b-u_a\\\\right),v_a+t\\\\left(v_b-v_a\\\\right)\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#8064A2"},{"id":28,"latex":"r_w\\\\left(\\\\theta\\\\right)=\\\\sec\\\\left(\\\\theta+.2\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#C0504D"},{"id":10,"latex":"r_b\\\\left(\\\\theta\\\\right)=\\\\floor\\\\left(\\\\frac{\\\\theta}{2\\\\pi}\\\\right)\\\\sec\\\\left(\\\\theta+\\\\frac{\\\\pi}{2}\\\\floor\\\\left(\\\\frac{2\\\\theta}{\\\\pi}+.5\\\\right)\\\\right)","domain":{"min":0,"max":10},"userRequestedGraphing":"never","color":"#000000"},{"id":14,"latex":"\\\\left[r_b\\\\left(2\\\\pi t\\\\right)\\\\sin2\\\\pi t,r_b\\\\left(2\\\\pi t\\\\right)\\\\cos2\\\\pi t\\\\right]","domain":{"min":0,"max":10},"userRequestedGraphing":"always","color":"#F79646"},{"id":16,"text":"Project (u, v) to (x, y) coordinates"},{"id":17,"latex":"X\\\\left(u,\\\\space v\\\\right)=5\\\\frac{\\\\left(u-u_p\\\\right)}{\\\\left(v-v_p\\\\right)}-x_0","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#000000"},{"id":18,"latex":"Y\\\\left(u,\\\\space v,\\\\space z\\\\right)=\\\\frac{-8+z}{\\\\left(v-v_p\\\\right)}-y_0","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD"},{"id":47,"latex":"c_{ond}\\\\space=\\\\space v_a+\\\\left(\\\\frac{u_p-u_a}{u_b-u_a}\\\\right)\\\\left(v_b-v_a\\\\right)-v_p","domain":{"min":0,"max":1},"userRequestedGraphing":"never","color":"#9BBB59"},{"id":36,"latex":"f\\\\left(x,z\\\\right)=\\\\frac{\\\\left(Y\\\\left(u_b,v_b,z\\\\right)-Y\\\\left(u_a,v_a,z\\\\right)\\\\right)}{X\\\\left(u_b,v_b\\\\right)-X\\\\left(u_a,v_a\\\\right)}\\\\left(x-X\\\\left(u_a,v_a\\\\right)\\\\right)+Y\\\\left(u_a,v_a,z\\\\right)","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#4F81BD"},{"id":40,"latex":"x_m=\\\\left\\\\{v_p<v_a:X\\\\left(u_a,v_a\\\\right),-1000\\\\right\\\\}","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#000000"},{"id":41,"latex":"X_m=\\\\left\\\\{v_p<v_b:X\\\\left(u_b,v_b\\\\right),\\\\space1000\\\\right\\\\}","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#C0504D"},{"id":39,"latex":"f\\\\left(x,0\\\\right)\\\\le y\\\\le f\\\\left(x,16\\\\right)\\\\left\\\\{c_{ond}>0\\\\right\\\\}\\\\left\\\\{x_m<x<X_m\\\\right\\\\}","domain":{"min":0,"max":1},"userRequestedGraphing":"always","color":"#8064A2"},{"id":22,"latex":"\\\\left(X\\\\left(r_b\\\\left(t\\\\right)\\\\sin t,r_b\\\\left(t\\\\right)\\\\cos t\\\\right)\\\\left\\\\{r_b\\\\left(t\\\\right)\\\\cos t-v_p>1\\\\right\\\\},Y\\\\left(r_b\\\\left(t\\\\right)\\\\sin t,r_b\\\\left(t\\\\right)\\\\cos t,0\\\\right)\\\\right)","domain":{"min":0,"max":62.831853},"userRequestedGraphing":"always","color":"#F79646"},{"id":11,"latex":"x_0=-31","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#4F81BD","sliderMin":-60,"sliderMax":10},{"id":13,"latex":"y_0=11","domain":{"min":0,"max":10},"userRequestedGraphing":"default","color":"#C0504D","sliderMin":-10,"sliderMax":20},{"id":46,"latex":"y\\\\le-8-y_0","domain":{"min":0,"max":1},"userRequestedGraphing":"default","color":"#000000"}]}}\n}]'});
define("main/betchacant","require loadcss!css/mygraphs pjs main/toast main/graph text!data/betchacant_graphs.json".split(" "),function(b){b("loadcss!css/mygraphs");var g=b("pjs"),r=b("main/toast"),v=b("main/graph"),q=b("text!data/betchacant_graphs.json");return g(function(b,g){b.init=function(a,b){this.expressionsView=a;this.graphsController=b;var c=this;this.expressionsView.__latexChangeCallbacks.push(function(a){"betchacant"===a&&c.acceptChallenge()});this.betchacantGraphs=JSON.parse(q)};b.acceptChallenge=
function(){var a=this.betchacantGraphs[Math.floor(Math.random()*this.betchacantGraphs.length)];this.expressionsView.getSelected().setProperty("latex","");a=v({hash:a.graphHash,title:a.title,graphData:JSON.stringify(a.state)});this.selectedIndex=this.expressionsView.getSelected().index;this.graphsController.loadGraph(a);var b=this;r.show("Challenge accepted.",function(){var a=b.expressionsView.getItemByIndex(b.selectedIndex),f=b.expressionsView.getItemView(a.id);setTimeout(function(){f.addFocus()},
100)})}})});define("lib/urlparser",["require"],function(b){return{getParameter:function(b){return decodeURIComponent((RegExp("[?|&]"+b+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}}});define("loadcss!css/tour",function(){});
define("lib/trip",["require","jquery","pjs"],function(b){var g=b("jquery");return b("pjs")({init:function(b){var v=this,q=this.$tripBlock=g('<div class="trip-block"><div class="trip-interior"><a class="trip-close"><i class="icon-remove"></i></a><div class="trip-content"></div></div><div class="trip-arrow"></div></div>');q.css({top:"-100px"});g("body").append(q);q.find(".trip-close").on("tap",function(b){b.preventDefault();v.stop()});this.bindKeyEvents();this.settings=b},cleanup:function(){this.unbindKeyEvents();
this.hideTripBlock();return!1},bindKeyEvents:function(){var b=this;g(document).on({"keydown.Trip":function(g){b.keyEvent.call(b,g)}})},unbindKeyEvents:function(){g(document).off("keydown.Trip")},keyEvent:function(b){27===b.which&&this.stop()},stop:function(){this.hideTripBlock();this.settings.onTripStop()},showTripBlock:function(b){"string"===typeof b.sel&&(b.sel=g(b.sel));var v=this.$tripBlock;v.find(".trip-content").html(b.content);var q=b.sel,p=q.outerWidth(),u=q.outerHeight(),a=v.outerWidth(),
m=v.outerHeight();v.removeClass("e s w n");var c=0;switch(b.position){case "e":v.addClass("e");v.css({left:q.offset().left+p+10,top:q.offset().top-(m-u)/2});break;case "s":v.addClass("s");b=q.offset().left+(p-a)/2;v.css({left:b,top:q.offset().top+u+10});b+a>g(window).width()-1&&(c=g(window).width()-1-b-a);1>b&&(c=1-b);break;case "w":v.addClass("w");v.css({left:q.offset().left-(10+a),top:q.offset().top-(m-u)/2});break;default:v.addClass("n"),v.css({left:q.offset().left+(p-a)/2,top:q.offset().top-10-
m})}v.find(".trip-interior").css("transform","translate("+c+"px, 0)");v.css({display:"inline-block"})},fadeInTripBlock:function(){var b=this.$tripBlock;setTimeout(function(){b.addClass("is-loaded")},0)},hideTripBlock:function(){this.$tripBlock.removeClass("is-loaded")}})});
define("tours/base_tour",["require","pjs","jquery","underscore"],function(b){var g=b("pjs"),r=b("jquery"),v=b("underscore");return g(function(b){b.init=function(b){this.Calc=b;this.expressionsView=this.Calc.expressions};b.expressionsVisible=function(){return this.expressionsView.getProperty("expressionsVisible")};b.requireExpressionsVisible=function(){return{position:"e",content:"Click to show the list of expressions.",sel:r(".action-showexpressions")}};b.resourcesOpen=function(){return r("body").hasClass("resources-open")};
b.requireResourcesNotOpen=function(){return{position:"e",content:"Click to return to this graph.",sel:r(".action-opendrawer")}};b.editListMode=function(){return this.expressionsView.getProperty("editListMode")};b.requireNotEditListMode=function(){return{position:"s",content:"Click to return to your expressions.",sel:r(".action-toggleeditlistmode")}};b.expressionCount=function(){return this.expressionsView.getItemsByIndexRange(0,Infinity).length};b.grapher=function(){return this.Calc.grapher};b.hasConic=
function(b){return v.find(this.grapher().graphSketches,function(g,a){return v.find(g.branches,function(a){return a.conic===b})})}})});
define("tours/sliders",["require","pjs","jquery","underscore","./base_tour"],function(b){var g=b("pjs"),r=b("jquery"),v=b("underscore");b=b("./base_tour");return g(b,function(b,g){b.sliderHasSlid=!1;b.sliderBtnsShown=!1;b.isExpAnimating=function(b){return v.filter(b,function(a){return a.slider&&a.slider.isPlaying}).length};b.update=function(){var b=this.expressionsView.getItemsByIndexRange(0,Infinity);if(this.isExpAnimating(b))return{final:!0,position:"s",endingMsg:"You're a slider pro!",sel:r(".animate-pause").last()};
if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.resourcesOpen())return this.requireResourcesNotOpen();if(this.editListMode())return this.requireNotEditListMode();var a=r(".animate-play").last(),g=v.filter(b,function(a){return a&&a.formula&&a.formula.is_graphable});if(a.length&&g.length){b=v.filter(b,function(a){return a&&a.slider&&1!==a.slider.value});if(this.sliderHasSlid||0<b.length){if(0<r(".thumb.depressed").length)return{doNotUpdate:!0};this.sliderHasSlid=!0;return{position:"s",
content:'<b>Go "Hands-free"</b><br>Press play to animate the slider.',sel:a}}return{position:"s",content:"Drag the handle to change the value.",sel:r(".slider-container .thumb:visible").last()}}a=this.expressionsView.getSelectedView();g=[];a&&(g=a.$(".action-createslider .btn"));g.length||(g=r(".action-createslider .btn"));if(1<g.length||g.length&&1<b.length){if(this.sliderBtnsShown&&600<new Date-this.sliderBtnsShown)return{position:"s",content:"Awesome! Now click here to add the sliders.",sel:g.last()};
this.sliderBtnsShown||(this.sliderBtnsShown=new Date);return{doNotUpdate:!0}}this.sliderBtnsShown=!1;if(a)return{position:"e",content:'<b>Let\'s make some sliders</b><br>Try typing <span class="italic">y=mx+b</span>',sel:a.$()};b=this.expressionsView.getFirstVisibleItem();return{position:"e",content:"Click here to type in this expression",sel:this.expressionsView.getItemView(b.id).$()}}})});
define("tours/scatter_plot",["require","pjs","jquery","underscore","./base_tour"],function(b){var g=b("pjs"),r=b("jquery"),v=b("underscore");b=b("./base_tour");return g(b,function(b,g){b.hasChangedDisplayType=!1;b.update=function(){var b=this.expressionsView.getItemsByIndexRange(0,Infinity),a=v.filter(b,function(a){return a.hasOwnProperty("columns")});if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.resourcesOpen())return this.requireResourcesNotOpen();if(this.editListMode())return this.requireNotEditListMode();
if(0===a.length)return b=r(".action-newtable:visible"),0===b.length?{position:"e",content:"<b>Let's make a scatter plot</b><br>Click here to add a new item.",sel:r(".add-expression-btn")}:{position:"e",content:'... and select the "table" option.',sel:b};for(var g=[],c=[],f,e=0;e<a.length;e++){f=a[e];for(var h=1;h<f.columns.length-1;h++){var b=this.expressionsView.getItemView(f.id),d=b.columnViews[h];f.columns[h].disabled?c.push({model:f.columns[h],view:d,tableView:b}):g.push({model:f.columns[h],view:d,
tableView:b})}}if(0===g.length)return{position:"e",content:"Type <var>y</var> here to create a data column.",sel:".editable.right.header:first"};f=g[0].model.table;b=this.expressionsView.getItemView(f.id);a=f.selectedCell;g=f.columns[0].cells.length;for(e=c=0;e<g&&3>e;e++)f.columns[0].cells[e].value&&!f.columns[0].cells[e].error&&f.columns[1].cells[e].value&&!f.columns[1].cells[e].error&&c++;if(3===c)return f="POINTS_AND_LINES"===f.columns[1].columnMode,e=0<r(".table-column-menu").length,f&&!e?{final:!0,
position:"e",endingMsg:"You're a scatter plot whiz!",sel:b.$()}:f?{position:"e",content:"Click anywhere to close the drawing options.",sel:b.$()}:e?{content:"Click to connect the dots",position:"e",sel:".table-points-and-lines"}:{content:"<b>Last trick!</b><br>Click and hold on this icon until the options menu opens up.",position:"e",sel:b.columnViews[1][0].$(".graph-icon")};for(e=0;e<g;e++)for(h=0;2>h;h++)if(f.columns[h].cells[e].error)return{position:"e",content:"Uh-oh! type a valid number here.",
sel:b.columnViews[h][e+1].$()};if(!a)return{position:"e",content:"Click back to continue editing",sel:b.columnViews[1][g-1].$()};if(2===g&&1===c&&a&&1===a.row)return{position:"e",content:"Go down to the next row to add more data.",sel:b.columnViews[1][a.row].$()};if(3===g&&2===c&&a)return{position:"e",content:"<b>Awesome!</b><br>Now try pressing Enter",sel:b.columnViews[1][a.row].$()};for(e=0;e<g;e++)for(h=0;2>h;h++)if(!f.columns[h].cells[e].value)return f="Fill in this whole row",2===e&&1===h&&(f=
"Just fill in one more..."),0===e&&1===h&&(f="<b>Fill it in</b><br>Type any number here."),{position:"e",content:f,sel:b.columnViews[1][e+1].$()}}})});
define("tours/function_table",["require","pjs","jquery","underscore","./base_tour"],function(b){var g=b("pjs"),r=b("jquery"),v=b("underscore");b=b("./base_tour");return g(b,function(b,g){b.hasChangedDisplayType=!1;b.update=function(){var b=this.expressionsView.getItemsByIndexRange(0,Infinity),a=v.filter(b,function(a){return a.hasOwnProperty("columns")});if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.resourcesOpen())return this.requireResourcesNotOpen();for(var g=[],
c=[],f=0;f<a.length;f++)for(var e=a[f],h=1;h<e.columns.length-1;h++){var d=this.expressionsView.getItemView(e.id),k=d.columnViews[h];e.columns[h].disabled?c.push({model:e.columns[h],view:k,tableView:d}):g.push({model:e.columns[h],view:k,tableView:d})}return 0===c.length?(a=v.find(b,function(a){return a.isGraphable}),a&&"x"!==a.latex?0===r(".EDIT-LIST-MODE").length?{position:"s",content:'<b>Convert this to a table</b><br>Click the "Edit List" button.',sel:".edit-list-btn"}:{position:"e",content:"Click here to convert the expression to a table.",
sel:".action-createtable"}:(b=v.find(b,function(a){return!a.hasOwnProperty("columns")&&a.hasOwnProperty("latex")}))?{position:"e",content:"Try typing <var>x</var><sup>2</sup>.<br><i><b>hint:</b> type x^2 or click the a<sup>2</sup> button below</i>",sel:this.expressionsView.getItemView(b.id).$()}:{position:"e",content:"Let's try a Function Table. First: click here to create a new blank expression.",sel:".new-math-div"}):{final:!0,position:"e",content:"<b>You're a table wizard!</b><br>This message will now self destruct...",
sel:c[0].tableView.$()}}})});
define("tours/mathart",["require","underscore","jquery","pjs","./base_tour"],function(b){var g=b("underscore"),r=b("jquery"),v=b("pjs");b=b("./base_tour");return{mathart_intro:v(b,function(b){b.graphedLine=null;b.graphedParabola=null;b.graphedLineIsRestricted=function(){if(!this.graphedLine||!this.expressionsView.getItemById(this.graphedLine.id))return!1;var b=this.grapher().graphSketches[this.graphedLine.id];if(!(b&&b.branches&&b.branches[0]&&b.branches[0].compiled))return!1;b=b.branches[0].compiled.fn;
return isNaN(b(-100))&&isNaN(b(100))};b.graphedParabolaIsRestricted=function(){if(!this.graphedParabola||!this.expressionsView.getItemById(this.graphedParabola.id))return!1;var b=this.grapher().graphSketches[this.graphedParabola.id];if(!(b&&b.branches&&b.branches[0]&&b.branches[0].compiled))return!1;b=b.branches[0].compiled.fn;return isNaN(b(100))};b.graphedParabolaIsShifted=function(){if(!this.graphedParabola||!this.expressionsView.getItemById(this.graphedParabola.id))return!1;var b=this.grapher().graphSketches[this.graphedParabola.id];
if(!(b&&b.branches&&b.branches[0]&&b.branches[0].compiled))return!1;b=b.branches[0].compiled.fn;return 0!==b(0)};b.getFirstExp=function(){var b=this.expressionsView.getItemsByIndexRange(0,Infinity);return g.find(b,function(b){return!b.hasOwnProperty("columns")&&b.hasOwnProperty("latex")})};b.restrictedLineTour=function(){if(this.graphedLineIsRestricted()){if(!this.expressionsView.getSelected()||this.expressionsView.getSelected().latex)return{position:"e",content:"<b>Brilliant!</b><br>Click here to create a new expression",
sel:".new-math-div"};this.phaseOn++;return this.update()}this.graphedLine&&!this.expressionsView.getItemById(this.graphedLine.id)&&(this.graphedLine=null);var b=this.expressionsView.getSelected();b&&this.grapher().graphSketches[b.id]&&"line"===this.grapher().graphSketches[b.id].branches[0].conic&&!isFinite(b.formula.simple_constant)&&(this.graphedLine={id:b.id});if(this.graphedLine)return{position:"e",content:"<b>Awesome!</b><br>Restrict the domain of this line by making it<br> <code>y=2x{1&lt;x&lt;2}</code><br><i>Hint: press the 'more' button on the keypad to find the { } buttons</i>",
sel:this.expressionsView.getItemView(this.graphedLine.id).$()};b=this.expressionsView.getSelectedView();!b&&this.getFirstExp()&&(b=this.expressionsView.getItemView(this.getFirstExp().id));return b?{position:"e",content:"<b>Let's get started!</b><br>Try graphing a straight line, like <code>y=2x</code>",sel:b.$()}:{position:"e",content:"Click here to make a new blank expression",sel:".new-math-div"}};b.restrictedParabolaTour=function(){if(this.graphedParabolaIsRestricted())return this.phaseOn++,this.update();
var b=this.expressionsView.getSelectedView();if(b){var g=b.model;this.grapher().graphSketches[g.id]&&"parabola"===this.grapher().graphSketches[g.id].branches[0].conic&&(this.graphedParabola={id:g.id})}this.graphedParabola&&!this.expressionsView.getItemById(this.graphedParabola.id)&&(this.graphedParabola=null);return this.graphedParabola?(b=this.expressionsView.getItemById(this.graphedParabola.id),b.isGraphable?"y"!==b.dependent?{position:"e",content:'<b>Don\'t forget the "y="!</b><br>Try typing all of <code>y=x<sup>2</sup></code>',
sel:this.expressionsView.getItemView(this.graphedParabola.id).$()}:this.graphedParabolaIsShifted()?{position:"e",content:"<b>Nice!</b><br>Now let's restrict the range. Change this to:<br><code>y=x<sup>2</sup>-2{y&lt;4}</code>",sel:this.expressionsView.getItemView(this.graphedParabola.id).$()}:{position:"e",content:"<b>Move the parabola.</b><br>Change this equation to <code>y=x<sup>2</sup>-2</code>",sel:this.expressionsView.getItemView(this.graphedParabola.id).$()}:{doNotUpdate:!0}):b?{position:"e",
content:"Now graph: <code>y=x<sup>2</sup></code><br><i>Hint: you can type y=x^2, or use the a<sup>2</sup> button on the keypad below</i>",sel:b.$()}:{position:"e",content:"Click here to make a new blank expression",sel:".new-math-div"}};b.colorWasChanged=!1;b.changeColorTour=function(){var b=this;g.each(this.expressionsView.getItemsByIndexRange(0,Infinity),function(a){a.unobserve("color.tour");a.observe("color.tour",function(){b.colorWasChanged=!0})});if(this.colorWasChanged)return r(".options-menu").length?
{position:"e",content:"... and click anywhere to close the color menu.",sel:"#exppanel-outer"}:{final:!0,position:"e",endingMsg:"Great job! Now to complete your mission: make a face. Good luck!",sel:"#exppanel-outer"};if(r(".options-menu").length)return{position:"e",content:"<b>Last step...</b><br>Change the color!",sel:".options-menu"};var q=this.expressionsView.getSelected()||this.getFirstExp();return{position:"e",content:"<b>Great!</b><br>Click and hold to open the secret drawing menu.",sel:this.expressionsView.getItemView(q.id).iconView.$icon}};
b.phaseOn=0;b.phases=[b.restrictedLineTour,b.restrictedParabolaTour,b.changeColorTour];b.update=function(){return this.phases[this.phaseOn].call(this)}})}});
define("tours/tour_manager","require underscore jquery pjs lib/urlparser loadcss!css/tour lib/trip tours/sliders tours/scatter_plot tours/function_table tours/mathart".split(" "),function(b){var g=b("underscore"),r=b("jquery"),v=b("pjs"),q=b("lib/urlparser");b("loadcss!css/tour");var p=b("lib/trip"),u=b("tours/sliders"),a=b("tours/scatter_plot"),m=b("tours/function_table"),c=b("tours/mathart");return v(function(b,e){b.init=function(){this.tripManager=new p({onTripStop:this.stopTour.bind(this)});this.currentTour=
this.currentStep=void 0;this.TOURS={sliders:u,tables:a,functiontable:m};g.extend(this.TOURS,c)};b.startFromUrl=function(a){if(2>r(".expressionitem").length)setTimeout(this.startFromUrl.bind(this,a),100);else{var b=q.getParameter("tour");b&&this.TOURS[b]&&(a=this.TOURS[b](a),this.startTour(a))}};b._tripLoop=function(){clearTimeout(this.__tripLoopTimeout);if(this.running){var a=this.currentTour.update();if(a&&!a.doNotUpdate){this.currentStep=a;if(a.final){this.finishTour(a,5);return}this.tripManager.showTripBlock(a)}this.__tripLoopTimeout=
setTimeout(this._tripLoop.bind(this),300)}};b.updateNow=b._tripLoop;b.startTour=function(a){this.running||(this.currentTour=a,this.running=!0,this._tripLoop(),this.tripManager.fadeInTripBlock())};b.finishTour=function(a,b){this.running=!1;var c=this;0>b?c.tripManager.stop():(a.endingMsg&&(a.content=["<b>"+a.endingMsg+"</b><br>","This message will self-destruct in "+b+"..."].join("")),c.tripManager.showTripBlock(a),setTimeout(function(){c.finishTour(a,b-1)},1E3))};b.stopTour=function(){this.running=
!1;this.currentTour=this.currentStep=void 0;clearTimeout(this.finishTimeout)}})});
(function(b){var g=0,r=null;b(document).bind("touchstart",function(v){var q=b(v.target);for(g=0;0===g&&q.length&&void 0!==q[0].tagName;){if(q.closest("[disablescroll]").length){g=0;return}var p=q.css("overflow"),u=q.css("overflow-y");"hidden"!==p&&"visible"!==p&&"hidden"!==u&&"hidden"!==u&&(p=q.scrollTop(),0!==p&&(g=2),q.scrollTop(p+1),q.scrollTop()!==p&&(g|=1,q.scrollTop(p)));q=q.parent()}if(0!==g)for(r=[],v=v.originalEvent.touches,q=0;q<v.length;q++){var p={},a;for(a in v[q])v[q].hasOwnProperty(a)&&
(p[a]=v[q][a]);r.push(p)}});b(document).bind("touchmove",function(b){if(r){var q=b.originalEvent.touches[0].screenY-r[0].screenY;0<q&&!(g&2)?g=0:0>q&&!(g&1)&&(g=0);q&&(r=null)}0===g&&b.preventDefault()});b(document).bind("touchend",function(){g=0;r=null})})(jQuery);define("lib/ipad.scrollfix",function(){});
define("main/calc_desktop","require jquery config main/evaluator main/graph graphing/grapher graphing/poicontroller graphing/graphcontroller main/user_controller main/graphs_controller main/graph_settings main/timermodules expressions/list expressions/list_view_desktop main/resize main/focus undoredo lib/browser main/modals_controller main/initialize_controllers main/subheader main/zoom_view main/keypad_view_desktop main/state_controller lib/set_list_height main/propagate_selection main/toast main/betchacant i18n graphing/screen tours/tour_manager lib/ipad.scrollfix".split(" "),function(b){var g=
b("jquery"),r=b("config"),v=b("main/evaluator"),q=b("main/graph"),p=b("graphing/grapher"),u=b("graphing/poicontroller"),a=b("graphing/graphcontroller"),m=b("main/user_controller"),c=b("main/graphs_controller"),f=b("main/graph_settings"),e=b("main/timermodules"),h=b("expressions/list"),d=b("expressions/list_view_desktop"),k=b("main/resize"),l=b("main/focus"),y=b("undoredo"),s=b("lib/browser"),n=b("main/modals_controller"),x=b("main/initialize_controllers"),B=b("main/subheader"),z=b("main/zoom_view"),
C=b("main/keypad_view_desktop"),D=b("main/state_controller"),F=b("lib/set_list_height"),H=b("main/propagate_selection"),G=b("main/toast"),I=b("main/betchacant"),A=b("i18n"),K=b("graphing/screen"),O=b("tours/tour_manager");b("lib/ipad.scrollfix");k.init({stickyFullScreen:!1});var J=h(),N=d(J),L=C(N);F.init(N,L);var V=v(r.get("workerURL")),W=f(),P=new p(g("#grapher"),W),E=new u(P),M=a(P);W.registerCallbacks(M,N);W.observe("degreeMode",function(){V.setDegreeMode(W.degreeMode)});b=D(M,J,W,N);var Q=c(M,
b);N.triggerClearGraph=function(){Q.clearGraph();y.markAsSaved()};g(window).on("popstate",function(a){a=a.originalEvent.state;if(y.changedSinceSave()&&!confirm(A.t("Are you sure you want to leave this graph? Your unsaved work will be lost.")))history.forward();else if(null===a)Q.loadGraph(q()),y.markAsSaved();else if(Q.currentGraph.hash!==a.hash){Q.loadGraph(q(a));y.markAsSaved();var b=A.t("Navigated to 'Untitled Graph'");a.title&&(b=15<a.title.length?A.t("Navigated to '__graphTitle__...'",{graphTitle:a.title.substr(0,
15)}):A.t("Navigated to '__graphTitle__'",{graphTitle:a.title}));G.show(b)}});var U=m(Q),Y=n(U,Q),R=Y.modals,ea=B(U,Q,M,b,R),Z=z(M);I(N,Q);m=O();H(N,P,V);M.triggerViewportStable=function(){var a=P.createProjection();V.setViewState({viewport:a.viewport.toObject(),screen:a.screen});P.viewport.isSquare(P.screen)&&P.settings.setProperty("squareAxes",!0);ea.settingsView.setViewport(M.getViewport())};V.triggerStatusChange=function(a){N.onChange(a)};V.triggerGraphComputed=function(a,b){P.updateSketch(a,
b)};V.triggerRemove=function(a){P.hide(a)};V.triggerUpdateIntersections=function(a,b){P.updateIntersections(a,b);P.redrawPOILayer()};V.triggerRender=function(){E.handleTraceUpdate();P.redrawContentLayers()};V.triggerRenderSlowly=function(){P.redrawSlowly()};J.triggerAddExp=function(a){a&&(""===a.latex&&"table"!==this.type&&P.removeGraphSketch(a.id),V.addStatement(a))};J.triggerRemoveExp=function(a){V.removeStatement(a)};J.triggerRemoveExps=function(a){V.removeStatements(a)};J.batchEvaluation=V.batch.bind(V);
J.observe("drawOrder",function(){P.setSketchOrder(J.getProperty("drawOrder"))});E.triggerStartTracingBranch=function(a){N.setSelected(J.getItemById(a))};E.triggerEmptyTouchStart=function(){N.setSelected(null)};E.triggerStartMovingPoint=function(a){N.onStartMovingPoint(a)};E.triggerMovePoint=function(a,b){V.batch(function(){N.onMovePoint(a,b)})};E.triggerStopMovingPoint=function(a){N.onStopMovingPoint(a)};E.triggerPointSelected=function(a){N.setSelected(J.getItemById(a))};l.takeFocus=function(){N.setSelected(null)};
g.ajaxSetup({statusCode:{401:function(){U.logout()}}});m.startFromUrl({changedSinceSave:ia,userController:U,expressions:N,grapher:P,evaluator:V,graphController:M,setState:b.setState.bind(b),setBlank:b.setBlank.bind(b),getState:b.getState.bind(b)});var ia=function(){return y.changedSinceSave()};r.get("no_navigation_warning")||g(window).bind("beforeunload",function(){return ia()?A.t("Are you sure you want to leave? Any unsaved work will be lost!"):null});var fa=!1;k.register(function(){var a=P.$.offset(),
b=k.fullScreen.height-a.top,c=k.fullScreen.width;g("body").hasClass("fullscreen")||(c-=a.left,c+=g("#sliding-interior").offset().left);window.grapher&&P.settings&&P.settings.squareAxes&&fa&&M.setViewport(P.createProjection().calculateViewportForScreen(new K(c,b)));fa=!0;window.grapher&&P.updateScreenSize(c,b)&&P.redrawAllLayers()});g(document).ready(function(){L.appendTo("#sliding-interior");N.appendTo("#sliding-interior");Z.appendTo("#sliding-interior");e.load("expressions.renderviewport",N,P);g(document).bind("keydown",
y.handleKeydown.bind(y));g(document).bind("keydown",ea.handleKeydown.bind(ea));g(document).bind("keydown",N.handleKeydown.bind(N));Y.ready();s.CAPABLE_BROWSER||R.unsupportedBrowserDialog.show();ea.appendTo("#subheader");g("#header").on("tapstart",function(a){l.takeFocus()});g("#loading_div").fadeOut();g("#grapher").show();k.monitor();x(U,Q);!U.currentUser&&s.CAPABLE_BROWSER&&document.location.search.match(/(\?|\&)create_account/)&&R.createAccountDialog.show()});return{changedSinceSave:ia,userController:U,
expressions:N,tourManager:m,grapher:P,evaluator:V,graphController:M,setState:b.setState.bind(b),setBlank:b.setBlank.bind(b),getState:b.getState.bind(b)}});requirejs(["main/calc_desktop"],function(b){window.Calc=b});define("toplevel/calculator_desktop",function(){});
